/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
(function(bb,M){var at=bb.document,bt=bb.navigator,bk=bb.location;var b=(function(){var bE=function(bZ,b0){return new bE.fn.init(bZ,b0,bC)},bU=bb.jQuery,bG=bb.$,bC,bY=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bM=/\S/,bI=/^\s+/,bD=/\s+$/,bH=/\d/,bz=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bN=/^[\],:{}\s]*$/,bW=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bP=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bJ=/(?:^|:|,)(?:\s*\[)+/g,bx=/(webkit)[ \/]([\w.]+)/,bR=/(opera)(?:.*version)?[ \/]([\w.]+)/,bQ=/(msie) ([\w.]+)/,bS=/(mozilla)(?:.*? rv:([\w.]+))?/,bA=/-([a-z])/ig,bT=function(bZ,b0){return b0.toUpperCase()},bX=bt.userAgent,bV,bB,e,bL=Object.prototype.toString,bF=Object.prototype.hasOwnProperty,by=Array.prototype.push,bK=Array.prototype.slice,bO=String.prototype.trim,bu=Array.prototype.indexOf,bw={};bE.fn=bE.prototype={constructor:bE,init:function(bZ,b3,b2){var b1,b4,b0,b5;if(!bZ){return this}if(bZ.nodeType){this.context=this[0]=bZ;this.length=1;return this}if(bZ==="body"&&!b3&&at.body){this.context=at;this[0]=at.body;this.selector=bZ;this.length=1;return this}if(typeof bZ==="string"){if(bZ.charAt(0)==="<"&&bZ.charAt(bZ.length-1)===">"&&bZ.length>=3){b1=[null,bZ,null]}else{b1=bY.exec(bZ)}if(b1&&(b1[1]||!b3)){if(b1[1]){b3=b3 instanceof bE?b3[0]:b3;b5=(b3?b3.ownerDocument||b3:at);b0=bz.exec(bZ);if(b0){if(bE.isPlainObject(b3)){bZ=[at.createElement(b0[1])];bE.fn.attr.call(bZ,b3,true)}else{bZ=[b5.createElement(b0[1])]}}else{b0=bE.buildFragment([b1[1]],[b5]);bZ=(b0.cacheable?bE.clone(b0.fragment):b0.fragment).childNodes}return bE.merge(this,bZ)}else{b4=at.getElementById(b1[2]);if(b4&&b4.parentNode){if(b4.id!==b1[2]){return b2.find(bZ)}this.length=1;this[0]=b4}this.context=at;this.selector=bZ;return this}}else{if(!b3||b3.jquery){return(b3||b2).find(bZ)}else{return this.constructor(b3).find(bZ)}}}else{if(bE.isFunction(bZ)){return b2.ready(bZ)}}if(bZ.selector!==M){this.selector=bZ.selector;this.context=bZ.context}return bE.makeArray(bZ,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return bK.call(this,0)},get:function(bZ){return bZ==null?this.toArray():(bZ<0?this[this.length+bZ]:this[bZ])},pushStack:function(b0,b2,bZ){var b1=this.constructor();if(bE.isArray(b0)){by.apply(b1,b0)}else{bE.merge(b1,b0)}b1.prevObject=this;b1.context=this.context;if(b2==="find"){b1.selector=this.selector+(this.selector?" ":"")+bZ}else{if(b2){b1.selector=this.selector+"."+b2+"("+bZ+")"}}return b1},each:function(b0,bZ){return bE.each(this,b0,bZ)},ready:function(bZ){bE.bindReady();bB.done(bZ);return this},eq:function(bZ){return bZ===-1?this.slice(bZ):this.slice(bZ,+bZ+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bK.apply(this,arguments),"slice",bK.call(arguments).join(","))},map:function(bZ){return this.pushStack(bE.map(this,function(b1,b0){return bZ.call(b1,b0,b1)}))},end:function(){return this.prevObject||this.constructor(null)},push:by,sort:[].sort,splice:[].splice};bE.fn.init.prototype=bE.fn;bE.extend=bE.fn.extend=function(){var b8,b1,bZ,b0,b5,b6,b4=arguments[0]||{},b3=1,b2=arguments.length,b7=false;if(typeof b4==="boolean"){b7=b4;b4=arguments[1]||{};b3=2}if(typeof b4!=="object"&&!bE.isFunction(b4)){b4={}}if(b2===b3){b4=this;--b3}for(;b3<b2;b3++){if((b8=arguments[b3])!=null){for(b1 in b8){bZ=b4[b1];b0=b8[b1];if(b4===b0){continue}if(b7&&b0&&(bE.isPlainObject(b0)||(b5=bE.isArray(b0)))){if(b5){b5=false;b6=bZ&&bE.isArray(bZ)?bZ:[]}else{b6=bZ&&bE.isPlainObject(bZ)?bZ:{}}b4[b1]=bE.extend(b7,b6,b0)}else{if(b0!==M){b4[b1]=b0}}}}}return b4};bE.extend({noConflict:function(bZ){if(bb.$===bE){bb.$=bG}if(bZ&&bb.jQuery===bE){bb.jQuery=bU}return bE},isReady:false,readyWait:1,holdReady:function(bZ){if(bZ){bE.readyWait++}else{bE.ready(true)}},ready:function(bZ){if((bZ===true&&!--bE.readyWait)||(bZ!==true&&!bE.isReady)){if(!at.body){return setTimeout(bE.ready,1)}bE.isReady=true;if(bZ!==true&&--bE.readyWait>0){return}bB.resolveWith(at,[bE]);if(bE.fn.trigger){bE(at).trigger("ready").unbind("ready")}}},bindReady:function(){if(bB){return}bB=bE._Deferred();if(at.readyState==="complete"){return setTimeout(bE.ready,1)}if(at.addEventListener){at.addEventListener("DOMContentLoaded",e,false);bb.addEventListener("load",bE.ready,false)}else{if(at.attachEvent){at.attachEvent("onreadystatechange",e);bb.attachEvent("onload",bE.ready);var bZ=false;try{bZ=bb.frameElement==null}catch(b0){}if(at.documentElement.doScroll&&bZ){bv()}}}},isFunction:function(bZ){return bE.type(bZ)==="function"},isArray:Array.isArray||function(bZ){return bE.type(bZ)==="array"},isWindow:function(bZ){return bZ&&typeof bZ==="object"&&"setInterval" in bZ},isNaN:function(bZ){return bZ==null||!bH.test(bZ)||isNaN(bZ)},type:function(bZ){return bZ==null?String(bZ):bw[bL.call(bZ)]||"object"},isPlainObject:function(b0){if(!b0||bE.type(b0)!=="object"||b0.nodeType||bE.isWindow(b0)){return false}if(b0.constructor&&!bF.call(b0,"constructor")&&!bF.call(b0.constructor.prototype,"isPrototypeOf")){return false}var bZ;for(bZ in b0){}return bZ===M||bF.call(b0,bZ)},isEmptyObject:function(b0){for(var bZ in b0){return false}return true},error:function(bZ){throw bZ},parseJSON:function(bZ){if(typeof bZ!=="string"||!bZ){return null}bZ=bE.trim(bZ);if(bb.JSON&&bb.JSON.parse){return bb.JSON.parse(bZ)}if(bN.test(bZ.replace(bW,"@").replace(bP,"]").replace(bJ,""))){return(new Function("return "+bZ))()}bE.error("Invalid JSON: "+bZ)},parseXML:function(b1,bZ,b0){if(bb.DOMParser){b0=new DOMParser();bZ=b0.parseFromString(b1,"text/xml")}else{bZ=new ActiveXObject("Microsoft.XMLDOM");bZ.async="false";bZ.loadXML(b1)}b0=bZ.documentElement;if(!b0||!b0.nodeName||b0.nodeName==="parsererror"){bE.error("Invalid XML: "+b1)}return bZ},noop:function(){},globalEval:function(bZ){if(bZ&&bM.test(bZ)){(bb.execScript||function(b0){bb["eval"].call(bb,b0)})(bZ)}},camelCase:function(bZ){return bZ.replace(bA,bT)},nodeName:function(b0,bZ){return b0.nodeName&&b0.nodeName.toUpperCase()===bZ.toUpperCase()},each:function(b2,b5,b1){var b0,b3=0,b4=b2.length,bZ=b4===M||bE.isFunction(b2);if(b1){if(bZ){for(b0 in b2){if(b5.apply(b2[b0],b1)===false){break}}}else{for(;b3<b4;){if(b5.apply(b2[b3++],b1)===false){break}}}}else{if(bZ){for(b0 in b2){if(b5.call(b2[b0],b0,b2[b0])===false){break}}}else{for(;b3<b4;){if(b5.call(b2[b3],b3,b2[b3++])===false){break}}}}return b2},trim:bO?function(bZ){return bZ==null?"":bO.call(bZ)}:function(bZ){return bZ==null?"":bZ.toString().replace(bI,"").replace(bD,"")},makeArray:function(b2,b0){var bZ=b0||[];if(b2!=null){var b1=bE.type(b2);if(b2.length==null||b1==="string"||b1==="function"||b1==="regexp"||bE.isWindow(b2)){by.call(bZ,b2)}else{bE.merge(bZ,b2)}}return bZ},inArray:function(b1,b2){if(bu){return bu.call(b2,b1)}for(var bZ=0,b0=b2.length;bZ<b0;bZ++){if(b2[bZ]===b1){return bZ}}return -1},merge:function(b3,b1){var b2=b3.length,b0=0;if(typeof b1.length==="number"){for(var bZ=b1.length;b0<bZ;b0++){b3[b2++]=b1[b0]}}else{while(b1[b0]!==M){b3[b2++]=b1[b0++]}}b3.length=b2;return b3},grep:function(b0,b5,bZ){var b1=[],b4;bZ=!!bZ;for(var b2=0,b3=b0.length;b2<b3;b2++){b4=!!b5(b0[b2],b2);if(bZ!==b4){b1.push(b0[b2])}}return b1},map:function(bZ,b6,b7){var b4,b5,b3=[],b1=0,b0=bZ.length,b2=bZ instanceof bE||b0!==M&&typeof b0==="number"&&((b0>0&&bZ[0]&&bZ[b0-1])||b0===0||bE.isArray(bZ));if(b2){for(;b1<b0;b1++){b4=b6(bZ[b1],b1,b7);if(b4!=null){b3[b3.length]=b4}}}else{for(b5 in bZ){b4=b6(bZ[b5],b5,b7);if(b4!=null){b3[b3.length]=b4}}}return b3.concat.apply([],b3)},guid:1,proxy:function(b3,b2){if(typeof b2==="string"){var b1=b3[b2];b2=b3;b3=b1}if(!bE.isFunction(b3)){return M}var bZ=bK.call(arguments,2),b0=function(){return b3.apply(b2,bZ.concat(bK.call(arguments)))};b0.guid=b3.guid=b3.guid||b0.guid||bE.guid++;return b0},access:function(bZ,b7,b5,b1,b4,b6){var b0=bZ.length;if(typeof b7==="object"){for(var b2 in b7){bE.access(bZ,b2,b7[b2],b1,b4,b5)}return bZ}if(b5!==M){b1=!b6&&b1&&bE.isFunction(b5);for(var b3=0;b3<b0;b3++){b4(bZ[b3],b7,b1?b5.call(bZ[b3],b3,b4(bZ[b3],b7)):b5,b6)}return bZ}return b0?b4(bZ[0],b7):M},now:function(){return(new Date()).getTime()},uaMatch:function(b0){b0=b0.toLowerCase();var bZ=bx.exec(b0)||bR.exec(b0)||bQ.exec(b0)||b0.indexOf("compatible")<0&&bS.exec(b0)||[];return{browser:bZ[1]||"",version:bZ[2]||"0"}},sub:function(){function bZ(b2,b3){return new bZ.fn.init(b2,b3)}bE.extend(true,bZ,this);bZ.superclass=this;bZ.fn=bZ.prototype=this();bZ.fn.constructor=bZ;bZ.sub=this.sub;bZ.fn.init=function b1(b2,b3){if(b3&&b3 instanceof bE&&!(b3 instanceof bZ)){b3=bZ(b3)}return bE.fn.init.call(this,b2,b3,b0)};bZ.fn.init.prototype=bZ.fn;var b0=bZ(at);return bZ},browser:{}});bE.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,bZ){bw["[object "+bZ+"]"]=bZ.toLowerCase()});bV=bE.uaMatch(bX);if(bV.browser){bE.browser[bV.browser]=true;bE.browser.version=bV.version}if(bE.browser.webkit){bE.browser.safari=true}if(bM.test("\xA0")){bI=/^[\s\xA0]+/;bD=/[\s\xA0]+$/}bC=bE(at);if(at.addEventListener){e=function(){at.removeEventListener("DOMContentLoaded",e,false);bE.ready()}}else{if(at.attachEvent){e=function(){if(at.readyState==="complete"){at.detachEvent("onreadystatechange",e);bE.ready()}}}}function bv(){if(bE.isReady){return}try{at.documentElement.doScroll("left")}catch(bZ){setTimeout(bv,1);return}bE.ready()}return bE})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aH=[].slice;b.extend({_Deferred:function(){var bw=[],bx,bu,bv,e={done:function(){if(!bv){var bz=arguments,bA,bD,bC,bB,by;if(bx){by=bx;bx=0}for(bA=0,bD=bz.length;bA<bD;bA++){bC=bz[bA];bB=b.type(bC);if(bB==="array"){e.done.apply(e,bC)}else{if(bB==="function"){bw.push(bC)}}}if(by){e.resolveWith(by[0],by[1])}}return this},resolveWith:function(bz,by){if(!bv&&!bx&&!bu){by=by||[];bu=1;try{while(bw[0]){bw.shift().apply(bz,by)}}catch(bA){}finally{bx=[bz,by];bu=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return !!(bu||bx)},cancel:function(){bv=1;bw=[];return this}};return e},Deferred:function(bu){var e=b._Deferred(),bw=b._Deferred(),bv;b.extend(e,{then:function(by,bx){e.done(by).fail(bx);return this},always:function(){return e.done.apply(e,arguments).fail.apply(this,arguments)},fail:bw.done,rejectWith:bw.resolveWith,reject:bw.resolve,isRejected:bw.isResolved,pipe:function(by,bx){return b.Deferred(function(bz){b.each({done:[by,"resolve"],fail:[bx,"reject"]},function(bB,bE){var bA=bE[0],bD=bE[1],bC;if(b.isFunction(bA)){e[bB](function(){bC=bA.apply(this,arguments);if(bC&&b.isFunction(bC.promise)){bC.promise().then(bz.resolve,bz.reject)}else{bz[bD](bC)}})}else{e[bB](bz[bD])}})}).promise()},promise:function(by){if(by==null){if(bv){return bv}bv=by={}}var bx=a.length;while(bx--){by[a[bx]]=e[a[bx]]}return by}});e.done(bw.cancel).fail(e.cancel);delete e.cancel;if(bu){bu.call(e,e)}return e},when:function(bz){var bu=arguments,bv=0,by=bu.length,bx=by,e=by<=1&&bz&&b.isFunction(bz.promise)?bz:b.Deferred();function bw(bA){return function(bB){bu[bA]=arguments.length>1?aH.call(arguments,0):bB;if(!(--bx)){e.resolveWith(e,aH.call(bu,0))}}}if(by>1){for(;bv<by;bv++){if(bu[bv]&&b.isFunction(bu[bv].promise)){bu[bv].promise().then(bw(bv),e.reject)}else{--bx}}if(!bx){e.resolveWith(e,bu)}}else{if(e!==bz){e.resolveWith(e,by?[bz]:[])}}return e.promise()}});b.support=(function(){var bE=at.createElement("div"),bL=at.documentElement,bx,bM,bF,bv,bD,by,bB,bu,bC,bG,bA,bK,bI,bw,bz,bH,bN;bE.setAttribute("className","t");bE.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bx=bE.getElementsByTagName("*");bM=bE.getElementsByTagName("a")[0];if(!bx||!bx.length||!bM){return{}}bF=at.createElement("select");bv=bF.appendChild(at.createElement("option"));bD=bE.getElementsByTagName("input")[0];bB={leadingWhitespace:(bE.firstChild.nodeType===3),tbody:!bE.getElementsByTagName("tbody").length,htmlSerialize:!!bE.getElementsByTagName("link").length,style:/top/.test(bM.getAttribute("style")),hrefNormalized:(bM.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bM.style.opacity),cssFloat:!!bM.style.cssFloat,checkOn:(bD.value==="on"),optSelected:bv.selected,getSetAttribute:bE.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bD.checked=true;bB.noCloneChecked=bD.cloneNode(true).checked;bF.disabled=true;bB.optDisabled=!bv.disabled;try{delete bE.test}catch(bJ){bB.deleteExpando=false}if(!bE.addEventListener&&bE.attachEvent&&bE.fireEvent){bE.attachEvent("onclick",function(){bB.noCloneEvent=false});bE.cloneNode(true).fireEvent("onclick")}bD=at.createElement("input");bD.value="t";bD.setAttribute("type","radio");bB.radioValue=bD.value==="t";bD.setAttribute("checked","checked");bE.appendChild(bD);bu=at.createDocumentFragment();bu.appendChild(bE.firstChild);bB.checkClone=bu.cloneNode(true).cloneNode(true).lastChild.checked;bE.innerHTML="";bE.style.width=bE.style.paddingLeft="1px";bC=at.getElementsByTagName("body")[0];bA=at.createElement(bC?"div":"body");bK={visibility:"hidden",width:0,height:0,border:0,margin:0};if(bC){b.extend(bK,{position:"absolute",left:-1000,top:-1000})}for(bH in bK){bA.style[bH]=bK[bH]}bA.appendChild(bE);bG=bC||bL;bG.insertBefore(bA,bG.firstChild);bB.appendChecked=bD.checked;bB.boxModel=bE.offsetWidth===2;if("zoom" in bE.style){bE.style.display="inline";bE.style.zoom=1;bB.inlineBlockNeedsLayout=(bE.offsetWidth===2);bE.style.display="";bE.innerHTML="<div style='width:4px;'></div>";bB.shrinkWrapBlocks=(bE.offsetWidth!==2)}bE.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bI=bE.getElementsByTagName("td");bN=(bI[0].offsetHeight===0);bI[0].style.display="";bI[1].style.display="none";bB.reliableHiddenOffsets=bN&&(bI[0].offsetHeight===0);bE.innerHTML="";if(at.defaultView&&at.defaultView.getComputedStyle){by=at.createElement("div");by.style.width="0";by.style.marginRight="0";bE.appendChild(by);bB.reliableMarginRight=(parseInt((at.defaultView.getComputedStyle(by,null)||{marginRight:0}).marginRight,10)||0)===0}bA.innerHTML="";bG.removeChild(bA);if(bE.attachEvent){for(bH in {submit:1,change:1,focusin:1}){bz="on"+bH;bN=(bz in bE);if(!bN){bE.setAttribute(bz,"return;");bN=(typeof bE[bz]==="function")}bB[bH+"Bubbles"]=bN}}bA=bu=bF=bv=bC=by=bE=bD=null;return bB})();b.boxModel=b.support.boxModel;var aO=/^(?:\{.*\}|\[.*\])$/,ay=/([a-z])([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!V(e)},data:function(bw,bu,by,bx){if(!b.acceptData(bw)){return}var bB=b.expando,bA=typeof bu==="string",bz,bC=bw.nodeType,e=bC?b.cache:bw,bv=bC?bw[b.expando]:bw[b.expando]&&b.expando;if((!bv||(bx&&bv&&!e[bv][bB]))&&bA&&by===M){return}if(!bv){if(bC){bw[b.expando]=bv=++b.uuid}else{bv=b.expando}}if(!e[bv]){e[bv]={};if(!bC){e[bv].toJSON=b.noop}}if(typeof bu==="object"||typeof bu==="function"){if(bx){e[bv][bB]=b.extend(e[bv][bB],bu)}else{e[bv]=b.extend(e[bv],bu)}}bz=e[bv];if(bx){if(!bz[bB]){bz[bB]={}}bz=bz[bB]}if(by!==M){bz[b.camelCase(bu)]=by}if(bu==="events"&&!bz[bu]){return bz[bB]&&bz[bB].events}return bA?bz[b.camelCase(bu)]||bz[bu]:bz},removeData:function(bx,bv,by){if(!b.acceptData(bx)){return}var bA=b.expando,bB=bx.nodeType,bu=bB?b.cache:bx,bw=bB?bx[b.expando]:b.expando;if(!bu[bw]){return}if(bv){var bz=by?bu[bw][bA]:bu[bw];if(bz){delete bz[bv];if(!V(bz)){return}}}if(by){delete bu[bw][bA];if(!V(bu[bw])){return}}var e=bu[bw][bA];if(b.support.deleteExpando||bu!=bb){delete bu[bw]}else{bu[bw]=null}if(e){bu[bw]={};if(!bB){bu[bw].toJSON=b.noop}bu[bw][bA]=e}else{if(bB){if(b.support.deleteExpando){delete bx[b.expando]}else{if(bx.removeAttribute){bx.removeAttribute(b.expando)}else{bx[b.expando]=null}}}}},_data:function(bu,e,bv){return b.data(bu,e,bv,true)},acceptData:function(bu){if(bu.nodeName){var e=b.noData[bu.nodeName.toLowerCase()];if(e){return !(e===true||bu.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bx,bz){var by=null;if(typeof bx==="undefined"){if(this.length){by=b.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,bv;for(var bw=0,bu=e.length;bw<bu;bw++){bv=e[bw].name;if(bv.indexOf("data-")===0){bv=b.camelCase(bv.substring(5));a4(this[0],bv,by[bv])}}}}return by}else{if(typeof bx==="object"){return this.each(function(){b.data(this,bx)})}}var bA=bx.split(".");bA[1]=bA[1]?"."+bA[1]:"";if(bz===M){by=this.triggerHandler("getData"+bA[1]+"!",[bA[0]]);if(by===M&&this.length){by=b.data(this[0],bx);by=a4(this[0],bx,by)}return by===M&&bA[1]?this.data(bA[0]):by}else{return this.each(function(){var bC=b(this),bB=[bA[0],bz];bC.triggerHandler("setData"+bA[1]+"!",bB);b.data(this,bx,bz);bC.triggerHandler("changeData"+bA[1]+"!",bB)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a4(bw,bv,bx){if(bx===M&&bw.nodeType===1){var bu="data-"+bv.replace(ay,"$1-$2").toLowerCase();bx=bw.getAttribute(bu);if(typeof bx==="string"){try{bx=bx==="true"?true:bx==="false"?false:bx==="null"?null:!b.isNaN(bx)?parseFloat(bx):aO.test(bx)?b.parseJSON(bx):bx}catch(by){}b.data(bw,bv,bx)}else{bx=M}}return bx}function V(bu){for(var e in bu){if(e!=="toJSON"){return false}}return true}function bg(bx,bw,bz){var bv=bw+"defer",bu=bw+"queue",e=bw+"mark",by=b.data(bx,bv,M,true);if(by&&(bz==="queue"||!b.data(bx,bu,M,true))&&(bz==="mark"||!b.data(bx,e,M,true))){setTimeout(function(){if(!b.data(bx,bu,M,true)&&!b.data(bx,e,M,true)){b.removeData(bx,bv,true);by.resolve()}},0)}}b.extend({_mark:function(bu,e){if(bu){e=(e||"fx")+"mark";b.data(bu,e,(b.data(bu,e,M,true)||0)+1,true)}},_unmark:function(bx,bw,bu){if(bx!==true){bu=bw;bw=bx;bx=false}if(bw){bu=bu||"fx";var e=bu+"mark",bv=bx?0:((b.data(bw,e,M,true)||1)-1);if(bv){b.data(bw,e,bv,true)}else{b.removeData(bw,e,true);bg(bw,bu,"mark")}}},queue:function(bu,e,bw){if(bu){e=(e||"fx")+"queue";var bv=b.data(bu,e,M,true);if(bw){if(!bv||b.isArray(bw)){bv=b.data(bu,e,b.makeArray(bw),true)}else{bv.push(bw)}}return bv||[]}},dequeue:function(bw,bv){bv=bv||"fx";var e=b.queue(bw,bv),bu=e.shift(),bx;if(bu==="inprogress"){bu=e.shift()}if(bu){if(bv==="fx"){e.unshift("inprogress")}bu.call(bw,function(){b.dequeue(bw,bv)})}if(!e.length){b.removeData(bw,bv+"queue",true);bg(bw,bv,"queue")}}});b.fn.extend({queue:function(e,bu){if(typeof e!=="string"){bu=e;e="fx"}if(bu===M){return b.queue(this[0],e)}return this.each(function(){var bv=b.queue(this,e,bu);if(e==="fx"&&bv[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(bu,e){bu=b.fx?b.fx.speeds[bu]||bu:bu;e=e||"fx";return this.queue(e,function(){var bv=this;setTimeout(function(){b.dequeue(bv,e)},bu)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bC,bv){if(typeof bC!=="string"){bv=bC;bC=M}bC=bC||"fx";var e=b.Deferred(),bu=this,bx=bu.length,bA=1,by=bC+"defer",bz=bC+"queue",bB=bC+"mark",bw;function bD(){if(!(--bA)){e.resolveWith(bu,[bu])}}while(bx--){if((bw=b.data(bu[bx],by,M,true)||(b.data(bu[bx],bz,M,true)||b.data(bu[bx],bB,M,true))&&b.data(bu[bx],by,b._Deferred(),true))){bA++;bw.done(bD)}}bD();return e.promise()}});var aM=/[\n\t\r]/g,ae=/\s+/,aQ=/\r/g,g=/^(?:button|input)$/i,F=/^(?:button|input|object|select|textarea)$/i,m=/^a(?:rea)?$/i,am=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,a7=/\:|^on/,a2,aW;b.fn.extend({attr:function(e,bu){return b.access(this,e,bu,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,bu){return b.access(this,e,bu,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=M;delete this[e]}catch(bu){}})},addClass:function(bx){var bz,bv,bu,bw,by,bA,e;if(b.isFunction(bx)){return this.each(function(bB){b(this).addClass(bx.call(this,bB,this.className))})}if(bx&&typeof bx==="string"){bz=bx.split(ae);for(bv=0,bu=this.length;bv<bu;bv++){bw=this[bv];if(bw.nodeType===1){if(!bw.className&&bz.length===1){bw.className=bx}else{by=" "+bw.className+" ";for(bA=0,e=bz.length;bA<e;bA++){if(!~by.indexOf(" "+bz[bA]+" ")){by+=bz[bA]+" "}}bw.className=b.trim(by)}}}}return this},removeClass:function(by){var bz,bv,bu,bx,bw,bA,e;if(b.isFunction(by)){return this.each(function(bB){b(this).removeClass(by.call(this,bB,this.className))})}if((by&&typeof by==="string")||by===M){bz=(by||"").split(ae);for(bv=0,bu=this.length;bv<bu;bv++){bx=this[bv];if(bx.nodeType===1&&bx.className){if(by){bw=(" "+bx.className+" ").replace(aM," ");for(bA=0,e=bz.length;bA<e;bA++){bw=bw.replace(" "+bz[bA]+" "," ")}bx.className=b.trim(bw)}else{bx.className=""}}}}return this},toggleClass:function(bw,bu){var bv=typeof bw,e=typeof bu==="boolean";if(b.isFunction(bw)){return this.each(function(bx){b(this).toggleClass(bw.call(this,bx,this.className,bu),bu)})}return this.each(function(){if(bv==="string"){var bz,by=0,bx=b(this),bA=bu,bB=bw.split(ae);while((bz=bB[by++])){bA=e?bA:!bx.hasClass(bz);bx[bA?"addClass":"removeClass"](bz)}}else{if(bv==="undefined"||bv==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bw===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bw=" "+e+" ";for(var bv=0,bu=this.length;bv<bu;bv++){if((" "+this[bv].className+" ").replace(aM," ").indexOf(bw)>-1){return true}}return false},val:function(bw){var e,bu,bv=this[0];if(!arguments.length){if(bv){e=b.valHooks[bv.nodeName.toLowerCase()]||b.valHooks[bv.type];if(e&&"get" in e&&(bu=e.get(bv,"value"))!==M){return bu}bu=bv.value;return typeof bu==="string"?bu.replace(aQ,""):bu==null?"":bu}return M}var bx=b.isFunction(bw);return this.each(function(bz){var by=b(this),bA;if(this.nodeType!==1){return}if(bx){bA=bw.call(this,bz,by.val())}else{bA=bw}if(bA==null){bA=""}else{if(typeof bA==="number"){bA+=""}else{if(b.isArray(bA)){bA=b.map(bA,function(bB){return bB==null?"":bB+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bA,"value")===M){this.value=bA}})}});b.extend({valHooks:{option:{get:function(e){var bu=e.attributes.value;return !bu||bu.specified?e.value:e.text}},select:{get:function(e){var bz,bx=e.selectedIndex,bA=[],bB=e.options,bw=e.type==="select-one";if(bx<0){return null}for(var bu=bw?bx:0,by=bw?bx+1:bB.length;bu<by;bu++){var bv=bB[bu];if(bv.selected&&(b.support.optDisabled?!bv.disabled:bv.getAttribute("disabled")===null)&&(!bv.parentNode.disabled||!b.nodeName(bv.parentNode,"optgroup"))){bz=b(bv).val();if(bw){return bz}bA.push(bz)}}if(bw&&!bA.length&&bB.length){return b(bB[bx]).val()}return bA},set:function(bu,bv){var e=b.makeArray(bv);b(bu).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){bu.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bz,bw,bA,by){var bu=bz.nodeType;if(!bz||bu===3||bu===8||bu===2){return M}if(by&&bw in b.attrFn){return b(bz)[bw](bA)}if(!("getAttribute" in bz)){return b.prop(bz,bw,bA)}var bv,e,bx=bu!==1||!b.isXMLDoc(bz);if(bx){bw=b.attrFix[bw]||bw;e=b.attrHooks[bw];if(!e){if(am.test(bw)){e=aW}else{if(a2&&bw!=="className"&&(b.nodeName(bz,"form")||a7.test(bw))){e=a2}}}}if(bA!==M){if(bA===null){b.removeAttr(bz,bw);return M}else{if(e&&"set" in e&&bx&&(bv=e.set(bz,bA,bw))!==M){return bv}else{bz.setAttribute(bw,""+bA);return bA}}}else{if(e&&"get" in e&&bx&&(bv=e.get(bz,bw))!==null){return bv}else{bv=bz.getAttribute(bw);return bv===null?M:bv}}},removeAttr:function(bu,e){var bv;if(bu.nodeType===1){e=b.attrFix[e]||e;if(b.support.getSetAttribute){bu.removeAttribute(e)}else{b.attr(bu,e,"");bu.removeAttributeNode(bu.getAttributeNode(e))}if(am.test(e)&&(bv=b.propFix[e]||e) in bu){bu[bv]=false}}},attrHooks:{type:{set:function(e,bu){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bu==="radio"&&b.nodeName(e,"input")){var bv=e.value;e.setAttribute("type",bu);if(bv){e.value=bv}return bu}}}},tabIndex:{get:function(bu){var e=bu.getAttributeNode("tabIndex");return e&&e.specified?parseInt(e.value,10):F.test(bu.nodeName)||m.test(bu.nodeName)&&bu.href?0:M}},value:{get:function(bu,e){if(a2&&b.nodeName(bu,"button")){return a2.get(bu,e)}return e in bu?bu.value:null},set:function(bu,bv,e){if(a2&&b.nodeName(bu,"button")){return a2.set(bu,bv,e)}bu.value=bv}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(by,bw,bz){var bu=by.nodeType;if(!by||bu===3||bu===8||bu===2){return M}var bv,e,bx=bu!==1||!b.isXMLDoc(by);if(bx){bw=b.propFix[bw]||bw;e=b.propHooks[bw]}if(bz!==M){if(e&&"set" in e&&(bv=e.set(by,bz,bw))!==M){return bv}else{return(by[bw]=bz)}}else{if(e&&"get" in e&&(bv=e.get(by,bw))!==M){return bv}else{return by[bw]}}},propHooks:{}});aW={get:function(bu,e){return b.prop(bu,e)?e.toLowerCase():M},set:function(bu,bw,e){var bv;if(bw===false){b.removeAttr(bu,e)}else{bv=b.propFix[e]||e;if(bv in bu){bu[bv]=true}bu.setAttribute(e,e.toLowerCase())}return e}};if(!b.support.getSetAttribute){b.attrFix=b.propFix;a2=b.attrHooks.name=b.attrHooks.title=b.valHooks.button={get:function(bv,bu){var e;e=bv.getAttributeNode(bu);return e&&e.nodeValue!==""?e.nodeValue:M},set:function(bv,bw,bu){var e=bv.getAttributeNode(bu);if(e){e.nodeValue=bw;return bw}}};b.each(["width","height"],function(bu,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bv,bw){if(bw===""){bv.setAttribute(e,"auto");return bw}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bu,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bw){var bv=bw.getAttribute(e,2);return bv===null?M:bv}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||M},set:function(e,bu){return(e.style.cssText=""+bu)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bu){var e=bu.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bu){if(b.isArray(bu)){return(e.checked=b.inArray(b(e).val(),bu)>=0)}}})});var aY=/\.(.*)$/,bd=/^(?:textarea|input|select)$/i,P=/\./g,bh=/ /g,aE=/[^\w\s.|`]/g,I=function(e){return e.replace(aE,"\\$&")};b.event={add:function(bw,bA,bF,by){if(bw.nodeType===3||bw.nodeType===8){return}if(bF===false){bF=bj}else{if(!bF){return}}var bu,bE;if(bF.handler){bu=bF;bF=bu.handler}if(!bF.guid){bF.guid=b.guid++}var bB=b._data(bw);if(!bB){return}var bG=bB.events,bz=bB.handle;if(!bG){bB.events=bG={}}if(!bz){bB.handle=bz=function(bH){return typeof b!=="undefined"&&(!bH||b.event.triggered!==bH.type)?b.event.handle.apply(bz.elem,arguments):M}}bz.elem=bw;bA=bA.split(" ");var bD,bx=0,e;while((bD=bA[bx++])){bE=bu?b.extend({},bu):{handler:bF,data:by};if(bD.indexOf(".")>-1){e=bD.split(".");bD=e.shift();bE.namespace=e.slice(0).sort().join(".")}else{e=[];bE.namespace=""}bE.type=bD;if(!bE.guid){bE.guid=bF.guid}var bv=bG[bD],bC=b.event.special[bD]||{};if(!bv){bv=bG[bD]=[];if(!bC.setup||bC.setup.call(bw,by,e,bz)===false){if(bw.addEventListener){bw.addEventListener(bD,bz,false)}else{if(bw.attachEvent){bw.attachEvent("on"+bD,bz)}}}}if(bC.add){bC.add.call(bw,bE);if(!bE.handler.guid){bE.handler.guid=bF.guid}}bv.push(bE);b.event.global[bD]=true}bw=null},global:{},remove:function(bI,bD,bv,bz){if(bI.nodeType===3||bI.nodeType===8){return}if(bv===false){bv=bj}var bL,by,bA,bF,bG=0,bw,bB,bE,bx,bC,e,bK,bH=b.hasData(bI)&&b._data(bI),bu=bH&&bH.events;if(!bH||!bu){return}if(bD&&bD.type){bv=bD.handler;bD=bD.type}if(!bD||typeof bD==="string"&&bD.charAt(0)==="."){bD=bD||"";for(by in bu){b.event.remove(bI,by+bD)}return}bD=bD.split(" ");while((by=bD[bG++])){bK=by;e=null;bw=by.indexOf(".")<0;bB=[];if(!bw){bB=by.split(".");by=bB.shift();bE=new RegExp("(^|\\.)"+b.map(bB.slice(0).sort(),I).join("\\.(?:.*\\.)?")+"(\\.|$)")}bC=bu[by];if(!bC){continue}if(!bv){for(bF=0;bF<bC.length;bF++){e=bC[bF];if(bw||bE.test(e.namespace)){b.event.remove(bI,bK,e.handler,bF);bC.splice(bF--,1)}}continue}bx=b.event.special[by]||{};for(bF=bz||0;bF<bC.length;bF++){e=bC[bF];if(bv.guid===e.guid){if(bw||bE.test(e.namespace)){if(bz==null){bC.splice(bF--,1)}if(bx.remove){bx.remove.call(bI,e)}}if(bz!=null){break}}}if(bC.length===0||bz!=null&&bC.length===1){if(!bx.teardown||bx.teardown.call(bI,bB)===false){b.removeEvent(bI,by,bH.handle)}bL=null;delete bu[by]}}if(b.isEmptyObject(bu)){var bJ=bH.handle;if(bJ){bJ.elem=null}delete bH.events;delete bH.handle;if(b.isEmptyObject(bH)){b.removeData(bI,M,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(e,bA,by,bF){var bD=e.type||e,bv=[],bu;if(bD.indexOf("!")>=0){bD=bD.slice(0,-1);bu=true}if(bD.indexOf(".")>=0){bv=bD.split(".");bD=bv.shift();bv.sort()}if((!by||b.event.customEvent[bD])&&!b.event.global[bD]){return}e=typeof e==="object"?e[b.expando]?e:new b.Event(bD,e):new b.Event(bD);e.type=bD;e.exclusive=bu;e.namespace=bv.join(".");e.namespace_re=new RegExp("(^|\\.)"+bv.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bF||!by){e.preventDefault();e.stopPropagation()}if(!by){b.each(b.cache,function(){var bH=b.expando,bG=this[bH];if(bG&&bG.events&&bG.events[bD]){b.event.trigger(e,bA,bG.handle.elem)}});return}if(by.nodeType===3||by.nodeType===8){return}e.result=M;e.target=by;bA=bA!=null?b.makeArray(bA):[];bA.unshift(e);var bE=by,bw=bD.indexOf(":")<0?"on"+bD:"";do{var bB=b._data(bE,"handle");e.currentTarget=bE;if(bB){bB.apply(bE,bA)}if(bw&&b.acceptData(bE)&&bE[bw]&&bE[bw].apply(bE,bA)===false){e.result=false;e.preventDefault()}bE=bE.parentNode||bE.ownerDocument||bE===e.target.ownerDocument&&bb}while(bE&&!e.isPropagationStopped());if(!e.isDefaultPrevented()){var bx,bC=b.event.special[bD]||{};if((!bC._default||bC._default.call(by.ownerDocument,e)===false)&&!(bD==="click"&&b.nodeName(by,"a"))&&b.acceptData(by)){try{if(bw&&by[bD]){bx=by[bw];if(bx){by[bw]=null}b.event.triggered=bD;by[bD]()}}catch(bz){}if(bx){by[bw]=bx}b.event.triggered=M}}return e.result},handle:function(bA){bA=b.event.fix(bA||bb.event);var bu=((b._data(this,"events")||{})[bA.type]||[]).slice(0),bz=!bA.exclusive&&!bA.namespace,bx=Array.prototype.slice.call(arguments,0);bx[0]=bA;bA.currentTarget=this;for(var bw=0,e=bu.length;bw<e;bw++){var by=bu[bw];if(bz||bA.namespace_re.test(by.namespace)){bA.handler=by.handler;bA.data=by.data;bA.handleObj=by;var bv=by.handler.apply(this,bx);if(bv!==M){bA.result=bv;if(bv===false){bA.preventDefault();bA.stopPropagation()}}if(bA.isImmediatePropagationStopped()){break}}}return bA.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(bx){if(bx[b.expando]){return bx}var bu=bx;bx=b.Event(bu);for(var bv=this.props.length,bz;bv;){bz=this.props[--bv];bx[bz]=bu[bz]}if(!bx.target){bx.target=bx.srcElement||at}if(bx.target.nodeType===3){bx.target=bx.target.parentNode}if(!bx.relatedTarget&&bx.fromElement){bx.relatedTarget=bx.fromElement===bx.target?bx.toElement:bx.fromElement}if(bx.pageX==null&&bx.clientX!=null){var bw=bx.target.ownerDocument||at,by=bw.documentElement,e=bw.body;bx.pageX=bx.clientX+(by&&by.scrollLeft||e&&e.scrollLeft||0)-(by&&by.clientLeft||e&&e.clientLeft||0);bx.pageY=bx.clientY+(by&&by.scrollTop||e&&e.scrollTop||0)-(by&&by.clientTop||e&&e.clientTop||0)}if(bx.which==null&&(bx.charCode!=null||bx.keyCode!=null)){bx.which=bx.charCode!=null?bx.charCode:bx.keyCode}if(!bx.metaKey&&bx.ctrlKey){bx.metaKey=bx.ctrlKey}if(!bx.which&&bx.button!==M){bx.which=(bx.button&1?1:(bx.button&2?3:(bx.button&4?2:0)))}return bx},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(e){b.event.add(this,q(e.origType,e.selector),b.extend({},e,{handler:ak,guid:e.handler.guid}))},remove:function(e){b.event.remove(this,q(e.origType,e.selector),e)}},beforeunload:{setup:function(bv,bu,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(bu,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}}};b.removeEvent=at.removeEventListener?function(bu,e,bv){if(bu.removeEventListener){bu.removeEventListener(e,bv,false)}}:function(bu,e,bv){if(bu.detachEvent){bu.detachEvent("on"+e,bv)}};b.Event=function(bu,e){if(!this.preventDefault){return new b.Event(bu,e)}if(bu&&bu.type){this.originalEvent=bu;this.type=bu.type;this.isDefaultPrevented=(bu.defaultPrevented||bu.returnValue===false||bu.getPreventDefault&&bu.getPreventDefault())?j:bj}else{this.type=bu}if(e){b.extend(this,e)}this.timeStamp=b.now();this[b.expando]=true};function bj(){return false}function j(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=j;var bu=this.originalEvent;if(!bu){return}if(bu.preventDefault){bu.preventDefault()}else{bu.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=j;var bu=this.originalEvent;if(!bu){return}if(bu.stopPropagation){bu.stopPropagation()}bu.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j;this.stopPropagation()},isDefaultPrevented:bj,isPropagationStopped:bj,isImmediatePropagationStopped:bj};var ad=function(bv){var bw=bv.relatedTarget,e=false,bu=bv.type;bv.type=bv.data;if(bw!==this){if(bw){e=b.contains(this,bw)}if(!e){b.event.handle.apply(this,arguments);bv.type=bu}}},aT=function(e){e.type=e.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bu,e){b.event.special[bu]={setup:function(bv){b.event.add(this,e,bv&&bv.selector?aT:ad,bu)},teardown:function(bv){b.event.remove(this,e,bv&&bv.selector?aT:ad)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(bu,e){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(bx){var bw=bx.target,bv=bw.type;if((bv==="submit"||bv==="image")&&b(bw).closest("form").length){aV("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(bx){var bw=bx.target,bv=bw.type;if((bv==="text"||bv==="password")&&b(bw).closest("form").length&&bx.keyCode===13){aV("submit",this,arguments)}})}else{return false}},teardown:function(e){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bm,l=function(bu){var e=bu.type,bv=bu.value;if(e==="radio"||e==="checkbox"){bv=bu.checked}else{if(e==="select-multiple"){bv=bu.selectedIndex>-1?b.map(bu.options,function(bw){return bw.selected}).join("-"):""}else{if(b.nodeName(bu,"select")){bv=bu.selectedIndex}}}return bv},ab=function ab(bw){var bu=bw.target,bv,bx;if(!bd.test(bu.nodeName)||bu.readOnly){return}bv=b._data(bu,"_change_data");bx=l(bu);if(bw.type!=="focusout"||bu.type!=="radio"){b._data(bu,"_change_data",bx)}if(bv===M||bx===bv){return}if(bv!=null||bx){bw.type="change";bw.liveFired=M;b.event.trigger(bw,arguments[1],bu)}};b.event.special.change={filters:{focusout:ab,beforedeactivate:ab,click:function(bw){var bv=bw.target,bu=b.nodeName(bv,"input")?bv.type:"";if(bu==="radio"||bu==="checkbox"||b.nodeName(bv,"select")){ab.call(this,bw)}},keydown:function(bw){var bv=bw.target,bu=b.nodeName(bv,"input")?bv.type:"";if((bw.keyCode===13&&!b.nodeName(bv,"textarea"))||(bw.keyCode===32&&(bu==="checkbox"||bu==="radio"))||bu==="select-multiple"){ab.call(this,bw)}},beforeactivate:function(bv){var bu=bv.target;b._data(bu,"_change_data",l(bu))}},setup:function(bv,bu){if(this.type==="file"){return false}for(var e in bm){b.event.add(this,e+".specialChange",bm[e])}return bd.test(this.nodeName)},teardown:function(e){b.event.remove(this,".specialChange");return bd.test(this.nodeName)}};bm=b.event.special.change.filters;bm.focus=bm.beforeactivate}function aV(bu,bw,e){var bv=b.extend({},e[0]);bv.type=bu;bv.originalEvent={};bv.liveFired=M;b.event.handle.call(bw,bv);if(bv.isDefaultPrevented()){e[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bw,e){var bu=0;b.event.special[e]={setup:function(){if(bu++===0){at.addEventListener(bw,bv,true)}},teardown:function(){if(--bu===0){at.removeEventListener(bw,bv,true)}}};function bv(bx){var by=b.event.fix(bx);by.type=e;by.originalEvent={};b.event.trigger(by,null,by.target);if(by.isDefaultPrevented()){bx.preventDefault()}}})}b.each(["bind","one"],function(bu,e){b.fn[e]=function(bA,bB,bz){var by;if(typeof bA==="object"){for(var bx in bA){this[e](bx,bB,bA[bx],bz)}return this}if(arguments.length===2||bB===false){bz=bB;bB=M}if(e==="one"){by=function(bC){b(this).unbind(bC,by);return bz.apply(this,arguments)};by.guid=bz.guid||b.guid++}else{by=bz}if(bA==="unload"&&e!=="one"){this.one(bA,bB,bz)}else{for(var bw=0,bv=this.length;bw<bv;bw++){b.event.add(this[bw],bA,by,bB)}}return this}});b.fn.extend({unbind:function(bx,bw){if(typeof bx==="object"&&!bx.preventDefault){for(var bv in bx){this.unbind(bv,bx[bv])}}else{for(var bu=0,e=this.length;bu<e;bu++){b.event.remove(this[bu],bx,bw)}}return this},delegate:function(e,bu,bw,bv){return this.live(bu,bw,bv,e)},undelegate:function(e,bu,bv){if(arguments.length===0){return this.unbind("live")}else{return this.die(bu,null,bv,e)}},trigger:function(e,bu){return this.each(function(){b.event.trigger(e,bu,this)})},triggerHandler:function(e,bu){if(this[0]){return b.event.trigger(e,bu,this[0],true)}},toggle:function(bw){var bu=arguments,e=bw.guid||b.guid++,bv=0,bx=function(by){var bz=(b.data(this,"lastToggle"+bw.guid)||0)%bv;b.data(this,"lastToggle"+bw.guid,bz+1);by.preventDefault();return bu[bz].apply(this,arguments)||false};bx.guid=e;while(bv<bu.length){bu[bv++].guid=e}return this.click(bx)},hover:function(e,bu){return this.mouseenter(e).mouseleave(bu||e)}});var aR={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(bu,e){b.fn[e]=function(bE,bB,bG,bx){var bF,bC=0,bD,bw,bI,bz=bx||this.selector,bv=bx?this:b(this.context);if(typeof bE==="object"&&!bE.preventDefault){for(var bH in bE){bv[e](bH,bB,bE[bH],bz)}return this}if(e==="die"&&!bE&&bx&&bx.charAt(0)==="."){bv.unbind(bx);return this}if(bB===false||b.isFunction(bB)){bG=bB||bj;bB=M}bE=(bE||"").split(" ");while((bF=bE[bC++])!=null){bD=aY.exec(bF);bw="";if(bD){bw=bD[0];bF=bF.replace(aY,"")}if(bF==="hover"){bE.push("mouseenter"+bw,"mouseleave"+bw);continue}bI=bF;if(aR[bF]){bE.push(aR[bF]+bw);bF=bF+bw}else{bF=(aR[bF]||bF)+bw}if(e==="live"){for(var bA=0,by=bv.length;bA<by;bA++){b.event.add(bv[bA],"live."+q(bF,bz),{data:bB,selector:bz,handler:bG,origType:bF,origHandler:bG,preType:bI})}}else{bv.unbind("live."+q(bF,bz),bG)}}return this}});function ak(bE){var bB,bw,bK,by,e,bG,bD,bF,bC,bJ,bA,bz,bI,bH=[],bx=[],bu=b._data(this,"events");if(bE.liveFired===this||!bu||!bu.live||bE.target.disabled||bE.button&&bE.type==="click"){return}if(bE.namespace){bz=new RegExp("(^|\\.)"+bE.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bE.liveFired=this;var bv=bu.live.slice(0);for(bD=0;bD<bv.length;bD++){e=bv[bD];if(e.origType.replace(aY,"")===bE.type){bx.push(e.selector)}else{bv.splice(bD--,1)}}by=b(bE.target).closest(bx,bE.currentTarget);for(bF=0,bC=by.length;bF<bC;bF++){bA=by[bF];for(bD=0;bD<bv.length;bD++){e=bv[bD];if(bA.selector===e.selector&&(!bz||bz.test(e.namespace))&&!bA.elem.disabled){bG=bA.elem;bK=null;if(e.preType==="mouseenter"||e.preType==="mouseleave"){bE.type=e.preType;bK=b(bE.relatedTarget).closest(e.selector)[0];if(bK&&b.contains(bG,bK)){bK=bG}}if(!bK||bK!==bG){bH.push({elem:bG,handleObj:e,level:bA.level})}}}}for(bF=0,bC=bH.length;bF<bC;bF++){by=bH[bF];if(bw&&by.level>bw){break}bE.currentTarget=by.elem;bE.data=by.handleObj.data;bE.handleObj=by.handleObj;bI=by.handleObj.origHandler.apply(by.elem,arguments);if(bI===false||bE.isPropagationStopped()){bw=by.level;if(bI===false){bB=false}if(bE.isImmediatePropagationStopped()){break}}}return bB}function q(bu,e){return(bu&&bu!=="*"?bu+".":"")+e.replace(P,"`").replace(bh,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(bu,e){b.fn[e]=function(bw,bv){if(bv==null){bv=bw;bw=null}return arguments.length>0?this.bind(e,bw,bv):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bE=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bF=0,bI=Object.prototype.toString,bz=false,by=true,bG=/\\/g,bM=/\W/;[0,0].sort(function(){by=false;return 0});var bw=function(bR,e,bU,bV){bU=bU||[];e=e||at;var bX=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bR||typeof bR!=="string"){return bU}var bO,bZ,b2,bN,bY,b1,b0,bT,bQ=true,bP=bw.isXML(e),bS=[],bW=bR;do{bE.exec("");bO=bE.exec(bW);if(bO){bW=bO[3];bS.push(bO[1]);if(bO[2]){bN=bO[3];break}}}while(bO);if(bS.length>1&&bA.exec(bR)){if(bS.length===2&&bB.relative[bS[0]]){bZ=bJ(bS[0]+bS[1],e)}else{bZ=bB.relative[bS[0]]?[e]:bw(bS.shift(),e);while(bS.length){bR=bS.shift();if(bB.relative[bR]){bR+=bS.shift()}bZ=bJ(bR,bZ)}}}else{if(!bV&&bS.length>1&&e.nodeType===9&&!bP&&bB.match.ID.test(bS[0])&&!bB.match.ID.test(bS[bS.length-1])){bY=bw.find(bS.shift(),e,bP);e=bY.expr?bw.filter(bY.expr,bY.set)[0]:bY.set[0]}if(e){bY=bV?{expr:bS.pop(),set:bC(bV)}:bw.find(bS.pop(),bS.length===1&&(bS[0]==="~"||bS[0]==="+")&&e.parentNode?e.parentNode:e,bP);bZ=bY.expr?bw.filter(bY.expr,bY.set):bY.set;if(bS.length>0){b2=bC(bZ)}else{bQ=false}while(bS.length){b1=bS.pop();b0=b1;if(!bB.relative[b1]){b1=""}else{b0=bS.pop()}if(b0==null){b0=e}bB.relative[b1](b2,b0,bP)}}else{b2=bS=[]}}if(!b2){b2=bZ}if(!b2){bw.error(b1||bR)}if(bI.call(b2)==="[object Array]"){if(!bQ){bU.push.apply(bU,b2)}else{if(e&&e.nodeType===1){for(bT=0;b2[bT]!=null;bT++){if(b2[bT]&&(b2[bT]===true||b2[bT].nodeType===1&&bw.contains(e,b2[bT]))){bU.push(bZ[bT])}}}else{for(bT=0;b2[bT]!=null;bT++){if(b2[bT]&&b2[bT].nodeType===1){bU.push(bZ[bT])}}}}}else{bC(b2,bU)}if(bN){bw(bN,bX,bU,bV);bw.uniqueSort(bU)}return bU};bw.uniqueSort=function(bN){if(bH){bz=by;bN.sort(bH);if(bz){for(var e=1;e<bN.length;e++){if(bN[e]===bN[e-1]){bN.splice(e--,1)}}}}return bN};bw.matches=function(e,bN){return bw(e,null,null,bN)};bw.matchesSelector=function(e,bN){return bw(bN,null,null,[e]).length>0};bw.find=function(bT,e,bU){var bS;if(!bT){return[]}for(var bP=0,bO=bB.order.length;bP<bO;bP++){var bQ,bR=bB.order[bP];if((bQ=bB.leftMatch[bR].exec(bT))){var bN=bQ[1];bQ.splice(1,1);if(bN.substr(bN.length-1)!=="\\"){bQ[1]=(bQ[1]||"").replace(bG,"");bS=bB.find[bR](bQ,e,bU);if(bS!=null){bT=bT.replace(bB.match[bR],"");break}}}}if(!bS){bS=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bS,expr:bT}};bw.filter=function(bX,bW,b0,bQ){var bS,e,bO=bX,b2=[],bU=bW,bT=bW&&bW[0]&&bw.isXML(bW[0]);while(bX&&bW.length){for(var bV in bB.filter){if((bS=bB.leftMatch[bV].exec(bX))!=null&&bS[2]){var b1,bZ,bN=bB.filter[bV],bP=bS[1];e=false;bS.splice(1,1);if(bP.substr(bP.length-1)==="\\"){continue}if(bU===b2){b2=[]}if(bB.preFilter[bV]){bS=bB.preFilter[bV](bS,bU,b0,b2,bQ,bT);if(!bS){e=b1=true}else{if(bS===true){continue}}}if(bS){for(var bR=0;(bZ=bU[bR])!=null;bR++){if(bZ){b1=bN(bZ,bS,bR,bU);var bY=bQ^!!b1;if(b0&&b1!=null){if(bY){e=true}else{bU[bR]=false}}else{if(bY){b2.push(bZ);e=true}}}}}if(b1!==M){if(!b0){bU=b2}bX=bX.replace(bB.match[bV],"");if(!e){return[]}break}}}if(bX===bO){if(e==null){bw.error(bX)}else{break}}bO=bX}return bU};bw.error=function(e){throw"Syntax error, unrecognized expression: "+e};var bB=bw.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bS,bN){var bP=typeof bN==="string",bR=bP&&!bM.test(bN),bT=bP&&!bR;if(bR){bN=bN.toLowerCase()}for(var bO=0,e=bS.length,bQ;bO<e;bO++){if((bQ=bS[bO])){while((bQ=bQ.previousSibling)&&bQ.nodeType!==1){}bS[bO]=bT||bQ&&bQ.nodeName.toLowerCase()===bN?bQ||false:bQ===bN}}if(bT){bw.filter(bN,bS,true)}},">":function(bS,bN){var bR,bQ=typeof bN==="string",bO=0,e=bS.length;if(bQ&&!bM.test(bN)){bN=bN.toLowerCase();for(;bO<e;bO++){bR=bS[bO];if(bR){var bP=bR.parentNode;bS[bO]=bP.nodeName.toLowerCase()===bN?bP:false}}}else{for(;bO<e;bO++){bR=bS[bO];if(bR){bS[bO]=bQ?bR.parentNode:bR.parentNode===bN}}if(bQ){bw.filter(bN,bS,true)}}},"":function(bP,bN,bR){var bQ,bO=bF++,e=bK;if(typeof bN==="string"&&!bM.test(bN)){bN=bN.toLowerCase();bQ=bN;e=bu}e("parentNode",bN,bO,bP,bQ,bR)},"~":function(bP,bN,bR){var bQ,bO=bF++,e=bK;if(typeof bN==="string"&&!bM.test(bN)){bN=bN.toLowerCase();bQ=bN;e=bu}e("previousSibling",bN,bO,bP,bQ,bR)}},find:{ID:function(bN,bO,bP){if(typeof bO.getElementById!=="undefined"&&!bP){var e=bO.getElementById(bN[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bO,bR){if(typeof bR.getElementsByName!=="undefined"){var bN=[],bQ=bR.getElementsByName(bO[1]);for(var bP=0,e=bQ.length;bP<e;bP++){if(bQ[bP].getAttribute("name")===bO[1]){bN.push(bQ[bP])}}return bN.length===0?null:bN}},TAG:function(e,bN){if(typeof bN.getElementsByTagName!=="undefined"){return bN.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bP,bN,bO,e,bS,bT){bP=" "+bP[1].replace(bG,"")+" ";if(bT){return bP}for(var bQ=0,bR;(bR=bN[bQ])!=null;bQ++){if(bR){if(bS^(bR.className&&(" "+bR.className+" ").replace(/[\t\n\r]/g," ").indexOf(bP)>=0)){if(!bO){e.push(bR)}}else{if(bO){bN[bQ]=false}}}}return false},ID:function(e){return e[1].replace(bG,"")},TAG:function(bN,e){return bN[1].replace(bG,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bw.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bN=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bN[1]+(bN[2]||1))-0;e[3]=bN[3]-0}else{if(e[2]){bw.error(e[0])}}e[0]=bF++;return e},ATTR:function(bQ,bN,bO,e,bR,bS){var bP=bQ[1]=bQ[1].replace(bG,"");if(!bS&&bB.attrMap[bP]){bQ[1]=bB.attrMap[bP]}bQ[4]=(bQ[4]||bQ[5]||"").replace(bG,"");if(bQ[2]==="~="){bQ[4]=" "+bQ[4]+" "}return bQ},PSEUDO:function(bQ,bN,bO,e,bR){if(bQ[1]==="not"){if((bE.exec(bQ[3])||"").length>1||/^\w/.test(bQ[3])){bQ[3]=bw(bQ[3],null,null,bN)}else{var bP=bw.filter(bQ[3],bN,bO,true^bR);if(!bO){e.push.apply(e,bP)}return false}}else{if(bB.match.POS.test(bQ[0])||bB.match.CHILD.test(bQ[0])){return true}}return bQ},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bO,bN,e){return !!bw(e[3],bO).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bO){var e=bO.getAttribute("type"),bN=bO.type;return bO.nodeName.toLowerCase()==="input"&&"text"===bN&&(e===bN||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bN){var e=bN.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bN.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bN){var e=bN.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bN.type},button:function(bN){var e=bN.nodeName.toLowerCase();return e==="input"&&"button"===bN.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bN,e){return e===0},last:function(bO,bN,e,bP){return bN===bP.length-1},even:function(bN,e){return e%2===0},odd:function(bN,e){return e%2===1},lt:function(bO,bN,e){return bN<e[3]-0},gt:function(bO,bN,e){return bN>e[3]-0},nth:function(bO,bN,e){return e[3]-0===bN},eq:function(bO,bN,e){return e[3]-0===bN}},filter:{PSEUDO:function(bO,bT,bS,bU){var e=bT[1],bN=bB.filters[e];if(bN){return bN(bO,bS,bT,bU)}else{if(e==="contains"){return(bO.textContent||bO.innerText||bw.getText([bO])||"").indexOf(bT[3])>=0}else{if(e==="not"){var bP=bT[3];for(var bR=0,bQ=bP.length;bR<bQ;bR++){if(bP[bR]===bO){return false}}return true}else{bw.error(e)}}}},CHILD:function(e,bP){var bS=bP[1],bN=e;switch(bS){case"only":case"first":while((bN=bN.previousSibling)){if(bN.nodeType===1){return false}}if(bS==="first"){return true}bN=e;case"last":while((bN=bN.nextSibling)){if(bN.nodeType===1){return false}}return true;case"nth":var bO=bP[2],bV=bP[3];if(bO===1&&bV===0){return true}var bR=bP[0],bU=e.parentNode;if(bU&&(bU.sizcache!==bR||!e.nodeIndex)){var bQ=0;for(bN=bU.firstChild;bN;bN=bN.nextSibling){if(bN.nodeType===1){bN.nodeIndex=++bQ}}bU.sizcache=bR}var bT=e.nodeIndex-bV;if(bO===0){return bT===0}else{return(bT%bO===0&&bT/bO>=0)}}},ID:function(bN,e){return bN.nodeType===1&&bN.getAttribute("id")===e},TAG:function(bN,e){return(e==="*"&&bN.nodeType===1)||bN.nodeName.toLowerCase()===e},CLASS:function(bN,e){return(" "+(bN.className||bN.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bR,bP){var bO=bP[1],e=bB.attrHandle[bO]?bB.attrHandle[bO](bR):bR[bO]!=null?bR[bO]:bR.getAttribute(bO),bS=e+"",bQ=bP[2],bN=bP[4];return e==null?bQ==="!=":bQ==="="?bS===bN:bQ==="*="?bS.indexOf(bN)>=0:bQ==="~="?(" "+bS+" ").indexOf(bN)>=0:!bN?bS&&e!==false:bQ==="!="?bS!==bN:bQ==="^="?bS.indexOf(bN)===0:bQ==="$="?bS.substr(bS.length-bN.length)===bN:bQ==="|="?bS===bN||bS.substr(0,bN.length+1)===bN+"-":false},POS:function(bQ,bN,bO,bR){var e=bN[2],bP=bB.setFilters[e];if(bP){return bP(bQ,bO,bN,bR)}}}};var bA=bB.match.POS,bv=function(bN,e){return"\\"+(e-0+1)};for(var bx in bB.match){bB.match[bx]=new RegExp(bB.match[bx].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bB.leftMatch[bx]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bB.match[bx].source.replace(/\\(\d+)/g,bv))}var bC=function(bN,e){bN=Array.prototype.slice.call(bN,0);if(e){e.push.apply(e,bN);return e}return bN};try{Array.prototype.slice.call(at.documentElement.childNodes,0)[0].nodeType}catch(bL){bC=function(bQ,bP){var bO=0,bN=bP||[];if(bI.call(bQ)==="[object Array]"){Array.prototype.push.apply(bN,bQ)}else{if(typeof bQ.length==="number"){for(var e=bQ.length;bO<e;bO++){bN.push(bQ[bO])}}else{for(;bQ[bO];bO++){bN.push(bQ[bO])}}}return bN}}var bH,bD;if(at.documentElement.compareDocumentPosition){bH=function(bN,e){if(bN===e){bz=true;return 0}if(!bN.compareDocumentPosition||!e.compareDocumentPosition){return bN.compareDocumentPosition?-1:1}return bN.compareDocumentPosition(e)&4?-1:1}}else{bH=function(bU,bT){if(bU===bT){bz=true;return 0}else{if(bU.sourceIndex&&bT.sourceIndex){return bU.sourceIndex-bT.sourceIndex}}var bR,bN,bO=[],e=[],bQ=bU.parentNode,bS=bT.parentNode,bV=bQ;if(bQ===bS){return bD(bU,bT)}else{if(!bQ){return -1}else{if(!bS){return 1}}}while(bV){bO.unshift(bV);bV=bV.parentNode}bV=bS;while(bV){e.unshift(bV);bV=bV.parentNode}bR=bO.length;bN=e.length;for(var bP=0;bP<bR&&bP<bN;bP++){if(bO[bP]!==e[bP]){return bD(bO[bP],e[bP])}}return bP===bR?bD(bU,e[bP],-1):bD(bO[bP],bT,1)};bD=function(bN,e,bO){if(bN===e){return bO}var bP=bN.nextSibling;while(bP){if(bP===e){return -1}bP=bP.nextSibling}return 1}}bw.getText=function(e){var bN="",bP;for(var bO=0;e[bO];bO++){bP=e[bO];if(bP.nodeType===3||bP.nodeType===4){bN+=bP.nodeValue}else{if(bP.nodeType!==8){bN+=bw.getText(bP.childNodes)}}}return bN};(function(){var bN=at.createElement("div"),bO="script"+(new Date()).getTime(),e=at.documentElement;bN.innerHTML="<a name='"+bO+"'/>";e.insertBefore(bN,e.firstChild);if(at.getElementById(bO)){bB.find.ID=function(bQ,bR,bS){if(typeof bR.getElementById!=="undefined"&&!bS){var bP=bR.getElementById(bQ[1]);return bP?bP.id===bQ[1]||typeof bP.getAttributeNode!=="undefined"&&bP.getAttributeNode("id").nodeValue===bQ[1]?[bP]:M:[]}};bB.filter.ID=function(bR,bP){var bQ=typeof bR.getAttributeNode!=="undefined"&&bR.getAttributeNode("id");return bR.nodeType===1&&bQ&&bQ.nodeValue===bP}}e.removeChild(bN);e=bN=null})();(function(){var e=at.createElement("div");e.appendChild(at.createComment(""));if(e.getElementsByTagName("*").length>0){bB.find.TAG=function(bN,bR){var bQ=bR.getElementsByTagName(bN[1]);if(bN[1]==="*"){var bP=[];for(var bO=0;bQ[bO];bO++){if(bQ[bO].nodeType===1){bP.push(bQ[bO])}}bQ=bP}return bQ}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bB.attrHandle.href=function(bN){return bN.getAttribute("href",2)}}e=null})();if(at.querySelectorAll){(function(){var e=bw,bP=at.createElement("div"),bO="__sizzle__";bP.innerHTML="<p class='TEST'></p>";if(bP.querySelectorAll&&bP.querySelectorAll(".TEST").length===0){return}bw=function(b0,bR,bV,bZ){bR=bR||at;if(!bZ&&!bw.isXML(bR)){var bY=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b0);if(bY&&(bR.nodeType===1||bR.nodeType===9)){if(bY[1]){return bC(bR.getElementsByTagName(b0),bV)}else{if(bY[2]&&bB.find.CLASS&&bR.getElementsByClassName){return bC(bR.getElementsByClassName(bY[2]),bV)}}}if(bR.nodeType===9){if(b0==="body"&&bR.body){return bC([bR.body],bV)}else{if(bY&&bY[3]){var bU=bR.getElementById(bY[3]);if(bU&&bU.parentNode){if(bU.id===bY[3]){return bC([bU],bV)}}else{return bC([],bV)}}}try{return bC(bR.querySelectorAll(b0),bV)}catch(bW){}}else{if(bR.nodeType===1&&bR.nodeName.toLowerCase()!=="object"){var bS=bR,bT=bR.getAttribute("id"),bQ=bT||bO,b2=bR.parentNode,b1=/^\s*[+~]/.test(b0);if(!bT){bR.setAttribute("id",bQ)}else{bQ=bQ.replace(/'/g,"\\$&")}if(b1&&b2){bR=bR.parentNode}try{if(!b1||b2){return bC(bR.querySelectorAll("[id='"+bQ+"'] "+b0),bV)}}catch(bX){}finally{if(!bT){bS.removeAttribute("id")}}}}}return e(b0,bR,bV,bZ)};for(var bN in e){bw[bN]=e[bN]}bP=null})()}(function(){var e=at.documentElement,bO=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bO){var bQ=!bO.call(at.createElement("div"),"div"),bN=false;try{bO.call(at.documentElement,"[test!='']:sizzle")}catch(bP){bN=true}bw.matchesSelector=function(bS,bU){bU=bU.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bw.isXML(bS)){try{if(bN||!bB.match.PSEUDO.test(bU)&&!/!=/.test(bU)){var bR=bO.call(bS,bU);if(bR||!bQ||bS.document&&bS.document.nodeType!==11){return bR}}}catch(bT){}}return bw(bU,null,null,[bS]).length>0}}})();(function(){var e=at.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bB.order.splice(1,0,"CLASS");bB.find.CLASS=function(bN,bO,bP){if(typeof bO.getElementsByClassName!=="undefined"&&!bP){return bO.getElementsByClassName(bN[1])}};e=null})();function bu(bN,bS,bR,bV,bT,bU){for(var bP=0,bO=bV.length;bP<bO;bP++){var e=bV[bP];if(e){var bQ=false;e=e[bN];while(e){if(e.sizcache===bR){bQ=bV[e.sizset];break}if(e.nodeType===1&&!bU){e.sizcache=bR;e.sizset=bP}if(e.nodeName.toLowerCase()===bS){bQ=e;break}e=e[bN]}bV[bP]=bQ}}}function bK(bN,bS,bR,bV,bT,bU){for(var bP=0,bO=bV.length;bP<bO;bP++){var e=bV[bP];if(e){var bQ=false;e=e[bN];while(e){if(e.sizcache===bR){bQ=bV[e.sizset];break}if(e.nodeType===1){if(!bU){e.sizcache=bR;e.sizset=bP}if(typeof bS!=="string"){if(e===bS){bQ=true;break}}else{if(bw.filter(bS,[e]).length>0){bQ=e;break}}}e=e[bN]}bV[bP]=bQ}}}if(at.documentElement.contains){bw.contains=function(bN,e){return bN!==e&&(bN.contains?bN.contains(e):true)}}else{if(at.documentElement.compareDocumentPosition){bw.contains=function(bN,e){return !!(bN.compareDocumentPosition(e)&16)}}else{bw.contains=function(){return false}}}bw.isXML=function(e){var bN=(e?e.ownerDocument||e:0).documentElement;return bN?bN.nodeName!=="HTML":false};var bJ=function(e,bT){var bR,bP=[],bQ="",bO=bT.nodeType?[bT]:bT;while((bR=bB.match.PSEUDO.exec(e))){bQ+=bR[0];e=e.replace(bB.match.PSEUDO,"")}e=bB.relative[e]?e+"*":e;for(var bS=0,bN=bO.length;bS<bN;bS++){bw(e,bO[bS],bP)}return bw.filter(bQ,bP)};b.find=bw;b.expr=bw.selectors;b.expr[":"]=b.expr.filters;b.unique=bw.uniqueSort;b.text=bw.getText;b.isXMLDoc=bw.isXML;b.contains=bw.contains})();var aa=/Until$/,ao=/^(?:parents|prevUntil|prevAll)/,a9=/,/,bp=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,J=b.expr.match.POS,aw={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bv=this,bx,bu;if(typeof e!=="string"){return b(e).filter(function(){for(bx=0,bu=bv.length;bx<bu;bx++){if(b.contains(bv[bx],this)){return true}}})}var bw=this.pushStack("","find",e),bz,bA,by;for(bx=0,bu=this.length;bx<bu;bx++){bz=bw.length;b.find(e,this[bx],bw);if(bx>0){for(bA=bz;bA<bw.length;bA++){for(by=0;by<bz;by++){if(bw[by]===bw[bA]){bw.splice(bA--,1);break}}}}}return bw},has:function(bu){var e=b(bu);return this.filter(function(){for(var bw=0,bv=e.length;bw<bv;bw++){if(b.contains(this,e[bw])){return true}}})},not:function(e){return this.pushStack(aD(this,e,false),"not",e)},filter:function(e){return this.pushStack(aD(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bD,bu){var bA=[],bx,bv,bC=this[0];if(b.isArray(bD)){var bz,bw,by={},e=1;if(bC&&bD.length){for(bx=0,bv=bD.length;bx<bv;bx++){bw=bD[bx];if(!by[bw]){by[bw]=J.test(bw)?b(bw,bu||this.context):bw}}while(bC&&bC.ownerDocument&&bC!==bu){for(bw in by){bz=by[bw];if(bz.jquery?bz.index(bC)>-1:b(bC).is(bz)){bA.push({selector:bw,elem:bC,level:e})}}bC=bC.parentNode;e++}}return bA}var bB=J.test(bD)||typeof bD!=="string"?b(bD,bu||this.context):0;for(bx=0,bv=this.length;bx<bv;bx++){bC=this[bx];while(bC){if(bB?bB.index(bC)>-1:b.find.matchesSelector(bC,bD)){bA.push(bC);break}else{bC=bC.parentNode;if(!bC||!bC.ownerDocument||bC===bu||bC.nodeType===11){break}}}}bA=bA.length>1?b.unique(bA):bA;return this.pushStack(bA,"closest",bD)},index:function(e){if(!e||typeof e==="string"){return b.inArray(this[0],e?b(e):this.parent().children())}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,bu){var bw=typeof e==="string"?b(e,bu):b.makeArray(e&&e.nodeType?[e]:e),bv=b.merge(this.get(),bw);return this.pushStack(E(bw[0])||E(bv[0])?bv:b.unique(bv))},andSelf:function(){return this.add(this.prevObject)}});function E(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(bu){var e=bu.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(bu,e,bv){return b.dir(bu,"parentNode",bv)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(bu,e,bv){return b.dir(bu,"nextSibling",bv)},prevUntil:function(bu,e,bv){return b.dir(bu,"previousSibling",bv)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,bu){b.fn[e]=function(by,bv){var bx=b.map(this,bu,by),bw=R.call(arguments);if(!aa.test(e)){bv=by}if(bv&&typeof bv==="string"){bx=b.filter(bv,bx)}bx=this.length>1&&!aw[e]?b.unique(bx):bx;if((this.length>1||a9.test(bv))&&ao.test(e)){bx=bx.reverse()}return this.pushStack(bx,e,bw.join(","))}});b.extend({filter:function(bv,e,bu){if(bu){bv=":not("+bv+")"}return e.length===1?b.find.matchesSelector(e[0],bv)?[e[0]]:[]:b.find.matches(bv,e)},dir:function(bv,bu,bx){var e=[],bw=bv[bu];while(bw&&bw.nodeType!==9&&(bx===M||bw.nodeType!==1||!b(bw).is(bx))){if(bw.nodeType===1){e.push(bw)}bw=bw[bu]}return e},nth:function(bx,e,bv,bw){e=e||1;var bu=0;for(;bx;bx=bx[bv]){if(bx.nodeType===1&&++bu===e){break}}return bx},sibling:function(bv,bu){var e=[];for(;bv;bv=bv.nextSibling){if(bv.nodeType===1&&bv!==bu){e.push(bv)}}return e}});function aD(bw,bv,e){bv=bv||0;if(b.isFunction(bv)){return b.grep(bw,function(by,bx){var bz=!!bv.call(by,bx,by);return bz===e})}else{if(bv.nodeType){return b.grep(bw,function(by,bx){return(by===bv)===e})}else{if(typeof bv==="string"){var bu=b.grep(bw,function(bx){return bx.nodeType===1});if(bp.test(bv)){return b.filter(bv,bu,!e)}else{bv=b.filter(bv,bu)}}}}return b.grep(bw,function(by,bx){return(b.inArray(by,bv)>=0)===e})}var af=/ jQuery\d+="(?:\d+|null)"/g,ap=/^\s+/,U=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,y=/<tbody/i,X=/<|&#?\w+;/,Q=/<(?:script|object|embed|option|style)/i,o=/checked\s*(?:[^=]|=\s*.checked.)/i,bl=/\/(java|ecma)script/i,aL=/^\s*<!(?:\[CDATA\[|\-\-)/,av={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};av.optgroup=av.option;av.tbody=av.tfoot=av.colgroup=av.caption=av.thead;av.th=av.td;if(!b.support.htmlSerialize){av._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bv){var bu=b(this);bu.text(e.call(this,bv,bu.text()))})}if(typeof e!=="object"&&e!==M){return this.empty().append((this[0]&&this[0].ownerDocument||at).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bv){b(this).wrapAll(e.call(this,bv))})}if(this[0]){var bu=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bu.insertBefore(this[0])}bu.map(function(){var bv=this;while(bv.firstChild&&bv.firstChild.nodeType===1){bv=bv.firstChild}return bv}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bu){b(this).wrapInner(e.call(this,bu))})}return this.each(function(){var bu=b(this),bv=bu.contents();if(bv.length){bv.wrapAll(e)}else{bu.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bu){this.parentNode.insertBefore(bu,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bu){this.parentNode.insertBefore(bu,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bw){for(var bu=0,bv;(bv=this[bu])!=null;bu++){if(!e||b.filter(e,[bv]).length){if(!bw&&bv.nodeType===1){b.cleanData(bv.getElementsByTagName("*"));b.cleanData([bv])}if(bv.parentNode){bv.parentNode.removeChild(bv)}}}return this},empty:function(){for(var e=0,bu;(bu=this[e])!=null;e++){if(bu.nodeType===1){b.cleanData(bu.getElementsByTagName("*"))}while(bu.firstChild){bu.removeChild(bu.firstChild)}}return this},clone:function(bu,e){bu=bu==null?false:bu;e=e==null?bu:e;return this.map(function(){return b.clone(this,bu,e)})},html:function(bw){if(bw===M){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(af,""):null}else{if(typeof bw==="string"&&!Q.test(bw)&&(b.support.leadingWhitespace||!ap.test(bw))&&!av[(d.exec(bw)||["",""])[1].toLowerCase()]){bw=bw.replace(U,"<$1></$2>");try{for(var bv=0,bu=this.length;bv<bu;bv++){if(this[bv].nodeType===1){b.cleanData(this[bv].getElementsByTagName("*"));this[bv].innerHTML=bw}}}catch(bx){this.empty().append(bw)}}else{if(b.isFunction(bw)){this.each(function(by){var e=b(this);e.html(bw.call(this,by,e.html()))})}else{this.empty().append(bw)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bw){var bv=b(this),bu=bv.html();bv.replaceWith(e.call(this,bw,bu))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bv=this.nextSibling,bu=this.parentNode;b(this).remove();if(bv){b(bv).before(e)}else{b(bu).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bA,bE,bD){var bw,bx,bz,bC,bB=bA[0],bu=[];if(!b.support.checkClone&&arguments.length===3&&typeof bB==="string"&&o.test(bB)){return this.each(function(){b(this).domManip(bA,bE,bD,true)})}if(b.isFunction(bB)){return this.each(function(bG){var bF=b(this);bA[0]=bB.call(this,bG,bE?bF.html():M);bF.domManip(bA,bE,bD)})}if(this[0]){bC=bB&&bB.parentNode;if(b.support.parentNode&&bC&&bC.nodeType===11&&bC.childNodes.length===this.length){bw={fragment:bC}}else{bw=b.buildFragment(bA,this,bu)}bz=bw.fragment;if(bz.childNodes.length===1){bx=bz=bz.firstChild}else{bx=bz.firstChild}if(bx){bE=bE&&b.nodeName(bx,"tr");for(var bv=0,e=this.length,by=e-1;bv<e;bv++){bD.call(bE?ba(this[bv],bx):this[bv],bw.cacheable||(e>1&&bv<by)?b.clone(bz,true,true):bz)}}if(bu.length){b.each(bu,bo)}}return this}});function ba(e,bu){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function v(e,bA){if(bA.nodeType!==1||!b.hasData(e)){return}var bz=b.expando,bw=b.data(e),bx=b.data(bA,bw);if((bw=bw[bz])){var bB=bw.events;bx=bx[bz]=b.extend({},bw);if(bB){delete bx.handle;bx.events={};for(var by in bB){for(var bv=0,bu=bB[by].length;bv<bu;bv++){b.event.add(bA,by+(bB[by][bv].namespace?".":"")+bB[by][bv].namespace,bB[by][bv],bB[by][bv].data)}}}}}function ag(bu,e){var bv;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bu)}bv=e.nodeName.toLowerCase();if(bv==="object"){e.outerHTML=bu.outerHTML}else{if(bv==="input"&&(bu.type==="checkbox"||bu.type==="radio")){if(bu.checked){e.defaultChecked=e.checked=bu.checked}if(e.value!==bu.value){e.value=bu.value}}else{if(bv==="option"){e.selected=bu.defaultSelected}else{if(bv==="input"||bv==="textarea"){e.defaultValue=bu.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(by,bw,bu){var bx,e,bv,bz;if(bw&&bw[0]){bz=bw[0].ownerDocument||bw[0]}if(!bz.createDocumentFragment){bz=at}if(by.length===1&&typeof by[0]==="string"&&by[0].length<512&&bz===at&&by[0].charAt(0)==="<"&&!Q.test(by[0])&&(b.support.checkClone||!o.test(by[0]))){e=true;bv=b.fragments[by[0]];if(bv&&bv!==1){bx=bv}}if(!bx){bx=bz.createDocumentFragment();b.clean(by,bz,bx,bu)}if(e){b.fragments[by[0]]=bv?bx:1}return{fragment:bx,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bu){b.fn[e]=function(bv){var by=[],bB=b(bv),bA=this.length===1&&this[0].parentNode;if(bA&&bA.nodeType===11&&bA.childNodes.length===1&&bB.length===1){bB[bu](this[0]);return this}else{for(var bz=0,bw=bB.length;bz<bw;bz++){var bx=(bz>0?this.clone(true):this).get();b(bB[bz])[bu](bx);by=by.concat(bx)}return this.pushStack(by,e,bB.selector)}}});function be(e){if("getElementsByTagName" in e){return e.getElementsByTagName("*")}else{if("querySelectorAll" in e){return e.querySelectorAll("*")}else{return[]}}}function ax(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function G(e){if(b.nodeName(e,"input")){ax(e)}else{if("getElementsByTagName" in e){b.grep(e.getElementsByTagName("input"),ax)}}}b.extend({clone:function(bx,bz,bv){var by=bx.cloneNode(true),e,bu,bw;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bx.nodeType===1||bx.nodeType===11)&&!b.isXMLDoc(bx)){ag(bx,by);e=be(bx);bu=be(by);for(bw=0;e[bw];++bw){ag(e[bw],bu[bw])}}if(bz){v(bx,by);if(bv){e=be(bx);bu=be(by);for(bw=0;e[bw];++bw){v(e[bw],bu[bw])}}}e=bu=null;return by},clean:function(bv,bx,bG,bz){var bE;bx=bx||at;if(typeof bx.createElement==="undefined"){bx=bx.ownerDocument||bx[0]&&bx[0].ownerDocument||at}var bH=[],bA;for(var bD=0,by;(by=bv[bD])!=null;bD++){if(typeof by==="number"){by+=""}if(!by){continue}if(typeof by==="string"){if(!X.test(by)){by=bx.createTextNode(by)}else{by=by.replace(U,"<$1></$2>");var bJ=(d.exec(by)||["",""])[1].toLowerCase(),bw=av[bJ]||av._default,bC=bw[0],bu=bx.createElement("div");bu.innerHTML=bw[1]+by+bw[2];while(bC--){bu=bu.lastChild}if(!b.support.tbody){var e=y.test(by),bB=bJ==="table"&&!e?bu.firstChild&&bu.firstChild.childNodes:bw[1]==="<table>"&&!e?bu.childNodes:[];for(bA=bB.length-1;bA>=0;--bA){if(b.nodeName(bB[bA],"tbody")&&!bB[bA].childNodes.length){bB[bA].parentNode.removeChild(bB[bA])}}}if(!b.support.leadingWhitespace&&ap.test(by)){bu.insertBefore(bx.createTextNode(ap.exec(by)[0]),bu.firstChild)}by=bu.childNodes}}var bF;if(!b.support.appendChecked){if(by[0]&&typeof(bF=by.length)==="number"){for(bA=0;bA<bF;bA++){G(by[bA])}}else{G(by)}}if(by.nodeType){bH.push(by)}else{bH=b.merge(bH,by)}}if(bG){bE=function(bK){return !bK.type||bl.test(bK.type)};for(bD=0;bH[bD];bD++){if(bz&&b.nodeName(bH[bD],"script")&&(!bH[bD].type||bH[bD].type.toLowerCase()==="text/javascript")){bz.push(bH[bD].parentNode?bH[bD].parentNode.removeChild(bH[bD]):bH[bD])}else{if(bH[bD].nodeType===1){var bI=b.grep(bH[bD].getElementsByTagName("script"),bE);bH.splice.apply(bH,[bD+1,0].concat(bI))}bG.appendChild(bH[bD])}}}return bH},cleanData:function(bu){var bx,bv,e=b.cache,bC=b.expando,bA=b.event.special,bz=b.support.deleteExpando;for(var by=0,bw;(bw=bu[by])!=null;by++){if(bw.nodeName&&b.noData[bw.nodeName.toLowerCase()]){continue}bv=bw[b.expando];if(bv){bx=e[bv]&&e[bv][bC];if(bx&&bx.events){for(var bB in bx.events){if(bA[bB]){b.event.remove(bw,bB)}else{b.removeEvent(bw,bB,bx.handle)}}if(bx.handle){bx.handle.elem=null}}if(bz){delete bw[b.expando]}else{if(bw.removeAttribute){bw.removeAttribute(b.expando)}}delete e[bv]}}}});function bo(e,bu){if(bu.src){b.ajax({url:bu.src,async:false,dataType:"script"})}else{b.globalEval((bu.text||bu.textContent||bu.innerHTML||"").replace(aL,"/*$0*/"))}if(bu.parentNode){bu.parentNode.removeChild(bu)}}var aj=/alpha\([^)]*\)/i,ar=/opacity=([^)]*)/,B=/([A-Z]|^ms)/g,bc=/^-?\d+(?:px)?$/i,bn=/^-?\d/,K=/^[+\-]=/,ai=/[^+\-\.\de]+/g,a6={position:"absolute",visibility:"hidden",display:"block"},al=["Left","Right"],a0=["Top","Bottom"],Y,aG,aU;b.fn.css=function(e,bu){if(arguments.length===2&&bu===M){return this}return b.access(this,e,bu,true,function(bw,bv,bx){return bx!==M?b.style(bw,bv,bx):b.css(bw,bv)})};b.extend({cssHooks:{opacity:{get:function(bv,bu){if(bu){var e=Y(bv,"opacity","opacity");return e===""?"1":e}else{return bv.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bw,bv,bC,bx){if(!bw||bw.nodeType===3||bw.nodeType===8||!bw.style){return}var bA,bB,by=b.camelCase(bv),bu=bw.style,bD=b.cssHooks[by];bv=b.cssProps[by]||by;if(bC!==M){bB=typeof bC;if(bB==="number"&&isNaN(bC)||bC==null){return}if(bB==="string"&&K.test(bC)){bC=+bC.replace(ai,"")+parseFloat(b.css(bw,bv));bB="number"}if(bB==="number"&&!b.cssNumber[by]){bC+="px"}if(!bD||!("set" in bD)||(bC=bD.set(bw,bC))!==M){try{bu[bv]=bC}catch(bz){}}}else{if(bD&&"get" in bD&&(bA=bD.get(bw,false,bx))!==M){return bA}return bu[bv]}},css:function(bx,bw,bu){var bv,e;bw=b.camelCase(bw);e=b.cssHooks[bw];bw=b.cssProps[bw]||bw;if(bw==="cssFloat"){bw="float"}if(e&&"get" in e&&(bv=e.get(bx,true,bu))!==M){return bv}else{if(Y){return Y(bx,bw)}}},swap:function(bw,bv,bx){var e={};for(var bu in bv){e[bu]=bw.style[bu];bw.style[bu]=bv[bu]}bx.call(bw);for(bu in bv){bw.style[bu]=e[bu]}}});b.curCSS=b.css;b.each(["height","width"],function(bu,e){b.cssHooks[e]={get:function(bx,bw,bv){var by;if(bw){if(bx.offsetWidth!==0){return p(bx,e,bv)}else{b.swap(bx,a6,function(){by=p(bx,e,bv)})}return by}},set:function(bv,bw){if(bc.test(bw)){bw=parseFloat(bw);if(bw>=0){return bw+"px"}}else{return bw}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bu,e){return ar.test((e&&bu.currentStyle?bu.currentStyle.filter:bu.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bx,by){var bw=bx.style,bu=bx.currentStyle;bw.zoom=1;var e=b.isNaN(by)?"":"alpha(opacity="+by*100+")",bv=bu&&bu.filter||bw.filter||"";bw.filter=aj.test(bv)?bv.replace(aj,e):bv+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bv,bu){var e;b.swap(bv,{display:"inline-block"},function(){if(bu){e=Y(bv,"margin-right","marginRight")}else{e=bv.style.marginRight}});return e}}}});if(at.defaultView&&at.defaultView.getComputedStyle){aG=function(bx,bv){var bu,bw,e;bv=bv.replace(B,"-$1").toLowerCase();if(!(bw=bx.ownerDocument.defaultView)){return M}if((e=bw.getComputedStyle(bx,null))){bu=e.getPropertyValue(bv);if(bu===""&&!b.contains(bx.ownerDocument.documentElement,bx)){bu=b.style(bx,bv)}}return bu}}if(at.documentElement.currentStyle){aU=function(bx,bv){var by,bu=bx.currentStyle&&bx.currentStyle[bv],e=bx.runtimeStyle&&bx.runtimeStyle[bv],bw=bx.style;if(!bc.test(bu)&&bn.test(bu)){by=bw.left;if(e){bx.runtimeStyle.left=bx.currentStyle.left}bw.left=bv==="fontSize"?"1em":(bu||0);bu=bw.pixelLeft+"px";bw.left=by;if(e){bx.runtimeStyle.left=e}}return bu===""?"auto":bu}}Y=aG||aU;function p(bv,bu,e){var bx=bu==="width"?bv.offsetWidth:bv.offsetHeight,bw=bu==="width"?al:a0;if(bx>0){if(e!=="border"){b.each(bw,function(){if(!e){bx-=parseFloat(b.css(bv,"padding"+this))||0}if(e==="margin"){bx+=parseFloat(b.css(bv,e+this))||0}else{bx-=parseFloat(b.css(bv,"border"+this+"Width"))||0}})}return bx+"px"}bx=Y(bv,bu,bu);if(bx<0||bx==null){bx=bv.style[bu]||0}bx=parseFloat(bx)||0;if(e){b.each(bw,function(){bx+=parseFloat(b.css(bv,"padding"+this))||0;if(e!=="padding"){bx+=parseFloat(b.css(bv,"border"+this+"Width"))||0}if(e==="margin"){bx+=parseFloat(b.css(bv,e+this))||0}})}return bx+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bv){var bu=bv.offsetWidth,e=bv.offsetHeight;return(bu===0&&e===0)||(!b.support.reliableHiddenOffsets&&(bv.style.display||b.css(bv,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var k=/%20/g,an=/\[\]$/,bs=/\r?\n/g,bq=/#.*$/,aB=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aX=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aK=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,aN=/^(?:GET|HEAD)$/,c=/^\/\//,N=/\?/,a5=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,r=/^(?:select|textarea)/i,h=/\s+/,br=/([?&])_=[^&]*/,L=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,C=b.fn.load,Z={},s={},aC,u;try{aC=bk.href}catch(au){aC=at.createElement("a");aC.href="";aC=aC.href}u=L.exec(aC.toLowerCase())||[];function f(e){return function(bx,bz){if(typeof bx!=="string"){bz=bx;bx="*"}if(b.isFunction(bz)){var bw=bx.toLowerCase().split(h),bv=0,by=bw.length,bu,bA,bB;for(;bv<by;bv++){bu=bw[bv];bB=/^\+/.test(bu);if(bB){bu=bu.substr(1)||"*"}bA=e[bu]=e[bu]||[];bA[bB?"unshift":"push"](bz)}}}}function aS(bu,bD,by,bC,bA,bw){bA=bA||bD.dataTypes[0];bw=bw||{};bw[bA]=true;var bz=bu[bA],bv=0,e=bz?bz.length:0,bx=(bu===Z),bB;for(;bv<e&&(bx||!bB);bv++){bB=bz[bv](bD,by,bC);if(typeof bB==="string"){if(!bx||bw[bB]){bB=M}else{bD.dataTypes.unshift(bB);bB=aS(bu,bD,by,bC,bB,bw)}}}if((bx||!bB)&&!bw["*"]){bB=aS(bu,bD,by,bC,"*",bw)}return bB}b.fn.extend({load:function(bv,by,bz){if(typeof bv!=="string"&&C){return C.apply(this,arguments)}else{if(!this.length){return this}}var bx=bv.indexOf(" ");if(bx>=0){var e=bv.slice(bx,bv.length);bv=bv.slice(0,bx)}var bw="GET";if(by){if(b.isFunction(by)){bz=by;by=M}else{if(typeof by==="object"){by=b.param(by,b.ajaxSettings.traditional);bw="POST"}}}var bu=this;b.ajax({url:bv,type:bw,dataType:"html",data:by,complete:function(bB,bA,bC){bC=bB.responseText;if(bB.isResolved()){bB.done(function(bD){bC=bD});bu.html(e?b("<div>").append(bC.replace(a5,"")).find(e):bC)}if(bz){bu.each(bz,[bC,bA,bB])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||r.test(this.nodeName)||aX.test(this.type))}).map(function(e,bu){var bv=b(this).val();return bv==null?null:b.isArray(bv)?b.map(bv,function(bx,bw){return{name:bu.name,value:bx.replace(bs,"\r\n")}}):{name:bu.name,value:bv.replace(bs,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bu){b.fn[bu]=function(bv){return this.bind(bu,bv)}});b.each(["get","post"],function(e,bu){b[bu]=function(bv,bx,by,bw){if(b.isFunction(bx)){bw=bw||by;by=bx;bx=M}return b.ajax({type:bu,url:bv,data:bx,success:by,dataType:bw})}});b.extend({getScript:function(e,bu){return b.get(e,M,bu,"script")},getJSON:function(e,bu,bv){return b.get(e,bu,bv,"json")},ajaxSetup:function(bv,e){if(!e){e=bv;bv=b.extend(true,b.ajaxSettings,e)}else{b.extend(true,bv,b.ajaxSettings,e)}for(var bu in {context:1,url:1}){if(bu in e){bv[bu]=e[bu]}else{if(bu in b.ajaxSettings){bv[bu]=b.ajaxSettings[bu]}}}return bv},ajaxSettings:{url:aC,isLocal:aK.test(u[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bb.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML}},ajaxPrefilter:f(Z),ajaxTransport:f(s),ajax:function(by,bw){if(typeof by==="object"){bw=by;by=M}bw=bw||{};var bC=b.ajaxSetup({},bw),bR=bC.context||bC,bF=bR!==bC&&(bR.nodeType||bR instanceof b)?b(bR):b.event,bQ=b.Deferred(),bM=b._Deferred(),bA=bC.statusCode||{},bB,bG={},bN={},bP,bx,bK,bD,bH,bz=0,bv,bJ,bI={readyState:0,setRequestHeader:function(bS,bT){if(!bz){var e=bS.toLowerCase();bS=bN[e]=bN[e]||bS;bG[bS]=bT}return this},getAllResponseHeaders:function(){return bz===2?bP:null},getResponseHeader:function(bS){var e;if(bz===2){if(!bx){bx={};while((e=aB.exec(bP))){bx[e[1].toLowerCase()]=e[2]}}e=bx[bS.toLowerCase()]}return e===M?null:e},overrideMimeType:function(e){if(!bz){bC.mimeType=e}return this},abort:function(e){e=e||"abort";if(bK){bK.abort(e)}bE(0,e);return this}};function bE(bY,bV,bZ,bU){if(bz===2){return}bz=2;if(bD){clearTimeout(bD)}bK=M;bP=bU||"";bI.readyState=bY?4:0;var bS,b3,b2,bX=bZ?bi(bC,bI,bZ):M,bT,b1;if(bY>=200&&bY<300||bY===304){if(bC.ifModified){if((bT=bI.getResponseHeader("Last-Modified"))){b.lastModified[bB]=bT}if((b1=bI.getResponseHeader("Etag"))){b.etag[bB]=b1}}if(bY===304){bV="notmodified";bS=true}else{try{b3=H(bC,bX);bV="success";bS=true}catch(b0){bV="parsererror";b2=b0}}}else{b2=bV;if(!bV||bY){bV="error";if(bY<0){bY=0}}}bI.status=bY;bI.statusText=bV;if(bS){try{bQ.resolveWith(bR,new Array(b3,bV,bI))}catch(bW){}}else{bQ.rejectWith(bR,new Array(bI,bV,b2))}bI.statusCode(bA);bA=M;if(bv){bF.trigger("ajax"+(bS?"Success":"Error"),[bI,bC,bS?b3:b2])}bM.resolveWith(bR,[bI,bV]);if(bv){bF.trigger("ajaxComplete",[bI,bC]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bQ.promise(bI);bI.success=bI.done;bI.error=bI.fail;bI.complete=bM.done;bI.statusCode=function(bS){if(bS){var e;if(bz<2){for(e in bS){bA[e]=[bA[e],bS[e]]}}else{e=bS[bI.status];bI.then(e,e)}}return this};bC.url=((by||bC.url)+"").replace(bq,"").replace(c,u[1]+"//");bC.dataTypes=b.trim(bC.dataType||"*").toLowerCase().split(h);if(bC.crossDomain==null){bH=L.exec(bC.url.toLowerCase());bC.crossDomain=!!(bH&&(bH[1]!=u[1]||bH[2]!=u[2]||(bH[3]||(bH[1]==="http:"?80:443))!=(u[3]||(u[1]==="http:"?80:443))))}if(bC.data&&bC.processData&&typeof bC.data!=="string"){bC.data=b.param(bC.data,bC.traditional)}aS(Z,bC,bw,bI);if(bz===2){return false}bv=bC.global;bC.type=bC.type.toUpperCase();bC.hasContent=!aN.test(bC.type);if(bv&&b.active++===0){b.event.trigger("ajaxStart")}if(!bC.hasContent){if(bC.data){bC.url+=(N.test(bC.url)?"&":"?")+bC.data}bB=bC.url;if(bC.cache===false){var bu=b.now(),bO=bC.url.replace(br,"$1_="+bu);bC.url=bO+((bO===bC.url)?(N.test(bC.url)?"&":"?")+"_="+bu:"")}}if(bC.data&&bC.hasContent&&bC.contentType!==false||bw.contentType){bI.setRequestHeader("Content-Type",bC.contentType)}if(bC.ifModified){bB=bB||bC.url;if(b.lastModified[bB]){bI.setRequestHeader("If-Modified-Since",b.lastModified[bB])}if(b.etag[bB]){bI.setRequestHeader("If-None-Match",b.etag[bB])}}bI.setRequestHeader("Accept",bC.dataTypes[0]&&bC.accepts[bC.dataTypes[0]]?bC.accepts[bC.dataTypes[0]]+(bC.dataTypes[0]!=="*"?", */*; q=0.01":""):bC.accepts["*"]);for(bJ in bC.headers){bI.setRequestHeader(bJ,bC.headers[bJ])}if(bC.beforeSend&&(bC.beforeSend.call(bR,bI,bC)===false||bz===2)){bI.abort();return false}for(bJ in {success:1,error:1,complete:1}){bI[bJ](bC[bJ])}bK=aS(s,bC,bw,bI);if(!bK){bE(-1,"No Transport")}else{bI.readyState=1;if(bv){bF.trigger("ajaxSend",[bI,bC])}if(bC.async&&bC.timeout>0){bD=setTimeout(function(){bI.abort("timeout")},bC.timeout)}try{bz=1;bK.send(bG,bE)}catch(bL){if(status<2){bE(-1,bL)}else{b.error(bL)}}}return bI},param:function(e,bv){var bu=[],bx=function(by,bz){bz=b.isFunction(bz)?bz():bz;bu[bu.length]=encodeURIComponent(by)+"="+encodeURIComponent(bz)};if(bv===M){bv=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bx(this.name,this.value)})}else{for(var bw in e){x(bw,e[bw],bv,bx)}}return bu.join("&").replace(k,"+")}});function x(bv,bx,bu,bw){if(b.isArray(bx)){b.each(bx,function(bz,by){if(bu||an.test(bv)){bw(bv,by)}else{x(bv+"["+(typeof by==="object"||b.isArray(by)?bz:"")+"]",by,bu,bw)}})}else{if(!bu&&bx!=null&&typeof bx==="object"){for(var e in bx){x(bv+"["+e+"]",bx[e],bu,bw)}}else{bw(bv,bx)}}}b.extend({active:0,lastModified:{},etag:{}});function bi(bC,bB,by){var bu=bC.contents,bA=bC.dataTypes,bv=bC.responseFields,bx,bz,bw,e;for(bz in bv){if(bz in by){bB[bv[bz]]=by[bz]}}while(bA[0]==="*"){bA.shift();if(bx===M){bx=bC.mimeType||bB.getResponseHeader("content-type")}}if(bx){for(bz in bu){if(bu[bz]&&bu[bz].test(bx)){bA.unshift(bz);break}}}if(bA[0] in by){bw=bA[0]}else{for(bz in by){if(!bA[0]||bC.converters[bz+" "+bA[0]]){bw=bz;break}if(!e){e=bz}}bw=bw||e}if(bw){if(bw!==bA[0]){bA.unshift(bw)}return by[bw]}}function H(bG,by){if(bG.dataFilter){by=bG.dataFilter(by,bG.dataType)}var bC=bG.dataTypes,bF={},bz,bD,bv=bC.length,bA,bB=bC[0],bw,bx,bE,bu,e;for(bz=1;bz<bv;bz++){if(bz===1){for(bD in bG.converters){if(typeof bD==="string"){bF[bD.toLowerCase()]=bG.converters[bD]}}}bw=bB;bB=bC[bz];if(bB==="*"){bB=bw}else{if(bw!=="*"&&bw!==bB){bx=bw+" "+bB;bE=bF[bx]||bF["* "+bB];if(!bE){e=M;for(bu in bF){bA=bu.split(" ");if(bA[0]===bw||bA[0]==="*"){e=bF[bA[1]+" "+bB];if(e){bu=bF[bu];if(bu===true){bE=e}else{if(e===true){bE=bu}}break}}}}if(!(bE||e)){b.error("No conversion from "+bx.replace(" "," to "))}if(bE!==true){by=bE?bE(by):e(bu(by))}}}}return by}var aA=b.now(),w=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aA++)}});b.ajaxPrefilter("json jsonp",function(bC,bz,bB){var bw=bC.contentType==="application/x-www-form-urlencoded"&&(typeof bC.data==="string");if(bC.dataTypes[0]==="jsonp"||bC.jsonp!==false&&(w.test(bC.url)||bw&&w.test(bC.data))){var bA,bv=bC.jsonpCallback=b.isFunction(bC.jsonpCallback)?bC.jsonpCallback():bC.jsonpCallback,by=bb[bv],e=bC.url,bx=bC.data,bu="$1"+bv+"$2";if(bC.jsonp!==false){e=e.replace(w,bu);if(bC.url===e){if(bw){bx=bx.replace(w,bu)}if(bC.data===bx){e+=(/\?/.test(e)?"&":"?")+bC.jsonp+"="+bv}}}bC.url=e;bC.data=bx;bb[bv]=function(bD){bA=[bD]};bB.always(function(){bb[bv]=by;if(bA&&b.isFunction(by)){bb[bv](bA[0])}});bC.converters["script json"]=function(){if(!bA){b.error(bv+" was not called")}return bA[0]};bC.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===M){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bv){if(bv.crossDomain){var e,bu=at.head||at.getElementsByTagName("head")[0]||at.documentElement;return{send:function(bw,bx){e=at.createElement("script");e.async="async";if(bv.scriptCharset){e.charset=bv.scriptCharset}e.src=bv.url;e.onload=e.onreadystatechange=function(bz,by){if(by||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bu&&e.parentNode){bu.removeChild(e)}e=M;if(!by){bx(200,"success")}}};bu.insertBefore(e,bu.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var D=bb.ActiveXObject?function(){for(var e in O){O[e](0,1)}}:false,A=0,O;function aJ(){try{return new bb.XMLHttpRequest()}catch(bu){}}function ah(){try{return new bb.ActiveXObject("Microsoft.XMLHTTP")}catch(bu){}}b.ajaxSettings.xhr=bb.ActiveXObject?function(){return !this.isLocal&&aJ()||ah()}:aJ;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bu;return{send:function(bA,bv){var bz=e.xhr(),by,bx;if(e.username){bz.open(e.type,e.url,e.async,e.username,e.password)}else{bz.open(e.type,e.url,e.async)}if(e.xhrFields){for(bx in e.xhrFields){bz[bx]=e.xhrFields[bx]}}if(e.mimeType&&bz.overrideMimeType){bz.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bA["X-Requested-With"]){bA["X-Requested-With"]="XMLHttpRequest"}try{for(bx in bA){bz.setRequestHeader(bx,bA[bx])}}catch(bw){}bz.send((e.hasContent&&e.data)||null);bu=function(bJ,bD){var bE,bC,bB,bH,bG;try{if(bu&&(bD||bz.readyState===4)){bu=M;if(by){bz.onreadystatechange=b.noop;if(D){delete O[by]}}if(bD){if(bz.readyState!==4){bz.abort()}}else{bE=bz.status;bB=bz.getAllResponseHeaders();bH={};bG=bz.responseXML;if(bG&&bG.documentElement){bH.xml=bG}bH.text=bz.responseText;try{bC=bz.statusText}catch(bI){bC=""}if(!bE&&e.isLocal&&!e.crossDomain){bE=bH.text?200:404}else{if(bE===1223){bE=204}}}}}catch(bF){if(!bD){bv(-1,bF)}}if(bH){bv(bE,bC,bH,bB)}};if(!e.async||bz.readyState===4){bu()}else{by=++A;if(D){if(!O){O={};b(bb).unload(D)}O[by]=bu}bz.onreadystatechange=bu}},abort:function(){if(bu){bu(0,1)}}}}})}var S={},a8,n,az=/^(?:toggle|show|hide)$/,aP=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a1,aF=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a3,T=bb.webkitRequestAnimationFrame||bb.mozRequestAnimationFrame||bb.oRequestAnimationFrame;b.fn.extend({show:function(bw,bz,by){var bv,bx;if(bw||bw===0){return this.animate(aZ("show",3),bw,bz,by)}else{for(var bu=0,e=this.length;bu<e;bu++){bv=this[bu];if(bv.style){bx=bv.style.display;if(!b._data(bv,"olddisplay")&&bx==="none"){bx=bv.style.display=""}if(bx===""&&b.css(bv,"display")==="none"){b._data(bv,"olddisplay",z(bv.nodeName))}}}for(bu=0;bu<e;bu++){bv=this[bu];if(bv.style){bx=bv.style.display;if(bx===""||bx==="none"){bv.style.display=b._data(bv,"olddisplay")||""}}}return this}},hide:function(bv,by,bx){if(bv||bv===0){return this.animate(aZ("hide",3),bv,by,bx)}else{for(var bu=0,e=this.length;bu<e;bu++){if(this[bu].style){var bw=b.css(this[bu],"display");if(bw!=="none"&&!b._data(this[bu],"olddisplay")){b._data(this[bu],"olddisplay",bw)}}}for(bu=0;bu<e;bu++){if(this[bu].style){this[bu].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bv,bu,bw){var e=typeof bv==="boolean";if(b.isFunction(bv)&&b.isFunction(bu)){this._toggle.apply(this,arguments)}else{if(bv==null||e){this.each(function(){var bx=e?bv:b(this).is(":hidden");b(this)[bx?"show":"hide"]()})}else{this.animate(aZ("toggle",3),bv,bu,bw)}}return this},fadeTo:function(e,bw,bv,bu){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bw},e,bv,bu)},animate:function(bx,bu,bw,bv){var e=b.speed(bu,bw,bv);if(b.isEmptyObject(bx)){return this.each(e.complete,[false])}bx=b.extend({},bx);return this[e.queue===false?"each":"queue"](function(){if(e.queue===false){b._mark(this)}var bB=b.extend({},e),bI=this.nodeType===1,bF=bI&&b(this).is(":hidden"),by,bC,bA,bH,bG,bE,bz,bD,bJ;bB.animatedProperties={};for(bA in bx){by=b.camelCase(bA);if(bA!==by){bx[by]=bx[bA];delete bx[bA]}bC=bx[by];if(b.isArray(bC)){bB.animatedProperties[by]=bC[1];bC=bx[by]=bC[0]}else{bB.animatedProperties[by]=bB.specialEasing&&bB.specialEasing[by]||bB.easing||"swing"}if(bC==="hide"&&bF||bC==="show"&&!bF){return bB.complete.call(this)}if(bI&&(by==="height"||by==="width")){bB.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bH=z(this.nodeName);if(bH==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(bB.overflow!=null){this.style.overflow="hidden"}for(bA in bx){bG=new b.fx(this,bB,bA);bC=bx[bA];if(az.test(bC)){bG[bC==="toggle"?bF?"show":"hide":bC]()}else{bE=aP.exec(bC);bz=bG.cur();if(bE){bD=parseFloat(bE[2]);bJ=bE[3]||(b.cssNumber[bA]?"":"px");if(bJ!=="px"){b.style(this,bA,(bD||1)+bJ);bz=((bD||1)/bG.cur())*bz;b.style(this,bA,bz+bJ)}if(bE[1]){bD=((bE[1]==="-="?-1:1)*bD)+bz}bG.custom(bz,bD,bJ)}else{bG.custom(bz,bC,"")}}}return true})},stop:function(bu,e){if(bu){this.queue([])}this.each(function(){var bw=b.timers,bv=bw.length;if(!e){b._unmark(true,this)}while(bv--){if(bw[bv].elem===this){if(e){bw[bv](true)}bw.splice(bv,1)}}});if(!e){this.dequeue()}return this}});function bf(){setTimeout(aq,0);return(a3=b.now())}function aq(){a3=M}function aZ(bu,e){var bv={};b.each(aF.concat.apply([],aF.slice(0,e)),function(){bv[this]=bu});return bv}b.each({slideDown:aZ("show",1),slideUp:aZ("hide",1),slideToggle:aZ("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bu){b.fn[e]=function(bv,bx,bw){return this.animate(bu,bv,bx,bw)}});b.extend({speed:function(bv,bw,bu){var e=bv&&typeof bv==="object"?b.extend({},bv):{complete:bu||!bu&&bw||b.isFunction(bv)&&bv,duration:bv,easing:bu&&bw||bw&&!b.isFunction(bw)&&bw};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;e.old=e.complete;e.complete=function(bx){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue!==false){b.dequeue(this)}else{if(bx!==false){b._unmark(this)}}};return e},easing:{linear:function(bv,bw,e,bu){return e+bu*bv},swing:function(bv,bw,e,bu){return((-Math.cos(bv*Math.PI)/2)+0.5)*bu+e}},timers:[],fx:function(bu,e,bv){this.options=e;this.elem=bu;this.prop=bv;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,bu=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bu))?!bu||bu==="auto"?0:bu:e},custom:function(bz,by,bw){var e=this,bv=b.fx,bx;this.startTime=a3||bf();this.start=bz;this.end=by;this.unit=bw||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function bu(bA){return e.step(bA)}bu.elem=this.elem;if(bu()&&b.timers.push(bu)&&!a1){if(T){a1=true;bx=function(){if(a1){T(bx);bv.tick()}};T(bx)}else{a1=setInterval(bv.tick,bv.interval)}}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bx){var bw=a3||bf(),e=true,by=this.elem,bu=this.options,bv,bA;if(bx||bw>=bu.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bu.animatedProperties[this.prop]=true;for(bv in bu.animatedProperties){if(bu.animatedProperties[bv]!==true){e=false}}if(e){if(bu.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bB,bC){by.style["overflow"+bC]=bu.overflow[bB]})}if(bu.hide){b(by).hide()}if(bu.hide||bu.show){for(var bz in bu.animatedProperties){b.style(by,bz,bu.orig[bz])}}bu.complete.call(by)}return false}else{if(bu.duration==Infinity){this.now=bw}else{bA=bw-this.startTime;this.state=bA/bu.duration;this.pos=b.easing[bu.animatedProperties[this.prop]](this.state,bA,0,1,bu.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var bu=b.timers,e=0;e<bu.length;++e){if(!bu[e]()){bu.splice(e--,1)}}if(!bu.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a1);a1=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit}else{e.elem[e.prop]=e.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bu){return e===bu.elem}).length}}function z(bw){if(!S[bw]){var e=at.body,bu=b("<"+bw+">").appendTo(e),bv=bu.css("display");bu.remove();if(bv==="none"||bv===""){if(!a8){a8=at.createElement("iframe");a8.frameBorder=a8.width=a8.height=0}e.appendChild(a8);if(!n||!a8.createElement){n=(a8.contentWindow||a8.contentDocument).document;n.write((at.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");n.close()}bu=n.createElement(bw);n.body.appendChild(bu);bv=b.css(bu,"display");e.removeChild(a8)}S[bw]=bv}return S[bw]}var W=/^t(?:able|d|h)$/i,ac=/^(?:body|html)$/i;if("getBoundingClientRect" in at.documentElement){b.fn.offset=function(bH){var bx=this[0],bA;if(bH){return this.each(function(e){b.offset.setOffset(this,bH,e)})}if(!bx||!bx.ownerDocument){return null}if(bx===bx.ownerDocument.body){return b.offset.bodyOffset(bx)}try{bA=bx.getBoundingClientRect()}catch(bE){}var bG=bx.ownerDocument,bv=bG.documentElement;if(!bA||!b.contains(bv,bx)){return bA?{top:bA.top,left:bA.left}:{top:0,left:0}}var bB=bG.body,bC=aI(bG),bz=bv.clientTop||bB.clientTop||0,bD=bv.clientLeft||bB.clientLeft||0,bu=bC.pageYOffset||b.support.boxModel&&bv.scrollTop||bB.scrollTop,by=bC.pageXOffset||b.support.boxModel&&bv.scrollLeft||bB.scrollLeft,bF=bA.top+bu-bz,bw=bA.left+by-bD;return{top:bF,left:bw}}}else{b.fn.offset=function(bE){var by=this[0];if(bE){return this.each(function(bF){b.offset.setOffset(this,bE,bF)})}if(!by||!by.ownerDocument){return null}if(by===by.ownerDocument.body){return b.offset.bodyOffset(by)}b.offset.initialize();var bB,bv=by.offsetParent,bu=by,bD=by.ownerDocument,bw=bD.documentElement,bz=bD.body,bA=bD.defaultView,e=bA?bA.getComputedStyle(by,null):by.currentStyle,bC=by.offsetTop,bx=by.offsetLeft;while((by=by.parentNode)&&by!==bz&&by!==bw){if(b.offset.supportsFixedPosition&&e.position==="fixed"){break}bB=bA?bA.getComputedStyle(by,null):by.currentStyle;bC-=by.scrollTop;bx-=by.scrollLeft;if(by===bv){bC+=by.offsetTop;bx+=by.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&W.test(by.nodeName))){bC+=parseFloat(bB.borderTopWidth)||0;bx+=parseFloat(bB.borderLeftWidth)||0}bu=bv;bv=by.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&bB.overflow!=="visible"){bC+=parseFloat(bB.borderTopWidth)||0;bx+=parseFloat(bB.borderLeftWidth)||0}e=bB}if(e.position==="relative"||e.position==="static"){bC+=bz.offsetTop;bx+=bz.offsetLeft}if(b.offset.supportsFixedPosition&&e.position==="fixed"){bC+=Math.max(bw.scrollTop,bz.scrollTop);bx+=Math.max(bw.scrollLeft,bz.scrollLeft)}return{top:bC,left:bx}}}b.offset={initialize:function(){var e=at.body,bu=at.createElement("div"),bx,bz,by,bA,bv=parseFloat(b.css(e,"marginTop"))||0,bw="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(bu.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});bu.innerHTML=bw;e.insertBefore(bu,e.firstChild);bx=bu.firstChild;bz=bx.firstChild;bA=bx.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bz.offsetTop!==5);this.doesAddBorderForTableAndCells=(bA.offsetTop===5);bz.style.position="fixed";bz.style.top="20px";this.supportsFixedPosition=(bz.offsetTop===20||bz.offsetTop===15);bz.style.position=bz.style.top="";bx.style.overflow="hidden";bx.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bz.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bv);e.removeChild(bu);b.offset.initialize=b.noop},bodyOffset:function(e){var bv=e.offsetTop,bu=e.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bv+=parseFloat(b.css(e,"marginTop"))||0;bu+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bv,left:bu}},setOffset:function(bw,bF,bz){var bA=b.css(bw,"position");if(bA==="static"){bw.style.position="relative"}var by=b(bw),bu=by.offset(),e=b.css(bw,"top"),bD=b.css(bw,"left"),bE=(bA==="absolute"||bA==="fixed")&&b.inArray("auto",[e,bD])>-1,bC={},bB={},bv,bx;if(bE){bB=by.position();bv=bB.top;bx=bB.left}else{bv=parseFloat(e)||0;bx=parseFloat(bD)||0}if(b.isFunction(bF)){bF=bF.call(bw,bz,bu)}if(bF.top!=null){bC.top=(bF.top-bu.top)+bv}if(bF.left!=null){bC.left=(bF.left-bu.left)+bx}if("using" in bF){bF.using.call(bw,bC)}else{by.css(bC)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bv=this[0],bu=this.offsetParent(),bw=this.offset(),e=ac.test(bu[0].nodeName)?{top:0,left:0}:bu.offset();bw.top-=parseFloat(b.css(bv,"marginTop"))||0;bw.left-=parseFloat(b.css(bv,"marginLeft"))||0;e.top+=parseFloat(b.css(bu[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bu[0],"borderLeftWidth"))||0;return{top:bw.top-e.top,left:bw.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||at.body;while(e&&(!ac.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(bu,e){var bv="scroll"+e;b.fn[bv]=function(by){var bw,bx;if(by===M){bw=this[0];if(!bw){return null}bx=aI(bw);return bx?("pageXOffset" in bx)?bx[bu?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bx.document.documentElement[bv]||bx.document.body[bv]:bw[bv]}return this.each(function(){bx=aI(this);if(bx){bx.scrollTo(!bu?by:b(bx).scrollLeft(),bu?by:b(bx).scrollTop())}else{this[bv]=by}})}});function aI(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(bu,e){var bv=e.toLowerCase();b.fn["inner"+e]=function(){var bw=this[0];return bw&&bw.style?parseFloat(b.css(bw,bv,"padding")):null};b.fn["outer"+e]=function(bx){var bw=this[0];return bw&&bw.style?parseFloat(b.css(bw,bv,bx?"margin":"border")):null};b.fn[bv]=function(bx){var by=this[0];if(!by){return bx==null?null:this}if(b.isFunction(bx)){return this.each(function(bC){var bB=b(this);bB[bv](bx.call(this,bC,bB[bv]()))})}if(b.isWindow(by)){var bz=by.document.documentElement["client"+e];return by.document.compatMode==="CSS1Compat"&&bz||by.document.body["client"+e]||bz}else{if(by.nodeType===9){return Math.max(by.documentElement["client"+e],by.body["scroll"+e],by.documentElement["scroll"+e],by.body["offset"+e],by.documentElement["offset"+e])}else{if(bx===M){var bA=b.css(by,bv),bw=parseFloat(bA);return b.isNaN(bw)?bA:bw}else{return this.css(bv,typeof bx==="string"?bx:bx+"px")}}}}});bb.jQuery=bb.$=b})(window);
/*!
 * jQuery UI 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
jQuery.ui||function(a){a.ui={version:"1.8.1",plugin:{add:function(f,c,h){f=a.ui[f].prototype;for(var g in h){f.plugins[g]=f.plugins[g]||[];f.plugins[g].push([c,h[g]])}},call:function(f,c,h){if((c=f.plugins[c])&&f.element[0].parentNode){for(var g=0;g<c.length;g++){f.options[c[g][0]]&&c[g][1].apply(f.element,h)}}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(e,c){if(a(e).css("overflow")=="hidden"){return false}c=c&&c=="left"?"scrollLeft":"scrollTop";var f=false;if(e[c]>0){return true}e[c]=1;f=e[c]>0;e[c]=0;return f},isOverAxis:function(e,c,f){return e>c&&e<c+f},isOver:function(h,c,m,l,k,j){return a.ui.isOverAxis(h,m,k)&&a.ui.isOverAxis(c,l,j)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};a.fn.extend({_focus:a.fn.focus,focus:function(d,c){return typeof d==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();c&&c.call(b)},d)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(d){if(d!==undefined){return this.css("zIndex",d)}if(this.length){d=a(this[0]);for(var c;d.length&&d[0]!==document;){c=d.css("position");if(c=="absolute"||c=="relative"||c=="fixed"){c=parseInt(d.css("zIndex"));if(!isNaN(c)&&c!=0){return c}}d=d.parent()}}return 0}});a.extend(a.expr[":"],{data:function(e,c,f){return !!a.data(e,f[3])},focusable:function(e){var c=e.nodeName.toLowerCase(),f=a.attr(e,"tabindex");return(/input|select|textarea|button|object/.test(c)?!e.disabled:"a"==c||"area"==c?e.href||!isNaN(f):!isNaN(f))&&!a(e)["area"==c?"parents":"closest"](":hidden").length},tabbable:function(d){var c=a.attr(d,"tabindex");return(isNaN(c)||c>=0)&&a(d).is(":focusable")}})}(jQuery);(function(a){var c=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){if(!d){if(!b||a.filter(b,[this]).length){a("*",this).add(this).each(function(){a(this).triggerHandler("remove")})}}return c.call(a(this),b,d)})};a.widget=function(b,k,j){var h=b.split(".")[0],g;b=b.split(".")[1];g=h+"-"+b;if(!j){j=k;k=a.Widget}a.expr[":"][g]=function(d){return !!a.data(d,b)};a[h]=a[h]||{};a[h][b]=function(d,e){arguments.length&&this._createWidget(d,e)};k=new k;k.options=a.extend({},k.options);a[h][b].prototype=a.extend(true,k,{namespace:h,widgetName:b,widgetEventPrefix:a[h][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},j);a.widget.bridge(b,a[h][b])};a.widget.bridge=function(b,d){a.fn[b]=function(l){var k=typeof l==="string",j=Array.prototype.slice.call(arguments,1),g=this;l=!k&&j.length?a.extend.apply(null,[true,l].concat(j)):l;if(k&&l.substring(0,1)==="_"){return g}k?this.each(function(){var f=a.data(this,b),e=f&&a.isFunction(f[l])?f[l].apply(f,j):f;if(e!==f&&e!==undefined){g=e;return false}}):this.each(function(){var e=a.data(this,b);if(e){l&&e.option(l);e._init()}else{a.data(this,b,new d(l,this))}});return g}};a.Widget=function(b,d){arguments.length&&this._createWidget(b,d)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,f){this.element=a(f).data(this.widgetName,this);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(f)[this.widgetName],b);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,h){var g=b,f=this;if(arguments.length===0){return a.extend({},f.options)}if(typeof b==="string"){if(h===undefined){return this.options[b]}g={};g[b]=h}a.each(g,function(e,d){f._setOption(e,d)});return f},_setOption:function(b,d){this.options[b]=d;if(b==="disabled"){this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,k,j){var h=this.options[b];k=a.Event(k);k.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();j=j||{};if(k.originalEvent){b=a.event.props.length;for(var g;b;){g=a.event.props[--b];k[g]=k.originalEvent[g]}}this.element.trigger(k,j);return !(a.isFunction(h)&&h.call(this.element[0],k,j)===false||k.isDefaultPrevented())}}})(jQuery);(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,h=d.which==1,g=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;if(!h||g||!this._mouseCapture(d)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(b){return c._mouseMove(b)};this._mouseUpDelegate=function(b){return c._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||d.preventDefault();return d.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b)}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=b.target==this._mouseDownEvent.target;this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(d){var c=this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(d);if(!this.handle){return false}return true},_mouseStart:function(d){var c=this.options;this.helper=this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(e){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,e)}if(this.dropped){d=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode){return false}if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",e)!==false&&f._clear()})}else{this._trigger("stop",e)!==false&&this._clear()}return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==d.target){c=true}});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone():this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(e.containment)&&e.containment.constructor!=Array){var d=a(e.containment)[0];if(d){e=a(e.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else{if(e.containment.constructor==Array){this.containment=e.containment}}},_convertPositionTo:function(e,d){if(!d){d=this.position}e=e=="absolute"?1:-1;var h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(h[0].tagName);return{top:d.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:h.scrollTop())*e),left:d.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*e)}},_generatePosition:function(h){var d=this.options,m=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=/(html|body)/i.test(m[0].tagName),l=h.pageX,j=h.pageY;if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){l=this.containment[0]+this.offset.click.left}if(h.pageY-this.offset.click.top<this.containment[1]){j=this.containment[1]+this.offset.click.top}if(h.pageX-this.offset.click.left>this.containment[2]){l=this.containment[2]+this.offset.click.left}if(h.pageY-this.offset.click.top>this.containment[3]){j=this.containment[3]+this.offset.click.top}}if(d.grid){j=this.originalPageY+Math.round((j-this.originalPageY)/d.grid[1])*d.grid[1];j=this.containment?!(j-this.offset.click.top<this.containment[1]||j-this.offset.click.top>this.containment[3])?j:!(j-this.offset.click.top<this.containment[1])?j-d.grid[1]:j+d.grid[1]:j;l=this.originalPageX+Math.round((l-this.originalPageX)/d.grid[0])*d.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-d.grid[0]:l+d.grid[0]:l}}return{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():k?0:m.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():k?0:m.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(e,d,f){f=f||this._uiHash();a.ui.plugin.call(this,e,[d,f]);if(e=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,e,d,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.1"});a.ui.plugin.add("draggable","connectToSortable",{start:function(g,d){var k=a(this).data("draggable"),h=k.options,j=a.extend({},d,{item:k.element});k.sortables=[];a(h.connectToSortable).each(function(){var b=a.data(this,"sortable");if(b&&!b.options.disabled){k.sortables.push({instance:b,shouldRevert:b.options.revert});b._refreshItems();b._trigger("activate",g,j)}})},stop:function(e,d){var h=a(this).data("draggable"),g=a.extend({},d,{item:h.element});a.each(h.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;h.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(e);this.instance.options.helper=this.instance.options._helper;h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",e,g)}})},drag:function(e,d){var h=a(this).data("draggable"),g=this;a.each(h.sortables,function(){this.instance.positionAbs=h.positionAbs;this.instance.helperProportions=h.helperProportions;this.instance.offset.click=h.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0]};e.target=this.instance.currentItem[0];this.instance._mouseCapture(e,true);this.instance._mouseStart(e,true,true);this.instance.offset.click.top=h.offset.click.top;this.instance.offset.click.left=h.offset.click.left;this.instance.offset.parent.left-=h.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=h.offset.parent.top-this.instance.offset.parent.top;h._trigger("toSortable",e);h.dropped=this.instance.element;h.currentItem=h.element;this.instance.fromOutside=h}this.instance.currentItem&&this.instance._mouseDrag(e)}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",e,this.instance._uiHash(this.instance));this.instance._mouseStop(e,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();h._trigger("fromSortable",e);h.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor")){c._cursor=d.css("cursor")}d.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=a(this).data("draggable").options;a(b.iframeFix===true?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity")){c._opacity=d.css("opacity")}d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset()}},drag:function(e){var d=a(this).data("draggable"),h=d.options,g=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!h.axis||h.axis!="x"){if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-e.pageY<h.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop+h.scrollSpeed}else{if(e.pageY-d.overflowOffset.top<h.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop-h.scrollSpeed}}}if(!h.axis||h.axis!="y"){if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-e.pageX<h.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft+h.scrollSpeed}else{if(e.pageX-d.overflowOffset.left<h.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft-h.scrollSpeed}}}}else{if(!h.axis||h.axis!="x"){if(e.pageY-a(document).scrollTop()<h.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()-h.scrollSpeed)}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<h.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()+h.scrollSpeed)}}}if(!h.axis||h.axis!="y"){if(e.pageX-a(document).scrollLeft()<h.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()-h.scrollSpeed)}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<h.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()+h.scrollSpeed)}}}}g!==false&&a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,e)}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var e=a(this),b=e.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:b.top,left:b.left})})},drag:function(L,K){for(var J=a(this).data("draggable"),H=J.options,I=H.snapTolerance,G=K.offset.left,z=G+J.helperProportions.width,A=K.offset.top,y=A+J.helperProportions.height,F=J.snapElements.length-1;F>=0;F--){var E=J.snapElements[F].left,C=E+J.snapElements[F].width,D=J.snapElements[F].top,B=D+J.snapElements[F].height;if(E-I<G&&G<C+I&&D-I<A&&A<B+I||E-I<G&&G<C+I&&D-I<y&&y<B+I||E-I<z&&z<C+I&&D-I<A&&A<B+I||E-I<z&&z<C+I&&D-I<y&&y<B+I){if(H.snapMode!="inner"){var x=Math.abs(D-y)<=I,w=Math.abs(B-A)<=I,v=Math.abs(E-z)<=I,u=Math.abs(C-G)<=I;if(x){K.position.top=J._convertPositionTo("relative",{top:D-J.helperProportions.height,left:0}).top-J.margins.top}if(w){K.position.top=J._convertPositionTo("relative",{top:B,left:0}).top-J.margins.top}if(v){K.position.left=J._convertPositionTo("relative",{top:0,left:E-J.helperProportions.width}).left-J.margins.left}if(u){K.position.left=J._convertPositionTo("relative",{top:0,left:C}).left-J.margins.left}}var d=x||w||v||u;if(H.snapMode!="outer"){x=Math.abs(D-A)<=I;w=Math.abs(B-y)<=I;v=Math.abs(E-G)<=I;u=Math.abs(C-z)<=I;if(x){K.position.top=J._convertPositionTo("relative",{top:D,left:0}).top-J.margins.top}if(w){K.position.top=J._convertPositionTo("relative",{top:B-J.helperProportions.height,left:0}).top-J.margins.top}if(v){K.position.left=J._convertPositionTo("relative",{top:0,left:E}).left-J.margins.left}if(u){K.position.left=J._convertPositionTo("relative",{top:0,left:C-J.helperProportions.width}).left-J.margins.left}}if(!J.snapElements[F].snapping&&(x||w||v||u||d)){J.options.snap.snap&&J.options.snap.snap.call(J.element,L,a.extend(J._uiHash(),{snapItem:J.snapElements[F].item}))}J.snapElements[F].snapping=x||w||v||u||d}else{J.snapElements[F].snapping&&J.options.snap.release&&J.options.snap.release.call(J.element,L,a.extend(J._uiHash(),{snapItem:J.snapElements[F].item}));J.snapElements[F].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(e,b){return(parseInt(a(e).css("zIndex"),10)||0)-(parseInt(a(b).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+d.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex")){c._zIndex=d.css("zIndex")}d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(b){return b.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;c<d.length;c++){d[c]==this&&d.splice(c,1)}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(d,c){if(d=="accept"){this.accept=a.isFunction(c)?c:function(b){return b.is(c)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0])){if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);this._trigger("over",d,this.ui(c))}}},_out:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0])){if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",d,this.ui(c))}}},_drop:function(f,d){var h=d||a.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return false}var g=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==h.options.scope&&b.accept.call(b.element[0],h.currentItem||h.element)&&a.ui.intersect(h,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){g=true;return false}});if(g){return false}if(this.accept.call(this.element[0],h.currentItem||h.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",f,this.ui(h));return this.element}return false},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.1"});a.ui.intersect=function(w,v,u){if(!v.offset){return false}var s=(w.positionAbs||w.position.absolute).left,q=s+w.helperProportions.width,r=(w.positionAbs||w.position.absolute).top,p=r+w.helperProportions.height,o=v.offset.left,m=o+v.proportions.width,n=v.offset.top,d=n+v.proportions.height;switch(u){case"fit":return o<s&&q<m&&n<r&&p<d;case"intersect":return o<s+w.helperProportions.width/2&&q-w.helperProportions.width/2<m&&n<r+w.helperProportions.height/2&&p-w.helperProportions.height/2<d;case"pointer":return a.ui.isOver((w.positionAbs||w.position.absolute).top+(w.clickOffset||w.offset.click).top,(w.positionAbs||w.position.absolute).left+(w.clickOffset||w.offset.click).left,n,o,v.proportions.height,v.proportions.width);case"touch":return(r>=n&&r<=d||p>=n&&p<=d||r<n&&p>d)&&(s>=o&&s<=m||q>=o&&q<=m||s<o&&q>m);default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(j,d){var o=a.ui.ddmanager.droppables[j.options.scope]||[],n=d?d.type:null,l=(j.currentItem||j.element).find(":data(droppable)").andSelf(),m=0;j:for(;m<o.length;m++){if(!(o[m].options.disabled||j&&!o[m].accept.call(o[m].element[0],j.currentItem||j.element))){for(var k=0;k<l.length;k++){if(l[k]==o[m].element[0]){o[m].proportions.height=0;continue j}}o[m].visible=o[m].element.css("display")!="none";if(o[m].visible){o[m].offset=o[m].element.offset();o[m].proportions={width:o[m].element[0].offsetWidth,height:o[m].element[0].offsetHeight};n=="mousedown"&&o[m]._activate.call(o[m],d)}}}},drop:function(e,d){var f=false;a.each(a.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(e,this,this.options.tolerance)){f=f||this._drop.call(this,d)}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=1;this.isover=0;this._deactivate.call(this,d)}}});return f},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var h=a.ui.intersect(d,this,this.options.tolerance);if(h=!h&&this.isover==1?"isout":h&&this.isover==0?"isover":null){var f;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");if(b.length){f=a.data(b[0],"droppable");f.greedyChild=h=="isover"?1:0}}if(f&&h=="isover"){f.isover=0;f.isout=1;f._out.call(f,c)}this[h]=1;this[h=="isout"?"isover":"isout"]=0;this[h=="isover"?"_over":"_out"].call(this,c);if(f&&h=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}}}})}}})(jQuery);(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var d=this,h=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&c.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=h.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var m=this.handles.split(",");this.handles={};for(var l=0;l<m.length;l++){var j=c.trim(m[l]),k=c('<div class="ui-resizable-handle '+("ui-resizable-"+j)+'"></div>');/sw|se|ne|nw/.test(j)&&k.css({zIndex:++h.zIndex});"se"==j&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[j]=".ui-resizable-"+j;this.element.append(k)}}this._renderAxis=function(n){n=n||this.element;for(var g in this.handles){if(this.handles[g].constructor==String){this.handles[g]=c(this.handles[g],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var f=c(this.handles[g],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(g)?f.outerHeight():f.outerWidth();f=["padding",/ne|nw|n/.test(g)?"Top":/se|sw|s/.test(g)?"Bottom":/^e$/.test(g)?"Right":"Left"].join("");n.css(f,e);this._proportionallyResize()}c(this.handles[g])}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!d.resizing){if(this.className){var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}d.axis=e&&e[1]?e[1]:"se"}});if(h.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){c(this).removeClass("ui-resizable-autohide");d._handles.show()},function(){if(!d.resizing){c(this).addClass("ui-resizable-autohide");d._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var e=this.element;e.after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(d){var e=false;for(var f in this.handles){if(c(this.handles[f])[0]==d.target){e=true}}return !this.options.disabled&&e},_mouseStart:function(d){var f=this.options,k=this.element.position(),j=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(j.is(".ui-draggable")||/absolute/.test(j.css("position"))){j.css({position:"absolute",top:k.top,left:k.left})}c.browser.opera&&/relative/.test(j.css("position"))&&j.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();k=a(this.helper.css("left"));var h=a(this.helper.css("top"));if(f.containment){k+=c(f.containment).scrollLeft()||0;h+=c(f.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:j.outerWidth(),height:j.outerHeight()}:{width:j.width(),height:j.height()};this.originalSize=this._helper?{width:j.outerWidth(),height:j.outerHeight()}:{width:j.width(),height:j.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:j.outerWidth()-j.width(),height:j.outerHeight()-j.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio=typeof f.aspectRatio=="number"?f.aspectRatio:this.originalSize.width/this.originalSize.height||1;f=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",f=="auto"?this.axis+"-resize":f);j.addClass("ui-resizable-resizing");this._propagate("start",d);return true},_mouseDrag:function(d){var f=this.helper,h=this.originalMousePosition,g=this._change[this.axis];if(!g){return false}h=g.apply(this,[d,d.pageX-h.left||0,d.pageY-h.top||0]);if(this._aspectRatio||d.shiftKey){h=this._updateRatio(h,d)}h=this._respectSize(h,d);this._propagate("resize",d);f.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(h);this._trigger("resize",d,this.ui());return false},_mouseStop:function(d){this.resizing=false;var h=this.options,m=this;if(this._helper){var l=this._proportionallyResizeElements,j=l.length&&/textarea/i.test(l[0].nodeName);l=j&&c.ui.hasScroll(l[0],"left")?0:m.sizeDiff.height;j={width:m.size.width-(j?0:m.sizeDiff.width),height:m.size.height-l};l=parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left)||null;var k=parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top)||null;h.animate||this.element.css(c.extend(j,{top:k,left:l}));m.helper.height(m.size.height);m.helper.width(m.size.width);this._helper&&!h.animate&&this._proportionallyResize()}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",d);this._helper&&this.helper.remove();return false},_updateCache:function(d){this.offset=this.helper.offset();if(b(d.left)){this.position.left=d.left}if(b(d.top)){this.position.top=d.top}if(b(d.height)){this.size.height=d.height}if(b(d.width)){this.size.width=d.width}},_updateRatio:function(d){var f=this.position,h=this.size,g=this.axis;if(d.height){d.width=h.height*this.aspectRatio}else{if(d.width){d.height=h.width/this.aspectRatio}}if(g=="sw"){d.left=f.left+(h.width-d.width);d.top=null}if(g=="nw"){d.top=f.top+(h.height-d.height);d.left=f.left+(h.width-d.width)}return d},_respectSize:function(s){var u=this.options,r=this.axis,q=b(s.width)&&u.maxWidth&&u.maxWidth<s.width,o=b(s.height)&&u.maxHeight&&u.maxHeight<s.height,p=b(s.width)&&u.minWidth&&u.minWidth>s.width,n=b(s.height)&&u.minHeight&&u.minHeight>s.height;if(p){s.width=u.minWidth}if(n){s.height=u.minHeight}if(q){s.width=u.maxWidth}if(o){s.height=u.maxHeight}var m=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,d=/sw|nw|w/.test(r);r=/nw|ne|n/.test(r);if(p&&d){s.left=m-u.minWidth}if(q&&d){s.left=m-u.maxWidth}if(n&&r){s.top=k-u.minHeight}if(o&&r){s.top=k-u.maxHeight}if((u=!s.width&&!s.height)&&!s.left&&s.top){s.top=null}else{if(u&&!s.top&&s.left){s.left=null}}return s},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var d=this.helper||this.element,f=0;f<this._proportionallyResizeElements.length;f++){var k=this._proportionallyResizeElements[f];if(!this.borderDif){var j=[k.css("borderTopWidth"),k.css("borderRightWidth"),k.css("borderBottomWidth"),k.css("borderLeftWidth")],h=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")];this.borderDif=c.map(j,function(g,e){g=parseInt(g,10)||0;e=parseInt(h[e],10)||0;return g+e})}c.browser.msie&&(c(d).is(":hidden")||c(d).parents(":hidden").length)||k.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var e=c.browser.msie&&c.browser.version<7,f=e?1:0;e=e?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++d.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(d,e){return{width:this.originalSize.width+e}},w:function(d,e){return{left:this.originalPosition.left+e,width:this.originalSize.width-e}},n:function(d,e,f){return{top:this.originalPosition.top+f,height:this.originalSize.height-f}},s:function(d,e,f){return{height:this.originalSize.height+f}},se:function(d,e,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,e,f]))},sw:function(d,e,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,e,f]))},ne:function(d,e,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,e,f]))},nw:function(d,e,f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,e,f]))}},_propagate:function(d,e){c.ui.plugin.call(this,d,[e,this.ui()]);d!="resize"&&this._trigger(d,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.1"});c.ui.plugin.add("resizable","alsoResize",{start:function(){var d=c(this).data("resizable").options,e=function(f){c(f).each(function(){c(this).data("resizable-alsoresize",{width:parseInt(c(this).width(),10),height:parseInt(c(this).height(),10),left:parseInt(c(this).css("left"),10),top:parseInt(c(this).css("top"),10)})})};if(typeof d.alsoResize=="object"&&!d.alsoResize.parentNode){if(d.alsoResize.length){d.alsoResize=d.alsoResize[0];e(d.alsoResize)}else{c.each(d.alsoResize,function(f){e(f)})}}else{e(d.alsoResize)}},resize:function(){var d=c(this).data("resizable"),h=d.options,m=d.originalSize,l=d.originalPosition,j={height:d.size.height-m.height||0,width:d.size.width-m.width||0,top:d.position.top-l.top||0,left:d.position.left-l.left||0},k=function(f,e){c(f).each(function(){var n=c(this),g=c(this).data("resizable-alsoresize"),o={};c.each((e&&e.length?e:["width","height","top","left"])||["width","height","top","left"],function(q,p){if((q=(g[p]||0)+(j[p]||0))&&q>=0){o[p]=q||null}});if(/relative/.test(n.css("position"))&&c.browser.opera){d._revertToRelativePosition=true;n.css({position:"absolute",top:"auto",left:"auto"})}n.css(o)})};typeof h.alsoResize=="object"&&!h.alsoResize.nodeType?c.each(h.alsoResize,function(f,e){k(f,e)}):k(h.alsoResize)},stop:function(){var d=c(this).data("resizable");if(d._revertToRelativePosition&&c.browser.opera){d._revertToRelativePosition=false;el.css({position:"relative"})}c(this).removeData("resizable-alsoresize-start")}});c.ui.plugin.add("resizable","animate",{stop:function(d){var j=c(this).data("resizable"),o=j.options,n=j._proportionallyResizeElements,l=n.length&&/textarea/i.test(n[0].nodeName),m=l&&c.ui.hasScroll(n[0],"left")?0:j.sizeDiff.height;l={width:j.size.width-(l?0:j.sizeDiff.width),height:j.size.height-m};m=parseInt(j.element.css("left"),10)+(j.position.left-j.originalPosition.left)||null;var k=parseInt(j.element.css("top"),10)+(j.position.top-j.originalPosition.top)||null;j.element.animate(c.extend(l,k&&m?{top:k,left:m}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var e={width:parseInt(j.element.css("width"),10),height:parseInt(j.element.css("height"),10),top:parseInt(j.element.css("top"),10),left:parseInt(j.element.css("left"),10)};n&&n.length&&c(n[0]).css({width:e.width,height:e.height});j._updateCache(e);j._propagate("resize",d)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var d=c(this).data("resizable"),j=d.element,o=d.options.containment;if(j=o instanceof c?o.get(0):/parent/.test(o)?j.parent().get(0):o){d.containerElement=c(j);if(/document/.test(o)||o==document){d.containerOffset={left:0,top:0};d.containerPosition={left:0,top:0};d.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var n=c(j),l=[];c(["Top","Right","Left","Bottom"]).each(function(f,e){l[f]=a(n.css("padding"+e))});d.containerOffset=n.offset();d.containerPosition=n.position();d.containerSize={height:n.innerHeight()-l[3],width:n.innerWidth()-l[1]};o=d.containerOffset;var m=d.containerSize.height,k=d.containerSize.width;k=c.ui.hasScroll(j,"left")?j.scrollWidth:k;m=c.ui.hasScroll(j)?j.scrollHeight:m;d.parentData={element:j,left:o.left,top:o.top,width:k,height:m}}}},resize:function(d){var j=c(this).data("resizable"),o=j.options,n=j.containerOffset,l=j.position;d=j._aspectRatio||d.shiftKey;var m={top:0,left:0},k=j.containerElement;if(k[0]!=document&&/static/.test(k.css("position"))){m=n}if(l.left<(j._helper?n.left:0)){j.size.width+=j._helper?j.position.left-n.left:j.position.left-m.left;if(d){j.size.height=j.size.width/o.aspectRatio}j.position.left=o.helper?n.left:0}if(l.top<(j._helper?n.top:0)){j.size.height+=j._helper?j.position.top-n.top:j.position.top;if(d){j.size.width=j.size.height*o.aspectRatio}j.position.top=j._helper?n.top:0}j.offset.left=j.parentData.left+j.position.left;j.offset.top=j.parentData.top+j.position.top;o=Math.abs((j._helper?j.offset.left-m.left:j.offset.left-m.left)+j.sizeDiff.width);n=Math.abs((j._helper?j.offset.top-m.top:j.offset.top-n.top)+j.sizeDiff.height);l=j.containerElement.get(0)==j.element.parent().get(0);m=/relative|absolute/.test(j.containerElement.css("position"));if(l&&m){o-=j.parentData.left}if(o+j.size.width>=j.parentData.width){j.size.width=j.parentData.width-o;if(d){j.size.height=j.size.width/j.aspectRatio}}if(n+j.size.height>=j.parentData.height){j.size.height=j.parentData.height-n;if(d){j.size.width=j.size.height*j.aspectRatio}}},stop:function(){var d=c(this).data("resizable"),j=d.options,p=d.containerOffset,o=d.containerPosition,m=d.containerElement,n=c(d.helper),l=n.offset(),k=n.outerWidth()-d.sizeDiff.width;n=n.outerHeight()-d.sizeDiff.height;d._helper&&!j.animate&&/relative/.test(m.css("position"))&&c(this).css({left:l.left-o.left-p.left,width:k,height:n});d._helper&&!j.animate&&/static/.test(m.css("position"))&&c(this).css({left:l.left-o.left-p.left,width:k,height:n})}});c.ui.plugin.add("resizable","ghost",{start:function(){var d=c(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:"");d.ghost.appendTo(d.helper)},resize:function(){var d=c(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=c(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});c.ui.plugin.add("resizable","grid",{resize:function(){var d=c(this).data("resizable"),j=d.options,o=d.size,n=d.originalSize,l=d.originalPosition,m=d.axis;j.grid=typeof j.grid=="number"?[j.grid,j.grid]:j.grid;var k=Math.round((o.width-n.width)/(j.grid[0]||1))*(j.grid[0]||1);j=Math.round((o.height-n.height)/(j.grid[1]||1))*(j.grid[1]||1);if(/^(se|s|e)$/.test(m)){d.size.width=n.width+k;d.size.height=n.height+j}else{if(/^(ne)$/.test(m)){d.size.width=n.width+k;d.size.height=n.height+j;d.position.top=l.top-j}else{if(/^(sw)$/.test(m)){d.size.width=n.width+k;d.size.height=n.height+j}else{d.size.width=n.width+k;d.size.height=n.height+j;d.position.top=l.top-j}d.position.left=l.left-k}}}});var a=function(d){return parseInt(d,10)||0},b=function(d){return !isNaN(parseInt(d,10))}})(jQuery);(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable");this.dragged=false;var b;this.refresh=function(){b=a(c.options.filter,c.element[0]);b.each(function(){var e=a(this),d=e.offset();a.data(this,"selectable-item",{element:this,$element:e,left:d.left,top:d.top,right:d.left+e.outerWidth(),bottom:d.top+e.outerHeight(),startselected:false,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=a(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(e){var b=this;this.opos=[e.pageX,e.pageY];if(!this.options.disabled){var g=this.options;this.selectees=a(g.filter,this.element[0]);this._trigger("start",e);a(g.appendTo).append(this.helper);this.helper.css({"z-index":100,position:"absolute",left:e.clientX,top:e.clientY,width:0,height:0});g.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=a.data(this,"selectable-item");c.startselected=true;if(!e.metaKey){c.$element.removeClass("ui-selected");c.selected=false;c.$element.addClass("ui-unselecting");c.unselecting=true;b._trigger("unselecting",e,{unselecting:c.element})}});a(e.target).parents().andSelf().each(function(){var c=a.data(this,"selectable-item");if(c){c.$element.removeClass("ui-unselecting").addClass("ui-selecting");c.unselecting=false;c.selecting=true;c.selected=true;b._trigger("selecting",e,{selecting:c.element});return false}})}},_mouseDrag:function(p){var o=this;this.dragged=true;if(!this.options.disabled){var q=this.options,e=this.opos[0],n=this.opos[1],m=p.pageX,l=p.pageY;if(e>m){var k=m;m=e;e=k}if(n>l){k=l;l=n;n=k}this.helper.css({left:e,top:n,width:m-e,height:l-n});this.selectees.each(function(){var b=a.data(this,"selectable-item");if(!(!b||b.element==o.element[0])){var c=false;if(q.tolerance=="touch"){c=!(b.left>m||b.right<e||b.top>l||b.bottom<n)}else{if(q.tolerance=="fit"){c=b.left>e&&b.right<m&&b.top>n&&b.bottom<l}}if(c){if(b.selected){b.$element.removeClass("ui-selected");b.selected=false}if(b.unselecting){b.$element.removeClass("ui-unselecting");b.unselecting=false}if(!b.selecting){b.$element.addClass("ui-selecting");b.selecting=true;o._trigger("selecting",p,{selecting:b.element})}}else{if(b.selecting){if(p.metaKey&&b.startselected){b.$element.removeClass("ui-selecting");b.selecting=false;b.$element.addClass("ui-selected");b.selected=true}else{b.$element.removeClass("ui-selecting");b.selecting=false;if(b.startselected){b.$element.addClass("ui-unselecting");b.unselecting=true}o._trigger("unselecting",p,{unselecting:b.element})}}if(b.selected){if(!p.metaKey&&!b.startselected){b.$element.removeClass("ui-selected");b.selected=false;b.$element.addClass("ui-unselecting");b.unselecting=true;o._trigger("unselecting",p,{unselecting:b.element})}}}}});return false}},_mouseStop:function(c){var b=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;b._trigger("unselected",c,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;b._trigger("selected",c,{selected:d.element})});this._trigger("stop",c);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.1"})})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")}return this},_setOption:function(d,c){if(d==="disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(self,arguments)}},_mouseCapture:function(g,d){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(g);var k=null,j=this;a(g.target).parents().each(function(){if(a.data(this,"sortable-item")==j){k=a(this);return false}});if(a.data(g.target,"sortable-item")==j){k=a(g.target)}if(!k){return false}if(this.options.handle&&!d){var h=false;a(this.options.handle,k).find("*").andSelf().each(function(){if(this==g.target){h=true}});if(!h){return false}}this.currentItem=k;this._removeCurrentsFromItems();return true},_mouseStart:function(f,d,h){d=this.options;var g=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();if(d.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",d.cursor)}if(d.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",d.opacity)}if(d.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",d.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",f,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!h){for(h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",f,g._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,f);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);return true},_mouseDrag:function(g){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var d=this.options,k=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-g.pageY<d.scrollSensitivity){this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop+d.scrollSpeed}else{if(g.pageY-this.overflowOffset.top<d.scrollSensitivity){this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop-d.scrollSpeed}}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-g.pageX<d.scrollSensitivity){this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft+d.scrollSpeed}else{if(g.pageX-this.overflowOffset.left<d.scrollSensitivity){this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft-d.scrollSpeed}}}else{if(g.pageY-a(document).scrollTop()<d.scrollSensitivity){k=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed)}else{if(a(window).height()-(g.pageY-a(document).scrollTop())<d.scrollSensitivity){k=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed)}}if(g.pageX-a(document).scrollLeft()<d.scrollSensitivity){k=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed)}else{if(a(window).width()-(g.pageX-a(document).scrollLeft())<d.scrollSensitivity){k=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)}}}k!==false&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,g)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(d=this.items.length-1;d>=0;d--){k=this.items[d];var j=k.item[0],h=this._intersectsWithPointer(k);if(h){if(j!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=j&&!a.ui.contains(this.placeholder[0],j)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],j):true)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(k)){this._rearrange(g,k)}else{break}this._trigger("change",g,this._uiHash());break}}}this._contactContainers(g);a.ui.ddmanager&&a.ui.ddmanager.drag(this,g);this._trigger("sort",g,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,d){if(e){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,e);if(this.options.revert){var f=this;d=f.placeholder.offset();f.reverting=true;a(this.helper).animate({left:d.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(e)})}else{this._clear(e,d)}return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));this.containers[c].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];e=e||{};a(d).each(function(){var b=(a(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);if(b){f.push((e.key||b[1]+"[]")+"="+(e.key&&e.expression?b[1]:b[2]))}});return f.join("&")},toArray:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];e=e||{};d.each(function(){f.push(a(e.item||this).attr(e.attribute||"id")||"")});return f},_intersectsWith:function(w){var v=this.positionAbs.left,u=v+this.helperProportions.width,s=this.positionAbs.top,r=s+this.helperProportions.height,q=w.left,p=q+w.width,o=w.top,m=o+w.height,n=this.offset.click.top,d=this.offset.click.left;n=s+n>o&&s+n<m&&v+d>q&&v+d<p;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>w[this.floating?"width":"height"]?n:q<v+this.helperProportions.width/2&&u-this.helperProportions.width/2<p&&o<s+this.helperProportions.height/2&&r-this.helperProportions.height/2<m},_intersectsWithPointer:function(e){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height);e=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);d=d&&e;e=this._getDragVerticalDirection();var f=this._getDragHorizontalDirection();if(!d){return false}return this.floating?f&&f=="right"||e=="down"?2:1:e&&(e=="down"?2:1)},_intersectsWithSides:function(f){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+f.height/2,f.height);f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+f.width/2,f.width);var h=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&f||g=="left"&&!f:h&&(h=="down"&&d||h=="up"&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(j){var d=[],o=[],n=this._connectWith();if(n&&j){for(j=n.length-1;j>=0;j--){for(var m=a(n[j]),l=m.length-1;l>=0;l--){var k=a.data(m[l],"sortable");if(k&&k!=this&&!k.options.disabled){o.push([a.isFunction(k.options.items)?k.options.items.call(k.element):a(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}}}}o.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(j=o.length-1;j>=0;j--){o[j][0].each(function(){d.push(this)})}return a(d)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),d=0;d<this.items.length;d++){for(var f=0;f<e.length;f++){e[f]==this.items[d].item[0]&&this.items.splice(d,1)}}},_refreshItems:function(j){this.items=[];this.containers=[this];var d=this.items,p=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],j,{item:this.currentItem}):a(this.options.items,this.element),this]],o=this._connectWith();if(o){for(var n=o.length-1;n>=0;n--){for(var m=a(o[n]),l=m.length-1;l>=0;l--){var k=a.data(m[l],"sortable");if(k&&k!=this&&!k.options.disabled){p.push([a.isFunction(k.options.items)?k.options.items.call(k.element[0],j,{item:this.currentItem}):a(k.options.items,k.element),k]);this.containers.push(k)}}}}for(n=p.length-1;n>=0;n--){j=p[n][1];o=p[n][0];l=0;for(m=o.length;l<m;l++){k=a(o[l]);k.data("sortable-item",j);d.push({item:k,instance:j,width:0,height:0,left:0,top:0})}}},refreshPositions:function(f){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var d=this.items.length-1;d>=0;d--){var h=this.items[d],g=this.options.toleranceElement?a(this.options.toleranceElement,h.item):h.item;if(!f){h.width=g.outerWidth();h.height=g.outerHeight()}g=g.offset();h.left=g.left;h.top=g.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(d=this.containers.length-1;d>=0;d--){g=this.containers[d].element.offset();this.containers[d].containerCache.left=g.left;this.containers[d].containerCache.top=g.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()}}return this},_createPlaceholder:function(f){var d=f||this,h=d.options;if(!h.placeholder||h.placeholder.constructor==String){var g=h.placeholder;h.placeholder={element:function(){var b=a(document.createElement(d.currentItem[0].nodeName)).addClass(g||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g){b.style.visibility="hidden"}return b},update:function(c,b){if(!(g&&!h.forcePlaceholderSize)){b.height()||b.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10));b.width()||b.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10))}}}}d.placeholder=a(h.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);h.placeholder.update(d,d.placeholder)},_contactContainers:function(j){for(var d=null,o=null,n=this.containers.length-1;n>=0;n--){if(!a.ui.contains(this.currentItem[0],this.containers[n].element[0])){if(this._intersectsWith(this.containers[n].containerCache)){if(!(d&&a.ui.contains(this.containers[n].element[0],d.element[0]))){d=this.containers[n];o=n}}else{if(this.containers[n].containerCache.over){this.containers[n]._trigger("out",j,this._uiHash(this));this.containers[n].containerCache.over=0}}}}if(d){if(this.containers.length===1){this.containers[o]._trigger("over",j,this._uiHash(this));this.containers[o].containerCache.over=1}else{if(this.currentContainer!=this.containers[o]){d=10000;n=null;for(var m=this.positionAbs[this.containers[o].floating?"left":"top"],l=this.items.length-1;l>=0;l--){if(a.ui.contains(this.containers[o].element[0],this.items[l].item[0])){var k=this.items[l][this.containers[o].floating?"left":"top"];if(Math.abs(k-m)<d){d=Math.abs(k-m);n=this.items[l]}}}if(n||this.options.dropOnEmpty){this.currentContainer=this.containers[o];n?this._rearrange(j,n,null,true):this._rearrange(j,null,this.containers[o].element,true);this._trigger("change",j,this._uiHash());this.containers[o]._trigger("change",j,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[o]._trigger("over",j,this._uiHash(this));this.containers[o].containerCache.over=1}}}}},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(d[0].style.width==""||c.forceHelperSize){d.width(this.currentItem.width())}if(d[0].style.height==""||c.forceHelperSize){d.height(this.currentItem.height())}return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(e.containment)){var d=a(e.containment)[0];e=a(e.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(f,d){if(!d){d=this.position}f=f=="absolute"?1:-1;var h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(h[0].tagName);return{top:d.top+this.offset.relative.top*f+this.offset.parent.top*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:h.scrollTop())*f),left:d.left+this.offset.relative.left*f+this.offset.parent.left*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*f)}},_generatePosition:function(h){var d=this.options,m=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(m[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var k=h.pageX,j=h.pageY;if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){k=this.containment[0]+this.offset.click.left}if(h.pageY-this.offset.click.top<this.containment[1]){j=this.containment[1]+this.offset.click.top}if(h.pageX-this.offset.click.left>this.containment[2]){k=this.containment[2]+this.offset.click.left}if(h.pageY-this.offset.click.top>this.containment[3]){j=this.containment[3]+this.offset.click.top}}if(d.grid){j=this.originalPageY+Math.round((j-this.originalPageY)/d.grid[1])*d.grid[1];j=this.containment?!(j-this.offset.click.top<this.containment[1]||j-this.offset.click.top>this.containment[3])?j:!(j-this.offset.click.top<this.containment[1])?j-d.grid[1]:j+d.grid[1]:j;k=this.originalPageX+Math.round((k-this.originalPageX)/d.grid[0])*d.grid[0];k=this.containment?!(k-this.offset.click.left<this.containment[0]||k-this.offset.click.left>this.containment[2])?k:!(k-this.offset.click.left<this.containment[0])?k-d.grid[0]:k+d.grid[0]:k}}return{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:m.scrollTop()),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:m.scrollLeft())}},_rearrange:function(h,d,m,l){m?m[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?d.item[0]:d.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var k=this,j=this.counter;window.setTimeout(function(){j==k.counter&&k.refreshPositions(!l)},0)},_clear:function(f,d){this.reverting=false;var h=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS){if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static"){this._storedCSS[g]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!d&&h.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d){h.push(function(b){this._trigger("update",b,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){d||h.push(function(b){this._trigger("remove",b,this._uiHash())});for(g=this.containers.length-1;g>=0;g--){if(a.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!d){h.push(function(b){return function(c){b._trigger("receive",c,this._uiHash(this))}}.call(this,this.containers[g]));h.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))}}.call(this,this.containers[g]))}}}for(g=this.containers.length-1;g>=0;g--){d||h.push(function(b){return function(c){b._trigger("deactivate",c,this._uiHash(this))}}.call(this,this.containers[g]));if(this.containers[g].containerCache.over){h.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",f,this._uiHash());for(g=0;g<h.length;g++){h[g].call(this,f)}this._trigger("stop",f,this._uiHash())}return false}d||this._trigger("beforeStop",f,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(g=0;g<h.length;g++){h[g].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.1"})})(jQuery);jQuery.effects||function(u){function h(j){var f;if(j&&j.constructor==Array&&j.length==3){return j}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(j)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(j)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(j)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(j)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(/rgba\(0, 0, 0, 0\)/.exec(j)){return g.transparent}return g[u.trim(j).toLowerCase()]}function b(k,j){var f;do{f=u.curCSS(k,j);if(f!=""&&f!="transparent"||u.nodeName(k,"body")){break}j="backgroundColor"}while(k=k.parentNode);return h(f)}function e(){var m=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,j={},f,l;if(m&&m.length&&m[0]&&m[m[0]]){for(var k=m.length;k--;){f=m[k];if(typeof m[f]=="string"){l=f.replace(/\-(\w)/g,function(o,n){return n.toUpperCase()});j[l]=m[f]}}}else{for(f in m){if(typeof m[f]==="string"){j[f]=m[f]}}}return j}function d(k){var j,f;for(j in k){f=k[j];if(f==null||u.isFunction(f)||j in a||/scrollbar/.test(j)||!/color/i.test(j)&&isNaN(parseFloat(f))){delete k[j]}}return k}function v(l,j){var f={_:0},k;for(k in j){if(l[k]!=j[k]){f[k]=j[k]}}return f}function p(l,j,f,k){if(typeof l=="object"){k=j;f=null;j=l;l=j.effect}if(u.isFunction(j)){k=j;f=null;j={}}if(u.isFunction(f)){k=f;f=null}if(typeof j=="number"||u.fx.speeds[j]){k=f;f=j;j={}}j=j||{};f=f||j.duration;f=u.fx.off?0:typeof f=="number"?f:u.fx.speeds[f]||u.fx.speeds._default;k=k||j.complete;return[l,j,f,k]}u.effects={};u.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(j,f){u.fx.step[f]=function(k){if(!k.colorInit){k.start=b(k.elem,f);k.end=h(k.end);k.colorInit=true}k.elem.style[f]="rgb("+Math.max(Math.min(parseInt(k.pos*(k.end[0]-k.start[0])+k.start[0],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[1]-k.start[1])+k.start[1],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[2]-k.start[2])+k.start[2],10),255),0)+")"}});var g={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},c=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};u.effects.animateClass=function(l,j,f,k){if(u.isFunction(f)){k=f;f=null}return this.each(function(){var r=u(this),o=r.attr("style")||" ",n=d(e.call(this)),q,m=r.attr("className");u.each(c,function(s,w){l[w]&&r[w+"Class"](l[w])});q=d(e.call(this));r.attr("className",m);r.animate(v(n,q),j,f,function(){u.each(c,function(s,w){l[w]&&r[w+"Class"](l[w])});if(typeof r.attr("style")=="object"){r.attr("style").cssText="";r.attr("style").cssText=o}else{r.attr("style",o)}k&&k.apply(this,arguments)})})};u.fn.extend({_addClass:u.fn.addClass,addClass:function(l,j,f,k){return j?u.effects.animateClass.apply(this,[{add:l},j,f,k]):this._addClass(l)},_removeClass:u.fn.removeClass,removeClass:function(l,j,f,k){return j?u.effects.animateClass.apply(this,[{remove:l},j,f,k]):this._removeClass(l)},_toggleClass:u.fn.toggleClass,toggleClass:function(m,j,f,l,k){return typeof j=="boolean"||j===undefined?f?u.effects.animateClass.apply(this,[j?{add:m}:{remove:m},f,l,k]):this._toggleClass(m,j):u.effects.animateClass.apply(this,[{toggle:m},j,f,l])},switchClass:function(m,j,f,l,k){return u.effects.animateClass.apply(this,[{add:j,remove:m},f,l,k])}});u.extend(u.effects,{version:"1.8.1",save:function(k,j){for(var f=0;f<j.length;f++){j[f]!==null&&k.data("ec.storage."+j[f],k[0].style[j[f]])}},restore:function(k,j){for(var f=0;f<j.length;f++){j[f]!==null&&k.css(j[f],k.data("ec.storage."+j[f]))}},setMode:function(j,f){if(f=="toggle"){f=j.is(":hidden")?"show":"hide"}return f},getBaseline:function(k,j){var f;switch(k[0]){case"top":f=0;break;case"middle":f=0.5;break;case"bottom":f=1;break;default:f=k[0]/j.height}switch(k[1]){case"left":k=0;break;case"center":k=0.5;break;case"right":k=1;break;default:k=k[1]/j.width}return{x:k,y:f}},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent()}var j={width:k.outerWidth(true),height:k.outerHeight(true),"float":k.css("float")},f=u("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});k.wrap(f);f=k.parent();if(k.css("position")=="static"){f.css({position:"relative"});k.css({position:"relative"})}else{u.extend(j,{position:k.css("position"),zIndex:k.css("z-index")});u.each(["top","left","bottom","right"],function(m,l){j[l]=k.css(l);if(isNaN(parseInt(j[l],10))){j[l]="auto"}});k.css({position:"relative",top:0,left:0})}return f.css(j).show()},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(l,j,f,k){k=k||{};u.each(j,function(n,m){unit=l.cssUnit(m);if(unit[0]>0){k[m]=unit[0]*f+unit[1]}});return k}});u.fn.extend({effect:function(k){var j=p.apply(this,arguments);j={options:j[1],duration:j[2],callback:j[3]};var f=u.effects[k];return f&&!u.fx.off?f.call(this,j):this},_show:u.fn.show,show:function(j){if(!j||typeof j=="number"||u.fx.speeds[j]){return this._show.apply(this,arguments)}else{var f=p.apply(this,arguments);f[1].mode="show";return this.effect.apply(this,f)}},_hide:u.fn.hide,hide:function(j){if(!j||typeof j=="number"||u.fx.speeds[j]){return this._hide.apply(this,arguments)}else{var f=p.apply(this,arguments);f[1].mode="hide";return this.effect.apply(this,f)}},__toggle:u.fn.toggle,toggle:function(j){if(!j||typeof j=="number"||u.fx.speeds[j]||typeof j=="boolean"||u.isFunction(j)){return this.__toggle.apply(this,arguments)}else{var f=p.apply(this,arguments);f[1].mode="toggle";return this.effect.apply(this,f)}},cssUnit:function(k){var j=this.css(k),f=[];u.each(["em","px","%","pt"],function(m,l){if(j.indexOf(l)>0){f=[parseFloat(j),l]}});return f}});u.easing.jswing=u.easing.swing;u.extend(u.easing,{def:"easeOutQuad",swing:function(m,j,f,l,k){return u.easing[u.easing.def](m,j,f,l,k)},easeInQuad:function(m,j,f,l,k){return l*(j/=k)*j+f},easeOutQuad:function(m,j,f,l,k){return -l*(j/=k)*(j-2)+f},easeInOutQuad:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j+f}return -l/2*(--j*(j-2)-1)+f},easeInCubic:function(m,j,f,l,k){return l*(j/=k)*j*j+f},easeOutCubic:function(m,j,f,l,k){return l*((j=j/k-1)*j*j+1)+f},easeInOutCubic:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j+f}return l/2*((j-=2)*j*j+2)+f},easeInQuart:function(m,j,f,l,k){return l*(j/=k)*j*j*j+f},easeOutQuart:function(m,j,f,l,k){return -l*((j=j/k-1)*j*j*j-1)+f},easeInOutQuart:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j*j+f}return -l/2*((j-=2)*j*j*j-2)+f},easeInQuint:function(m,j,f,l,k){return l*(j/=k)*j*j*j*j+f},easeOutQuint:function(m,j,f,l,k){return l*((j=j/k-1)*j*j*j*j+1)+f},easeInOutQuint:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j*j*j+f}return l/2*((j-=2)*j*j*j*j+2)+f},easeInSine:function(m,j,f,l,k){return -l*Math.cos(j/k*(Math.PI/2))+l+f},easeOutSine:function(m,j,f,l,k){return l*Math.sin(j/k*(Math.PI/2))+f},easeInOutSine:function(m,j,f,l,k){return -l/2*(Math.cos(Math.PI*j/k)-1)+f},easeInExpo:function(m,j,f,l,k){return j==0?f:l*Math.pow(2,10*(j/k-1))+f},easeOutExpo:function(m,j,f,l,k){return j==k?f+l:l*(-Math.pow(2,-10*j/k)+1)+f},easeInOutExpo:function(m,j,f,l,k){if(j==0){return f}if(j==k){return f+l}if((j/=k/2)<1){return l/2*Math.pow(2,10*(j-1))+f}return l/2*(-Math.pow(2,-10*--j)+2)+f},easeInCirc:function(m,j,f,l,k){return -l*(Math.sqrt(1-(j/=k)*j)-1)+f},easeOutCirc:function(m,j,f,l,k){return l*Math.sqrt(1-(j=j/k-1)*j)+f},easeInOutCirc:function(m,j,f,l,k){if((j/=k/2)<1){return -l/2*(Math.sqrt(1-j*j)-1)+f}return l/2*(Math.sqrt(1-(j-=2)*j)+1)+f},easeInElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m)==1){return f+n}l||(l=m*0.3);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}return -(k*Math.pow(2,10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l))+f},easeOutElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m)==1){return f+n}l||(l=m*0.3);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}return k*Math.pow(2,-10*j)*Math.sin((j*m-o)*2*Math.PI/l)+n+f},easeInOutElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m/2)==2){return f+n}l||(l=m*0.3*1.5);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}if(j<1){return -0.5*k*Math.pow(2,10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l)+f}return k*Math.pow(2,-10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l)*0.5+n+f},easeInBack:function(n,j,f,m,l,k){if(k==undefined){k=1.70158}return m*(j/=l)*j*((k+1)*j-k)+f},easeOutBack:function(n,j,f,m,l,k){if(k==undefined){k=1.70158}return m*((j=j/l-1)*j*((k+1)*j+k)+1)+f},easeInOutBack:function(n,j,f,m,l,k){if(k==undefined){k=1.70158}if((j/=l/2)<1){return m/2*j*j*(((k*=1.525)+1)*j-k)+f}return m/2*((j-=2)*j*(((k*=1.525)+1)*j+k)+2)+f},easeInBounce:function(m,j,f,l,k){return l-u.easing.easeOutBounce(m,k-j,0,l,k)+f},easeOutBounce:function(m,j,f,l,k){return(j/=k)<1/2.75?l*7.5625*j*j+f:j<2/2.75?l*(7.5625*(j-=1.5/2.75)*j+0.75)+f:j<2.5/2.75?l*(7.5625*(j-=2.25/2.75)*j+0.9375)+f:l*(7.5625*(j-=2.625/2.75)*j+0.984375)+f},easeInOutBounce:function(m,j,f,l,k){if(j<k/2){return u.easing.easeInBounce(m,j*2,0,l,k)*0.5+f}return u.easing.easeOutBounce(m,j*2-k,0,l,k)*0.5+l*0.5+f}})}(jQuery);(function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),l=["position","top","left"],m=a.effects.setMode(c,b.options.mode||"hide"),o=b.options.direction||"vertical";a.effects.save(c,l);c.show();var n=a.effects.createWrapper(c).css({overflow:"hidden"}),k=o=="vertical"?"height":"width";o=o=="vertical"?n.height():n.width();m=="show"&&n.css(k,0);var j={};j[k]=m=="show"?o:0;n.animate(j,b.duration,b.options.easing,function(){m=="hide"&&c.hide();a.effects.restore(c,l);a.effects.removeWrapper(c);b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);(function(a){a.effects.bounce=function(c){return this.queue(function(){var w=a(this),e=["position","top","left"],q=a.effects.setMode(w,c.options.mode||"effect"),u=c.options.direction||"up",v=c.options.distance||20,b=c.options.times||5,p=c.duration||250;/show|hide/.test(q)&&e.push("opacity");a.effects.save(w,e);w.show();a.effects.createWrapper(w);var s=u=="up"||u=="down"?"top":"left";u=u=="up"||u=="left"?"pos":"neg";v=c.options.distance||(s=="top"?w.outerHeight({margin:true})/3:w.outerWidth({margin:true})/3);if(q=="show"){w.css("opacity",0).css(s,u=="pos"?-v:v)}if(q=="hide"){v/=b*2}q!="hide"&&b--;if(q=="show"){var r={opacity:1};r[s]=(u=="pos"?"+=":"-=")+v;w.animate(r,p/2,c.options.easing);v/=2;b--}for(r=0;r<b;r++){var o={},n={};o[s]=(u=="pos"?"-=":"+=")+v;n[s]=(u=="pos"?"+=":"-=")+v;w.animate(o,p/2,c.options.easing).animate(n,p/2,c.options.easing);v=q=="hide"?v*2:v/2}if(q=="hide"){r={opacity:0};r[s]=(u=="pos"?"-=":"+=")+v;w.animate(r,p/2,c.options.easing,function(){w.hide();a.effects.restore(w,e);a.effects.removeWrapper(w);c.callback&&c.callback.apply(this,arguments)})}else{o={};n={};o[s]=(u=="pos"?"-=":"+=")+v;n[s]=(u=="pos"?"+=":"-=")+v;w.animate(o,p/2,c.options.easing).animate(n,p/2,c.options.easing,function(){a.effects.restore(w,e);a.effects.removeWrapper(w);c.callback&&c.callback.apply(this,arguments)})}w.queue("fx",function(){w.dequeue()});w.dequeue()})}})(jQuery);(function(a){a.effects.clip=function(b){return this.queue(function(){var e=a(this),j=["position","top","left","height","width"],m=a.effects.setMode(e,b.options.mode||"hide"),o=b.options.direction||"vertical";a.effects.save(e,j);e.show();var n=a.effects.createWrapper(e).css({overflow:"hidden"});n=e[0].tagName=="IMG"?n:e;var l={size:o=="vertical"?"height":"width",position:o=="vertical"?"top":"left"};o=o=="vertical"?n.height():n.width();if(m=="show"){n.css(l.size,0);n.css(l.position,o/2)}var k={};k[l.size]=m=="show"?o:0;k[l.position]=m=="show"?0:o/2;n.animate(k,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){m=="hide"&&e.hide();a.effects.restore(e,j);a.effects.removeWrapper(e);b.callback&&b.callback.apply(e[0],arguments);e.dequeue()}})})}})(jQuery);(function(a){a.effects.drop=function(b){return this.queue(function(){var d=a(this),k=["position","top","left","opacity"],n=a.effects.setMode(d,b.options.mode||"hide"),c=b.options.direction||"left";a.effects.save(d,k);d.show();a.effects.createWrapper(d);var m=c=="up"||c=="down"?"top":"left";c=c=="up"||c=="left"?"pos":"neg";var l=b.options.distance||(m=="top"?d.outerHeight({margin:true})/2:d.outerWidth({margin:true})/2);if(n=="show"){d.css("opacity",0).css(m,c=="pos"?-l:l)}var j={opacity:n=="show"?1:0};j[m]=(n=="show"?c=="pos"?"+=":"-=":c=="pos"?"-=":"+=")+l;d.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){n=="hide"&&d.hide();a.effects.restore(d,k);a.effects.removeWrapper(d);b.callback&&b.callback.apply(this,arguments);d.dequeue()}})})}})(jQuery);(function(a){a.effects.explode=function(b){return this.queue(function(){var q=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,p=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var j=a(this).show().css("visibility","hidden"),m=j.offset();m.top-=parseInt(j.css("marginTop"),10)||0;m.left-=parseInt(j.css("marginLeft"),10)||0;for(var l=j.outerWidth(true),k=j.outerHeight(true),o=0;o<q;o++){for(var n=0;n<p;n++){j.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*(l/p),top:-o*(k/q)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:l/p,height:k/q,left:m.left+n*(l/p)+(b.options.mode=="show"?(n-Math.floor(p/2))*(l/p):0),top:m.top+o*(k/q)+(b.options.mode=="show"?(o-Math.floor(q/2))*(k/q):0),opacity:b.options.mode=="show"?0:1}).animate({left:m.left+n*(l/p)+(b.options.mode=="show"?0:(n-Math.floor(p/2))*(l/p)),top:m.top+o*(k/q)+(b.options.mode=="show"?0:(o-Math.floor(q/2))*(k/q)),opacity:b.options.mode=="show"?1:0},b.duration||500)}}setTimeout(function(){b.options.mode=="show"?j.css({visibility:"visible"}):j.css({visibility:"visible"}).hide();b.callback&&b.callback.apply(j[0]);j.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);(function(a){a.effects.fade=function(b){return this.queue(function(){var f=a(this),e=a.effects.setMode(f,b.options.mode||"hide");f.animate({opacity:e},{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments);f.dequeue()}})})}})(jQuery);(function(a){a.effects.fold=function(b){return this.queue(function(){var v=a(this),n=["position","top","left"],u=a.effects.setMode(v,b.options.mode||"hide"),q=b.options.size||15,p=!!b.options.horizFirst,m=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(v,n);v.show();var s=a.effects.createWrapper(v).css({overflow:"hidden"}),r=u=="show"!=p,c=r?["width","height"]:["height","width"];r=r?[s.width(),s.height()]:[s.height(),s.width()];var o=/([0-9]+)%/.exec(q);if(o){q=parseInt(o[1],10)/100*r[u=="hide"?0:1]}if(u=="show"){s.css(p?{height:0,width:q}:{height:q,width:0})}p={};o={};p[c[0]]=u=="show"?r[0]:q;o[c[1]]=u=="show"?r[1]:0;s.animate(p,m,b.options.easing).animate(o,m,b.options.easing,function(){u=="hide"&&v.hide();a.effects.restore(v,n);a.effects.removeWrapper(v);b.callback&&b.callback.apply(v[0],arguments);v.dequeue()})})}})(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),h=["backgroundImage","backgroundColor","opacity"],j=a.effects.setMode(c,b.options.mode||"show"),g={backgroundColor:c.css("backgroundColor")};if(j=="hide"){g.opacity=0}a.effects.save(c,h);c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){j=="hide"&&c.hide();a.effects.restore(c,h);j=="show"&&!a.support.opacity&&this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a){a.effects.pulsate=function(b){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,b.options.mode||"show");times=(b.options.times||5)*2-1;duration=b.duration?b.duration/2:a.fx.speeds._default/2;isVisible=d.is(":visible");animateTo=0;if(!isVisible){d.css("opacity",0).show();animateTo=1}if(e=="hide"&&isVisible||e=="show"&&!isVisible){times--}for(e=0;e<times;e++){d.animate({opacity:animateTo},duration,b.options.easing);animateTo=(animateTo+1)%2}d.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&d.hide();b.callback&&b.callback.apply(this,arguments)});d.queue("fx",function(){d.dequeue()}).dequeue()})}})(jQuery);(function(a){a.effects.puff=function(c){return this.queue(function(){var b=a(this),k=a.effects.setMode(b,c.options.mode||"hide"),j=parseInt(c.options.percent,10)||150,f=j/100,d={height:b.height(),width:b.width()};a.extend(c.options,{fade:true,mode:k,percent:k=="hide"?j:100,from:k=="hide"?d:{height:d.height*f,width:d.width*f}});b.effect("scale",c.options,c.duration,c.callback);b.dequeue()})};a.effects.scale=function(c){return this.queue(function(){var b=a(this),m=a.extend(true,{},c.options),k=a.effects.setMode(b,c.options.mode||"effect"),j=parseInt(c.options.percent,10)||(parseInt(c.options.percent,10)==0?0:k=="hide"?0:100),d=c.options.direction||"both",l=c.options.origin;if(k!="effect"){m.origin=l||["middle","center"];m.restore=true}l={height:b.height(),width:b.width()};b.from=c.options.from||(k=="show"?{height:0,width:0}:l);j={y:d!="horizontal"?j/100:1,x:d!="vertical"?j/100:1};b.to={height:l.height*j.y,width:l.width*j.x};if(c.options.fade){if(k=="show"){b.from.opacity=0;b.to.opacity=1}if(k=="hide"){b.from.opacity=1;b.to.opacity=0}}m.from=b.from;m.to=b.to;m.mode=k;b.effect("size",m,c.duration,c.callback);b.dequeue()})};a.effects.size=function(c){return this.queue(function(){var B=a(this),z=["position","top","left","width","height","overflow","opacity"],x=["position","top","left","overflow","opacity"],w=["width","height","overflow"],v=["fontSize"],y=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],s=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],b=a.effects.setMode(B,c.options.mode||"effect"),o=c.options.restore||false,q=c.options.scale||"both",r=c.options.origin,u={height:B.height(),width:B.width()};B.from=c.options.from||u;B.to=c.options.to||u;if(r){r=a.effects.getBaseline(r,u);B.from.top=(u.height-B.from.height)*r.y;B.from.left=(u.width-B.from.width)*r.x;B.to.top=(u.height-B.to.height)*r.y;B.to.left=(u.width-B.to.width)*r.x}var A={from:{y:B.from.height/u.height,x:B.from.width/u.width},to:{y:B.to.height/u.height,x:B.to.width/u.width}};if(q=="box"||q=="both"){if(A.from.y!=A.to.y){z=z.concat(y);B.from=a.effects.setTransition(B,y,A.from.y,B.from);B.to=a.effects.setTransition(B,y,A.to.y,B.to)}if(A.from.x!=A.to.x){z=z.concat(s);B.from=a.effects.setTransition(B,s,A.from.x,B.from);B.to=a.effects.setTransition(B,s,A.to.x,B.to)}}if(q=="content"||q=="both"){if(A.from.y!=A.to.y){z=z.concat(v);B.from=a.effects.setTransition(B,v,A.from.y,B.from);B.to=a.effects.setTransition(B,v,A.to.y,B.to)}}a.effects.save(B,o?z:x);B.show();a.effects.createWrapper(B);B.css("overflow","hidden").css(B.from);if(q=="content"||q=="both"){y=y.concat(["marginTop","marginBottom"]).concat(v);s=s.concat(["marginLeft","marginRight"]);w=z.concat(y).concat(s);B.find("*[width]").each(function(){child=a(this);o&&a.effects.save(child,w);var d={height:child.height(),width:child.width()};child.from={height:d.height*A.from.y,width:d.width*A.from.x};child.to={height:d.height*A.to.y,width:d.width*A.to.x};if(A.from.y!=A.to.y){child.from=a.effects.setTransition(child,y,A.from.y,child.from);child.to=a.effects.setTransition(child,y,A.to.y,child.to)}if(A.from.x!=A.to.x){child.from=a.effects.setTransition(child,s,A.from.x,child.from);child.to=a.effects.setTransition(child,s,A.to.x,child.to)}child.css(child.from);child.animate(child.to,c.duration,c.options.easing,function(){o&&a.effects.restore(child,w)})})}B.animate(B.to,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){B.to.opacity===0&&B.css("opacity",B.from.opacity);b=="hide"&&B.hide();a.effects.restore(B,o?z:x);a.effects.removeWrapper(B);c.callback&&c.callback.apply(this,arguments);B.dequeue()}})})}})(jQuery);(function(a){a.effects.shake=function(b){return this.queue(function(){var v=a(this),n=["position","top","left"];a.effects.setMode(v,b.options.mode||"effect");var u=b.options.direction||"left",s=b.options.distance||20,d=b.options.times||3,r=b.duration||b.options.duration||140;a.effects.save(v,n);v.show();a.effects.createWrapper(v);var q=u=="up"||u=="down"?"top":"left",p=u=="up"||u=="left"?"pos":"neg";u={};var o={},m={};u[q]=(p=="pos"?"-=":"+=")+s;o[q]=(p=="pos"?"+=":"-=")+s*2;m[q]=(p=="pos"?"-=":"+=")+s*2;v.animate(u,r,b.options.easing);for(s=1;s<d;s++){v.animate(o,r,b.options.easing).animate(m,r,b.options.easing)}v.animate(o,r,b.options.easing).animate(u,r/2,b.options.easing,function(){a.effects.restore(v,n);a.effects.removeWrapper(v);b.callback&&b.callback.apply(this,arguments)});v.queue("fx",function(){v.dequeue()});v.dequeue()})}})(jQuery);(function(a){a.effects.slide=function(b){return this.queue(function(){var d=a(this),k=["position","top","left"],n=a.effects.setMode(d,b.options.mode||"show"),c=b.options.direction||"left";a.effects.save(d,k);d.show();a.effects.createWrapper(d).css({overflow:"hidden"});var m=c=="up"||c=="down"?"top":"left";c=c=="up"||c=="left"?"pos":"neg";var l=b.options.distance||(m=="top"?d.outerHeight({margin:true}):d.outerWidth({margin:true}));if(n=="show"){d.css(m,c=="pos"?-l:l)}var j={};j[m]=(n=="show"?c=="pos"?"+=":"-=":c=="pos"?"-=":"+=")+l;d.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){n=="hide"&&d.hide();a.effects.restore(d,k);a.effects.removeWrapper(d);b.callback&&b.callback.apply(this,arguments);d.dequeue()}})})}})(jQuery);(function(a){a.effects.transfer=function(b){return this.queue(function(){var e=a(this),j=a(b.options.to),h=j.offset();j={top:h.top,left:h.left,height:j.innerHeight(),width:j.innerWidth()};h=e.offset();var g=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:h.top,left:h.left,height:e.innerHeight(),width:e.innerWidth(),position:"absolute"}).animate(j,b.duration,b.options.easing,function(){g.remove();b.callback&&b.callback.apply(e[0],arguments);e.dequeue()})})}})(jQuery);(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},_create:function(){var e=this.options,c=this;this.running=0;this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.element[0].nodeName=="UL"&&this.element.children("li").addClass("ui-accordion-li-fix");this.headers=this.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){a(this).removeClass("ui-state-focus")});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(e.navigation){var h=this.element.find("a").filter(e.navigationFilter);if(h.length){var g=h.closest(".ui-accordion-header");this.active=g.length?g:h.closest(".ui-accordion-content").prev()}}this.active=this._findActive(this.active||e.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass("ui-accordion-content-active");this._createIcons();this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(b){return c._keydown(b)}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();this.active.length?this.active.attr("aria-expanded","true").attr("tabIndex","0"):this.headers.eq(0).attr("tabIndex","0");a.browser.safari||this.headers.find("a").attr("tabIndex","-1");e.event&&this.headers.bind(e.event+".accordion",function(b){c._clickHandler.call(c,b,this);b.preventDefault()})},_createIcons:function(){var b=this.options;if(b.icons){a("<span/>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var d=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(d.autoHeight||d.fillHeight){c.css("height","")}return this},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d=="active"&&this.activate(c);if(d=="icons"){this._destroyIcons();c&&this._createIcons()}},_keydown:function(e){var c=a.ui.keyCode;if(!(this.options.disabled||e.altKey||e.ctrlKey)){var k=this.headers.length,j=this.headers.index(e.target),h=false;switch(e.keyCode){case c.RIGHT:case c.DOWN:h=this.headers[(j+1)%k];break;case c.LEFT:case c.UP:h=this.headers[(j-1+k)%k];break;case c.SPACE:case c.ENTER:this._clickHandler({target:e.target},e.target);e.preventDefault()}if(h){a(e.target).attr("tabIndex","-1");a(h).attr("tabIndex","0");h.focus();return false}return true}},resize:function(){var e=this.options,c;if(e.fillSpace){if(a.browser.msie){var f=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",f);this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(e.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height())}).height(c)}}return this},activate:function(b){this.options.active=b;b=this._findActive(b)[0];this._clickHandler({target:b},b);return this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(h,c){var m=this.options;if(!m.disabled){if(h.target){h=a(h.currentTarget||c);c=h[0]==this.active[0];m.active=m.collapsible&&c?false:a(".ui-accordion-header",this.element).index(h);if(!(this.running||!m.collapsible&&c)){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(m.icons.headerSelected).addClass(m.icons.header);if(!c){h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(m.icons.header).addClass(m.icons.headerSelected);h.next().addClass("ui-accordion-content-active")}l=h.next();k=this.active.next();j={options:m,newHeader:c&&m.collapsible?a([]):h,oldHeader:this.active,newContent:c&&m.collapsible?a([]):l,oldContent:k};m=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=c?a([]):h;this._toggle(l,k,j,c,m)}}else{if(m.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(m.icons.headerSelected).addClass(m.icons.header);this.active.next().addClass("ui-accordion-content-active");var k=this.active.next(),j={options:m,newHeader:a([]),oldHeader:m.active,newContent:a([]),oldContent:k},l=this.active=a([]);this._toggle(l,k,j)}}}},_toggle:function(u,s,r,p,o){var q=this.options,c=this;this.toShow=u;this.toHide=s;this.data=r;var m=function(){if(c){return c._completed.apply(c,arguments)}};this._trigger("changestart",null,this.data);this.running=s.size()===0?u.size():s.size();if(q.animated){r={};r=q.collapsible&&p?{toShow:a([]),toHide:s,complete:m,down:o,autoHeight:q.autoHeight||q.fillSpace}:{toShow:u,toHide:s,complete:m,down:o,autoHeight:q.autoHeight||q.fillSpace};if(!q.proxied){q.proxied=q.animated}if(!q.proxiedDuration){q.proxiedDuration=q.duration}q.animated=a.isFunction(q.proxied)?q.proxied(r):q.proxied;q.duration=a.isFunction(q.proxiedDuration)?q.proxiedDuration(r):q.proxiedDuration;p=a.ui.accordion.animations;var n=q.duration,l=q.animated;if(l&&!p[l]&&!a.easing[l]){l="slide"}p[l]||(p[l]=function(b){this.slide(b,{easing:l,duration:n||700})});p[l](r)}else{if(q.collapsible&&p){u.toggle()}else{s.hide();u.show()}m(true)}s.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();u.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(d){var c=this.options;this.running=d?0:--this.running;if(!this.running){c.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,{version:"1.8.1",animations:{slide:function(h,c){h=a.extend({easing:"swing",duration:300},h,c);if(h.toHide.size()){if(h.toShow.size()){var o=h.toShow.css("overflow"),m=0,l={},n={},j;c=h.toShow;j=c[0].style.width;c.width(parseInt(c.parent().width(),10)-parseInt(c.css("paddingLeft"),10)-parseInt(c.css("paddingRight"),10)-(parseInt(c.css("borderLeftWidth"),10)||0)-(parseInt(c.css("borderRightWidth"),10)||0));a.each(["height","paddingTop","paddingBottom"],function(b,d){n[d]="hide";b=(""+a.css(h.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);l[d]={value:b[1],unit:b[2]||"px"}});h.toShow.css({height:0,overflow:"hidden"}).show();h.toHide.filter(":hidden").each(h.complete).end().filter(":visible").animate(n,{step:function(b,d){if(d.prop=="height"){m=d.end-d.start===0?0:(d.now-d.start)/(d.end-d.start)}h.toShow[0].style[d.prop]=m*l[d.prop].value+l[d.prop].unit},duration:h.duration,easing:h.easing,complete:function(){h.autoHeight||h.toShow.css("height","");h.toShow.css("width",j);h.toShow.css({overflow:o});h.complete()}})}else{h.toHide.animate({height:"hide"},h)}}else{h.toShow.animate({height:"show"},h)}},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);(function(a){a.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var d=this,c=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){var b=a.ui.keyCode;switch(e.keyCode){case b.PAGE_UP:d._move("previousPage",e);break;case b.PAGE_DOWN:d._move("nextPage",e);break;case b.UP:d._move("previous",e);e.preventDefault();break;case b.DOWN:d._move("next",e);e.preventDefault();break;case b.ENTER:d.menu.active&&e.preventDefault();case b.TAB:if(!d.menu.active){return}d.menu.select(e);break;case b.ESCAPE:d.element.val(d.term);d.close(e);break;case b.LEFT:case b.RIGHT:case b.SHIFT:case b.CONTROL:case b.ALT:break;default:clearTimeout(d.searching);d.searching=setTimeout(function(){d.search(null,e)},d.options.delay);break}}).bind("focus.autocomplete",function(){d.selectedItem=null;d.previous=d.element.val()}).bind("blur.autocomplete",function(b){clearTimeout(d.searching);d.closing=setTimeout(function(){d.close(b);d._change(b)},150)});this._initSource();this.response=function(){return d._response.apply(d,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo("body",c).menu({focus:function(e,b){b=b.item.data("item.autocomplete");false!==d._trigger("focus",null,{item:b})&&/^key/.test(e.originalEvent.type)&&d.element.val(b.value)},selected:function(e,b){b=b.item.data("item.autocomplete");false!==d._trigger("select",e,{item:b})&&d.element.val(b.value);d.close(e);e=d.previous;if(d.element[0]!==c.activeElement){d.element.focus();d.previous=e}d.selectedItem=b},blur:function(){d.menu.element.is(":visible")&&d.element.val(d.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b){a.Widget.prototype._setOption.apply(this,arguments);b==="source"&&this._initSource()},_initSource:function(){var d,c;if(a.isArray(this.options.source)){d=this.options.source;this.source=function(e,b){b(a.ui.autocomplete.filter(d,e.term))}}else{if(typeof this.options.source==="string"){c=this.options.source;this.source=function(e,b){a.getJSON(c,e,b)}}else{this.source=this.options.source}}},search:function(d,c){d=d!=null?d:this.element.val();if(d.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search")!==false){return this._search(d)}},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);this.menu.element.hide();this.menu.deactivate()}},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(e){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1),f;this._renderMenu(d,e);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});e=d.width("").width();f=this.element.width();d.width(Math.max(e,f))},_renderMenu:function(e,d){var f=this;a.each(d,function(c,b){f._renderItem(e,b)})},_renderItem:function(d,c){return a("<li></li>").data("item.autocomplete",c).append("<a>"+c.label+"</a>").appendTo(d)},_move:function(d,c){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);this.menu.deactivate()}else{this.menu[d](c)}}else{this.search(null,c)}},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(e,d){var f=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(e,function(b){return f.test(b.label||b.value||b)})}})})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();b.select(c)}});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(g,e){this.deactivate();if(this.hasScroll()){var k=e.offset().top-this.element.offset().top,j=this.element.attr("scrollTop"),h=this.element.height();if(k<0){this.element.attr("scrollTop",j+k)}else{k>h&&this.element.attr("scrollTop",j+k-h+e.height())}}this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",g,{item:e})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(e,d,f){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);e.length?this.activate(f,e):this.activate(f,this.element.children(d))}else{this.activate(f,this.element.children(d))}},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(":first"))}else{var e=this.active.offset().top,h=this.element.height(),g=this.element.children("li").filter(function(){var b=a(this).offset().top-e-h+a(this).height();return b<10&&b>-10});g.length||(g=this.element.children(":last"));this.activate(f,g)}}else{this.activate(f,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(e){if(this.hasScroll()){if(!this.active||this.first()){this.activate(e,this.element.children(":last"))}else{var d=this.active.offset().top,f=this.element.height();result=this.element.children("li").filter(function(){var b=a(this).offset().top-d+f-a(this).height();return b<10&&b>-10});result.length||(result=this.element.children(":first"));this.activate(e,result)}}else{this.activate(e,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})})(jQuery);(function(b){var e,c=function(a){b(":ui-button",a.target.form).each(function(){var f=b(this).data("button");setTimeout(function(){f.refresh()},1)})},d=function(a){var h=a.name,g=a.form,f=b([]);if(h){f=g?b(g).find("[name='"+h+"']"):b("[name='"+h+"']",a.ownerDocument).filter(function(){return !this.form})}return f};b.widget("ui.button",{options:{text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",c);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,h=this.options,g=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(!g?" ui-state-active":"");if(h.label===null){h.label=this.buttonElement.html()}if(this.element.is(":disabled")){h.disabled=true}this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!h.disabled){b(this).addClass("ui-state-hover");this===e&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){h.disabled||b(this).removeClass(f)}).bind("focus.button",function(){b(this).addClass("ui-state-focus")}).bind("blur.button",function(){b(this).removeClass("ui-state-focus")});g&&this.element.bind("change.button",function(){a.refresh()});if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(h.disabled){return false}b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)})}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(h.disabled){return false}b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed",true);var j=a.element[0];d(j).not(j).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)})}else{this.buttonElement.bind("mousedown.button",function(){if(h.disabled){return false}b(this).addClass("ui-state-active");e=this;b(document).one("mouseup",function(){e=null})}).bind("mouseup.button",function(){if(h.disabled){return false}b(this).removeClass("ui-state-active")}).bind("keydown.button",function(j){if(h.disabled){return false}if(j.keyCode==b.ui.keyCode.SPACE||j.keyCode==b.ui.keyCode.ENTER){b(this).addClass("ui-state-active")}}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(j){j.keyCode===b.ui.keyCode.SPACE&&b(this).click()})}}this._setOption("disabled",h.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("[for="+this.element.attr("id")+"]");this.element.addClass("ui-helper-hidden-accessible");var a=this.element.is(":checked");a&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title");b.Widget.prototype.destroy.call(this)},_setOption:function(a,f){b.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled"){f?this.element.attr("disabled",true):this.element.removeAttr("disabled")}this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);if(this.type==="radio"){d(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)})}else{if(this.type==="checkbox"){this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)}}},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label)}else{var a=this.buttonElement,h=b("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),g=this.options.icons,f=g.primary&&g.secondary;if(g.primary||g.secondary){a.addClass("ui-button-text-icon"+(f?"s":""));g.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+g.primary+"'></span>");g.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+g.secondary+"'></span>");if(!this.options.text){a.addClass(f?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon");this.hasTitle||a.attr("title",h)}}else{a.addClass("ui-button-text-only")}}}});b.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset");this._init()},_init:function(){this.refresh()},_setOption:function(a,f){a==="disabled"&&this.buttons.button("option",a,f);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");b.Widget.prototype.destroy.call(this)}})})(jQuery);(function(d){function J(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"_default",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function E(a,b){d.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}d.extend(d.ui,{datepicker:{version:"1.8.1"}});var y=(new Date).getTime();d.extend(J.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){a.id="dp"+ ++this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input"){this._connectDatepicker(a,i)}else{f&&this._inlineDatepicker(a,i)}},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both"){a.focus(this._showDatepicker)}if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++){if(f[g].length>h){h=f[g].length;i=g}}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b)}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){a="dp"+ ++this.uuid;this._dialogInput=d('<input type="text" id="'+a+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(e=="div"||e=="span"){b.removeClass(this.markerClassName).empty()}}}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().removeClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().addClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a){return false}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return true}}return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null}var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing){switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass,b.dpDiv).add(d("td."+d.datepicker._currentClass,b.dpDiv));c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey){d.datepicker._clearDate(a.target)}c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey){d.datepicker._gotoToday(a.target)}c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?+1:-1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M")}break;case 38:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,-7,"D")}c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?-1:+1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M")}break;case 40:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,+7,"D")}c=a.ctrlKey||a.metaKey;break;default:c=false}}else{if(a.keyCode==36&&a.ctrlKey){d.datepicker._showDatepicker(this)}else{c=false}}if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal){try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input"){a=d("input",a.parentNode)[0]}if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog){a.value=""}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return !e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=d.datepicker._getBorders(b.dpDiv);b.dpDiv.find("iframe.ui-datepicker-cover").css({left:-i[0],top:-i[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f){h()}b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a)).find("iframe.ui-datepicker-cover").css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);var e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus()},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),k=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>k&&k>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);){a=a[b?"previousSibling":"nextSibling"]}a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker"))){if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose")){a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){a=this._getInst(d(a)[0]);a.input&&a._selectingMonthYear&&!d.browser.msie&&a.input.focus();a._selectingMonthYear=!a._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c){c.apply(a.input?a.input[0]:null,[b,a])}else{a.input&&a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,k=c=-1,l=-1,u=-1,j=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p){throw"Missing number at position "+s}s+=p[0].length;return parseInt(p[0],10)},n=function(p,w,G){p=o(p)?G:w;for(w=0;w<p.length;w++){if(b.substr(s,p[w].length)==p[w]){s+=p[w].length;return w+1}}throw"Unknown name at position "+s},r=function(){if(b.charAt(s)!=a.charAt(z)){throw"Unexpected literal at position "+s}s++},s=0,z=0;z<a.length;z++){if(j){if(a.charAt(z)=="'"&&!o("'")){j=false}else{r()}}else{switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");break;case"m":k=m("m");break;case"M":k=n("M",i,g);break;case"y":c=m("y");break;case"@":var v=new Date(m("@"));c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"!":v=new Date((m("!")-this._ticksTo1970)/10000);c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"'":if(o("'")){r()}else{j=true}break;default:r()}}}if(c==-1){c=(new Date).getFullYear()}else{if(c<100){c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100)}}if(u>-1){k=1;l=u;do{e=this._getDaysInMonth(c,k-1);if(l<=e){break}k++;l-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,k-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=k||v.getDate()!=l){throw"Invalid date"}return v},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=j+1<a.length&&a.charAt(j+1)==o)&&j++;return o},g=function(o,m,n){m=""+m;if(i(o)){for(;m.length<n;){m="0"+m}}return m},k=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b){for(var j=0;j<a.length;j++){if(u){if(a.charAt(j)=="'"&&!i("'")){u=false}else{l+=a.charAt(j)}}else{switch(a.charAt(j)){case"d":l+=g("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000,3);break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),h,c);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*10000+this._ticksTo1970;break;case"'":if(i("'")){l+="'"}else{u=true}break;default:l+=a.charAt(j)}}}}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++){if(c){if(a.charAt(f)=="'"&&!e("'")){c=false}else{b+=a.charAt(f)}}else{switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":if(e("'")){b+="'"}else{c=true}break;default:b+=a.charAt(f)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,k=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=u.exec(h);j;){switch(j[2]||"d"){case"d":case"D":g+=parseInt(j[1],10);break;case"w":case"W":g+=parseInt(j[1],10)*7;break;case"m":case"M":l+=parseInt(j[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break;case"y":case"Y":k+=parseInt(j[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break}j=u.exec(h)}return new Date(k,l,g)};if(b=(b=b==null?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):b)&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c){this._notifyChange(a)}this._adjustInstDate(a);if(a.input){a.input.val(e?"":this._formatDate(a))}},_getDate:function(a){return !a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),k=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),j=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=j&&n<j?j:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-k,1)),this._getFormatConfig(a));n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+k+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+k,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+k+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";k=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;k=!h?k:this.formatDate(k,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+k+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;k=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),w=this._get(a,"showOtherMonths"),G=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var K=this._getDefaultDate(a),H="",C=0;C<i[0];C++){for(var L="",D=0;D<i[1];D++){var M=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1){switch(D){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,j,o,C>0||D>0,z,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=k?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth){a.selectedDay=Math.min(a.selectedDay,A)}t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var N=0;N<A;N++){x+="<tr>";var O=!k?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var F=p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,I=B&&!G||!F[0]||j&&q<j||o&&q>o;O+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==M.getTime()&&g==a.selectedMonth&&a._keyEvent||K.getTime()==q.getTime()&&K.getTime()==M.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!w?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!B||w)&&F[2]?' title="'+F[2]+'"':"")+(I?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!w?"&#xa0;":I?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=O+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");L+=x}H+=L}H+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return H},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var k=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),j='<div class="ui-datepicker-title">',o="";if(h||!k){o+='<span class="ui-datepicker-month">'+i[b]+"</span>"}else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++){if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth())){o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>"}}o+="</select>"}u||(j+=o+(h||!(k&&l)?"&#xa0;":""));if(h||!l){j+='<span class="ui-datepicker-year">'+c+"</span>"}else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(j+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++){j+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>"}j+="</select>"}j+=this._get(a,"yearSuffix");if(u){j+=(h||!(k&&l)?"&#xa0;":"")+o}j+="</div>";return j},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y"){this._notifyChange(a)}},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b){b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])}},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget")){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new J;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.1";window["DP_jQuery_"+y]=d})(jQuery);(function(a){a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");var j=this,c=j.options,o=c.title||j.originalTitle||"&#160;",n=a.ui.dialog.getTitleId(j.element),l=(j.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){if(c.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){j.close(b);b.preventDefault()}}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(b){j.moveToTop(false,b)});j.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(l);var m=(j.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(l),k=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){k.addClass("ui-state-hover")},function(){k.removeClass("ui-state-hover")}).focus(function(){k.addClass("ui-state-focus")}).blur(function(){k.removeClass("ui-state-focus")}).click(function(b){j.close(b);return false}).appendTo(m);(j.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(k);a("<span></span>").addClass("ui-dialog-title").attr("id",n).html(o).prependTo(m);if(a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)){c.beforeClose=c.beforeclose}m.find("*").add(m).disableSelection();c.draggable&&a.fn.draggable&&j._makeDraggable();c.resizable&&a.fn.resizable&&j._makeResizable();j._createButtons(c.buttons);j._isOpen=false;a.fn.bgiframe&&l.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;b.overlay&&b.overlay.destroy();b.uiDialog.hide();b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");b.uiDialog.remove();b.originalTitle&&b.element.attr("title",b.originalTitle);return b},widget:function(){return this.uiDialog},close:function(e){var c=this,f;if(false!==c._trigger("beforeClose",e)){c.overlay&&c.overlay.destroy();c.uiDialog.unbind("keypress.ui-dialog");c._isOpen=false;if(c.options.hide){c.uiDialog.hide(c.options.hide,function(){c._trigger("close",e)})}else{c.uiDialog.hide();c._trigger("close",e)}a.ui.dialog.overlay.resize();if(c.options.modal){f=0;a(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){f=Math.max(f,a(this).css("z-index"))}});a.ui.dialog.maxZ=f}return c}},isOpen:function(){return this._isOpen},moveToTop:function(f,c){var h=this,g=h.options;if(g.modal&&!f||!g.stack&&!g.modal){return h._trigger("focus",c)}if(g.zIndex>a.ui.dialog.maxZ){a.ui.dialog.maxZ=g.zIndex}if(h.overlay){a.ui.dialog.maxZ+=1;h.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}f={scrollTop:h.element.attr("scrollTop"),scrollLeft:h.element.attr("scrollLeft")};a.ui.dialog.maxZ+=1;h.uiDialog.css("z-index",a.ui.dialog.maxZ);h.element.attr(f);h._trigger("focus",c);return h},open:function(){if(!this._isOpen){var e=this,c=e.options,f=e.uiDialog;e.overlay=c.modal?new a.ui.dialog.overlay(e):null;f.next().length&&f.appendTo("body");e._size();e._position(c.position);f.show(c.show);e.moveToTop(true);c.modal&&f.bind("keypress.ui-dialog",function(h){if(h.keyCode===a.ui.keyCode.TAB){var b=a(":tabbable",this),d=b.filter(":first");b=b.filter(":last");if(h.target===b[0]&&!h.shiftKey){d.focus(1);return false}else{if(h.target===d[0]&&h.shiftKey){b.focus(1);return false}}}});a([]).add(f.find(".ui-dialog-content :tabbable:first")).add(f.find(".ui-dialog-buttonpane :tabbable:first")).add(f).filter(":first").focus();e._trigger("open");e._isOpen=true;return e}},_createButtons:function(f){var c=this,h=false,g=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");c.uiDialog.find(".ui-dialog-buttonpane").remove();typeof f==="object"&&f!==null&&a.each(f,function(){return !(h=true)});if(h){a.each(f,function(b,d){b=a('<button type="button"></button>').text(b).click(function(){d.apply(c.element[0],arguments)}).appendTo(g);a.fn.button&&b.button()});g.appendTo(c.uiDialog)}},_makeDraggable:function(){function f(b){return{position:b.position,offset:b.offset}}var c=this,k=c.options,j=a(document),h;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,b){h=k.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",d,f(b))},drag:function(d,b){c._trigger("drag",d,f(b))},stop:function(d,b){k.position=[b.position.left-j.scrollLeft(),b.position.top-j.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(h);c._trigger("dragStop",d,f(b));a.ui.dialog.overlay.resize()}})},_makeResizable:function(f){function c(b){return{originalPosition:b.originalPosition,originalSize:b.originalSize,position:b.position,size:b.size}}f=f===undefined?this.options.resizable:f;var k=this,j=k.options,h=k.uiDialog.css("position");f=typeof f==="string"?f:"n,e,s,w,se,sw,ne,nw";k.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:k.element,maxWidth:j.maxWidth,maxHeight:j.maxHeight,minWidth:j.minWidth,minHeight:k._minHeight(),handles:f,start:function(d,b){a(this).addClass("ui-dialog-resizing");k._trigger("resizeStart",d,c(b))},resize:function(d,b){k._trigger("resize",d,c(b))},stop:function(d,b){a(this).removeClass("ui-dialog-resizing");j.height=a(this).height();j.width=a(this).width();k._trigger("resizeStop",d,c(b));a.ui.dialog.overlay.resize()}}).css("position",h).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(e){var c=[],f=[0,0];e=e||a.ui.dialog.prototype.options.position;if(typeof e==="string"||typeof e==="object"&&"0" in e){c=e.split?e.split(" "):[e[0],e[1]];if(c.length===1){c[1]=c[0]}a.each(["left","top"],function(d,b){if(+c[d]===c[d]){f[d]=c[d];c[d]=b}})}else{if(typeof e==="object"){if("left" in e){c[0]="left";f[0]=e.left}else{if("right" in e){c[0]="right";f[0]=-e.right}}if("top" in e){c[1]="top";f[1]=e.top}else{if("bottom" in e){c[1]="bottom";f[1]=-e.bottom}}}}(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position({my:c.join(" "),at:c.join(" "),offset:f.join(" "),of:window,collision:"fit",using:function(d){var b=a(this).css(d).offset().top;b<0&&a(this).css("top",d.top-b)}});e||this.uiDialog.hide()},_setOption:function(h,c){var m=this,l=m.uiDialog,j=l.is(":data(resizable)"),k=false;switch(h){case"beforeclose":h="beforeClose";break;case"buttons":m._createButtons(c);break;case"closeText":m.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":l.removeClass(m.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case"disabled":c?l.addClass("ui-dialog-disabled"):l.removeClass("ui-dialog-disabled");break;case"draggable":c?m._makeDraggable():l.draggable("destroy");break;case"height":k=true;break;case"maxHeight":j&&l.resizable("option","maxHeight",c);k=true;break;case"maxWidth":j&&l.resizable("option","maxWidth",c);k=true;break;case"minHeight":j&&l.resizable("option","minHeight",c);k=true;break;case"minWidth":j&&l.resizable("option","minWidth",c);k=true;break;case"position":m._position(c);break;case"resizable":j&&!c&&l.resizable("destroy");j&&typeof c==="string"&&l.resizable("option","handles",c);!j&&c!==false&&m._makeResizable(c);break;case"title":a(".ui-dialog-title",m.uiDialogTitlebar).html(""+(c||"&#160;"));break;case"width":k=true;break}a.Widget.prototype._setOption.apply(m,arguments);k&&m._size()},_size:function(){var d=this.options,c;this.element.css({width:"auto",minHeight:0,height:0});c=this.uiDialog.css({height:"auto",width:d.width}).height();this.element.css(d.height==="auto"?{minHeight:Math.max(d.minHeight-c,0),height:"auto"}:{minHeight:0,height:Math.max(d.height-c,0)}).show();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.1",uuid:0,maxZ:0,getTitleId:function(b){b=b.attr("id");if(!b){this.uuid+=1;b=this.uuid}return"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(d){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()>=a.ui.dialog.overlay.maxZ})},1);a(document).bind("keydown.dialog-overlay",function(b){if(d.options.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){d.close(b);b.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(d){this.oldInstances.push(this.instances.splice(a.inArray(d,this.instances),1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");d.remove();var c=0;a.each(this.instances,function(){c=Math.max(c,this.css("z-index"))});this.maxZ=c},height:function(){var d,c;if(a.browser.msie&&a.browser.version<7){d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return d<c?a(window).height()+"px":d+"px"}else{return a(document).height()+"px"}},width:function(){var d,c;if(a.browser.msie&&a.browser.version<7){d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return d<c?a(window).width()+"px":d+"px"}else{return a(document).width()+"px"}},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(f){f.ui=f.ui||{};var a=/left|center|right/,e=/top|center|bottom/,d=f.fn.position,b=f.fn.offset;f.fn.position=function(j){if(!j||!j.of){return d.apply(this,arguments)}j=f.extend({},j);var c=f(j.of),o=(j.collision||"flip").split(" "),n=j.offset?j.offset.split(" "):[0,0],m,l,k;if(j.of.nodeType===9){m=c.width();l=c.height();k={top:0,left:0}}else{if(j.of.scrollTo&&j.of.document){m=c.width();l=c.height();k={top:c.scrollTop(),left:c.scrollLeft()}}else{if(j.of.preventDefault){j.at="left top";m=l=0;k={top:j.of.pageY,left:j.of.pageX}}else{m=c.outerWidth();l=c.outerHeight();k=c.offset()}}}f.each(["my","at"],function(){var g=(j[this]||"").split(" ");if(g.length===1){g=a.test(g[0])?g.concat(["center"]):e.test(g[0])?["center"].concat(g):["center","center"]}g[0]=a.test(g[0])?g[0]:"center";g[1]=e.test(g[1])?g[1]:"center";j[this]=g});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(j.at[0]==="right"){k.left+=m}else{if(j.at[0]==="center"){k.left+=m/2}}if(j.at[1]==="bottom"){k.top+=l}else{if(j.at[1]==="center"){k.top+=l/2}}k.left+=n[0];k.top+=n[1];return this.each(function(){var q=f(this),h=q.outerWidth(),g=q.outerHeight(),p=f.extend({},k);if(j.my[0]==="right"){p.left-=h}else{if(j.my[0]==="center"){p.left-=h/2}}if(j.my[1]==="bottom"){p.top-=g}else{if(j.my[1]==="center"){p.top-=g/2}}p.left=parseInt(p.left);p.top=parseInt(p.top);f.each(["left","top"],function(u,s){f.ui.position[o[u]]&&f.ui.position[o[u]][s](p,{targetWidth:m,targetHeight:l,elemWidth:h,elemHeight:g,offset:n,my:j.my,at:j.at})});f.fn.bgiframe&&q.bgiframe();q.offset(f.extend(p,{using:j.using}))})};f.ui.position={fit:{left:function(g,c){var h=f(window);c=g.left+c.elemWidth-h.width()-h.scrollLeft();g.left=c>0?g.left-c:Math.max(0,g.left)},top:function(g,c){var h=f(window);c=g.top+c.elemHeight-h.height()-h.scrollTop();g.top=c>0?g.top-c:Math.max(0,g.top)}},flip:{left:function(h,c){if(c.at[0]!=="center"){var l=f(window);l=h.left+c.elemWidth-l.width()-l.scrollLeft();var k=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,j=-2*c.offset[0];h.left+=h.left<0?k+c.targetWidth+j:l>0?k-c.targetWidth+j:0}},top:function(j,c){if(c.at[1]!=="center"){var n=f(window);n=j.top+c.elemHeight-n.height()-n.scrollTop();var m=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,l=c.at[1]==="top"?c.targetHeight:-c.targetHeight,k=-2*c.offset[1];j.top+=j.top<0?m+c.targetHeight+k:n>0?m+l+k:0}}}};if(!f.offset.setOffset){f.offset.setOffset=function(j,c){if(/static/.test(f.curCSS(j,"position"))){j.style.position="relative"}var n=f(j),m=n.offset(),l=parseInt(f.curCSS(j,"top",true),10)||0,k=parseInt(f.curCSS(j,"left",true),10)||0;m={top:c.top-m.top+l,left:c.left-m.left+k};"using" in c?c.using.call(j,m):n.css(m)};f.fn.offset=function(g){var c=this[0];if(!c||!c.ownerDocument){return null}if(g){return this.each(function(){f.offset.setOffset(this,g)})}return b.call(this)}}})(jQuery);(function(a){a.widget("ui.progressbar",{options:{value:0},_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(b){if(b===undefined){return this._value()}this._setOption("value",b);return this},_setOption:function(b,d){switch(b){case"value":this.options.value=d;this._refreshValue();this._trigger("change");break}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;if(typeof b!=="number"){b=0}if(b<this._valueMin()){b=this._valueMin()}if(b>this._valueMax()){b=this._valueMax()}return b},_valueMin:function(){return 0},_valueMax:function(){return 100},_refreshValue:function(){var b=this.value();this.valueDiv[b===this._valueMax()?"addClass":"removeClass"]("ui-corner-right").width(b+"%");this.element.attr("aria-valuenow",b)}});a.extend(a.ui.progressbar,{version:"1.8.1"})})(jQuery);(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var c=this,d=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");d.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=a([]);if(d.range){if(d.range===true){this.range=a("<div></div>");if(!d.values){d.values=[this._valueMin(),this._valueMin()]}if(d.values.length&&d.values.length!==2){d.values=[d.values[0],d.values[0]]}}else{this.range=a("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range==="min"||d.range==="max"){this.range.addClass("ui-slider-range-"+d.range)}this.range.addClass("ui-widget-header")}a(".ui-slider-handle",this.element).length===0&&a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(d.values&&d.values.length){for(;a(".ui-slider-handle",this.element).length<d.values.length;){a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle")}}this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(d.disabled){a(this).blur()}else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)});this.handles.keydown(function(n){var m=true,l=a(this).data("index.ui-slider-handle"),k,j,b;if(!c.options.disabled){switch(n.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:m=false;if(!c._keySliding){c._keySliding=true;a(this).addClass("ui-state-active");k=c._start(n,l);if(k===false){return}}break}b=c.options.step;k=c.options.values&&c.options.values.length?(j=c.values(l)):(j=c.value());switch(n.keyCode){case a.ui.keyCode.HOME:j=c._valueMin();break;case a.ui.keyCode.END:j=c._valueMax();break;case a.ui.keyCode.PAGE_UP:j=k+(c._valueMax()-c._valueMin())/5;break;case a.ui.keyCode.PAGE_DOWN:j=k-(c._valueMax()-c._valueMin())/5;break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(k===c._valueMax()){return}j=k+b;break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(k===c._valueMin()){return}j=k-b;break}c._slide(n,l,j);return m}}).keyup(function(f){var b=a(this).data("index.ui-slider-handle");if(c._keySliding){c._keySliding=false;c._stop(f,b);c._change(f,b);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(d){var j=this.options,p,o,n,m,l,k;if(j.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();p={x:d.pageX,y:d.pageY};o=this._normValueFromMouse(p);n=this._valueMax()-this._valueMin()+1;l=this;this.handles.each(function(c){var b=Math.abs(o-l.values(c));if(n>b){n=b;m=a(this);k=c}});if(j.range===true&&this.values(1)===j.min){k+=1;m=a(this.handles[k])}if(this._start(d,k)===false){return false}this._mouseSliding=true;l._handleIndex=k;m.addClass("ui-state-active").focus();j=m.offset();this._clickOffset=!a(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-j.left-m.width()/2,top:d.pageY-j.top-m.height()/2-(parseInt(m.css("borderTopWidth"),10)||0)-(parseInt(m.css("borderBottomWidth"),10)||0)+(parseInt(m.css("marginTop"),10)||0)};o=this._normValueFromMouse(p);this._slide(d,k,o);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(c){var d=this._normValueFromMouse({x:c.pageX,y:c.pageY});this._slide(c,this._handleIndex,d);return false},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(c){var d;if(this.orientation==="horizontal"){d=this.elementSize.width;c=c.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;c=c.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=c/d;if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}c=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+d*c)},_start:function(d,e){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}return this._trigger("start",d,f)},_slide:function(d,f,h){var g;if(this.options.values&&this.options.values.length){g=this.values(f?0:1);if(this.options.values.length===2&&this.options.range===true&&(f===0&&h>g||f===1&&h<g)){h=g}if(h!==this.values(f)){g=this.values();g[f]=h;d=this._trigger("slide",d,{handle:this.handles[f],value:h,values:g});this.values(f?0:1);d!==false&&this.values(f,h,true)}}else{if(h!==this.value()){d=this._trigger("slide",d,{handle:this.handles[f],value:h});d!==false&&this.value(h)}}},_stop:function(d,e){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}this._trigger("stop",d,f)},_change:function(d,e){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}this._trigger("change",d,f)}},value:function(c){if(arguments.length){this.options.value=this._trimAlignValue(c);this._refreshValue();this._change(null,0)}return this._value()},values:function(d,g){var k,j,h;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(g);this._refreshValue();this._change(null,d)}if(arguments.length){if(a.isArray(arguments[0])){k=this.options.values;j=arguments[0];for(h=0;h<k.length;h+=1){k[h]=this._trimAlignValue(j[h]);this._change(null,h)}this._refreshValue()}else{return this.options.values&&this.options.values.length?this._values(d):this.value()}}else{return this._values()}},_setOption:function(d,f){var h,g=0;if(a.isArray(this.options.values)){g=this.options.values.length}a.Widget.prototype._setOption.apply(this,arguments);switch(d){case"disabled":if(f){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(h=0;h<g;h+=1){this._change(null,h)}this._animateOff=false;break}},_value:function(){var c=this.options.value;return c=this._trimAlignValue(c)},_values:function(d){var e,f;if(arguments.length){e=this.options.values[d];return e=this._trimAlignValue(e)}else{e=this.options.values.slice();for(f=0;f<e.length;f+=1){e[f]=this._trimAlignValue(e[f])}return e}},_trimAlignValue:function(d){if(d<this._valueMin()){return this._valueMin()}if(d>this._valueMax()){return this._valueMax()}var e=this.options.step,f=d%e;d=d-f;if(f>=e/2){d+=e}return parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var s=this.options.range,u=this.options,r=this,q=!this._animateOff?u.animate:false,p,o={},n,m,l,d;if(this.options.values&&this.options.values.length){this.handles.each(function(b){p=(r.values(b)-r._valueMin())/(r._valueMax()-r._valueMin())*100;o[r.orientation==="horizontal"?"left":"bottom"]=p+"%";a(this).stop(1,1)[q?"animate":"css"](o,u.animate);if(r.options.range===true){if(r.orientation==="horizontal"){if(b===0){r.range.stop(1,1)[q?"animate":"css"]({left:p+"%"},u.animate)}if(b===1){r.range[q?"animate":"css"]({width:p-n+"%"},{queue:false,duration:u.animate})}}else{if(b===0){r.range.stop(1,1)[q?"animate":"css"]({bottom:p+"%"},u.animate)}if(b===1){r.range[q?"animate":"css"]({height:p-n+"%"},{queue:false,duration:u.animate})}}}n=p})}else{m=this.value();l=this._valueMin();d=this._valueMax();p=d!==l?(m-l)/(d-l)*100:0;o[r.orientation==="horizontal"?"left":"bottom"]=p+"%";this.handle.stop(1,1)[q?"animate":"css"](o,u.animate);if(s==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[q?"animate":"css"]({width:p+"%"},u.animate)}if(s==="max"&&this.orientation==="horizontal"){this.range[q?"animate":"css"]({width:100-p+"%"},{queue:false,duration:u.animate})}if(s==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[q?"animate":"css"]({height:p+"%"},u.animate)}if(s==="max"&&this.orientation==="vertical"){this.range[q?"animate":"css"]({height:100-p+"%"},{queue:false,duration:u.animate})}}}});a.extend(a.ui.slider,{version:"1.8.1"})})(jQuery);(function(c){var b=0,a=0;c.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},_create:function(){this._tabify(true)},_setOption:function(f,d){if(f=="selected"){this.options.collapsible&&d==this.options.selected||this.select(d)}else{this.options[f]=d;this._tabify()}},_tabId:function(d){return d.title&&d.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+ ++b},_sanitizeSelector:function(d){return d.replace(/:/g,"\\:")},_cookie:function(){var d=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++a);return c.cookie.apply(null,[d].concat(c.makeArray(arguments)))},_ui:function(f,d){return{tab:f,panel:d,index:this.anchors.index(f)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var d=c(this);d.html(d.data("label.tabs")).removeData("label.tabs")})},_tabify:function(w){function v(e,h){e.css({display:""});!c.support.opacity&&h.opacity&&e[0].style.removeAttribute("filter")}this.list=this.element.find("ol,ul").eq(0);this.lis=c("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return c("a",this)[0]});this.panels=c([]);var y=this,x=this.options,u=/^#.+/;this.anchors.each(function(k,m){var h=c(m).attr("href"),e=h.split("#")[0],n;if(e&&(e===location.toString().split("#")[0]||(n=c("base")[0])&&e===n.href)){h=m.hash;m.href=h}if(u.test(h)){y.panels=y.panels.add(y._sanitizeSelector(h))}else{if(h!="#"){c.data(m,"href.tabs",h);c.data(m,"load.tabs",h.replace(/#.*$/,""));h=y._tabId(m);m.href="#"+h;m=c("#"+h);if(!m.length){m=c(x.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(y.panels[k-1]||y.list);m.data("destroy.tabs",true)}y.panels=y.panels.add(m)}else{x.disabled.push(k)}}});if(w){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(x.selected===undefined){location.hash&&this.anchors.each(function(e,h){if(h.hash==location.hash){x.selected=e;return false}});if(typeof x.selected!="number"&&x.cookie){x.selected=parseInt(y._cookie(),10)}if(typeof x.selected!="number"&&this.lis.filter(".ui-tabs-selected").length){x.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}x.selected=x.selected||(this.lis.length?0:-1)}else{if(x.selected===null){x.selected=-1}}x.selected=x.selected>=0&&this.anchors[x.selected]||x.selected<0?x.selected:0;x.disabled=c.unique(x.disabled.concat(c.map(this.lis.filter(".ui-state-disabled"),function(e){return y.lis.index(e)}))).sort();c.inArray(x.selected,x.disabled)!=-1&&x.disabled.splice(c.inArray(x.selected,x.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(x.selected>=0&&this.anchors.length){this.panels.eq(x.selected).removeClass("ui-tabs-hide");this.lis.eq(x.selected).addClass("ui-tabs-selected ui-state-active");y.element.queue("tabs",function(){y._trigger("show",null,y._ui(y.anchors[x.selected],y.panels[x.selected]))});this.load(x.selected)}c(window).bind("unload",function(){y.lis.add(y.anchors).unbind(".tabs");y.lis=y.anchors=y.panels=null})}else{x.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[x.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");x.cookie&&this._cookie(x.selected,x.cookie);w=0;for(var s;s=this.lis[w];w++){c(s)[c.inArray(w,x.disabled)!=-1&&!c(s).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}x.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(x.event!="mouseover"){var p=function(e,h){h.is(":not(.ui-state-disabled)")&&h.addClass("ui-state-"+e)},j=function(e,h){h.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){p("hover",c(this))});this.lis.bind("mouseout.tabs",function(){j("hover",c(this))});this.anchors.bind("focus.tabs",function(){p("focus",c(this).closest("li"))});this.anchors.bind("blur.tabs",function(){j("focus",c(this).closest("li"))})}var l,g;if(x.fx){if(c.isArray(x.fx)){l=x.fx[0];g=x.fx[1]}else{l=g=x.fx}}var f=g?function(e,h){c(e).closest("li").addClass("ui-tabs-selected ui-state-active");h.hide().removeClass("ui-tabs-hide").animate(g,g.duration||"normal",function(){v(h,g);y._trigger("show",null,y._ui(e,h[0]))})}:function(e,h){c(e).closest("li").addClass("ui-tabs-selected ui-state-active");h.removeClass("ui-tabs-hide");y._trigger("show",null,y._ui(e,h[0]))},d=l?function(e,h){h.animate(l,l.duration||"normal",function(){y.lis.removeClass("ui-tabs-selected ui-state-active");h.addClass("ui-tabs-hide");v(h,l);y.element.dequeue("tabs")})}:function(e,h){y.lis.removeClass("ui-tabs-selected ui-state-active");h.addClass("ui-tabs-hide");y.element.dequeue("tabs")};this.anchors.bind(x.event+".tabs",function(){var k=this,m=c(this).closest("li"),h=y.panels.filter(":not(.ui-tabs-hide)"),e=c(y._sanitizeSelector(this.hash));if(m.hasClass("ui-tabs-selected")&&!x.collapsible||m.hasClass("ui-state-disabled")||m.hasClass("ui-state-processing")||y._trigger("select",null,y._ui(this,e[0]))===false){this.blur();return false}x.selected=y.anchors.index(this);y.abort();if(x.collapsible){if(m.hasClass("ui-tabs-selected")){x.selected=-1;x.cookie&&y._cookie(x.selected,x.cookie);y.element.queue("tabs",function(){d(k,h)}).dequeue("tabs");this.blur();return false}else{if(!h.length){x.cookie&&y._cookie(x.selected,x.cookie);y.element.queue("tabs",function(){f(k,e)});y.load(y.anchors.index(this));this.blur();return false}}}x.cookie&&y._cookie(x.selected,x.cookie);if(e.length){h.length&&y.element.queue("tabs",function(){d(k,h)});y.element.queue("tabs",function(){f(k,e)});y.load(y.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}c.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},destroy:function(){var d=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var g=c.data(this,"href.tabs");if(g){this.href=g}var f=c(this).unbind(".tabs");c.each(["href","load","cache"],function(e,j){f.removeData(j+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){c.data(this,"destroy.tabs")?c(this).remove():c(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});d.cookie&&this._cookie(null,d.cookie);return this},add:function(l,k,f){if(f===undefined){f=this.anchors.length}var d=this,j=this.options;k=c(j.tabTemplate.replace(/#\{href\}/g,l).replace(/#\{label\}/g,k));l=!l.indexOf("#")?l.replace("#",""):this._tabId(c("a",k)[0]);k.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var g=c("#"+l);g.length||(g=c(j.panelTemplate).attr("id",l).data("destroy.tabs",true));g.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(f>=this.lis.length){k.appendTo(this.list);g.appendTo(this.list[0].parentNode)}else{k.insertBefore(this.lis[f]);g.insertBefore(this.panels[f])}j.disabled=c.map(j.disabled,function(e){return e>=f?++e:e});this._tabify();if(this.anchors.length==1){j.selected=0;k.addClass("ui-tabs-selected ui-state-active");g.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[0],d.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[f],this.panels[f]));return this},remove:function(h){var g=this.options,f=this.lis.eq(h).remove(),d=this.panels.eq(h).remove();if(f.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(h+(h+1<this.anchors.length?1:-1))}g.disabled=c.map(c.grep(g.disabled,function(e){return e!=h}),function(e){return e>=h?--e:e});this._tabify();this._trigger("remove",null,this._ui(f.find("a")[0],d[0]));return this},enable:function(f){var d=this.options;if(c.inArray(f,d.disabled)!=-1){this.lis.eq(f).removeClass("ui-state-disabled");d.disabled=c.grep(d.disabled,function(e){return e!=f});this._trigger("enable",null,this._ui(this.anchors[f],this.panels[f]));return this}},disable:function(f){var d=this.options;if(f!=d.selected){this.lis.eq(f).addClass("ui-state-disabled");d.disabled.push(f);d.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[f],this.panels[f]))}return this},select:function(d){if(typeof d=="string"){d=this.anchors.index(this.anchors.filter("[href$="+d+"]"))}else{if(d===null){d=-1}}if(d==-1&&this.options.collapsible){d=this.options.selected}this.anchors.eq(d).trigger(this.options.event+".tabs");return this},load:function(l){var k=this,f=this.options,d=this.anchors.eq(l)[0],j=c.data(d,"load.tabs");this.abort();if(!j||this.element.queue("tabs").length!==0&&c.data(d,"cache.tabs")){this.element.dequeue("tabs")}else{this.lis.eq(l).addClass("ui-state-processing");if(f.spinner){var g=c("span",d);g.data("label.tabs",g.html()).html(f.spinner)}this.xhr=c.ajax(c.extend({},f.ajaxOptions,{url:j,success:function(h,o){c(k._sanitizeSelector(d.hash)).html(h);k._cleanup();f.cache&&c.data(d,"cache.tabs",true);k._trigger("load",null,k._ui(k.anchors[l],k.panels[l]));try{f.ajaxOptions.success(h,o)}catch(e){}},error:function(h,o){k._cleanup();k._trigger("load",null,k._ui(k.anchors[l],k.panels[l]));try{f.ajaxOptions.error(h,o,l,d)}catch(e){}}}));k.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(f,d){this.anchors.eq(f).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});c.extend(c.ui.tabs,{version:"1.8.1"});c.extend(c.ui.tabs.prototype,{rotation:null,rotate:function(k,j){var f=this,d=this.options,g=f._rotate||(f._rotate=function(e){clearTimeout(f.rotation);f.rotation=setTimeout(function(){var h=d.selected;f.select(++h<f.anchors.length?h:0)},k);e&&e.stopPropagation()});j=f._unrotate||(f._unrotate=!j?function(e){e.clientX&&f.rotate(null)}:function(){t=d.selected;g()});if(k){this.element.bind("tabsshow",g);this.anchors.bind(d.event+".tabs",j);g()}else{clearTimeout(f.rotation);this.element.unbind("tabsshow",g);this.anchors.unbind(d.event+".tabs",j);delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function($){$.toJSON=function(o){if(typeof(JSON)=="object"&&JSON.stringify){return JSON.stringify(o)}var type=typeof(o);if(o===null){return"null"}if(type=="undefined"){return undefined}if(type=="number"||type=="boolean"){return o+""}if(type=="string"){return $.quoteString(o)}if(type=="object"){if(typeof o.toJSON=="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10){month="0"+month}var day=o.getUTCDate();if(day<10){day="0"+day}var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10){hours="0"+hours}var minutes=o.getUTCMinutes();if(minutes<10){minutes="0"+minutes}var seconds=o.getUTCSeconds();if(seconds<10){seconds="0"+seconds}var milli=o.getUTCMilliseconds();if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number"){name='"'+k+'"'}else{if(type=="string"){name=$.quoteString(k)}else{continue}}if(typeof o[k]=="function"){continue}var val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(", ")+"}"}};$.evalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src)}return eval("("+src+")")};$.secureEvalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src)}var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery);jQuery.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=jQuery.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,j){return function(){var l=this._super;this._super=f[h];var k=j.apply(this,arguments);this._super=l;return k}})(d,g[d]):g[d]}c.implement=function(h){var j=new h();j.implement(c);return c};function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.constructor=c;c.extend=arguments.callee;return c}})();function tmpl(a,c){try{if(typeof tmpl.cache=="undefined"){tmpl.cache=new Array()}if(tmpl.cache[a]!=null){var b=tmpl.cache[a];return b(c)}str=document.getElementById(a).innerHTML;str=str.replace(/\\/g,"@SPC@");str=str.replace(/'/g,"&apos;");fnStr="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');";fnStr=fnStr.replace(/@SPC@/g,"\\");var b=new Function("obj",fnStr);tmpl.cache[a]=b;return b(c)}catch(d){log(d+":"+a,"rendering")}}(function(){function aK(n,l){var q;n||(n={});for(q in l){n[q]=l[q]}return n}function aF(n,l){return parseInt(n,l||10)}function g(l){return typeof l==="string"}function bn(l){return typeof l==="object"}function bi(l){return typeof l==="number"}function al(l){return az.log(l)/az.LN10}function J(n,l){for(var q=n.length;q--;){if(n[q]===l){n.splice(q,1);break}}}function af(l){return l!==bq&&l!==null}function aJ(n,l,z){var y,q;if(g(l)){af(z)?n.setAttribute(l,z):n&&n.getAttribute&&(q=n.getAttribute(l))}else{if(af(l)&&bn(l)){for(y in l){n.setAttribute(y,l[y])}}}return q}function aQ(l){return Object.prototype.toString.call(l)==="[object Array]"?l:[l]}function ah(){var n=arguments,l,y,q=n.length;for(l=0;l<q;l++){if(y=n[l],typeof y!=="undefined"&&y!==null){return y}}}function aO(n,l){if(a3&&l&&l.opacity!==bq){l.filter="alpha(opacity="+l.opacity*100+")"}aK(n.style,l)}function ay(n,l,z,y,q){n=aH.createElement(n);l&&aK(n,l);q&&aO(n,{padding:0,border:ax,margin:0});z&&aO(n,z);y&&y.appendChild(n);return n}function ai(n,l){var q=function(){};q.prototype=new n;aK(q.prototype,l);return q}function a2(n,l,E,C){var z=a7.lang,y=isNaN(l=bc(l))?2:l,l=E===void 0?z.decimalPoint:E,C=C===void 0?z.thousandsSep:C,z=n<0?"-":"",E=String(aF(n=bc(+n||0).toFixed(y))),q=E.length>3?E.length%3:0;return z+(q?E.substr(0,q)+C:"")+E.substr(q).replace(/(\d{3})(?=\d)/g,"$1"+C)+(y?l+bc(n-E).toFixed(y).slice(2):"")}function aI(n){for(var l={left:n.offsetLeft,top:n.offsetTop},n=n.offsetParent;n;){l.left+=n.offsetLeft,l.top+=n.offsetTop,n!==aH.body&&n!==aH.documentElement&&(l.left-=n.scrollLeft,l.top-=n.scrollTop),n=n.offsetParent}return l}function an(){this.symbol=this.color=0}function aT(Q,K,G,F,E,C,z){var y=z.x,z=z.y,q=y-Q+G-25,n=z-K+F+10,l;q<7&&(q=G+y+15);q+Q>G+E&&(q-=q+Q-(G+E),n-=K,l=!0);n<5?(n=5,l&&z>=n&&z<=n+K&&(n=z+K-5)):n+K>F+C&&(n=F+C-K-5);return{x:q,y:n}}function M(n,l){var y=n.length,q;for(q=0;q<y;q++){n[q].ss_i=q}n.sort(function(z,E){var C=l(z,E);return C===0?z.ss_i-E.ss_i:C});for(q=0;q<y;q++){delete n[q].ss_i}}function at(n){for(var l in n){n[l]&&n[l].destroy&&n[l].destroy(),delete n[l]}}function k(n,l){T=ah(n,l.animation)}function A(){var l=a7.global.useUTC;aL=l?Date.UTC:function(n,E,C,z,y,q){return(new Date(n,E,ah(C,1),ah(z,0),ah(y,0),ah(q,0))).getTime()};ae=l?"getUTCMinutes":"getMinutes";D=l?"getUTCHours":"getHours";f=l?"getUTCDay":"getDay";b=l?"getUTCDate":"getDate";ao=l?"getUTCMonth":"getMonth";N=l?"getUTCFullYear":"getFullYear";r=l?"setUTCMinutes":"setMinutes";bo=l?"setUTCHours":"setHours";be=l?"setUTCDate":"setDate";a5=l?"setUTCMonth":"setMonth";aP=l?"setUTCFullYear":"setFullYear"}function u(l){aV||(aV=ay(bf));l&&aV.appendChild(l);aV.innerHTML=""}function bk(){}function bb(bU,bT){function bS(dD){function dC(y,S){this.pos=y;this.minor=S;this.isNew=!0;S||this.addLabel()}function dB(y){if(y){this.options=y,this.id=y.id}return this}function dA(S,y,ba,U){this.isNegative=y;this.options=S;this.x=ba;this.stack=U;this.alignOptions={align:S.align||(b8?y?"left":"right":"center"),verticalAlign:S.verticalAlign||(b8?"middle":y?"bottom":"top"),y:ah(S.y,b8?4:y?14:-6),x:ah(S.x,b8?y?-6:6:0)};this.textAlign=S.textAlign||(b8?y?"right":"left":"center")}function dz(){var S=[],y=[],U;cG=c3=null;cT=[];aj(bX,function(dJ){U=!1;aj(["xAxis","yAxis"],function(dK){if(dJ.isCartesian&&(dK==="xAxis"&&dr||dK==="yAxis"&&!dr)&&(dJ.options[dK]===dl.index||dJ.options[dK]===bq&&dl.index===0)){dJ[dK]=cY,cT.push(dJ),U=!0}});!dJ.visible&&bC.ignoreHiddenSeries&&(U=!1);if(U){var dI,dH,dG,dF,da,ba;if(!dr){dI=dJ.options.stacking;c5=dI==="percent";if(dI){da=dJ.options.stack,dF=dJ.type+ah(da,""),ba="-"+dF,dJ.stackKey=dF,dH=S[dF]||[],S[dF]=dH,dG=y[ba]||[],y[ba]=dG}c5&&(cG=0,c3=99)}dJ.isCartesian&&(aj(dJ.data,function(dM){var dL=dM.x,dP=dM.y,dO=dP<0,dK=dO?dG:dH,dN=dO?ba:dF;cG===null&&(cG=c3=dM[c7]);dr?dL>c3?c3=dL:dL<cG&&(cG=dL):af(dP)&&(dI&&(dK[dL]=af(dK[dL])?dK[dL]+dP:dP),dP=dK?dK[dL]:dP,dM=ah(dM.low,dP),c5||(dP>c3?c3=dP:dM<cG&&(cG=dM)),dI&&(dg[dN]||(dg[dN]={}),dg[dN][dL]||(dg[dN][dL]=new dA(dl.stackLabels,dO,dL,da)),dg[dN][dL].setTotal(dP)))}),/(area|column|bar)/.test(dJ.type)&&!dr&&(cG>=0?(cG=0,c9=!0):c3<0&&(c3=0,cb=!0)))}})}function dy(S,y){var ba,U;cc=y?1:az.pow(10,aN(az.log(S)/az.LN10));ba=S/cc;if(!y&&(y=[1,2,2.5,5,10],dl.allowDecimals===!1||cM)){cc===1?y=[1,2,5,10]:cc<=0.1&&(y=[1/cc])}for(U=0;U<y.length;U++){if(S=y[U],ba<=(y[U]+(y[U+1]||y[U]))/2){break}}S*=cc;return S}function dx(S){var y;y=S;cc=ah(cc,az.pow(10,aN(az.log(cC)/az.LN10)));cc<1&&(y=ab(1/cc)*10,y=ab(S*y)/y);return y}function dw(){var dK,dJ,dI,dH,dG=dl.tickInterval,dF=dl.tickPixelInterval;dK=dl.maxZoom||(dr&&!af(dl.min)&&!af(dl.max)?P(bH.smallestInterval*5,c3-cG):null);dj=dn?b0:b6;cH?(dI=bH[dr?"xAxis":"yAxis"][dl.linkedTo],dH=dI.getExtremes(),cP=ah(dH.min,dH.dataMin),cO=ah(dH.max,dH.dataMax)):(cP=ah(cU,dl.min,cG),cO=ah(c4,dl.max,c3));cM&&(cP=al(cP),cO=al(cO));cO-cP<dK&&(dH=(dK-cO+cP)/2,cP=aw(cP-dH,ah(dl.min,cP-dH),cG),cO=P(cP+dK,ah(dl.max,cP+dK),c3));if(!dm&&!c5&&!cH&&af(cP)&&af(cO)){dK=cO-cP||1;if(!af(dl.min)&&!af(cU)&&cW&&(cG<0||!c9)){cP-=dK*cW}if(!af(dl.max)&&!af(c4)&&ca&&(c3>0||!cb)){cO+=dK*ca}}cC=cP===cO?1:cH&&!dG&&dF===dI.options.tickPixelInterval?dI.tickInterval:ah(dG,dm?1:(cO-cP)*dF/dj);!ds&&!af(dl.tickInterval)&&(cC=dy(cC));cY.tickInterval=cC;c0=dl.minorTickInterval==="auto"&&cC?cC/5:dl.minorTickInterval;if(ds){cK=[];var dG=a7.global.useUTC,ba=1000/w,S=60000/w,da=3600000/w,dF=86400000/w;dK=604800000/w;dH=2592000000/w;var y=31556952000/w,dM=[["second",ba,[1,2,5,10,15,30]],["minute",S,[1,2,5,10,15,30]],["hour",da,[1,2,3,4,6,8,12]],["day",dF,[1,2]],["week",dK,[1,2]],["month",dH,[1,2,3,4,6]],["year",y,null]],dL=dM[6],U=dL[1],dN=dL[2];for(dI=0;dI<dM.length;dI++){if(dL=dM[dI],U=dL[1],dN=dL[2],dM[dI+1]&&cC<=(U*dN[dN.length-1]+dM[dI+1][1])/2){break}}U===y&&cC<5*U&&(dN=[1,2,5]);dM=dy(cC/U,dN);dN=new Date(cP*w);dN.setMilliseconds(0);U>=ba&&dN.setSeconds(U>=S?0:dM*aN(dN.getSeconds()/dM));if(U>=S){dN[r](U>=da?0:dM*aN(dN[ae]()/dM))}if(U>=da){dN[bo](U>=dF?0:dM*aN(dN[D]()/dM))}if(U>=dF){dN[be](U>=dH?1:dM*aN(dN[b]()/dM))}U>=dH&&(dN[a5](U>=y?0:dM*aN(dN[ao]()/dM)),dJ=dN[N]());U>=y&&(dJ-=dJ%dM,dN[aP](dJ));if(U===dK){dN[be](dN[b]()-dN[f]()+dl.startOfWeek)}dI=1;dJ=dN[N]();ba=dN.getTime()/w;S=dN[ao]();for(da=dN[b]();ba<cO&&dI<b0;){cK.push(ba),U===y?ba=aL(dJ+dI*dM,0)/w:U===dH?ba=aL(dJ,S+dI*dM)/w:!dG&&(U===dF||U===dK)?ba=aL(dJ,S,da+dI*dM*(U===dF?1:7)):ba+=U*dM,dI++}cK.push(ba);dk=dl.dateTimeLabelFormats[dL[0]]}else{dI=dx(aN(cP/cC)*cC);dJ=dx(aM(cO/cC)*cC);cK=[];for(dI=dx(dI);dI<=dJ;){cK.push(dI),dI=dx(dI+cC)}}if(!cH){if(dm||dr&&bH.hasColumn){dJ=(dm?1:cC)*0.5;if(dm||!af(ah(dl.min,cU))){cP-=dJ}if(dm||!af(ah(dl.max,c4))){cO+=dJ}}dJ=cK[0];dI=cK[cK.length-1];dl.startOnTick?cP=dJ:cP>dJ&&cK.shift();dl.endOnTick?cO=dI:cO<dI&&cK.pop();bY||(bY={x:0,y:0});if(!ds&&cK.length>bY[c7]){bY[c7]=cK.length}}}function dv(){var S,y;cF=cP;dE=cO;dz();dw();db=c2;c2=dj/(cO-cP||1);if(!dr){for(S in dg){for(y in dg[S]){dg[S][y].cum=dg[S][y].total}}}if(!cY.isDirty){cY.isDirty=cP!==cF||cO!==dE}}function du(y){y=(new dB(y)).render();cD.push(y);return y}function dt(){var dI=dl.title,dH=dl.stackLabels,dG=dl.alternateGridColor,dF=dl.lineWidth,da,ba,U=(da=bH.hasRendered)&&af(cF)&&!isNaN(cF);ba=cT.length&&af(cP)&&af(cO);dj=dn?b0:b6;c2=dj/(cO-cP||1);cR=dn?cj:cA;if(ba||cH){if(c0&&!dm){for(ba=cP+(cK[0]-cP)%c0;ba<=cO;ba+=c0){c8[ba]||(c8[ba]=new dC(ba,!0)),U&&c8[ba].isNew&&c8[ba].render(null,!0),c8[ba].isActive=!0,c8[ba].render()}}aj(cK,function(dK,dJ){if(!cH||dK>=cP&&dK<=cO){U&&cJ[dK].isNew&&cJ[dK].render(dJ,!0),cJ[dK].isActive=!0,cJ[dK].render(dJ)}});dG&&aj(cK,function(dK,dJ){if(dJ%2===0&&dK<cO){dc[dK]||(dc[dK]=new dB),dc[dK].options={from:dK,to:cK[dJ+1]!==bq?cK[dJ+1]:cO,color:dG},dc[dK].render(),dc[dK].isActive=!0}});da||aj((dl.plotLines||[]).concat(dl.plotBands||[]),function(dJ){cD.push((new dB(dJ)).render())})}aj([cJ,c8,dc],function(dK){for(var dJ in dK){dK[dJ].isActive?dK[dJ].isActive=!1:(dK[dJ].destroy(),delete dK[dJ])}});dF&&(da=cj+(di?b0:0)+dd,ba=cx-cA-(di?b6:0)+dd,da=cf.crispLine([Y,dn?cj:da,dn?ba:ch,aX,dn?K-bE:da,dn?ba:cx-cA],dF),c6?c6.animate({d:da}):c6=cf.path(da).attr({stroke:dl.lineColor,"stroke-width":dF,zIndex:7}).add());if(cV){da=dn?cj:ch,dF=aF(dI.style.fontSize||12),da={low:da+(dn?0:dj),middle:da+dj/2,high:da+(dn?dj:0)}[dI.align],dF=(dn?ch+b6:cj)+(dn?1:-1)*(di?-1:1)*cI+(cQ===2?dF:0),cV[cV.isNew?"attr":"animate"]({x:dn?da:dF+(di?b0:0)+dd+(dI.x||0),y:dn?dF-(di?b6:0)+dd:da+(dI.y||0)}),cV.isNew=!1}if(dH&&dH.enabled){var y,S,dH=cY.stackTotalGroup;if(!dH){cY.stackTotalGroup=dH=cf.g("stack-labels").attr({visibility:au,zIndex:6}).translate(cj,ch).add()}for(y in dg){for(S in dI=dg[y],dI){dI[S].render(dH)}}}cY.isDirty=!1}function df(S){for(var y=cD.length;y--;){cD[y].id===S&&cD[y].destroy()}}var dr=dD.isX,di=dD.opposite,dn=b8?!dr:dr,cQ=dn?di?0:2:di?1:3,dg={},dl=aC(dr?a6:aW,[bg,aZ,ar,aE][cQ],dD),cY=this,cV,dh=dl.type,ds=dh==="datetime",cM=dh==="logarithmic",dd=dl.offset||0,c7=dr?"x":"y",dj,c2,db,cR=dn?cj:cA,cZ,cB,de,cS,c6,cG,c3,cT,cU,c4,cO=null,cP=null,cF,dE,cW=dl.minPadding,ca=dl.maxPadding,cH=af(dl.linkedTo),c9,cb,c5,dh=dl.events,cX,cD=[],cC,c0,cc,cK,cJ={},c8={},dc={},cE,dq,cI,dk,dm=dl.categories,cN=dl.labels.formatter||function(){var y=this.value;return dk?aR(dk,y):cC%1000000===0?y/1000000+"M":cC%1000===0?y/1000+"k":!dm&&y>=1000?a2(y,0):y},dp=dn&&dl.labels.staggerLines,cL=dl.reversed,c1=dm&&dl.tickmarkPlacement==="between"?0.5:0;dC.prototype={addLabel:function(){var S=this.pos,y=dl.labels,dF=!(S===cP&&!ah(dl.showFirstLabel,1)||S===cO&&!ah(dl.showLastLabel,0)),da=dm&&dn&&dm.length&&!y.step&&!y.staggerLines&&!y.rotation&&b0/dm.length||!dn&&b0/2,ba=dm&&af(dm[S])?dm[S]:S,U=this.label,S=cN.call({isFirst:S===cK[0],isLast:S===cK[cK.length-1],dateTimeLabelFormat:dk,value:cM?az.pow(10,ba):ba}),da=da&&{width:aw(1,ab(da-2*(y.padding||10)))+ap},da=aK(da,y.style);U===bq?this.label=af(S)&&dF&&y.enabled?cf.text(S,0,0,y.useHTML).attr({align:y.align,rotation:y.rotation}).css(da).add(de):null:U&&U.attr({text:S}).css(da)},getLabelSize:function(){var y=this.label;return y?(this.labelBBox=y.getBBox())[dn?"height":"width"]:0},render:function(dR,dQ){var dP=!this.minor,dN=this.label,dM=this.pos,dL=dl.labels,dK=this.gridLine,dJ=dP?dl.gridLineWidth:dl.minorGridLineWidth,dI=dP?dl.gridLineColor:dl.minorGridLineColor,dH=dP?dl.gridLineDashStyle:dl.minorGridLineDashStyle,da=this.mark,dG=dP?dl.tickLength:dl.minorTickLength,y=dP?dl.tickWidth:dl.minorTickWidth||0,U=dP?dl.tickColor:dl.minorTickColor,dF=dP?dl.tickPosition:dl.minorTickPosition,dO=dL.step,S=dQ&&cu||cx,ba;ba=dn?cZ(dM+c1,null,null,dQ)+cR:cj+dd+(di?(dQ&&l||K)-bE-cj:0);S=dn?S-cA+dd-(di?b6:0):S-cZ(dM+c1,null,null,dQ)-cR;if(dJ){dM=cB(dM+c1,dJ,dQ);if(dK===bq){dK={stroke:dI,"stroke-width":dJ};if(dH){dK.dashstyle=dH}if(dP){dK.zIndex=1}this.gridLine=dK=dJ?cf.path(dM).attr(dK).add(cS):null}!dQ&&dK&&dM&&dK.animate({d:dM})}if(y){dF==="inside"&&(dG=-dG),di&&(dG=-dG),dP=cf.crispLine([Y,ba,S,aX,ba+(dn?0:-dG),S+(dn?dG:0)],y),da?da.animate({d:dP}):this.mark=cf.path(dP).attr({stroke:U,"stroke-width":y}).add(de)}if(dN&&!isNaN(ba)){ba=ba+dL.x-(c1&&dn?c1*c2*(cL?-1:1):0);S=S+dL.y-(c1&&!dn?c1*c2*(cL?1:-1):0);af(dL.y)||(S+=aF(dN.styles.lineHeight)*0.9-dN.getBBox().height/2);dp&&(S+=dR/(dO||1)%dp*16);if(dO){dN[dR%dO?"hide":"show"]()}dN[this.isNew?"attr":"animate"]({x:ba,y:S})}this.isNew=!1},destroy:function(){at(this)}};dB.prototype={render:function(){var dN=this,dM=dN.options,dL=dM.label,dK=dN.label,dJ=dM.width,dI=dM.to,dH=dM.from,dG=dM.value,dF,ba=dM.dashStyle,y=dN.svgElem,U=[],da,dO,dP=dM.color;dO=dM.zIndex;var S=dM.events;cM&&(dH=al(dH),dI=al(dI),dG=al(dG));if(dJ){if(U=cB(dG,dJ),dM={stroke:dP,"stroke-width":dJ},ba){dM.dashstyle=ba}}else{if(af(dH)&&af(dI)){dH=aw(dH,cP),dI=P(dI,cO),dF=cB(dI),(U=cB(dH))&&dF?U.push(dF[4],dF[5],dF[1],dF[2]):U=null,dM={fill:dP}}else{return}}if(af(dO)){dM.zIndex=dO}if(y){U?y.animate({d:U},null,y.onGetPath):(y.hide(),y.onGetPath=function(){y.show()})}else{if(U&&U.length&&(dN.svgElem=y=cf.path(U).attr(dM).add(),S)){for(da in ba=function(dQ){y.on(dQ,function(dR){S[dQ].apply(dN,[dR])})},S){ba(da)}}}if(dL&&af(dL.text)&&U&&U.length&&b0>0&&b6>0){dL=aC({align:dn&&dF&&"center",x:dn?!dF&&4:10,verticalAlign:!dn&&dF&&"middle",y:dn?dF?16:10:dF?6:-4,rotation:dn&&!dF&&90},dL);if(!dK){dN.label=dK=cf.text(dL.text,0,0).attr({align:dL.textAlign||dL.align,rotation:dL.rotation,zIndex:dO}).css(dL.style).add()}dF=[U[1],U[4],ah(U[6],U[1])];U=[U[2],U[5],ah(U[7],U[2])];da=P.apply(az,dF);dO=P.apply(az,U);dK.align(dL,!1,{x:da,y:dO,width:aw.apply(az,dF)-da,height:aw.apply(az,U)-dO});dK.show()}else{dK&&dK.hide()}return dN},destroy:function(){at(this);J(cD,this)}};dA.prototype={destroy:function(){at(this)},setTotal:function(y){this.cum=this.total=y},render:function(S){var y=this.options.formatter.call(this);this.label?this.label.attr({text:y,visibility:aq}):this.label=bH.renderer.text(y,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:aq}).add(S)},setOffset:function(S,y){var dG=this.isNegative,dF=cY.translate(this.total),da=cY.translate(0),da=bc(dF-da),ba=bH.xAxis[0].translate(this.x)+S,U=bH.plotHeight,dG={x:b8?dG?dF:dF-da:ba,y:b8?U-ba-y:dG?U-dF-da:U-dF,width:b8?da:y,height:b8?y:da};this.label&&this.label.align(this.alignOptions,null,dG).attr({visibility:au})}};cZ=function(S,y,dH,dG,dF){var da=1,ba=0,U=dG?db:c2,dG=dG?cF:cP;U||(U=c2);dH&&(da*=-1,ba=dj);cL&&(da*=-1,ba-=da*dj);y?(cL&&(S=dj-S),S=S/U+dG,cM&&dF&&(S=az.pow(10,S))):(cM&&dF&&(S=al(S)),S=da*(S-dG)*U+ba);return S};cB=function(dI,dH,dG){var dF,da,ba,dI=cZ(dI,null,null,dG),U=dG&&cu||cx,S=dG&&l||K,y,dG=da=ab(dI+cR);dF=ba=ab(U-dI-cR);if(isNaN(dI)){y=!0}else{if(dn){if(dF=ch,ba=U-cA,dG<cj||dG>cj+b0){y=!0}}else{if(dG=cj,da=S-bE,dF<ch||dF>ch+b6){y=!0}}}return y?null:cf.crispLine([Y,dG,dF,aX,da,ba],dH||0)};b8&&dr&&cL===bq&&(cL=!0);aK(cY,{addPlotBand:du,addPlotLine:du,adjustTickAmount:function(){if(bY&&!ds&&!dm&&!cH){var S=cE,y=cK.length;cE=bY[c7];if(y<cE){for(;cK.length<cE;){cK.push(dx(cK[cK.length-1]+cC))}c2*=(y-1)/(cE-1);cO=cK[cK.length-1]}if(af(S)&&cE!==S){cY.isDirty=!0}}},categories:dm,getExtremes:function(){return{min:cP,max:cO,dataMin:cG,dataMax:c3,userMin:cU,userMax:c4}},getPlotLinePath:cB,getThreshold:function(y){cP>y?y=cP:cO<y&&(y=cO);return cZ(y,0,1)},isXAxis:dr,options:dl,plotLinesAndBands:cD,getOffset:function(){var y=cT.length&&af(cP)&&af(cO),dG=0,dF=0,da=dl.title,ba=dl.labels,U=[-1,1,1,-1][cQ],S;de||(de=cf.g("axis").attr({zIndex:7}).add(),cS=cf.g("grid").attr({zIndex:1}).add());dq=0;if(y||cH){aj(cK,function(dH){cJ[dH]?cJ[dH].addLabel():cJ[dH]=new dC(dH);if(cQ===0||cQ===2||{1:"left",3:"right"}[cQ]===ba.align){dq=aw(cJ[dH].getLabelSize(),dq)}}),dp&&(dq+=(dp-1)*16)}else{for(S in cJ){cJ[S].destroy(),delete cJ[S]}}if(da&&da.text){if(!cV){cV=cY.axisTitle=cf.text(da.text,0,0,da.useHTML).attr({zIndex:7,rotation:da.rotation||0,align:da.textAlign||{low:"left",middle:"center",high:"right"}[da.align]}).css(da.style).add(),cV.isNew=!0}dG=cV.getBBox()[dn?"height":"width"];dF=ah(da.margin,dn?5:10)}dd=U*(dl.offset||cq[cQ]);cI=dq+(cQ!==2&&dq&&U*dl.labels[dn?"y":"x"])+dF;cq[cQ]=aw(cq[cQ],cI+dG+U*dd)},render:dt,setCategories:function(y,S){cY.categories=dD.categories=dm=y;aj(cT,function(U){U.translate();U.setTooltipPoints(!0)});cY.isDirty=!0;ah(S,!0)&&bH.redraw()},setExtremes:function(S,y,ba,U){ba=ah(ba,!0);a0(cY,"setExtremes",{min:S,max:y},function(){cU=S;c4=y;ba&&bH.redraw(U)})},setScale:dv,setTickPositions:dw,translate:cZ,redraw:function(){ci.resetTracker&&ci.resetTracker();dt();aj(cD,function(y){y.render()});aj(cT,function(y){y.isDirty=!0})},removePlotBand:df,removePlotLine:df,reversed:cL,stacks:dg,destroy:function(){var y;a8(cY);for(y in dg){at(dg[y]),dg[y]=null}if(cY.stackTotalGroup){cY.stackTotalGroup=cY.stackTotalGroup.destroy()}aj([cJ,c8,dc,cD],function(S){at(S)});aj([c6,de,cS,cV],function(S){S&&S.destroy()});c6=de=cS=cV=null}});for(cX in dh){aG(cY,cX,dh[cX])}dv()}function bR(){var y={};return{add:function(ca,ba,U,S){y[ca]||(ba=cf.text(ba,0,0).css(bU.toolbar.itemStyle).align({align:"right",x:-bE-20,y:ch+30}).on("click",S).attr({align:"right",zIndex:20}).add(),y[ca]=ba)},remove:function(S){u(y[S].element);y[S]=null}}}function bQ(cN){function cM(){var cO=this.points||aQ(this),cS=cO[0].series.xAxis,cR=this.x,cS=cS&&cS.options.type==="datetime",cQ=g(cR)||cS,cP;cP=cQ?['<span style="font-size: 10px">'+(cS?aR("%A, %b %e, %Y",cR):cR)+"</span>"]:[];aj(cO,function(cT){cP.push(cT.point.tooltipFormatter(cQ))});return cP.join("<br/>")}function cL(cP,cO){cB=U?cP:(2*cB+cP)/3;S=U?cO:(S+cO)/2;ba.translate(cB,S);b3=bc(cP-cB)>1||bc(cO-S)>1?function(){cL(cP,cO)}:null}function cK(){if(!U){var cO=bH.hoverPoints;ba.hide();aj(cG,function(cP){cP&&cP.hide()});cO&&aj(cO,function(cP){cP.setState()});bH.hoverPoints=null;U=!0}}var cJ,cI=cN.borderWidth,cH=cN.crosshairs,cG=[],cF=cN.style,cE=cN.shared,cD=aF(cF.padding),y=cI+cD,U=!0,cc,ca,cB=0,S=0;cF.padding=0;var ba=cf.g("tooltip").attr({zIndex:8}).add(),cC=cf.rect(y,y,0,0,cN.borderRadius,cI).attr({fill:cN.backgroundColor,"stroke-width":cI}).add(ba).shadow(cN.shadow),cb=cf.text("",cD+y,aF(cF.fontSize)+cD+y,cN.useHTML).attr({zIndex:1}).css(cF).add(ba);ba.hide();return{shared:cE,refresh:function(cS){var cQ,cO,cU,cT=0,cR={},cP=[];cU=cS.tooltipPos;cQ=cN.formatter||cM;cR=bH.hoverPoints;cE?(cR&&aj(cR,function(cV){cV.setState()}),bH.hoverPoints=cS,aj(cS,function(cV){cV.setState(d);cT+=cV.plotY;cP.push(cV.getLabelConfig())}),cO=cS[0].plotX,cT=ab(cT)/cS.length,cR={x:cS[0].category},cR.points=cP,cS=cS[0]):cR=cS.getLabelConfig();cR=cQ.call(cR);cJ=cS.series;cO=cE?cO:cS.plotX;cT=cE?cT:cS.plotY;cQ=ab(cU?cU[0]:b8?b0-cT:cO);cO=ab(cU?cU[1]:b8?b6-cO:cT);cU=cE||!cS.series.isCartesian||W(cQ,cO);cR===!1||!cU?cK():(U&&(ba.show(),U=!1),cb.attr({text:cR}),cU=cb.getBBox(),cc=cU.width+2*cD,ca=cU.height+2*cD,cC.attr({width:cc,height:ca,stroke:cN.borderColor||cS.color||cJ.color||"#606060"}),cQ=aT(cc,ca,cj,ch,b0,b6,{x:cQ,y:cO}),cL(ab(cQ.x-y),ab(cQ.y-y)));if(cH){cH=aQ(cH);for(cQ=cH.length;cQ--;){if(cO=cS.series[cQ?"yAxis":"xAxis"],cH[cQ]&&cO){if(cO=cO.getPlotLinePath(cS[cQ?"y":"x"],1),cG[cQ]){cG[cQ].attr({d:cO,visibility:au})}else{cU={"stroke-width":cH[cQ].width||1,stroke:cH[cQ].color||"#C0C0C0",zIndex:2};if(cH[cQ].dashStyle){cU.dashstyle=cH[cQ].dashStyle}cG[cQ]=cf.path(cO).attr(cU).add()}}}}},hide:cK,destroy:function(){aj(cG,function(cO){cO&&cO.destroy()});aj([cC,cb,ba],function(cO){cO&&cO.destroy()});cC=cb=ba=null}}}function bP(cG){function cF(cJ){var cO,cN=R&&aH.width/aH.body.scrollWidth-1,cM,cL,cK,cJ=cJ||o.event;if(!cJ.target){cJ.target=cJ.srcElement}cO=cJ.touches?cJ.touches.item(0):cJ;if(cJ.type!=="mousemove"||o.opera||cN){bN=aI(cg),cM=bN.left,cL=bN.top}a3?(cK=cJ.x,cO=cJ.y):cO.layerX===bq?(cK=cO.pageX-cM,cO=cO.pageY-cL):(cK=cJ.layerX,cO=cJ.layerY);cN&&(cK+=ab((cN+1)*cM-cM),cO+=ab((cN+1)*cL-cL));return aK(cJ,{chartX:cK,chartY:cO})}function cE(cK){var cJ={xAxis:[],yAxis:[]};aj(X,function(cN){var cM=cN.translate,cL=cN.isXAxis;cJ[cL?"xAxis":"yAxis"].push({axis:cN,value:cM((b8?!cL:cL)?cK.chartX-cj:b6-cK.chartY+ch,!0)})});return cJ}function cD(){var cK=bH.hoverSeries,cJ=bH.hoverPoint;if(cJ){cJ.onMouseOut()}if(cK){cK.onMouseOut()}q&&q.hide();bA=null}function cC(){if(ba){var cK={xAxis:[],yAxis:[]},cJ=ba.getBBox(),cM=cJ.x-cj,cL=cJ.y-ch;ca&&(aj(X,function(cR){var cQ=cR.translate,cP=cR.isXAxis,cO=b8?!cP:cP,cN=cQ(cO?cM:b6-cL-cJ.height,!0,0,0,1),cQ=cQ(cO?cM+cJ.width:b6-cL,!0,0,0,1);cK[cP?"xAxis":"yAxis"].push({axis:cR,min:P(cN,cQ),max:aw(cN,cQ)})}),a0(bH,"selection",cK,V));ba=ba.destroy()}bH.mouseIsDown=n=ca=!1;a8(aH,aS?"touchend":"mouseup",cC)}function cB(cK){var cJ=af(cK.pageX)?cK.pageX:cK.page.x,cK=af(cK.pageX)?cK.pageY:cK.page.y;bN&&!W(cJ-bN.left-cj,cK-bN.top-ch)&&cD()}var cc,cb,ca,ba,cH=bC.zoomType,cI=/x/.test(cH),S=/y/.test(cH),y=cI&&!b8||S&&b8,U=S&&!b8||cI&&b8;bV=function(){co?(co.translate(cj,ch),b8&&co.attr({width:bH.plotWidth,height:bH.plotHeight}).invert()):bH.trackerGroup=co=cf.g("tracker").attr({zIndex:9}).add()};bV();if(cG.enabled){bH.tooltip=q=bQ(cG)}(function(){cg.onmousedown=function(cK){cK=cF(cK);!aS&&cK.preventDefault&&cK.preventDefault();bH.mouseIsDown=n=!0;cc=cK.chartX;cb=cK.chartY;aG(aH,aS?"touchend":"mouseup",cC)};var cJ=function(cR){if(!cR||!(cR.touches&&cR.touches.length>1)){cR=cF(cR);if(!aS){cR.returnValue=!1}var cQ=cR.chartX,cP=cR.chartY,cO=!W(cQ-cj,cP-ch);bN||(bN=aI(cg));aS&&cR.type==="touchstart"&&(aJ(cR.target,"isTracker")?bH.runTrackerClick||cR.preventDefault():!cy&&!cO&&cR.preventDefault());cO&&(cQ<cj?cQ=cj:cQ>cj+b0&&(cQ=cj+b0),cP<ch?cP=ch:cP>ch+b6&&(cP=ch+b6));if(n&&cR.type!=="touchstart"){if(ca=Math.sqrt(Math.pow(cc-cQ,2)+Math.pow(cb-cP,2)),ca>10){if(ac&&(cI||S)&&W(cc-cj,cb-ch)){ba||(ba=cf.rect(cj,ch,y?1:b0,U?1:b6,0).attr({fill:bC.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())}ba&&y&&(cQ-=cc,ba.attr({width:bc(cQ),x:(cQ>0?0:cQ)+cc}));ba&&U&&(cP-=cb,ba.attr({height:bc(cP),y:(cP>0?0:cP)+cb}))}}else{if(!cO){var cN,cP=bH.hoverPoint,cQ=bH.hoverSeries,cM,cS,cL=K,cK=b8?cR.chartY:cR.chartX-cj;if(q&&cG.shared){cN=[];cM=bX.length;for(cS=0;cS<cM;cS++){if(bX[cS].visible&&bX[cS].tooltipPoints.length){cR=bX[cS].tooltipPoints[cK],cR._dist=bc(cK-cR.plotX),cL=P(cL,cR._dist),cN.push(cR)}}for(cM=cN.length;cM--;){cN[cM]._dist>cL&&cN.splice(cM,1)}if(cN.length&&cN[0].plotX!==bA){q.refresh(cN),bA=cN[0].plotX}}if(cQ&&cQ.tracker&&(cR=cQ.tooltipPoints[cK])&&cR!==cP){cR.onMouseOver()}}}return cO||!ac}};cg.onmousemove=cJ;aG(cg,"mouseleave",cD);aG(aH,"mousemove",cB);cg.ontouchstart=function(cK){if(cI||S){cg.onmousedown(cK)}cJ(cK)};cg.ontouchmove=cJ;cg.ontouchend=function(){ca&&cD()};cg.onclick=function(cK){var cN=bH.hoverPoint,cK=cF(cK);cK.cancelBubble=!0;if(!ca){if(cN&&aJ(cK.target,"isTracker")){var cM=cN.plotX,cL=cN.plotY;aK(cN,{pageX:bN.left+cj+(b8?b0-cL:cM),pageY:bN.top+ch+(b8?b6-cM:cL)});a0(cN.series,"click",aK(cK,{point:cN}));cN.firePointEvent("click",cK)}else{aK(cK,cE(cK)),W(cK.chartX-cj,cK.chartY-ch)&&a0(bH,"click",cK)}}ca=!1}})();ct=setInterval(function(){b3&&b3()},32);aK(this,{zoomX:cI,zoomY:S,resetTracker:cD,destroy:function(){if(bH.trackerGroup){bH.trackerGroup=co=bH.trackerGroup.destroy()}a8(aH,"mousemove",cB);cg.onclick=cg.onmousedown=cg.onmousemove=cg.ontouchstart=cg.ontouchend=cg.ontouchmove=null}})}function bO(S){var y=S.type||bC.type||bC.defaultSeriesType,ba=bl[y],U=bH.hasRendered;if(U){if(b8&&y==="column"){ba=bl.bar}else{if(!b8&&y==="bar"){ba=bl.column}}}y=new ba;y.init(bH,S);!U&&y.inverted&&(b8=!0);if(y.isCartesian){ac=y.isCartesian}bX.push(y);return y}function bM(){bC.alignTicks!==!1&&aj(X,function(y){y.adjustTickAmount()});bY=null}function bK(S){var y=bH.isDirtyLegend,cc,cb=bH.isDirtyBox,ca=bX.length,ba=ca,U=bH.clipRect;for(k(S,bH);ba--;){if(S=bX[ba],S.isDirty&&S.options.stacking){cc=!0;break}}if(cc){for(ba=ca;ba--;){if(S=bX[ba],S.options.stacking){S.isDirty=!0}}}aj(bX,function(cB){cB.isDirty&&(cB.cleanData(),cB.getSegments(),cB.options.legendType==="point"&&(y=!0))});if(y&&ce.renderLegend){ce.renderLegend(),bH.isDirtyLegend=!1}ac&&(br||(bY=null,aj(X,function(cB){cB.setScale()})),bM(),bJ(),aj(X,function(cB){if(cB.isDirty||cb){cB.redraw(),cb=!0}}));cb&&(cv(),bV(),U&&(L(U),U.animate({width:bH.plotSizeX,height:bH.plotSizeY})));aj(bX,function(cB){cB.isDirty&&cB.visible&&(!cB.isCartesian||cB.xAxis)&&cB.redraw()});ci&&ci.resetTracker&&ci.resetTracker();a0(bH,"redraw")}function bI(){var y=bU.xAxis||{},U=bU.yAxis||{},S,y=aQ(y);aj(y,function(ca,ba){ca.index=ba;ca.isX=!0});U=aQ(U);aj(U,function(ca,ba){ca.index=ba});X=y.concat(U);bH.xAxis=[];bH.yAxis=[];X=s(X,function(ba){S=new bS(ba);bH[S.isXAxis?"xAxis":"yAxis"].push(S);return S});bM()}function bF(y,S){b5=aC(bU.title,y);bL=aC(bU.subtitle,S);aj([["title",y,b5],["subtitle",S,bL]],function(ba){var U=ba[0],cb=bH[U],ca=ba[1],ba=ba[2];cb&&ca&&(cb=cb.destroy());ba&&ba.text&&!cb&&(bH[U]=cf.text(ba.text,0,0,ba.useHTML).attr({align:ba.align,"class":"highcharts-"+U,zIndex:1}).css(ba.style).add().align(ba,!1,z))})}function bw(){b2=bC.renderTo;E=bp+aY++;g(b2)&&(b2=aH.getElementById(b2));b2.innerHTML="";b2.offsetWidth||(bZ=b2.cloneNode(0),aO(bZ,{position:bh,top:"-9999px",display:""}),aH.body.appendChild(bZ));F=(bZ||b2).offsetWidth;cw=(bZ||b2).offsetHeight;bH.chartWidth=K=bC.width||F||600;bH.chartHeight=cx=bC.height||(cw>19?cw:400);bH.container=cg=ay(bf,{className:"highcharts-container"+(bC.className?" "+bC.className:""),id:E},aK({position:x,overflow:aq,width:K+ap,height:cx+ap,textAlign:"left"},bC.style),bZ||b2);bH.renderer=cf=bC.forExport?new B(cg,K,cx,!0):new c(cg,K,cx);var S,y;a&&cg.getBoundingClientRect&&(S=function(){aO(cg,{left:0,top:0});y=cg.getBoundingClientRect();aO(cg,{left:-(y.left-aF(y.left))+ap,top:-(y.top-aF(y.top))+ap})},S(),aG(o,"resize",S),aG(bH,"destroy",function(){a8(o,"resize",S)}))}function b7(){function S(){var ba=bC.width||b2.offsetWidth,U=bC.height||b2.offsetHeight;if(ba&&U){if(ba!==F||U!==cw){clearTimeout(y),y=setTimeout(function(){b9(ba,U,!1)},100)}F=ba;cw=U}}var y;aG(o,"resize",S);aG(bH,"destroy",function(){a8(o,"resize",S)})}function bu(){a0(bH,"endResize",null,function(){br-=1})}function by(){var y=bU.labels,U=bU.credits,S;bF();ce=bH.legend=new bW;bJ();aj(X,function(ba){ba.setTickPositions(!0)});bM();bJ();cv();ac&&aj(X,function(ba){ba.render()});if(!bH.seriesGroup){bH.seriesGroup=cf.g("series-group").attr({zIndex:3}).add()}aj(bX,function(ba){ba.translate();ba.setTooltipPoints();ba.render()});y.items&&aj(y.items,function(){var ba=aK(y.style,this.style),cb=aF(ba.left)+cj,ca=aF(ba.top)+ch+12;delete ba.left;delete ba.top;cf.text(this.html,cb,ca).attr({zIndex:2}).css(ba).add()});if(!bH.toolbar){bH.toolbar=bR()}if(U.enabled&&!bH.credits){S=U.href,bH.credits=cf.text(U.text,0,0).on("click",function(){if(S){location.href=S}}).attr({align:U.position.align,zIndex:8}).css(U.style).add().align(U.position)}bV();bH.hasRendered=!0;bZ&&(b2.appendChild(cg),u(bZ))}function bz(){var S,y=cg&&cg.parentNode;if(bH!==null){a0(bH,"destroy");a8(o,"unload",bz);a8(bH);for(S=X.length;S--;){X[S]=X[S].destroy()}for(S=bX.length;S--;){bX[S]=bX[S].destroy()}aj("title,subtitle,seriesGroup,clipRect,credits,tracker".split(","),function(ba){var U=bH[ba];U&&(bH[ba]=U.destroy())});aj([cs,ce,q,cf,ci],function(U){U&&U.destroy&&U.destroy()});cs=ce=q=cf=ci=null;if(cg){cg.innerHTML="",a8(cg),y&&y.removeChild(cg),cg=null}clearInterval(ct);for(S in bH){delete bH[S]}bH=null}}function cr(){!m&&o==o.top&&aH.readyState!=="complete"?aH.attachEvent("onreadystatechange",function(){aH.detachEvent("onreadystatechange",cr);aH.readyState==="complete"&&cr()}):(bw(),bG(),Z(),aj(bU.series||[],function(y){bO(y)}),bH.inverted=b8=ah(b8,bU.chart.inverted),bI(),bH.render=by,bH.tracker=ci=new bP(bU.tooltip),by(),a0(bH,"load"),bT&&bT.apply(bH,[bH]),aj(bH.callbacks,function(y){y.apply(bH,[bH])}))}a6=aC(a6,a7.xAxis);aW=aC(aW,a7.yAxis);a7.xAxis=a7.yAxis=null;var bU=aC(a7,bU),bC=bU.chart,ck=bC.margin,ck=bn(ck)?ck:[ck,ck,ck,ck],bB=ah(bC.marginTop,ck[0]),bx=ah(bC.marginRight,ck[1]),aa=ah(bC.marginBottom,ck[2]),bt=ah(bC.marginLeft,ck[3]),bs=bC.spacingTop,bv=bC.spacingRight,cn=bC.spacingBottom,b1=bC.spacingLeft,z,b5,bL,ch,bE,cA,cj,cq,b2,bZ,cg,E,F,cw,K,cx,l,cu,cs,cp,Q,cl,bH=this,cy=(ck=bC.events)&&!!ck.click,bD,W,q,n,cd,G,C,b6,b0,ci,co,bV,ce,cm,b4,bN,ac=bC.showAxes,br=0,X=[],bY,bX=[],b8,cf,b3,ct,bA,cv,bJ,bG,Z,b9,V,cz,bW=function(){function cX(y,c4){var c3=y.legendItem,c2=y.legendLine,c1=y.legendSymbol,c0=cK.color,cZ=c4?cS.itemStyle.color:c0,cY=c4?y.color:c0,c0=c4?y.pointAttr[O]:{stroke:c0,fill:c0};c3&&c3.css({fill:cZ});c2&&c2.attr({stroke:cY});c1&&c1.attr(c0)}function cW(y,c2,c1){var c0=y.legendItem,cZ=y.legendLine,cY=y.legendSymbol,y=y.checkbox;c0&&c0.attr({x:c2,y:c1});cZ&&cZ.translate(c2,c1-4);cY&&cY.attr({x:c2+cY.xOff,y:c1+cY.yOff});if(y){y.x=c2,y.y=c1}}function cV(){aj(cO,function(cY){var y=cY.checkbox,cZ=S.alignAttr;y&&aO(y,{left:cZ.translateX+cY.legendItemWidth+y.x-40+ap,top:cZ.translateY+y.y-11+ap})})}function cU(c3){var c2,c1,cY,c0,cZ=c3.legendItem;c0=c3.series||c3;var y=c0.options,c5=y&&y.borderWidth||0;if(!cZ){c0=/^(bar|pie|area|column)$/.test(c0.type);c3.legendItem=cZ=cf.text(cS.labelFormatter.call(c3),0,0).css(c3.visible?cB:cK).on("mouseover",function(){c3.setState(d);cZ.css(cC)}).on("mouseout",function(){cZ.css(c3.visible?cB:cK);c3.setState()}).on("click",function(){var c6=function(){c3.setVisible()};c3.firePointEvent?c3.firePointEvent("legendItemClick",null,c6):a0(c3,"legendItemClick",null,c6)}).attr({zIndex:2}).add(S);if(!c0&&y&&y.lineWidth){var c4={"stroke-width":y.lineWidth,zIndex:2};if(y.dashStyle){c4.dashstyle=y.dashStyle}c3.legendLine=cf.path([Y,-cQ-cP,0,aX,-cP,0]).attr(c4).add(S)}c0?c2=cf.rect(c1=-cQ-cP,cY=-11,cQ,12,2).attr({zIndex:3}).add(S):y&&y.marker&&y.marker.enabled&&(c2=cf.symbol(c3.symbol,c1=-cQ/2-cP,cY=-4,y.marker.radius).attr({zIndex:3}).add(S));if(c2){c2.xOff=c1+c5%2/2,c2.yOff=cY+c5%2/2}c3.legendSymbol=c2;cX(c3,c3.visible);if(y&&y.showCheckbox){c3.checkbox=ay("input",{type:"checkbox",checked:c3.selected,defaultChecked:c3.selected},cS.itemCheckboxStyle,cg),aG(c3.checkbox,"click",function(c6){a0(c3,"checkboxClick",{checked:c6.target.checked},function(){c3.select()})})}}c2=cZ.getBBox();c1=c3.legendItemWidth=cS.itemWidth||cQ+cP+c2.width+cG;U=c2.height;if(cR&&cF-cM+c1>(cH||K-2*cG-cM)){cF=cM,cJ+=U}cI=cJ;cW(c3,cF,cJ);cR?cF+=c1:cJ+=U;ba=cH||aw(cR?cF-cM:c1,ba)}function cT(){cF=cM;cJ=cL;cI=ba=0;S||(S=cf.g("legend").attr({zIndex:7}).add());cO=[];aj(ca,function(c1){var c0=c1.options;c0.showInLegend&&(cO=cO.concat(c0.legendType==="point"?c1.data:c1))});M(cO,function(c1,c0){return(c1.options.legendIndex||0)-(c0.options.legendIndex||0)});cE&&cO.reverse();aj(cO,cU);cm=cH||ba;b4=cI-cL+U;if(cc||cb){cm+=2*cG;b4+=2*cG;if(cD){if(cm>0&&b4>0){cD[cD.isNew?"attr":"animate"](cD.crisp(null,null,null,cm,b4)),cD.isNew=!1}}else{cD=cf.rect(0,0,cm,b4,cS.borderRadius,cc||0).attr({stroke:cS.borderColor,"stroke-width":cc||0,fill:cb||ax}).add(S).shadow(cS.shadow),cD.isNew=!0}cD[cO.length?"show":"hide"]()}for(var cY=["left","right","top","bottom"],y,cZ=4;cZ--;){y=cY[cZ],cN[y]&&cN[y]!=="auto"&&(cS[cZ<2?"align":"verticalAlign"]=y,cS[cZ<2?"x":"y"]=aF(cN[y])*(cZ%2?-1:1))}cO.length&&S.align(aK(cS,{width:cm,height:b4}),!0,z);br||cV()}var cS=bH.options.legend;if(cS.enabled){var cR=cS.layout==="horizontal",cQ=cS.symbolWidth,cP=cS.symbolPadding,cO,cN=cS.style,cB=cS.itemStyle,cC=cS.itemHoverStyle,cK=cS.itemHiddenStyle,cG=aF(cN.padding),cL=18,cM=4+cG+cQ+cP,cF,cJ,cI,U=0,cD,cc=cS.borderWidth,cb=cS.backgroundColor,S,ba,cH=cS.width,ca=bH.series,cE=cS.reversed;cT();aG(bH,"endResize",cV);return{colorizeItem:cX,destroyItem:function(cY){var y=cY.checkbox;aj(["legendItem","legendLine","legendSymbol"],function(cZ){cY[cZ]&&cY[cZ].destroy()});y&&u(cY.checkbox)},renderLegend:cT,destroy:function(){cD&&(cD=cD.destroy());S&&(S=S.destroy())}}}};W=function(S,y){return S>=0&&S<=b0&&y>=0&&y<=b6};cz=function(){a0(bH,"selection",{resetSelection:!0},V);bH.toolbar.remove("zoom")};V=function(S){var y=a7.lang,U=bH.pointCount<100;bH.toolbar.add("zoom",y.resetZoom,y.resetZoomTitle,cz);!S||S.resetSelection?aj(X,function(ba){ba.setExtremes(null,null,!1,U)}):aj(S.xAxis.concat(S.yAxis),function(ca){var ba=ca.axis;bH.tracker[ba.isXAxis?"zoomX":"zoomY"]&&ba.setExtremes(ca.min,ca.max,!1,U)});bK()};bJ=function(){var y=bU.legend,cc=ah(y.margin,10),cb=y.x,ca=y.y,ba=y.align,U=y.verticalAlign,S;bG();if((bH.title||bH.subtitle)&&!af(bB)){(S=aw(bH.title&&!b5.floating&&!b5.verticalAlign&&b5.y||0,bH.subtitle&&!bL.floating&&!bL.verticalAlign&&bL.y||0))&&(ch=aw(ch,S+ah(b5.margin,15)+bs))}y.enabled&&!y.floating&&(ba==="right"?af(bx)||(bE=aw(bE,cm-cb+cc+bv)):ba==="left"?af(bt)||(cj=aw(cj,cm+cb+cc+b1)):U==="top"?af(bB)||(ch=aw(ch,b4+ca+cc+bs)):U==="bottom"&&(af(aa)||(cA=aw(cA,b4-ca+cc+cn))));ac&&aj(X,function(cB){cB.getOffset()});af(bt)||(cj+=cq[3]);af(bB)||(ch+=cq[0]);af(aa)||(cA+=cq[2]);af(bx)||(bE+=cq[1]);Z()};b9=function(S,y,ca){var ba=bH.title,U=bH.subtitle;br+=1;k(ca,bH);cu=cx;l=K;bH.chartWidth=K=ab(S);bH.chartHeight=cx=ab(y);aO(cg,{width:K+ap,height:cx+ap});cf.setSize(K,cx,ca);b0=K-cj-bE;b6=cx-ch-cA;bY=null;aj(X,function(cb){cb.isDirty=!0;cb.setScale()});aj(bX,function(cb){cb.isDirty=!0});bH.isDirtyLegend=!0;bH.isDirtyBox=!0;bJ();ba&&ba.align(null,null,z);U&&U.align(null,null,z);bK(ca);cu=null;a0(bH,"resize");T===!1?bu():setTimeout(bu,T&&T.duration||500)};Z=function(){bH.plotLeft=cj=ab(cj);bH.plotTop=ch=ab(ch);bH.plotWidth=b0=ab(K-cj-bE);bH.plotHeight=b6=ab(cx-ch-cA);bH.plotSizeX=b8?b6:b0;bH.plotSizeY=b8?b0:b6;z={x:b1,y:bs,width:K-b1-bv,height:cx-bs-cn}};bG=function(){ch=ah(bB,bs);bE=ah(bx,bv);cA=ah(aa,cn);cj=ah(bt,b1);cq=[0,0,0,0]};cv=function(){var S=bC.borderWidth||0,y=bC.backgroundColor,cb=bC.plotBackgroundColor,ca=bC.plotBackgroundImage,ba,U={x:cj,y:ch,width:b0,height:b6};ba=S+(bC.shadow?8:0);if(S||y){cs?cs.animate(cs.crisp(null,null,null,K-ba,cx-ba)):cs=cf.rect(ba/2,ba/2,K-ba,cx-ba,bC.borderRadius,S).attr({stroke:bC.borderColor,"stroke-width":S,fill:y||ax}).add().shadow(bC.shadow)}cb&&(cp?cp.animate(U):cp=cf.rect(cj,ch,b0,b6,0).attr({fill:cb}).add().shadow(bC.plotShadow));ca&&(Q?Q.animate(U):Q=cf.image(ca,cj,ch,b0,b6).add());bC.plotBorderWidth&&(cl?cl.animate(cl.crisp(null,cj,ch,b0,b6)):cl=cf.rect(cj,ch,b0,b6,0,bC.plotBorderWidth).attr({stroke:bC.plotBorderColor,"stroke-width":bC.plotBorderWidth,zIndex:4}).add());bH.isDirtyBox=!1};aG(o,"unload",bz);bC.reflow!==!1&&aG(bH,"load",b7);if(ck){for(bD in ck){aG(bH,bD,ck[bD])}}bH.options=bU;bH.series=bX;bH.addSeries=function(S,y,ba){var U;S&&(k(ba,bH),y=ah(y,!0),a0(bH,"addSeries",{options:S},function(){U=bO(S);U.isDirty=!0;bH.isDirtyLegend=!0;y&&bH.redraw()}));return U};bH.animation=ah(bC.animation,!0);bH.destroy=bz;bH.get=function(S){var y,ba,U;for(y=0;y<X.length;y++){if(X[y].options.id===S){return X[y]}}for(y=0;y<bX.length;y++){if(bX[y].options.id===S){return bX[y]}}for(y=0;y<bX.length;y++){U=bX[y].data;for(ba=0;ba<U.length;ba++){if(U[ba].id===S){return U[ba]}}}return null};bH.getSelectedPoints=function(){var y=[];aj(bX,function(S){y=y.concat(bj(S.data,function(U){return U.selected}))});return y};bH.getSelectedSeries=function(){return bj(bX,function(y){return y.selected})};bH.hideLoading=function(){aU(cd,{opacity:0},{duration:bU.loading.hideDuration,complete:function(){aO(cd,{display:ax})}});C=!1};bH.isInsidePlot=W;bH.redraw=bK;bH.setSize=b9;bH.setTitle=bF;bH.showLoading=function(y){var S=bU.loading;cd||(cd=ay(bf,{className:"highcharts-loading"},aK(S.style,{left:cj+ap,top:ch+ap,width:b0+ap,height:b6+ap,zIndex:10,display:ax}),cg),G=ay("span",null,S.labelStyle,cd));G.innerHTML=y||bU.lang.loading;C||(aO(cd,{opacity:0,display:""}),aU(cd,{opacity:S.style.opacity},{duration:S.showDuration}),C=!0)};bH.pointCount=0;bH.counters=new an;cr()}var aH=document,o=window,az=Math,ab=az.round,aN=az.floor,aM=az.ceil,aw=az.max,P=az.min,bc=az.abs,aB=az.cos,a4=az.sin,v=az.PI,bm=v*2/360,e=navigator.userAgent,a3=/msie/i.test(e)&&!o.opera,bd=aH.documentMode===8,R=/AppleWebKit/.test(e),a=/Firefox/.test(e),m=!!aH.createElementNS&&!!aH.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,ak=a&&parseInt(e.split("Firefox/")[1],10)<4,c,aS=aH.documentElement.ontouchstart!==void 0,av={},aY=0,w=1,aV,a7,aR,T,a1,bq,bf="div",bh="absolute",x="relative",aq="hidden",bp="highcharts-",au="visible",ap="px",ax="none",Y="M",aX="L",a9="rgba(192,192,192,"+(m?0.000001:0.002)+")",O="",d="hover",aL,ae,D,f,b,ao,N,r,bo,be,a5,aP,ad=o.HighchartsAdapter,aA=ad||{},aj=aA.each,bj=aA.grep,s=aA.map,aC=aA.merge,aG=aA.addEvent,a8=aA.removeEvent,a0=aA.fireEvent,aU=aA.animate,L=aA.stop,bl={};aR=function(U,S,Q){function K(l){return l.toString().replace(/^([0-9])$/,"0$1")}if(!af(S)||isNaN(S)){return"Invalid date"}var U=ah(U,"%Y-%m-%d %H:%M:%S"),S=new Date(S*w),G,F=S[D](),E=S[f](),C=S[b](),z=S[ao](),y=S[N](),n=a7.lang,q=n.weekdays,S={a:q[E].substr(0,3),A:q[E],d:K(C),e:C,b:n.shortMonths[z],B:n.months[z],m:K(z+1),y:y.toString().substr(2,2),Y:y,H:K(F),I:K(F%12||12),l:F%12||12,M:K(S[ae]()),p:F<12?"AM":"PM",P:F<12?"am":"pm",S:K(S.getSeconds())};for(G in S){U=U.replace("%"+G,S[G])}return Q?U.substr(0,1).toUpperCase()+U.substr(1):U};an.prototype={wrapColor:function(l){if(this.color>=l){this.color=0}},wrapSymbol:function(l){if(this.symbol>=l){this.symbol=0}}};a1={init:function(K,G,F){var G=G||"",E=K.shift,C=G.indexOf("C")>-1,z=C?7:3,y,G=G.split(" "),F=[].concat(F),q,n,l=function(Q){for(y=Q.length;y--;){Q[y]===Y&&Q.splice(y+1,0,Q[y+1],Q[y+2],Q[y+1],Q[y+2])}};C&&(l(G),l(F));K.isArea&&(q=G.splice(G.length-6,6),n=F.splice(F.length-6,6));if(E){F=[].concat(F).splice(0,z).concat(F),K.shift=!1}if(G.length){for(K=F.length;G.length<K;){E=[].concat(G).splice(G.length-z,z),C&&(E[z-6]=E[z-2],E[z-5]=E[z-1]),G=G.concat(E)}}q&&(G=G.concat(q),F=F.concat(n));return[G,F]},step:function(n,l,C,z){var y=[],q=n.length;if(C===1){y=z}else{if(q===l.length&&C<1){for(;q--;){z=parseFloat(n[q]),y[q]=isNaN(z)?n[q]:C*parseFloat(l[q]-z)+z}}else{y=l}}return y}};ad&&ad.init&&ad.init(a1);if(!ad&&o.jQuery){var h=jQuery,aj=function(n,l){for(var y=0,q=n.length;y<q;y++){if(l.call(n[y],n[y],y,n)===!1){return y}}},bj=h.grep,s=function(n,l){for(var z=[],y=0,q=n.length;y<q;y++){z[y]=l.call(n[y],n[y],y,n)}return z},aC=function(){var l=arguments;return h.extend(!0,null,l[0],l[1],l[2],l[3])},aG=function(n,l,q){h(n).bind(l,q)},a8=function(n,l,y){var q=aH.removeEventListener?"removeEventListener":"detachEvent";aH[q]&&!n[q]&&(n[q]=function(){});h(n).unbind(l,y)},a0=function(n,l,C,z){var y=h.Event(l),q="detached"+l;aK(y,C);n[l]&&(n[q]=n[l],n[l]=null);h(n).trigger(y);n[q]&&(n[l]=n[q],n[q]=null);z&&!y.isDefaultPrevented()&&z(y)},aU=function(n,l,y){var q=h(n);if(l.d){n.toD=l.d,l.d=1}q.stop();q.animate(l,y)},L=function(l){h(l).stop()};h.extend(h.easing,{easeOutQuad:function(n,l,z,y,q){return -y*(l/=q)*(l-2)+z}});var I=jQuery.fx.step._default,j=jQuery.fx.prototype.cur;h.fx.step._default=function(n){var l=n.elem;l.attr?l.attr(n.prop,n.now):I.apply(this,arguments)};h.fx.step.d=function(n){var l=n.elem;if(!n.started){var q=a1.init(l,l.d,l.toD);n.start=q[0];n.end=q[1];n.started=!0}l.attr("d",a1.step(n.start,n.end,n.pos,l.toD))};h.fx.prototype.cur=function(){var l=this.elem;return l.attr?l.attr(this.prop):j.apply(this,arguments)}}ad={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};a7={colors:"#4572A7,#AA4643,#89A54E,#80699B,#3D96AE,#DB843D,#92A8CD,#A47D7C,#B5CA92".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,June,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0"},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1000},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:aC(ad,{enabled:!1,y:-6,formatter:function(){return this.y}}),showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:bh,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,shadow:!1,style:{padding:"5px"},itemStyle:{cursor:"pointer",color:"#3E576F"},itemHoverStyle:{cursor:"pointer",color:"#000000"},itemHiddenStyle:{color:"#C0C0C0"},itemCheckboxStyle:{position:bh,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{hideDuration:100,labelStyle:{fontWeight:"bold",position:x,top:"1em"},showDuration:100,style:{position:bh,backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,shadow:!0,snap:aS?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"#4572A7",cursor:"pointer"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var a6={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:ad,lineColor:"#C0D0E0",lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},aW=aC(a6,{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:ad.style}}),aE={labels:{align:"right",x:-8,y:null},title:{rotation:270}},aZ={labels:{align:"left",x:8,y:null},title:{rotation:90}},ar={labels:{align:"center",x:0,y:14},title:{rotation:0}},bg=aC(ar,{labels:{y:-5}}),am=a7.plotOptions,ad=am.line;am.spline=aC(ad);am.scatter=aC(ad,{lineWidth:0,states:{hover:{lineWidth:0}}});am.area=aC(ad,{});am.areaspline=aC(am.area);am.column=aC(ad,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,states:{hover:{brightness:0.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{y:null,verticalAlign:null}});am.bar=aC(am.column,{dataLabels:{align:"left",x:5,y:0}});am.pie=aC(ad,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}}});A();var p=function(n){var l=[],q;(function(y){(q=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(y))?l=[aF(q[1]),aF(q[2]),aF(q[3]),parseFloat(q[4],10)]:(q=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(y))&&(l=[aF(q[1],16),aF(q[2],16),aF(q[3],16),1])})(n);return{get:function(y){return l&&!isNaN(l[0])?y==="rgb"?"rgb("+l[0]+","+l[1]+","+l[2]+")":y==="a"?l[3]:"rgba("+l.join(",")+")":n},brighten:function(y){if(bi(y)&&y!==0){var z;for(z=0;z<3;z++){l[z]+=aF(y*255),l[z]<0&&(l[z]=0),l[z]>255&&(l[z]=255)}}return this},setOpacity:function(y){l[3]=y;return this}}};bk.prototype={init:function(n,l){this.element=aH.createElementNS("http://www.w3.org/2000/svg",l);this.renderer=n},animate:function(n,l,q){if(l=ah(l,T,!0)){l=aC(l);if(q){l.complete=q}aU(this,n,l)}else{this.attr(n),q&&q()}},attr:function(X,V){var U,S,Q,K,G=this.element,F=G.nodeName,E=this.renderer,C,y=this.shadows,z=this.htmlNode,q,W=this;g(X)&&af(V)&&(U=X,X={},X[U]=V);if(g(X)){U=X,F==="circle"?U={x:"cx",y:"cy"}[U]||U:U==="strokeWidth"&&(U="stroke-width"),W=aJ(G,U)||this[U]||0,U!=="d"&&U!=="visibility"&&(W=parseFloat(W))}else{for(U in X){C=!1;S=X[U];if(U==="d"){S&&S.join&&(S=S.join(" ")),/(NaN| {2}|^$)/.test(S)&&(S="M 0 0"),this.d=S}else{if(U==="x"&&F==="text"){for(Q=0;Q<G.childNodes.length;Q++){K=G.childNodes[Q],aJ(K,"x")===aJ(G,"x")&&aJ(K,"x",S)}this.rotation&&aJ(G,"transform","rotate("+this.rotation+" "+S+" "+aF(X.y||aJ(G,"y"))+")")}else{if(U==="fill"){S=E.color(S,G,U)}else{if(F==="circle"&&(U==="x"||U==="y")){U={x:"cx",y:"cy"}[U]||U}else{if(U==="translateX"||U==="translateY"||U==="rotation"||U==="verticalAlign"){this[U]=S,this.updateTransform(),C=!0}else{if(U==="stroke"){S=E.color(S,G,U)}else{if(U==="dashstyle"){if(U="stroke-dasharray",S=S&&S.toLowerCase(),S==="solid"){S=ax}else{if(S){S=S.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(Q=S.length;Q--;){S[Q]=aF(S[Q])*X["stroke-width"]}S=S.join(",")}}}else{U==="isTracker"?this[U]=S:U==="width"?S=aF(S):U==="align"?(U="text-anchor",S={left:"start",center:"middle",right:"end"}[S]):U==="title"&&(Q=aH.createElementNS("http://www.w3.org/2000/svg","title"),Q.appendChild(aH.createTextNode(S)),G.appendChild(Q))}}}}}}}U==="strokeWidth"&&(U="stroke-width");R&&U==="stroke-width"&&S===0&&(S=0.000001);this.symbolName&&/^(x|y|r|start|end|innerR)/.test(U)&&(q||(this.symbolAttr(X),q=!0),C=!0);if(y&&/^(width|height|visibility|x|y|d)$/.test(U)){for(Q=y.length;Q--;){aJ(y[Q],U,S)}}if((U==="width"||U==="height")&&F==="rect"&&S<0){S=0}U==="text"?(this.textStr=S,this.added&&E.buildText(this)):C||aJ(G,U,S);if(z&&(U==="x"||U==="y"||U==="translateX"||U==="translateY"||U==="visibility")){Q=z.length?z:[this];K=Q.length;var Z;for(Z=0;Z<K;Z++){z=Q[Z],C=z.getBBox(),z=z.htmlNode,aO(z,aK(this.styles,{left:C.x+(this.translateX||0)+ap,top:C.y+(this.translateY||0)+ap})),U==="visibility"&&aO(z,{visibility:S})}}}}return W},symbolAttr:function(n){var l=this;aj("x,y,r,start,end,width,height,innerR".split(","),function(q){l[q]=ah(n[q],l[q])});l.attr({d:l.renderer.symbols[l.symbolName](ab(l.x*2)/2,ab(l.y*2)/2,l.r,{start:l.start,end:l.end,width:l.width,height:l.height,innerR:l.innerR})})},clip:function(l){return this.attr("clip-path","url("+this.renderer.url+"#"+l.id+")")},crisp:function(G,F,E,C,z){var y,q={},n={},l,G=G||this.strokeWidth||0;l=G%2/2;n.x=aN(F||this.x||0)+l;n.y=aN(E||this.y||0)+l;n.width=aN((C||this.width||0)-2*l);n.height=aN((z||this.height||0)-2*l);n.strokeWidth=G;for(y in n){this[y]!==n[y]&&(this[y]=q[y]=n[y])}return q},css:function(n){var l=this.element,l=n&&n.width&&l.nodeName==="text",z,y="",q=function(E,C){return"-"+C.toLowerCase()};if(n&&n.color){n.fill=n.color}this.styles=n=aK(this.styles,n);if(a3&&!m){l&&delete n.width,aO(this.element,n)}else{for(z in n){y+=z.replace(/([A-Z])/g,q)+":"+n[z]+";"}this.attr({style:y})}l&&this.added&&this.renderer.buildText(this);return this},on:function(n,l){var q=l;aS&&n==="click"&&(n="touchstart",q=function(y){y.preventDefault();l()});this.element["on"+n]=q;return this},translate:function(n,l){return this.attr({translateX:n,translateY:l})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var n=this.translateX||0,l=this.translateY||0,z=this.inverted,y=this.rotation,q=[];z&&(n+=this.attr("width"),l+=this.attr("height"));(n||l)&&q.push("translate("+n+","+l+")");z?q.push("rotate(90) scale(-1,1)"):y&&q.push("rotate("+y+" "+this.x+" "+this.y+")");q.length&&aJ(this.element,"transform",q.join(" "))},toFront:function(){var l=this.element;l.parentNode.appendChild(l);return this},align:function(n,l,F){n?(this.alignOptions=n,this.alignByTranslate=l,F||this.renderer.alignedObjects.push(this)):(n=this.alignOptions,l=this.alignByTranslate);var F=ah(F,this.renderer),E=n.align,C=n.verticalAlign,z=(F.x||0)+(n.x||0),y=(F.y||0)+(n.y||0),q={};/^(right|center)$/.test(E)&&(z+=(F.width-(n.width||0))/{right:1,center:2}[E]);q[l?"translateX":"x"]=ab(z);/^(bottom|middle)$/.test(C)&&(y+=(F.height-(n.height||0))/({bottom:1,middle:2}[C]||1));q[l?"translateY":"y"]=ab(y);this[this.placed?"animate":"attr"](q);this.placed=!0;this.alignAttr=q;return this},getBBox:function(){var n,l,C,z=this.rotation,y=z*bm;try{n=aK({},this.element.getBBox())}catch(q){n={width:0,height:0}}l=n.width;C=n.height;if(z){n.width=bc(C*a4(y))+bc(l*aB(y)),n.height=bc(C*aB(y))+bc(l*a4(y))}return n},show:function(){return this.attr({visibility:au})},hide:function(){return this.attr({visibility:aq})},add:function(n){var l=this.renderer,E=n||l,C=E.element||l.box,z=C.childNodes,y=this.element,q=aJ(y,"zIndex");this.parentInverted=n&&n.inverted;this.textStr!==void 0&&l.buildText(this);if(n&&this.htmlNode){if(!n.htmlNode){n.htmlNode=[]}n.htmlNode.push(this)}if(q){E.handleZ=!0,q=aF(q)}if(E.handleZ){for(E=0;E<z.length;E++){if(n=z[E],l=aJ(n,"zIndex"),n!==y&&(aF(l)>q||!af(q)&&af(l))){return C.insertBefore(y,n),this}}}C.appendChild(y);this.added=!0;return this},destroy:function(){var n=this.element||{},l=this.shadows,z=n.parentNode,y,q;n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=null;L(this);if(this.clipPath){this.clipPath=this.clipPath.destroy()}if(this.stops){for(q=0;q<this.stops.length;q++){this.stops[q]=this.stops[q].destroy()}this.stops=null}z&&z.removeChild(n);l&&aj(l,function(C){(z=C.parentNode)&&z.removeChild(C)});J(this.renderer.alignedObjects,this);for(y in this){delete this[y]}return null},empty:function(){for(var n=this.element,l=n.childNodes,q=l.length;q--;){n.removeChild(l[q])}},shadow:function(n,l){var E=[],C,z,y=this.element,q=this.parentInverted?"(-1,-1)":"(1,1)";if(n){for(C=1;C<=3;C++){z=y.cloneNode(0),aJ(z,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":0.05*C,"stroke-width":7-2*C,transform:"translate"+q,fill:ax}),l?l.element.appendChild(z):y.parentNode.insertBefore(z,y),E.push(z)}this.shadows=E}return this}};var B=function(){this.init.apply(this,arguments)};B.prototype={Element:bk,init:function(n,l,C,z){var y=location,q;q=this.createElement("svg").attr({xmlns:"http://www.w3.org/2000/svg",version:"1.1"});n.appendChild(q.element);this.box=q.element;this.boxWrapper=q;this.alignedObjects=[];this.url=a3?"":y.href.replace(/#.*?$/,"");this.defs=this.createElement("defs").add();this.forExport=z;this.gradients=[];this.setSize(l,C,!1)},destroy:function(){var n,l=this.gradients,q=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();if(l){for(n=0;n<l.length;n++){this.gradients[n]=l[n].destroy()}this.gradients=null}if(q){this.defs=q.destroy()}return this.alignedObjects=null},createElement:function(n){var l=new this.Element;l.init(this,n);return l},buildText:function(V){for(var S=V.element,Q=ah(V.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),K=S.childNodes,G=/style="([^"]+)"/,F=/href="([^"]+)"/,E=aJ(S,"x"),C=V.styles,z=C&&V.useHTML&&!this.forExport,y=V.htmlNode,n=C&&aF(C.width),W=C&&C.lineHeight,l,U=K.length;U--;){S.removeChild(K[U])}n&&!V.added&&this.box.appendChild(S);aj(Q,function(ac,aa){var Z,X=0,q,ac=ac.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");Z=ac.split("|||");aj(Z,function(bu){if(bu!==""||Z.length===1){var br={},bt=aH.createElementNS("http://www.w3.org/2000/svg","tspan");G.test(bu)&&aJ(bt,"style",bu.match(G)[1].replace(/(;| |^)color([ :])/,"$1fill$2"));F.test(bu)&&(aJ(bt,"onclick",'location.href="'+bu.match(F)[1]+'"'),aO(bt,{cursor:"pointer"}));bu=(bu.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");bt.appendChild(aH.createTextNode(bu));X?br.dx=3:br.x=E;if(!X){if(aa){!m&&V.renderer.forExport&&aO(bt,{display:"block"});q=o.getComputedStyle&&aF(o.getComputedStyle(l,null).getPropertyValue("line-height"));if(!q||isNaN(q)){q=W||l.offsetHeight||18}aJ(bt,"dy",q)}l=bt}aJ(bt,br);S.appendChild(bt);X++;if(n){for(var bu=bu.replace(/-/g,"- ").split(" "),bs,ba=[];bu.length||ba.length;){bs=S.getBBox().width,br=bs>n,!br||bu.length===1?(bu=ba,ba=[],bu.length&&(bt=aH.createElementNS("http://www.w3.org/2000/svg","tspan"),aJ(bt,{dy:W||16,x:E}),S.appendChild(bt),bs>n&&(n=bs))):(bt.removeChild(bt.firstChild),ba.unshift(bu.pop())),bu.length&&bt.appendChild(aH.createTextNode(bu.join(" ").replace(/- /g,"-")))}}}})});if(z){if(!y){y=V.htmlNode=ay("span",null,aK(C,{position:bh,top:0,left:0}),this.box.parentNode)}y.innerHTML=V.textStr;for(U=K.length;U--;){K[U].style.visibility=aq}}},crispLine:function(n,l){n[1]===n[4]&&(n[1]=n[4]=ab(n[1])+l%2/2);n[2]===n[5]&&(n[2]=n[5]=ab(n[2])+l%2/2);return n},path:function(l){return this.createElement("path").attr({d:l,fill:ax})},circle:function(n,l,q){n=bn(n)?n:{x:n,y:l,r:q};return this.createElement("circle").attr(n)},arc:function(n,l,C,z,y,q){if(bn(n)){l=n.y,C=n.r,z=n.innerR,y=n.start,q=n.end,n=n.x}return this.symbol("arc",n||0,l||0,C||0,{innerR:z||0,start:y||0,end:q||0})},rect:function(n,l,C,z,y,q){if(bn(n)){l=n.y,C=n.width,z=n.height,y=n.r,q=n.strokeWidth,n=n.x}y=this.createElement("rect").attr({rx:y,ry:y,fill:ax});return y.attr(y.crisp(q,n,l,aw(C,0),aw(z,0)))},setSize:function(n,l,z){var y=this.alignedObjects,q=y.length;this.width=n;this.height=l;for(this.boxWrapper[ah(z,!0)?"animate":"attr"]({width:n,height:l});q--;){y[q].align()}},g:function(n){var l=this.createElement("g");return af(n)?l.attr({"class":bp+n}):l},image:function(n,l,C,z,y){var q={preserveAspectRatio:ax};arguments.length>1&&aK(q,{x:l,y:C,width:z,height:y});q=this.createElement("image").attr(q);q.element.setAttributeNS?q.element.setAttributeNS("http://www.w3.org/1999/xlink","href",n):q.element.setAttribute("hc-svg-href",n);return q},symbol:function(K,G,F,E,C){var z,y=this.symbols[K],y=y&&y(ab(G),ab(F),E,C),q=/^url\((.*?)\)$/,n;if(y){z=this.path(y),aK(z,{symbolName:K,x:G,y:F,r:E}),C&&aK(z,C)}else{if(q.test(K)){var l=function(S,Q){S.attr({width:Q[0],height:Q[1]}).translate(-ab(Q[0]/2),-ab(Q[1]/2))};n=K.match(q)[1];K=av[n];z=this.image(n).attr({x:G,y:F});K?l(z,K):(z.attr({width:0,height:0}),ay("img",{onload:function(){l(z,av[n]=[this.width,this.height])},src:n}))}else{z=this.circle(G,F,E)}}return z},symbols:{square:function(n,l,q){q*=0.707;return[Y,n-q,l-q,aX,n+q,l-q,n+q,l+q,n-q,l+q,"Z"]},triangle:function(n,l,q){return[Y,n,l-1.33*q,aX,n+q,l+0.67*q,n-q,l+0.67*q,"Z"]},"triangle-down":function(n,l,q){return[Y,n,l+1.33*q,aX,n-q,l-0.67*q,n+q,l-0.67*q,"Z"]},diamond:function(n,l,q){return[Y,n,l-q,aX,n+q,l,n,l+q,n-q,l,"Z"]},arc:function(K,G,F,E){var C=E.start,z=E.end-0.000001,y=E.innerR,q=aB(C),n=a4(C),l=aB(z),z=a4(z),E=E.end-C<v?0:1;return[Y,K+F*q,G+F*n,"A",F,F,0,E,1,K+F*l,G+F*z,aX,K+y*l,G+y*z,"A",y,y,0,E,0,K+y*q,G+y*n,"Z"]}},clipRect:function(n,l,C,z){var y=bp+aY++,q=this.createElement("clipPath").attr({id:y}).add(this.defs),n=this.rect(n,l,C,z,0).add(q);n.id=y;n.clipPath=q;return n},color:function(G,F,E){var C,z=/^rgba/;if(G&&G.linearGradient){var y=this,F=G.linearGradient,E=bp+aY++,q,n,l;q=y.createElement("linearGradient").attr({id:E,gradientUnits:"userSpaceOnUse",x1:F[0],y1:F[1],x2:F[2],y2:F[3]}).add(y.defs);y.gradients.push(q);q.stops=[];aj(G.stops,function(K){z.test(K[1])?(C=p(K[1]),n=C.get("rgb"),l=C.get("a")):(n=K[1],l=1);K=y.createElement("stop").attr({offset:K[0],"stop-color":n,"stop-opacity":l}).add(q);q.stops.push(K)});return"url("+this.url+"#"+E+")"}else{return z.test(G)?(C=p(G),aJ(F,E+"-opacity",C.get("a")),C.get("rgb")):(F.removeAttribute(E+"-opacity"),G)}},text:function(n,l,z,y){var q=a7.chart.style,l=ab(ah(l,0)),z=ab(ah(z,0)),n=this.createElement("text").attr({x:l,y:z,text:n}).css({fontFamily:q.fontFamily,fontSize:q.fontSize});n.x=l;n.y=z;n.useHTML=y;return n}};c=B;if(!m){aA=ai(bk,{init:function(n,l){var y=["<",l,' filled="f" stroked="f"'],q=["position: ",bh,";"];(l==="shape"||l===bf)&&q.push("left:0;top:0;width:10px;height:10px;");bd&&q.push("visibility: ",l===bf?aq:au);y.push(' style="',q.join(""),'"/>');if(l){y=l===bf||l==="span"||l==="img"?y.join(""):n.prepVML(y),this.element=ay(y)}this.renderer=n},add:function(n){var l=this.renderer,y=this.element,q=l.box,q=n?n.element||n:q;n&&n.inverted&&l.invertChild(y,q);bd&&q.gVis===aq&&aO(y,{visibility:aq});q.appendChild(y);this.added=!0;this.alignOnAdd&&this.updateTransform();return this},attr:function(X,V){var U,S,Q,K=this.element||{},G=K.style,F=K.nodeName,E=this.renderer,C=this.symbolName,y,z,q=this.shadows,W=this;g(X)&&af(V)&&(U=X,X={},X[U]=V);if(g(X)){U=X,W=U==="strokeWidth"||U==="stroke-width"?this.strokeweight:this[U]}else{for(U in X){S=X[U];y=!1;if(C&&/^(x|y|r|start|end|width|height|innerR)/.test(U)){z||(this.symbolAttr(X),z=!0),y=!0}else{if(U==="d"){S=S||[];this.d=S.join(" ");Q=S.length;for(y=[];Q--;){y[Q]=bi(S[Q])?ab(S[Q]*10)-5:S[Q]==="Z"?"x":S[Q]}S=y.join(" ")||"x";K.path=S;if(q){for(Q=q.length;Q--;){q[Q].path=S}}y=!0}else{if(U==="zIndex"||U==="visibility"){if(bd&&U==="visibility"&&F==="DIV"){K.gVis=S;y=K.childNodes;for(Q=y.length;Q--;){aO(y[Q],{visibility:S})}S===au&&(S=null)}S&&(G[U]=S);y=!0}else{if(/^(width|height)$/.test(U)){this[U]=S,this.updateClipping?(this[U]=S,this.updateClipping()):G[U]=S,y=!0}else{if(/^(x|y)$/.test(U)){this[U]=S,K.tagName==="SPAN"?this.updateTransform():G[{x:"left",y:"top"}[U]]=S}else{if(U==="class"){K.className=S}else{if(U==="stroke"){S=E.color(S,K,U),U="strokecolor"}else{if(U==="stroke-width"||U==="strokeWidth"){K.stroked=S?!0:!1,U="strokeweight",this[U]=S,bi(S)&&(S+=ap)}else{if(U==="dashstyle"){(K.getElementsByTagName("stroke")[0]||ay(E.prepVML(["<stroke/>"]),null,null,K))[U]=S||"solid",this.dashstyle=S,y=!0}else{if(U==="fill"){F==="SPAN"?G.color=S:(K.filled=S!==ax?!0:!1,S=E.color(S,K,U),U="fillcolor")}else{if(U==="translateX"||U==="translateY"||U==="rotation"||U==="align"){U==="align"&&(U="textAlign"),this[U]=S,this.updateTransform(),y=!0}else{if(U==="text"){this.bBox=null,K.innerHTML=S,y=!0}}}}}}}}}}}}if(q&&U==="visibility"){for(Q=q.length;Q--;){q[Q].style[U]=S}}y||(bd?K[U]=S:aJ(K,U,S))}}return W},clip:function(n){var l=this,q=n.members;q.push(l);l.destroyClip=function(){J(q,l)};return l.css(n.getCSS(l.inverted))},css:function(n){var l=this.element;if(l=n&&l.tagName==="SPAN"&&n.width){delete n.width,this.textWidth=l,this.updateTransform()}this.styles=aK(this.styles,n);aO(this.element,n);return this},destroy:function(){this.destroyClip&&this.destroyClip();return bk.prototype.destroy.apply(this)},empty:function(){for(var n=this.element.childNodes,l=n.length,q;l--;){q=n[l],q.parentNode.removeChild(q)}},getBBox:function(){var n=this.element,l=this.bBox;if(!l){if(n.nodeName==="text"){n.style.position=bh}l=this.bBox={x:n.offsetLeft,y:n.offsetTop,width:n.offsetWidth,height:n.offsetHeight}}return l},on:function(n,l){this.element["on"+n]=function(){var q=o.event;q.target=q.srcElement;l(q)};return this},updateTransform:function(){if(this.added){var Z=this,W=Z.element,V=Z.translateX||0,U=Z.translateY||0,S=Z.x||0,K=Z.y||0,G=Z.textAlign||"left",F={left:0,center:0.5,right:1}[G],E=G&&G!=="left";(V||U)&&Z.css({marginLeft:V,marginTop:U});Z.inverted&&aj(W.childNodes,function(n){Z.renderer.invertChild(n,W)});if(W.tagName==="SPAN"){var z,y,V=Z.rotation,q;z=0;var U=1,Q=0,X;q=aF(Z.textWidth);var aa=Z.xCorr||0,l=Z.yCorr||0,C=[V,G,W.innerHTML,Z.textWidth].join(",");if(C!==Z.cTT){af(V)&&(z=V*bm,U=aB(z),Q=a4(z),aO(W,{filter:V?["progid:DXImageTransform.Microsoft.Matrix(M11=",U,", M12=",-Q,", M21=",Q,", M22=",U,", sizingMethod='auto expand')"].join(""):ax})),z=W.offsetWidth,y=W.offsetHeight,z>q&&(aO(W,{width:q+ap,display:"block",whiteSpace:"normal"}),z=q),q=ab((aF(W.style.fontSize)||12)*1.2),aa=U<0&&-z,l=Q<0&&-y,X=U*Q<0,aa+=Q*q*(X?1-F:F),l-=U*q*(V?X?F:1-F:1),E&&(aa-=z*F*(U<0?-1:1),V&&(l-=y*F*(Q<0?-1:1)),aO(W,{textAlign:G})),Z.xCorr=aa,Z.yCorr=l}aO(W,{left:S+aa,top:K+l});Z.cTT=C}}else{this.alignOnAdd=!0}},shadow:function(K,G){var F=[],E,C=this.element,z=this.renderer,y,q=C.style,n,l=C.path;l&&typeof l.value!=="string"&&(l="x");if(K){for(E=1;E<=3;E++){n=['<shape isShadow="true" strokeweight="',7-2*E,'" filled="false" path="',l,'" coordsize="100,100" style="',C.style.cssText,'" />'],y=ay(z.prepVML(n),null,{left:aF(q.left)+1,top:aF(q.top)+1}),n=['<stroke color="black" opacity="',0.05*E,'"/>'],ay(z.prepVML(n),null,null,y),G?G.element.appendChild(y):C.parentNode.insertBefore(y,C),F.push(y)}this.shadows=F}return this}}),ad=function(){this.init.apply(this,arguments)},ad.prototype=aC(B.prototype,{Element:aA,isIE8:e.indexOf("MSIE 8.0")>-1,init:function(n,l,y){var q;this.alignedObjects=[];q=this.createElement(bf);n.appendChild(q.element);this.box=q.element;this.boxWrapper=q;this.setSize(l,y,!1);if(!aH.namespaces.hcv){aH.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),aH.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}},clipRect:function(n,l,z,y){var q=this.createElement();return aK(q,{members:[],left:n,top:l,width:z,height:y,getCSS:function(E){var C=this.top,K=this.left,G=K+this.width,F=C+this.height,C={clip:"rect("+ab(E?K:C)+"px,"+ab(E?F:G)+"px,"+ab(E?G:F)+"px,"+ab(E?C:K)+"px)"};!E&&bd&&aK(C,{width:G+ap,height:F+ap});return C},updateClipping:function(){aj(q.members,function(C){C.css(q.getCSS(C.inverted))})}})},color:function(U,S,Q){var K,G=/^rgba/;if(U&&U.linearGradient){var F,E,C=U.linearGradient,z,y,q,l;aj(U.stops,function(V,n){G.test(V[1])?(K=p(V[1]),F=K.get("rgb"),E=K.get("a")):(F=V[1],E=1);n?(q=F,l=E):(z=F,y=E)});U=90-az.atan((C[3]-C[1])/(C[2]-C[0]))*180/v;U=["<",Q,' colors="0% ',z,",100% ",q,'" angle="',U,'" opacity="',l,'" o:opacity2="',y,'" type="gradient" focus="100%" />'];ay(this.prepVML(U),null,null,S)}else{if(G.test(U)&&S.tagName!=="IMG"){return K=p(U),U=["<",Q,' opacity="',K.get("a"),'"/>'],ay(this.prepVML(U),null,null,S),K.get("rgb")}else{S=S.getElementsByTagName(Q);if(S.length){S[0].opacity=1}return U}}},prepVML:function(n){var l=this.isIE8,n=n.join("");l?(n=n.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),n=n.indexOf('style="')===-1?n.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):n.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):n=n.replace("<","<hcv:");return n},text:function(n,l,y){var q=a7.chart.style;return this.createElement("span").attr({text:n,x:ab(l),y:ab(y)}).css({whiteSpace:"nowrap",fontFamily:q.fontFamily,fontSize:q.fontSize})},path:function(l){return this.createElement("shape").attr({coordsize:"100 100",d:l})},circle:function(n,l,q){return this.symbol("circle").attr({x:n,y:l,r:q})},g:function(n){var l;n&&(l={className:bp+n,"class":bp+n});return this.createElement(bf).attr(l)},image:function(n,l,C,z,y){var q=this.createElement("img").attr({src:n});arguments.length>1&&q.css({left:l,top:C,width:z,height:y});return q},rect:function(n,l,E,C,z,y){if(bn(n)){l=n.y,E=n.width,C=n.height,z=n.r,y=n.strokeWidth,n=n.x}var q=this.symbol("rect");q.r=z;return q.attr(q.crisp(y,n,l,aw(E,0),aw(C,0)))},invertChild:function(n,l){var q=l.style;aO(n,{flip:"x",left:aF(q.width)-10,top:aF(q.height)-10,rotation:-90})},symbols:{arc:function(U,S,Q,K){var G=K.start,F=K.end,E=aB(G),C=a4(G),z=aB(F),y=a4(F),K=K.innerR,n=0.07/Q,q=K&&0.1/K||0;if(F-G===0){return["x"]}else{2*v-F+G<n?z=-n:F-G<q&&(z=aB(G+q))}return["wa",U-Q,S-Q,U+Q,S+Q,U+Q*E,S+Q*C,U+Q*z,S+Q*y,"at",U-K,S-K,U+K,S+K,U+K*z,S+K*y,U+K*E,S+K*C,"x","e"]},circle:function(n,l,q){return["wa",n-q,l-q,n+q,l+q,n+q,l,n+q,l,"e"]},rect:function(n,l,E,C){if(!af(C)){return[]}var z=C.width,C=C.height,y=n+z,q=l+C,E=P(E,z,C);return[Y,n+E,l,aX,y-E,l,"wa",y-2*E,l,y,l+2*E,y-E,l,y,l+E,aX,y,q-E,"wa",y-2*E,q-2*E,y,q,y,q-E,y-E,q,aX,n+E,q,"wa",n,q-2*E,n+2*E,q,n+E,q,n,q-E,aX,n,l+E,"wa",n,l,n+2*E,l+2*E,n,l+E,n+E,l,"x","e"]}}}),c=ad}bb.prototype.callbacks=[];var H=function(){};H.prototype={init:function(n,l){var y=n.chart.counters,q;this.series=n;this.applyOptions(l);this.pointAttr={};if(n.options.colorByPoint){q=n.chart.options.colors;if(!this.options){this.options={}}this.color=this.options.color=this.color||q[y.color++];y.wrapColor(q.length)}n.chart.pointCount++;return this},applyOptions:function(n){var l=this.series;this.config=n;if(bi(n)||n===null){this.y=n}else{if(bn(n)&&!bi(n.length)){aK(this,n),this.options=n}else{if(g(n[0])){this.name=n[0],this.y=n[1]}else{if(bi(n[0])){this.x=n[0],this.y=n[1]}}}}if(this.x===bq){this.x=l.autoIncrement()}},destroy:function(){var n=this,l=n.series,y=l.chart.hoverPoints,q;l.chart.pointCount--;y&&(n.setState(),J(y,n));if(n===l.chart.hoverPoint){n.onMouseOut()}a8(n);aj("graphic,tracker,group,dataLabel,connector,shadowGroup".split(","),function(z){n[z]&&n[z].destroy()});n.legendItem&&n.series.chart.legend.destroyItem(n);for(q in n){n[q]=null}},getLabelConfig:function(){return{x:this.category,y:this.y,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(n,l){var y=this,q=y.series.chart,n=ah(n,!y.selected);y.firePointEvent(n?"select":"unselect",{accumulate:l},function(){y.selected=n;y.setState(n&&"select");l||aj(q.getSelectedPoints(),function(z){if(z.selected&&z!==y){z.selected=!1,z.setState(O),z.firePointEvent("unselect")}})})},onMouseOver:function(){var n=this.series.chart,l=n.tooltip,q=n.hoverPoint;if(q&&q!==this){q.onMouseOut()}this.firePointEvent("mouseOver");l&&!l.shared&&l.refresh(this);this.setState(d);n.hoverPoint=this},onMouseOut:function(){this.firePointEvent("mouseOut");this.setState();this.series.chart.hoverPoint=null},tooltipFormatter:function(n){var l=this.series;return['<span style="color:'+l.color+'">',this.name||l.name,"</span>: ",!n?"<b>x = "+(this.name||this.x)+",</b> ":"","<b>",!n?"y = ":"",this.y,"</b>"].join("")},update:function(n,l,E){var C=this,z=C.series,y=C.graphic,q=z.chart,l=ah(l,!0);C.firePointEvent("update",{options:n},function(){C.applyOptions(n);bn(n)&&(z.getAttribs(),y&&y.attr(C.pointAttr[z.state]));z.isDirty=!0;l&&q.redraw(E)})},remove:function(n,l){var C=this,z=C.series,y=z.chart,q=z.data;k(l,y);n=ah(n,!0);C.firePointEvent("remove",null,function(){J(q,C);C.destroy();z.isDirty=!0;n&&y.redraw()})},firePointEvent:function(n,l,z){var y=this,q=this.series.options;(q.point.events[n]||y.options&&y.options.events&&y.options.events[n])&&this.importEvents();n==="click"&&q.allowPointSelect&&(z=function(C){y.select(null,C.ctrlKey||C.metaKey||C.shiftKey)});a0(this,n,l,z)},importEvents:function(){if(!this.hasImportedEvents){var n=aC(this.series.options.point,this.options).events,l;this.events=n;for(l in n){aG(this,l,n[l])}this.hasImportedEvents=!0}},setState:function(G){var F=this.series,E=F.options.states,C=am[F.type].marker&&F.options.marker,z=C&&!C.enabled,y=(C=C&&C.states[G])&&C.enabled===!1,q=F.stateMarkerGraphic,n=F.chart,l=this.pointAttr,G=G||O;if(!(G===this.state||this.selected&&G!=="select"||E[G]&&E[G].enabled===!1||G&&(y||z&&!C.enabled))){if(this.graphic){this.graphic.attr(l[G])}else{if(G){if(!q){F.stateMarkerGraphic=q=n.renderer.circle(0,0,l[G].r).attr(l[G]).add(F.group)}q.translate(this.plotX,this.plotY)}if(q){q[G?"show":"hide"]()}}this.state=G}}};var aD=function(){};aD.prototype={isCartesian:!0,type:"line",pointClass:H,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(n,l){var y,q;q=n.series.length;this.chart=n;l=this.setOptions(l);aK(this,{index:q,options:l,name:l.name||"Series "+(q+1),state:O,pointAttr:{},visible:l.visible!==!1,selected:l.selected===!0});q=l.events;for(y in q){aG(this,y,q[y])}if(q&&q.click||l.point&&l.point.events&&l.point.events.click||l.allowPointSelect){n.runTrackerClick=!0}this.getColor();this.getSymbol();this.setData(l.data,!1)},autoIncrement:function(){var n=this.options,l=this.xIncrement,l=ah(l,n.pointStart,0);this.pointInterval=ah(this.pointInterval,n.pointInterval,1);this.xIncrement=l+this.pointInterval;return l},cleanData:function(){var n=this.chart,l=this.data,E,C,z=n.smallestInterval,y,q;M(l,function(G,F){return G.x-F.x});if(this.options.connectNulls){for(q=l.length-1;q>=0;q--){l[q].y===null&&l[q-1]&&l[q+1]&&l.splice(q,1)}}for(q=l.length-1;q>=0;q--){if(l[q-1]&&(y=l[q].x-l[q-1].x,y>0&&(C===bq||y<C))){C=y,E=q}}if(z===bq||C<z){n.smallestInterval=C}this.closestPoints=E},getSegments:function(){var n=-1,l=[],q=this.data;aj(q,function(z,y){z.y===null?(y>n+1&&l.push(q.slice(n+1,y)),n=y):y===q.length-1&&l.push(q.slice(n+1,y+1))});this.segments=l},setOptions:function(n){var l=this.chart.options.plotOptions;return aC(l[this.type],l.series,n)},getColor:function(){var n=this.chart.options.colors,l=this.chart.counters;this.color=this.options.color||n[l.color++]||"#0000ff";l.wrapColor(n.length)},getSymbol:function(){var n=this.chart.options.symbols,l=this.chart.counters;this.symbol=this.options.marker.symbol||n[l.symbol++];l.wrapSymbol(n.length)},addPoint:function(n,l,F,E){var C=this.data,z=this.graph,y=this.area,q=this.chart,n=(new this.pointClass).init(this,n);k(E,q);if(z&&F){z.shift=F}if(y){y.shift=F,y.isArea=!0}l=ah(l,!0);C.push(n);F&&C[0].remove(!1);this.getAttribs();this.isDirty=!0;l&&q.redraw()},setData:function(n,l){var E=this,C=E.data,z=E.initialColor,y=E.chart,q=C&&C.length||0;E.xIncrement=null;if(af(z)){y.counters.color=z}for(n=s(aQ(n||[]),function(F){return(new E.pointClass).init(E,F)});q--;){C[q].destroy()}E.data=n;E.cleanData();E.getSegments();E.getAttribs();E.isDirty=!0;y.isDirtyBox=!0;ah(l,!0)&&y.redraw(!1)},remove:function(n,l){var y=this,q=y.chart,n=ah(n,!0);if(!y.isRemoving){y.isRemoving=!0,a0(y,"remove",null,function(){y.destroy();q.isDirtyLegend=q.isDirtyBox=!0;n&&q.redraw(l)})}y.isRemoving=!1},translate:function(){for(var Q=this.chart,K=this.options.stacking,G=this.xAxis.categories,F=this.yAxis,E=this.data,C=E.length;C--;){var z=E[C],y=z.x,q=z.y,n=z.low,l=F.stacks[(q<0?"-":"")+this.stackKey];z.plotX=this.xAxis.translate(y);if(K&&this.visible&&l&&l[y]){n=l[y],y=n.total,n.cum=n=n.cum-q,q=n+q,K==="percent"&&(n=y?n*100/y:0,q=y?q*100/y:0),z.percentage=y?z.y*100/y:0,z.stackTotal=y}if(af(n)){z.yBottom=F.translate(n,0,1,0,1)}if(q!==null){z.plotY=F.translate(q,0,1,0,1)}z.clientX=Q.inverted?Q.plotHeight-z.plotX:z.plotX;z.category=G&&G[z.x]!==bq?G[z.x]:z.x}},setTooltipPoints:function(n){var l=this.chart,F=l.inverted,E=[],C=ab((F?l.plotTop:l.plotLeft)+l.plotSizeX),z,y,q=[];if(n){this.tooltipPoints=null}aj(this.segments,function(G){E=E.concat(G)});this.xAxis&&this.xAxis.reversed&&(E=E.reverse());aj(E,function(K,G){z=E[G-1]?E[G-1]._high+1:0;for(y=K._high=E[G+1]?aN((K.plotX+(E[G+1]?E[G+1].plotX:C))/2):C;z<=y;){q[F?C-z++:z++]=K}});this.tooltipPoints=q},onMouseOver:function(){var n=this.chart,l=n.hoverSeries;if(aS||!n.mouseIsDown){if(l&&l!==this){l.onMouseOut()}this.options.events.mouseOver&&a0(this,"mouseOver");this.tracker&&this.tracker.toFront();this.setState(d);n.hoverSeries=this}},onMouseOut:function(){var n=this.options,l=this.chart,y=l.tooltip,q=l.hoverPoint;if(q){q.onMouseOut()}this&&n.events.mouseOut&&a0(this,"mouseOut");y&&!n.stickyTracking&&y.hide();this.setState();l.hoverSeries=null},animate:function(n){var l=this.chart,y=this.clipRect,q=this.options.animation;q&&!bn(q)&&(q={});if(n){if(!y.isAnimating){y.attr("width",0),y.isAnimating=!0}}else{y.animate({width:l.plotSizeX},q),this.animate=null}},drawPoints:function(){var G,F=this.data,E=this.chart,C,z,y,q,n,l;if(this.options.marker.enabled){for(y=F.length;y--;){if(q=F[y],C=q.plotX,z=q.plotY,l=q.graphic,z!==bq&&!isNaN(z)){G=q.pointAttr[q.selected?"select":O],n=G.r,l?l.animate({x:C,y:z,r:n}):q.graphic=E.renderer.symbol(ah(q.marker&&q.marker.symbol,this.symbol),C,z,n).attr(G).add(this.group)}}}},convertAttribs:function(n,l,F,E){var C=this.pointAttrToOptions,z,y,q={},n=n||{},l=l||{},F=F||{},E=E||{};for(z in C){y=C[z],q[z]=ah(n[y],l[z],F[z],E[z])}return q},getAttribs:function(){var U=this,S=am[U.type].marker?U.options.marker:U.options,Q=S.states,K=Q[d],G,F=U.color,E={stroke:F,fill:F},C=U.data,z=[],y,q=U.pointAttrToOptions,l;U.options.marker?(K.radius=K.radius||S.radius+2,K.lineWidth=K.lineWidth||S.lineWidth+1):K.color=K.color||p(K.color||F).brighten(K.brightness).get();z[O]=U.convertAttribs(S,E);aj([d,"select"],function(n){z[n]=U.convertAttribs(Q[n],z[O])});U.pointAttr=z;for(F=C.length;F--;){E=C[F];if((S=E.options&&E.options.marker||E.options)&&S.enabled===!1){S.radius=0}G=!1;if(E.options){for(l in q){af(S[q[l]])&&(G=!0)}}if(G){y=[];Q=S.states||{};G=Q[d]=Q[d]||{};if(!U.options.marker){G.color=p(G.color||E.options.color).brighten(G.brightness||K.brightness).get()}y[O]=U.convertAttribs(S,z[O]);y[d]=U.convertAttribs(Q[d],z[d],y[O]);y.select=U.convertAttribs(Q.select,z.select,y[O])}else{y=z}E.pointAttr=y}},destroy:function(){var n=this,l=n.chart,C=n.clipRect,z=/\/5[0-9\.]+ (Safari|Mobile)\//.test(e),y,q;a0(n,"destroy");a8(n);n.legendItem&&n.chart.legend.destroyItem(n);aj(n.data,function(E){E.destroy()});if(C&&C!==l.clipRect){n.clipRect=C.destroy()}aj(["area","graph","dataLabelsGroup","group","tracker"],function(E){n[E]&&(y=z&&E==="group"?"hide":"destroy",n[E][y]())});if(l.hoverSeries===n){l.hoverSeries=null}J(l.series,n);for(q in n){delete n[q]}},drawDataLabels:function(){if(this.options.dataLabels.enabled){var V,S,Q=this.data,G=this.options,F=G.dataLabels,E,C=this.dataLabelsGroup,y=this.chart,q=y.renderer,n=y.inverted,l=this.type,W;W=G.stacking;var K=l==="column"||l==="bar",U=F.verticalAlign===null,X=F.y===null;K&&(W?(U&&(F=aC(F,{verticalAlign:"middle"})),X&&(F=aC(F,{y:{top:14,middle:4,bottom:-6}[F.verticalAlign]}))):U&&(F=aC(F,{verticalAlign:"top"})));C?C.translate(y.plotLeft,y.plotTop):C=this.dataLabelsGroup=q.g("data-labels").attr({visibility:this.visible?au:aq,zIndex:6}).translate(y.plotLeft,y.plotTop).add();W=F.color;W==="auto"&&(W=null);F.style.color=ah(W,this.color,"black");aj(Q,function(bs){var aa=bs.barX,br=aa&&aa+bs.barW/2||bs.plotX||-999,Z=ah(bs.plotY,-999),ba=bs.dataLabel,ac=F.align,z=X?bs.y>=0?-6:12:F.y;E=F.formatter.call(bs.getLabelConfig());V=(n?y.plotWidth-Z:br)+F.x;S=(n?y.plotHeight-br:Z)+z;l==="column"&&(V+={left:-1,right:1}[ac]*bs.barW/2||0);n&&bs.y<0&&(ac="right",V-=10);if(ba){n&&!F.y&&(S=S+aF(ba.styles.lineHeight)*0.9-ba.getBBox().height/2),ba.attr({text:E}).animate({x:V,y:S})}else{if(af(E)){ba=bs.dataLabel=q.text(E,V,S).attr({align:ac,rotation:F.rotation,zIndex:1}).css(F.style).add(C),n&&!F.y&&ba.attr({y:S+aF(ba.styles.lineHeight)*0.9-ba.getBBox().height/2})}}if(K&&G.stacking&&ba){br=bs.barY,Z=bs.barW,bs=bs.barH,ba.align(F,null,{x:n?y.plotWidth-br-bs:aa,y:n?y.plotHeight-aa-Z:br,width:n?bs:Z,height:n?Z:bs})}})}},drawGraph:function(){var W=this,U=W.options,S=W.graph,Q=[],K,G=W.area,F=W.group,E=U.lineColor||W.color,C=U.lineWidth,z=U.dashStyle,y,X=W.chart.renderer,n=W.yAxis.getThreshold(U.threshold||0),V=/^area/.test(W.type),Z=[],l=[];aj(W.segments,function(ba){y=[];aj(ba,function(bs,br){W.getPointSpline?y.push.apply(y,W.getPointSpline(ba,bs,br)):(y.push(br?aX:Y),br&&U.step&&y.push(bs.plotX,ba[br-1].plotY),y.push(bs.plotX,bs.plotY))});ba.length>1?Q=Q.concat(y):Z.push(ba[0]);if(V){var ac=[],aa,q=y.length;for(aa=0;aa<q;aa++){ac.push(y[aa])}q===3&&ac.push(aX,y[1],y[2]);if(U.stacking&&W.type!=="areaspline"){for(aa=ba.length-1;aa>=0;aa--){ac.push(ba[aa].plotX,ba[aa].yBottom)}}else{ac.push(aX,ba[ba.length-1].plotX,n,aX,ba[0].plotX,n)}l=l.concat(ac)}});W.graphPath=Q;W.singlePoints=Z;if(V){K=ah(U.fillColor,p(W.color).setOpacity(U.fillOpacity||0.75).get()),G?G.animate({d:l}):W.area=W.chart.renderer.path(l).attr({fill:K}).add(F)}if(S){L(S),S.animate({d:Q})}else{if(C){S={stroke:E,"stroke-width":C};if(z){S.dashstyle=z}W.graph=X.path(Q).attr(S).add(F).shadow(U.shadow)}}},render:function(){var G=this,F=G.chart,E,C,z=G.options,y=z.animation,q=y&&G.animate,y=q?y&&y.duration||500:0,n=G.clipRect,l=F.renderer;if(!n&&(n=G.clipRect=!F.hasRendered&&F.clipRect?F.clipRect:l.clipRect(0,0,F.plotSizeX,F.plotSizeY),!F.clipRect)){F.clipRect=n}if(!G.group){E=G.group=l.g("series"),F.inverted&&(C=function(){E.attr({width:F.plotWidth,height:F.plotHeight}).invert()},C(),aG(F,"resize",C),aG(G,"destroy",function(){a8(F,"resize",C)})),E.clip(G.clipRect).attr({visibility:G.visible?au:aq,zIndex:z.zIndex}).translate(F.plotLeft,F.plotTop).add(F.seriesGroup)}G.drawDataLabels();q&&G.animate(!0);G.drawGraph&&G.drawGraph();G.drawPoints();G.options.enableMouseTracking!==!1&&G.drawTracker();q&&G.animate();setTimeout(function(){n.isAnimating=!1;if((E=G.group)&&n!==F.clipRect&&n.renderer){E.clip(G.clipRect=F.clipRect),n.destroy()}},y);G.isDirty=!1},redraw:function(){var n=this.chart,l=this.group;l&&(n.inverted&&l.attr({width:n.plotWidth,height:n.plotHeight}),l.animate({translateX:n.plotLeft,translateY:n.plotTop}));this.translate();this.setTooltipPoints(!0);this.render()},setState:function(n){var l=this.options,y=this.graph,q=l.states,l=l.lineWidth,n=n||O;if(this.state!==n){this.state=n,q[n]&&q[n].enabled===!1||(n&&(l=q[n].lineWidth||l+1),y&&!y.dashstyle&&y.attr({"stroke-width":l},n?0:500))}},setVisible:function(K,G){var F=this.chart,E=this.legendItem,C=this.group,z=this.tracker,y=this.dataLabelsGroup,q,n=this.data,l=F.options.chart.ignoreHiddenSeries;q=this.visible;q=(this.visible=K=K===bq?!q:K)?"show":"hide";if(C){C[q]()}if(z){z[q]()}else{for(C=n.length;C--;){if(z=n[C],z.tracker){z.tracker[q]()}}}if(y){y[q]()}E&&F.legend.colorizeItem(this,K);this.isDirty=!0;this.options.stacking&&aj(F.series,function(Q){if(Q.options.stacking&&Q.visible){Q.isDirty=!0}});if(l){F.isDirtyBox=!0}G!==!1&&F.redraw();a0(this,q)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(l){this.selected=l=l===bq?!this.selected:l;if(this.checkbox){this.checkbox.checked=l}a0(this,l?"select":"unselect")},drawTracker:function(){var K=this,G=K.options,F=[].concat(K.graphPath),E=F.length,C=K.chart,z=C.options.tooltip.snap,y=K.tracker,q=G.cursor,q=q&&{cursor:q},n=K.singlePoints,l;if(E){for(l=E+1;l--;){F[l]===Y&&F.splice(l+1,0,F[l+1]-z,F[l+2],aX),(l&&F[l]===Y||l===E)&&F.splice(l,0,aX,F[l-2]+z,F[l-1])}}for(l=0;l<n.length;l++){E=n[l],F.push(Y,E.plotX-z,E.plotY,aX,E.plotX+z,E.plotY)}y?y.attr({d:F}):K.tracker=C.renderer.path(F).attr({isTracker:!0,stroke:a9,fill:ax,"stroke-width":G.lineWidth+2*z,visibility:K.visible?au:aq,zIndex:G.zIndex||1}).on(aS?"touchstart":"mouseover",function(){if(C.hoverSeries!==K){K.onMouseOver()}}).on("mouseout",function(){if(!G.stickyTracking){K.onMouseOut()}}).css(q).add(C.trackerGroup)}};ad=ai(aD);bl.line=ad;ad=ai(aD,{type:"area"});bl.area=ad;ad=ai(aD,{type:"spline",getPointSpline:function(U,S,Q){var K=S.plotX,G=S.plotY,F=U[Q-1],E=U[Q+1],C,z,y,n;if(Q&&Q<U.length-1){U=F.plotY;y=E.plotX;var E=E.plotY,q;C=(1.5*K+F.plotX)/2.5;z=(1.5*G+U)/2.5;y=(1.5*K+y)/2.5;n=(1.5*G+E)/2.5;q=(n-z)*(y-K)/(y-C)+G-n;z+=q;n+=q;z>U&&z>G?(z=aw(U,G),n=2*G-z):z<U&&z<G&&(z=P(U,G),n=2*G-z);n>E&&n>G?(n=aw(E,G),z=2*G-n):n<E&&n<G&&(n=P(E,G),z=2*G-n);S.rightContX=y;S.rightContY=n}Q?(S=["C",F.rightContX||F.plotX,F.rightContY||F.plotY,C||K,z||G,K,G],F.rightContX=F.rightContY=null):S=[Y,K,G];return S}});bl.spline=ad;ad=ai(ad,{type:"areaspline"});bl.areaspline=ad;var ag=ai(aD,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){aD.prototype.init.apply(this,arguments);var n=this,l=n.chart;l.hasColumn=!0;l.hasRendered&&aj(l.series,function(q){if(q.type===n.type){q.isDirty=!0}})},translate:function(){var bs=this,br=bs.chart,ba=bs.options,ac=ba.stacking,aa=ba.borderWidth,Z=0,X=bs.xAxis.reversed,W=bs.xAxis.categories,V={},U,S;aD.prototype.translate.apply(bs);aj(br.series,function(y){if(y.type===bs.type&&y.visible){y.options.stacking?(U=y.stackKey,V[U]===bq&&(V[U]=Z++),S=V[U]):S=Z++,y.columnIndex=S}});var C=bs.data,l=bs.closestPoints,W=bc(C[1]?C[l].plotX-C[l-1].plotX:br.plotSizeX/(W&&W.length||1)),l=W*ba.groupPadding,q=(W-2*l)/Z,E=ba.pointWidth,F=af(E)?(q-E)/2:q*ba.pointPadding,n=aw(ah(E,q-2*F),1),Q=F+(l+((X?Z-bs.columnIndex:bs.columnIndex)||0)*q-W/2)*(X?-1:1),K=bs.yAxis.getThreshold(ba.threshold||0),G=ah(ba.minPointLength,5);aj(C,function(bx){var bw=bx.plotY,bv=bx.yBottom||K,bu=bx.plotX+Q,bt=aM(P(bw,bv)),y=aM(aw(bw,bv)-bt),z=bs.yAxis.stacks[(bx.y<0?"-":"")+bs.stackKey],by;ac&&bs.visible&&z&&z[bx.x]&&z[bx.x].setOffset(Q,n);bc(y)<G&&(G&&(y=G,bt=bc(bt-K)>G?bv-G:K-(bw<=K?G:0)),by=bt-3);aK(bx,{barX:bu,barY:bt,barW:n,barH:y});bx.shapeType="rect";bw=aK(br.renderer.Element.prototype.crisp.apply({},[aa,bu,bt,n,y]),{r:ba.borderRadius});aa%2&&(bw.y-=1,bw.height+=1);bx.shapeArgs=bw;bx.trackerArgs=af(by)&&aC(bx.shapeArgs,{height:aw(6,y+3),y:by})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var n=this,l=n.options,z=n.chart.renderer,y,q;aj(n.data,function(E){var C=E.plotY;if(C!==bq&&!isNaN(C)&&E.y!==null){y=E.graphic,q=E.shapeArgs,y?(L(y),y.animate(q)):E.graphic=z[E.shapeType](q).attr(E.pointAttr[E.selected?"select":O]).add(n.group).shadow(l.shadow)}})},drawTracker:function(){var K=this,G=K.chart,F=G.renderer,E,C,z=+new Date,y=K.options,q=y.cursor,n=q&&{cursor:q},l;aj(K.data,function(Q){C=Q.tracker;E=Q.trackerArgs||Q.shapeArgs;delete E.strokeWidth;if(Q.y!==null){C?C.attr(E):Q.tracker=F[Q.shapeType](E).attr({isTracker:z,fill:a9,visibility:K.visible?au:aq,zIndex:y.zIndex||1}).on(aS?"touchstart":"mouseover",function(S){l=S.relatedTarget||S.fromElement;if(G.hoverSeries!==K&&aJ(l,"isTracker")!==z){K.onMouseOver()}Q.onMouseOver()}).on("mouseout",function(S){if(!y.stickyTracking&&(l=S.relatedTarget||S.toElement,aJ(l,"isTracker")!==z)){K.onMouseOut()}}).css(n).add(Q.group||G.trackerGroup)}})},animate:function(n){var l=this,q=l.data;if(!n){aj(q,function(y){var z=y.graphic,y=y.shapeArgs;z&&(z.attr({height:0,y:l.yAxis.translate(0,0,1)}),z.animate({height:y.height,y:y.y},l.options.animation))}),l.animate=null}},remove:function(){var n=this,l=n.chart;l.hasRendered&&aj(l.series,function(q){if(q.type===n.type){q.isDirty=!0}});aD.prototype.remove.apply(n,arguments)}});bl.column=ag;ad=ai(ag,{type:"bar",init:function(l){l.inverted=this.inverted=!0;ag.prototype.init.apply(this,arguments)}});bl.bar=ad;ad=ai(aD,{type:"scatter",translate:function(){var l=this;aD.prototype.translate.apply(l);aj(l.data,function(n){n.shapeType="circle";n.shapeArgs={x:n.plotX,y:n.plotY,r:l.chart.options.tooltip.snap}})},drawTracker:function(){var n=this,l=n.options.cursor,y=l&&{cursor:l},q;aj(n.data,function(z){(q=z.graphic)&&q.attr({isTracker:!0}).on("mouseover",function(){n.onMouseOver();z.onMouseOver()}).on("mouseout",function(){if(!n.options.stickyTracking){n.onMouseOut()}}).css(y)})},cleanData:function(){}});bl.scatter=ad;ad=ai(H,{init:function(){H.prototype.init.apply(this,arguments);var n=this,l;aK(n,{visible:n.visible!==!1,name:ah(n.name,"Slice")});l=function(){n.slice()};aG(n,"select",l);aG(n,"unselect",l);return n},setVisible:function(n){var l=this.series.chart,E=this.tracker,C=this.dataLabel,z=this.connector,y=this.shadowGroup,q;q=(this.visible=n=n===bq?!this.visible:n)?"show":"hide";this.group[q]();if(E){E[q]()}if(C){C[q]()}if(z){z[q]()}if(y){y[q]()}this.legendItem&&l.legend.colorizeItem(this,n)},slice:function(n,l,z){var y=this.series.chart,q=this.slicedTranslation;k(z,y);ah(l,!0);n=this.sliced=af(n)?n:!this.sliced;n={translateX:n?q[0]:y.plotLeft,translateY:n?q[1]:y.plotTop};this.group.animate(n);this.shadowGroup&&this.shadowGroup.animate(n)}});ad=ai(aD,{type:"pie",isCartesian:!1,pointClass:ad,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var l=this;aj(l.data,function(n){var y=n.graphic,n=n.shapeArgs,q=-v/2;y&&(y.attr({r:0,start:q,end:q}),y.animate({r:n.r,start:n.start,end:n.end},l.options.animation))});l.animate=null},translate:function(){var bt=0,bs=-0.25,br=this.options,ba=br.slicedOffset,ac=ba+br.borderWidth,aa=br.center.concat([br.size,br.innerSize||0]),Z=this.chart,X=Z.plotWidth,W=Z.plotHeight,V,U,S,F=this.data,z=2*v,C,E=P(X,W),l,Q,K,G=br.dataLabels.distance,aa=s(aa,function(q,n){return(l=/%$/.test(q))?[X,W,E,E][n]*aF(q)/100:q});this.getX=function(q,n){S=az.asin((q-aa[1])/(aa[2]/2+G));return aa[0]+(n?-1:1)*aB(S)*(aa[2]/2+G)};this.center=aa;aj(F,function(n){bt+=n.y});aj(F,function(n){C=bt?n.y/bt:0;V=ab(bs*z*1000)/1000;bs+=C;U=ab(bs*z*1000)/1000;n.shapeType="arc";n.shapeArgs={x:aa[0],y:aa[1],r:aa[2]/2,innerR:aa[3]/2,start:V,end:U};S=(U+V)/2;n.slicedTranslation=s([aB(S)*ba+Z.plotLeft,a4(S)*ba+Z.plotTop],ab);Q=aB(S)*aa[2]/2;K=a4(S)*aa[2]/2;n.tooltipPos=[aa[0]+Q*0.7,aa[1]+K*0.7];n.labelPos=[aa[0]+Q+aB(S)*G,aa[1]+K+a4(S)*G,aa[0]+Q+aB(S)*ac,aa[1]+K+a4(S)*ac,aa[0]+Q,aa[1]+K,G<0?"center":S<z/4?"left":"right",S];n.percentage=C*100;n.total=bt});this.setTooltipPoints()},render:function(){this.drawPoints();this.options.enableMouseTracking!==!1&&this.drawTracker();this.drawDataLabels();this.options.animation&&this.animate&&this.animate();this.isDirty=!1},drawPoints:function(){var n=this.chart,l=n.renderer,F,E,C,z=this.options.shadow,y,q;aj(this.data,function(G){E=G.graphic;q=G.shapeArgs;C=G.group;y=G.shadowGroup;if(z&&!y){y=G.shadowGroup=l.g("shadow").attr({zIndex:4}).add()}if(!C){C=G.group=l.g("point").attr({zIndex:5}).add()}F=G.sliced?G.slicedTranslation:[n.plotLeft,n.plotTop];C.translate(F[0],F[1]);y&&y.translate(F[0],F[1]);E?E.animate(q):G.graphic=l.arc(q).attr(aK(G.pointAttr[O],{"stroke-linejoin":"round"})).add(G.group).shadow(z,y);G.visible===!1&&G.setVisible(!1)})},drawDataLabels:function(){var bC=this.data,bB,bA=this.chart,bz=this.options.dataLabels,by=ah(bz.connectorPadding,10),bx=ah(bz.connectorWidth,1),bw,bv,bu=ah(bz.softConnector,!0),bt=bz.distance,bs=this.center,aa=bs[2]/2,bs=bs[1],l=bt>0,K=[[],[]],W,Z,n,br,ba=2,ac;if(bz.enabled){aD.prototype.drawDataLabels.apply(this);aj(bC,function(q){q.dataLabel&&K[q.labelPos[7]<v/2?0:1].push(q)});K[1].reverse();br=function(y,q){return q.y-y.y};for(bC=K[0][0]&&K[0][0].dataLabel&&aF(K[0][0].dataLabel.styles.lineHeight);ba--;){var U=[],Q=[],V=K[ba],S=V.length,X;for(ac=bs-aa-bt;ac<=bs+aa+bt;ac+=bC){U.push(ac)}n=U.length;if(S>n){bv=[].concat(V);bv.sort(br);for(ac=S;ac--;){bv[ac].rank=ac}for(ac=S;ac--;){V[ac].rank>=n&&V.splice(ac,1)}S=V.length}for(ac=0;ac<S;ac++){bB=V[ac];bv=bB.labelPos;bB=9999;for(Z=0;Z<n;Z++){bw=bc(U[Z]-bv[1]),bw<bB&&(bB=bw,X=Z)}if(X<ac&&U[ac]!==null){X=ac}else{for(n<S-ac+X&&U[ac]!==null&&(X=n-S+ac);U[X]===null;){X++}}Q.push({i:X,y:U[X]});U[X]=null}Q.sort(br);for(ac=0;ac<S;ac++){bB=V[ac];bv=bB.labelPos;bw=bB.dataLabel;Z=Q.pop();W=bv[1];n=bB.visible===!1?aq:au;X=Z.i;Z=Z.y;if(W>Z&&U[X+1]!==null||W<Z&&U[X-1]!==null){Z=W}W=this.getX(X===0||X===U.length-1?W:Z,ba);bw.attr({visibility:n,align:bv[6]})[bw.moved?"animate":"attr"]({x:W+bz.x+({left:by,right:-by}[bv[6]]||0),y:Z+bz.y});bw.moved=!0;if(l&&bx){bw=bB.connector,bv=bu?[Y,W+(bv[6]==="left"?5:-5),Z,"C",W,Z,2*bv[2]-bv[4],2*bv[3]-bv[5],bv[2],bv[3],aX,bv[4],bv[5]]:[Y,W+(bv[6]==="left"?5:-5),Z,aX,bv[2],bv[3],aX,bv[4],bv[5]],bw?(bw.animate({d:bv}),bw.attr("visibility",n)):bB.connector=bw=this.chart.renderer.path(bv).attr({"stroke-width":bx,stroke:bz.connectorColor||bB.color||"#606060",visibility:n,zIndex:3}).translate(bA.plotLeft,bA.plotTop).add()}}}}},drawTracker:ag.prototype.drawTracker,getSymbol:function(){}});bl.pie=ad;o.Highcharts={Chart:bb,dateFormat:aR,pathAnim:a1,getOptions:function(){return a7},hasRtlBug:ak,numberFormat:a2,Point:H,Color:p,Renderer:c,seriesTypes:bl,setOptions:function(l){a7=aC(a7,l);A();return a7},Series:aD,addEvent:aG,createElement:ay,discardElement:u,css:aO,each:aj,extend:aK,map:s,merge:aC,pick:ah,extendClass:ai,product:"Highcharts",version:"2.1.7"}})();var AVIMGlobalConfig={method:0,onOff:0,ckSpell:1,oldAccent:1,useCookie:1,exclude:["email"],showControl:1,controlCSS:"resource/css/avim.css"};var AVIMAutoConfig={telex:true,vni:true,viqr:false,viqrStar:false};function AVIM(){this.radioID="avim_auto,avim_telex,avim_vni,avim_viqr,avim_viqr2,avim_off,avim_ckspell,avim_daucu".split(",");this.attached=[];this.changed=false;this.agt=navigator.userAgent.toLowerCase();this.alphabet="QWERTYUIOPASDFGHJKLZXCVBNM ";this.support=true;this.ver=0;this.specialChange=false;this.is_ie=((this.agt.indexOf("msie")!=-1)&&(this.agt.indexOf("opera")==-1));this.is_opera=false;this.isKHTML=false;this.kl=0;this.skey=[97,226,259,101,234,105,111,244,417,117,432,121,65,194,258,69,202,73,79,212,416,85,431,89];this.fID=document.getElementsByTagName("iframe");this.range=null;this.whit=false;this.db1=[273,272];this.ds1=["d","D"];this.os1="o,O,,,,,,,,,,,,,,,,,,,,,,".split(",");this.ob1=",,,,,,,,,,,,,,,,,,,,,,,".split(",");this.mocs1="o,O,,,u,U,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,".split(",");this.mocb1=",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,".split(",");this.trangs1="a,A,,,,,,,,,,,,,,,,,,,,,,".split(",");this.trangb1=",,,,,,,,,,,,,,,,,,,,,,,".split(",");this.as1="a,A,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,".split(",");this.ab1=",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,".split(",");this.es1="e,E,,,,,,,,,,".split(",");this.eb1=",,,,,,,,,,,".split(",");this.english="";this.lowen="";this.arA=",,,,,a,,,,,,A".split(",");this.mocrA=",,,,,o,,,,,,u,,,,,,O,,,,,,U".split(",");this.erA=",,,,,e,,,,,,E".split(",");this.orA=",,,,,o,,,,,,O".split(",");this.aA=",,,,,,,,,,,".split(",");this.oA=",,,,,,,,,,,".split(",");this.mocA=",,,,,,,,,,,,,,,,,,,,,,,".split(",");this.trangA=",,,,,,,,,,,".split(",");this.eA=",,,,,,,,,,,".split(",");this.oA=",,,,,,,,,,,".split(",");this.skey2="a,a,a,e,e,i,o,o,o,u,u,y,A,A,A,E,E,I,O,O,O,U,U,Y".split(",");this.fcc=function(b){return String.fromCharCode(b)};this.getEL=function(b){return document.getElementById(b)};this.getSF=function(){var c=[],b;for(b=0;b<this.skey.length;b++){c[c.length]=this.fcc(this.skey[b])}return c};if(AVIMGlobalConfig.showControl){this.css=document.createElement("link");this.css.rel="stylesheet";this.css.type="text/css";this.css.href=AVIMGlobalConfig.controlCSS;document.getElementsByTagName("head")[0].appendChild(this.css);var a="";a+=('<div id="AVIMControl-Button" class="AVIMControl"><input id="avim_auto" type="radio" name="AVIMMethod" onclick="AVIMObj.setMethod(0);" />T ng');a+=('<input id="avim_telex" type="radio" name="AVIMMethod" onclick="AVIMObj.setMethod(1);" />TELEX');a+=('<input id="avim_vni" type="radio" name="AVIMMethod" onclick="AVIMObj.setMethod(2);" />VNI');a+=('<input id="avim_viqr" type="radio" name="AVIMMethod" onclick="AVIMObj.setMethod(3);" />VIQR');a+=('<input id="avim_viqr2" type="radio" name="AVIMMethod" onclick="AVIMObj.setMethod(4);" />VIQR*');a+=('<input id="avim_off" type="radio" name="AVIMMethod" onclick="AVIMObj.setMethod(-1);" />Tt<br />');a+=('<input type="checkbox" id="avim_ckspell" onclick="AVIMObj.setSpell(this);" />Chnh t');a+=('<input type="checkbox" id="avim_daucu" onclick="AVIMObj.setDauCu(this);" />Kiu c</div>');a+=('<a class="AVIMControl" style="float: right; position: relative; top: 3px;" onclick="$(\'#AVIMControl-Button\').slideToggle();"">[Bt/n b g]</a>');document.getElementById("AVIMControl").innerHTML=a}if(!this.is_ie){if(this.agt.indexOf("opera")>=0){this.operaV=this.agt.split(" ");this.operaVersion=parseInt(this.operaV[this.operaV.length-1]);if(this.operaVersion>=8){this.is_opera=true}else{this.operaV=this.operaV[0].split("/");this.operaVersion=parseInt(this.operaV[1]);if(this.operaVersion>=8){this.is_opera=true}}}else{if(this.agt.indexOf("khtml")>=0){this.isKHTML=true}else{this.ver=this.agt.substr(this.agt.indexOf("rv:")+3);this.ver=parseFloat(this.ver.substr(0,this.ver.indexOf(" ")));if(this.agt.indexOf("mozilla")<0){this.ver=0}}}}this.nospell=function(b,c){return false};this.ckspell=function(o,A){o=this.unV(o);var v="UOU,IEU".split(","),m,x=true,d="UU,UOU,UOI,IEU,AO,IA,AI,AY,AU,AO".split(","),D="YEU";var I=true,N="UE,UYE,IU,EU,UY".split(","),g="AY,AU".split(","),H="UA",q=-1,C="IAO";var j=this.up(o),L=j,l=false,G="IO",M="OE,OO,AO,EO,IA,AI".split(","),B="OA",F,K,J;var n="AA,AE,EE,OU,YY,YI,IY,EY,EA,EI,II,IO,YO,YA,OOO".split(","),r=this.up(A),f,c=this.unV2(j);var e="B,C,D,G,H,K,L,M,N,P,Q,R,S,T,V,X".split(","),u="CH,GI,KH,NGH,GH,NG,NH,PH,QU,TH,TR".split(",");var h="CH,NG,NH".split(","),y="C,P,T,CH".split(","),p="C,M,N,P,T".split(",");var s="O,U,IE,,,,I,,,UYE,UY,UO,,O,U,UA,A,O,OE,O".split(","),E="UU,UOU".split(",");if(this.FRX.indexOf(r)>=0){for(K=0;K<y.length;K++){if(j.substr(j.length-y[K].length,y[K].length)==y[K]){return true}}}for(K=0;K<j.length;K++){if("FJZW1234567890".indexOf(j.substr(K,1))>=0){return true}for(J=0;J<n.length;J++){if(c.substr(K,n[J].length)==n[J]){for(m=0;m<v.length;m++){if(c.indexOf(v[m])>=0){x=false}}if(x&&((G.indexOf(n[J])<0)||(K<=0)||(c.substr(K-1,1)!="G"))){return true}}}}for(J=0;J<u.length;J++){if(L.indexOf(u[J])==0){L=L.substr(u[J].length);l=true;q=J;break}}if(!l){for(J=0;J<e.length;J++){if(L.indexOf(e[J])==0){L=L.substr(1);break}}}l=false;f=L;for(J=0;J<h.length;J++){if(L.substr(L.length-h[J].length)==h[J]){L=L.substr(0,L.length-h[J].length);if(J==2){for(m=0;m<s.length;m++){if(L==s[m]){return true}}if((r==this.trang)&&((L=="OA")||(L=="A"))){return true}}l=true;break}}if(!l){for(J=0;J<p.length;J++){if(L.substr(L.length-1)==p[J]){L=L.substr(0,L.length-1);break}}}if(L){for(K=0;K<u.length;K++){for(J=0;J<L.length;J++){if(L.substr(J,u[K].length)==u[K]){return true}}}for(K=0;K<e.length;K++){if(L.indexOf(e[K])>=0){return true}}}F=L.substr(0,1);if((q==3)&&((F=="A")||(F=="O")||(F=="U")||(F=="Y"))){return true}if((q==5)&&((F=="E")||(F=="I")||(F=="Y"))){return true}c=this.unV2(L);if(c==C){return true}if(L!=f){for(m=0;m<d.length;m++){if(c==d[m]){return true}}}if((L!=j)&&(c==D)){return true}if(r!=this.moc){for(m=0;m<E.length;m++){if(L==E[m]){return true}}}if((c.indexOf("UYE")>0)&&(r=="E")){I=false}if((this.them.indexOf(r)>=0)&&I){for(K=0;K<M.length;K++){if(c.indexOf(M[K])>=0){return true}}if(r!=this.trang){if(c==B){return true}}if((r==this.trang)&&(this.trang!="W")){if(c==H){return true}}if(r==this.moc){for(K=0;K<N.length;K++){if(c==N[K]){return true}}}if((r==this.moc)||(r==this.trang)){for(K=0;K<g.length;K++){if(c==g[K]){return true}}}}this.tw5=L;if((c.charCodeAt(0)==272)||(c.charCodeAt(0)==273)){if(c.length>4){return true}}else{if(c.length>3){return true}}return false};this.noCookie=function(){};this.doSetCookie=function(){var b=new Date(11245711156480).toGMTString();document.cookie="AVIM_on_off="+AVIMGlobalConfig.onOff+";expires="+b;document.cookie="AVIM_method="+AVIMGlobalConfig.method+";expires="+b;document.cookie="AVIM_ckspell="+AVIMGlobalConfig.ckSpell+";expires="+b;document.cookie="AVIM_daucu="+AVIMGlobalConfig.oldAccent+";expires="+b};this.doGetCookie=function(){var b=document.cookie,d=/AVIM_method/.test(b),f,c,e=b.split(";");if(!d||(b.indexOf("AVIM_ckspell")<0)){this.setCookie();return}for(c=0;c<e.length;c++){f=e[c].split("=");f[0]=f[0].replace(/^\s+/g,"");f[1]=parseInt(f[1]);if(f[0]=="AVIM_on_off"){AVIMGlobalConfig.onOff=f[1]}else{if(f[0]=="AVIM_method"){AVIMGlobalConfig.method=f[1]}else{if(f[0]=="AVIM_ckspell"){if(f[1]==0){AVIMGlobalConfig.ckSpell=0;this.spellerr=this.nospell}else{AVIMGlobalConfig.ckSpell=1;this.spellerr=this.ckspell}}else{if(f[0]=="AVIM_daucu"){AVIMGlobalConfig.oldAccent=parseInt(f[1])}}}}}};if(AVIMGlobalConfig.useCookie==1){this.setCookie=this.doSetCookie;this.getCookie=this.doGetCookie}else{this.setCookie=this.noCookie;this.getCookie=this.noCookie}this.setMethod=function(b){if(b==-1){AVIMGlobalConfig.onOff=0;if(this.getEL(this.radioID[5])){this.getEL(this.radioID[5]).checked=true}}else{AVIMGlobalConfig.onOff=1;AVIMGlobalConfig.method=b;if(this.getEL(this.radioID[b])){this.getEL(this.radioID[b]).checked=true}}this.setSpell(AVIMGlobalConfig.ckSpell);this.setDauCu(AVIMGlobalConfig.oldAccent);this.setCookie()};this.setDauCu=function(b){if(typeof(b)=="number"){AVIMGlobalConfig.oldAccent=b;if(this.getEL(this.radioID[7])){this.getEL(this.radioID[7]).checked=b}}else{AVIMGlobalConfig.oldAccent=(b.checked)?1:0}this.setCookie()};this.setSpell=function(b){if(typeof(b)=="number"){this.spellerr=(b==1)?this.ckspell:this.nospell;if(this.getEL(this.radioID[6])){this.getEL(this.radioID[6]).checked=b}}else{if(b.checked){this.spellerr=this.ckspell;AVIMGlobalConfig.ckSpell=1}else{this.spellerr=this.nospell;AVIMGlobalConfig.ckSpell=0}}this.setCookie()};if(this.is_ie||(this.ver>=1.3)||this.is_opera||this.isKHTML){this.getCookie();if(AVIMGlobalConfig.onOff==0){this.setMethod(-1)}else{this.setMethod(AVIMGlobalConfig.method)}this.setSpell(AVIMGlobalConfig.ckSpell);this.setDauCu(AVIMGlobalConfig.oldAccent)}else{}this.mozGetText=function(e){var c,f,b="",d=1;c=(e.data)?e.data:e.value;if(c.length<=0){return false}if(!e.data){if(!e.setSelectionRange){return false}f=e.selectionStart}else{f=e.pos}if(e.selectionStart!=e.selectionEnd){return["",f]}while(1){if(f-d<0){break}else{if(this.notWord(c.substr(f-d,1))){if(c.substr(f-d,1)=="\\"){b=c.substr(f-d,1)+b}break}else{b=c.substr(f-d,1)+b}}d++}return[b,f]};this.ieGetText=function(c){var d=c.document.selection.createRange(),b="";if(d.text){d.text=""}else{while(1){d.moveStart("character",-1);if(b.length==d.text.length){break}b=d.text;if(this.notWord(b.charAt(0))){if(b.charCodeAt(0)==13){b=b.substr(2)}else{if(b.charAt(0)!="\\"){b=b.substr(1)}}break}}}if(b.length){d.collapse(false);d.moveStart("character",-b.length);c.cW=d.duplicate();return c}else{return false}};this.start=function(m,y){var j="",c=AVIMGlobalConfig.method,e=AVIMGlobalConfig.ckSpell,v,x=false,u=false,r=false;this.oc=m;var d="D,A,E,O,W,W".split(","),k="9,6,6,6,7,8".split(","),o="D,^,^,^,+,(".split(","),p="D,^,^,^,*,(".split(","),s,h;if(c==0){var b=[],q=[AVIMAutoConfig.telex,AVIMAutoConfig.vni,AVIMAutoConfig.viqr,AVIMAutoConfig.viqrStar];var l=[d,k,o,p],n=[v,x,u,r],f=["DAWEO","6789","D^+(","D^*("];for(s=0;s<q.length;s++){if(q[s]){b[b.length]=l[s]}else{f[s]=""}}for(s=0;s<b.length;s++){n[s]=b[s]}v=n[0];x=n[1];u=n[2];r=n[3];this.D2=f.join();if(!v){return}}else{if(c==1){v=d;this.D2="DAWEO"}else{if(c==2){v=k;this.D2="6789"}else{if(c==3){v=o;this.D2="D^+("}else{if(c==4){v=p;this.D2="D^*("}}}}}if(!this.is_ie){y=this.fcc(y.which);j=this.mozGetText(m);if(!j||m.sel){return}if(this.D2.indexOf(this.up(y))>=0){h=true}else{h=false}this.main(j[0],y,j[1],v,h);if(!e){j=this.mozGetText(m)}if(j&&x&&!this.changed){this.main(j[0],y,j[1],x,h)}if(!e){j=this.mozGetText(m)}if(j&&u&&!this.changed){this.main(j[0],y,j[1],u,h)}if(!e){j=this.mozGetText(m)}if(j&&r&&!this.changed){this.main(j[0],y,j[1],r,h)}}else{m=this.ieGetText(m);if(m){var g=m.cW.text;j=this.main(g,y,0,v,false);if(x&&((j==g)||(typeof(j)=="undefined"))){j=this.main(g,y,0,x,false)}if(u&&((j==g)||(typeof(j)=="undefined"))){j=this.main(g,y,0,u,false)}if(r&&((j==g)||(typeof(j)=="undefined"))){j=this.main(g,y,0,r,false)}if(j){m.cW.text=j}}}if(this.D2.indexOf(this.up(y))>=0){if(!this.is_ie){j=this.mozGetText(m);if(!j){return}this.normC(j[0],y,j[1])}else{if(typeof(m)=="object"){m=this.ieGetText(m);if(m){j=m.cW.text;if(!this.changed){j+=y;this.changed=true}m.cW.text=j;j=this.normC(j,y,0);if(j){m=this.ieGetText(m);m.cW.text=j}}}}}};this.findC=function(u,G,M){var l=AVIMGlobalConfig.method;if(((l==3)||(l==4))&&(u.substr(u.length-1,1)=="\\")){return[1,G.charCodeAt(0)]}var D="",O,B="",b="",d="",f=[],A="",K=0,E=false,p=this.up(u),N,I;var x=this.up(this.aA.join()+this.eA.join()+this.mocA.join()+this.trangA.join()+this.oA.join()+this.english),H,F;for(I=0;I<M.length;I++){if(this.nan(M[I])){D+=M[I]}else{D+=this.fcc(M[I])}}var z=this.up(G),J=this.repSign(G),r=this.up(this.unV2(this.unV(u))),o="A,U".split(",");if(this.DAWEO.indexOf(z)>=0){if(z==this.moc){if((r.indexOf("UU")>=0)&&(this.tw5!=o[1])){if(r.indexOf("UU")==(u.length-2)){O=2}else{return false}}else{if(r.indexOf("UOU")>=0){if(r.indexOf("UOU")==(u.length-3)){O=2}else{return false}}}}if(!O){for(I=1;I<=u.length;I++){B=u.substr(u.length-I,1);b=this.up(u.substr(u.length-I-1,1));F=this.up(B);for(H=0;H<o.length;H++){if((this.tw5==o[H])&&(this.tw5==this.unV(b+F))){E=true}}if(E){E=false;continue}if(D.indexOf(F)>=0){if(((z==this.moc)&&(this.unV(F)=="U")&&(this.up(this.unV(u.substr(u.length-I+1,1)))=="A"))||((z==this.trang)&&(this.unV(F)=="A")&&(this.unV(b)=="U"))){if(this.unV(F)=="U"){N=1}else{N=2}var q=this.up(u.substr(u.length-I-N,1));if(q!="Q"){O=I+N-1}else{if(z==this.trang){O=I}else{if(this.moc!=this.trang){return false}}}}else{O=I}if(!this.whit||(p.indexOf("")<0)||(p.indexOf("W")<0)){break}}else{if(x.indexOf(F)>=0){if(z==this.D){if(B==""){O=[I,"d"]}else{if(B==""){O=[I,"D"]}}}else{O=this.DAWEOF(B,z,I)}if(O){break}}}}}}if((z!=this.Z)&&(this.DAWEO.indexOf(z)<0)){var n=this.retKC(z);for(I=0;I<n.length;I++){d+=this.fcc(n[I])}}for(I=1;I<=u.length;I++){if(this.DAWEO.indexOf(z)<0){B=this.up(u.substr(u.length-I,1));b=this.up(u.substr(u.length-I-1,1));if(D.indexOf(B)>=0){if(B=="U"){if(b!="Q"){K++;f[f.length]=I}}else{if(B=="I"){if((b!="G")||(K<=0)){K++;f[f.length]=I}}else{K++;f[f.length]=I}}}else{if(z!=this.Z){for(H=0;H<J.length;H++){if(J[H]==u.charCodeAt(u.length-I)){if(this.spellerr(u,G)){return false}return[I,n[H%24]]}}for(H=0;H<n.length;H++){if(n[H]==u.charCodeAt(u.length-I)){return[I,this.fcc(this.skey[H])]}}}}}}if((z!=this.Z)&&(typeof(O)!="object")){if(this.spellerr(u,G)){return false}}if(this.DAWEO.indexOf(z)<0){for(I=1;I<=u.length;I++){if((z!=this.Z)&&(A.indexOf(u.substr(u.length-I,1))>=0)){return I}else{if(d.indexOf(u.substr(u.length-I,1))>=0){for(H=0;H<n.length;H++){if(u.substr(u.length-I,1).charCodeAt(0)==n[H]){return[I,this.fcc(this.skey[H])]}}}}}}if(O){return O}if((K==1)||(z==this.Z)){return f[0]}else{if(K==2){var y=2;if(u.substr(u.length-1)==" "){y=3}var m=this.up(u.substr(u.length-y,2));if((AVIMGlobalConfig.oldAccent==0)&&((m=="UY")||(m=="OA")||(m=="OE"))){return f[0]}var C=0,j,e="BCD"+this.fcc(272)+"GHKLMNPQRSTVX",L="CH,GI,KH,NGH,GH,NG,NH,PH,QU,TH,TR".split(",");for(H=1;H<=u.length;H++){j=false;for(I=0;I<L.length;I++){if(this.up(u.substr(u.length-H-L[I].length+1,L[I].length)).indexOf(L[I])>=0){C++;j=true;if(L[I]!="NGH"){H++}else{H+=2}}}if(!j){if(e.indexOf(this.up(u.substr(u.length-H,1)))>=0){C++}else{break}}}if((C==1)||(C==2)){return f[0]}else{return f[1]}}else{if(K==3){return f[1]}else{return false}}}};this.ie_replaceChar=function(b,g,f){var e="",d=0;if(isNaN(f)){d=this.up(f)}if(this.whit&&(this.up(b.substr(b.length-g-1,1))=="U")&&(g!=1)&&(this.up(b.substr(b.length-g-2,1))!="Q")){this.whit=false;if((this.up(this.unV(this.fcc(f)))=="")||(d=="O")){if(b.substr(b.length-g-1,1)=="u"){e=this.fcc(432)}else{e=this.fcc(431)}}if(d=="O"){if(f=="o"){f=417}else{f=416}}}if(!isNaN(f)){this.changed=true;e+=this.fcc(f);return b.substr(0,b.length-g-e.length+1)+e+b.substr(b.length-g+1)}else{return b.substr(0,b.length-g)+f+b.substr(b.length-g+1)}};this.replaceChar=function(d,k,j){var h=false;if(!this.nan(j)){var g=this.fcc(j),f=this.up(this.unV(this.fcc(j)));this.changed=true}else{var g=j;if((this.up(j)=="O")&&this.whit){h=true}}if(!d.data){var e=d.selectionStart,l=d.scrollTop;if((this.up(d.value.substr(k-1,1))=="U")&&(k<e-1)&&(this.up(d.value.substr(k-2,1))!="Q")){if((f=="")||h){if(d.value.substr(k-1,1)=="u"){var b=this.fcc(432)}else{var b=this.fcc(431)}}if(h){this.changed=true;if(j=="o"){g=""}else{g=""}}}d.value=d.value.substr(0,k)+g+d.value.substr(k+1);if(b){d.value=d.value.substr(0,k-1)+b+d.value.substr(k)}d.scrollTop=l}else{if((this.up(d.data.substr(k-1,1))=="U")&&(k<d.pos-1)){if((f=="")||h){if(d.data.substr(k-1,1)=="u"){var b=this.fcc(432)}else{var b=this.fcc(431)}}if(h){this.changed=true;if(j=="o"){g=""}else{g=""}}}d.deleteData(k,1);d.insertData(k,g);if(b){d.deleteData(k-1,1);d.insertData(k-1,b)}}if(this.whit){this.whit=false}};this.tr=function(e,p,l,j,f){var b,o=this.findC(p,e,j),h;if(o){if(o[1]){if(this.is_ie){return this.ie_replaceChar(p,o[0],o[1])}else{return this.replaceChar(this.oc,f-o[0],o[1])}}else{var m,d=p.substr(p.length-o,1),n;b=j;for(h=0;h<b.length;h++){if(this.nan(b[h])||(b[h]=="e")){n=d}else{n=d.charCodeAt(0)}if(n==b[h]){if(!this.nan(l[h])){m=l[h]}else{m=l[h].charCodeAt(0)}if(this.is_ie){return this.ie_replaceChar(p,o,m)}else{return this.replaceChar(this.oc,f-o,m)}}}}}return false};this.main=function(s,d,e,q,r){var o=this.up(d),v=[this.db1,this.ab1,this.eb1,this.ob1,this.mocb1,this.trangb1],p=false,u="d,D,a,A,a,A,o,O,u,U,e,E,o,O".split(",");var c=[this.ds1,this.as1,this.es1,this.os1,this.mocs1,this.trangs1],n=[],l=[],b=AVIMGlobalConfig.method,f,j;if((b==2)||((b==0)&&(q[0]=="9"))){this.DAWEO="6789";this.SFJRX="12534";this.S="1";this.F="2";this.J="5";this.R="3";this.X="4";this.Z="0";this.D="9";this.FRX="234";this.AEO="6";this.moc="7";this.trang="8";this.them="678";this.A="^";this.E="^";this.O="^"}else{if((b==3)||((b==0)&&(q[4]=="+"))){this.DAWEO="^+(D";this.SFJRX="'`.?~";this.S="'";this.F="`";this.J=".";this.R="?";this.X="~";this.Z="-";this.D="D";this.FRX="`?~";this.AEO="^";this.moc="+";this.trang="(";this.them="^+(";this.A="^";this.E="^";this.O="^"}else{if((b==4)||((b==0)&&(q[4]=="*"))){this.DAWEO="^*(D";this.SFJRX="'`.?~";this.S="'";this.F="`";this.J=".";this.R="?";this.X="~";this.Z="-";this.D="D";this.FRX="`?~";this.AEO="^";this.moc="*";this.trang="(";this.them="^*(";this.A="^";this.E="^";this.O="^"}else{if((b==1)||((b==0)&&(q[0]=="D"))){this.SFJRX="SFJRX";this.DAWEO="DAWEO";this.D="D";this.S="S";this.F="F";this.J="J";this.R="R";this.X="X";this.Z="Z";this.FRX="FRX";this.them="AOEW";this.trang="W";this.moc="W";this.A="A";this.E="E";this.O="O"}}}}if(this.SFJRX.indexOf(o)>=0){var m=this.sr(s,d,e);p=true;if(m){return m}}else{if(o==this.Z){l=this.repSign(null);for(f=0;f<this.english.length;f++){l[l.length]=this.lowen.charCodeAt(f);l[l.length]=this.english.charCodeAt(f)}for(f=0;f<5;f++){for(j=0;j<this.skey.length;j++){n[n.length]=this.skey[j]}}for(f=0;f<u.length;f++){n[n.length]=u[f]}p=true}else{for(f=0;f<q.length;f++){if(q[f]==o){p=true;n=n.concat(v[f]);l=l.concat(c[f])}}}}if(o==this.moc){this.whit=true}if(!p){if(r){return}else{return this.normC(s,d,e)}}return this.DAWEOZ(d,s,n,l,e,o)};this.DAWEOZ=function(c,b,g,f,d,e){if((this.DAWEO.indexOf(e)>=0)||(this.Z.indexOf(e)>=0)){return this.tr(c,b,g,f,d)}};this.normC=function(s,e,l){var o=this.up(e),x=this.repSign(null),v,p,f,m,b=(e.charCodeAt(0)==32)?true:false;if(!this.is_ie&&b){return}for(f=1;f<=s.length;f++){for(m=0;m<x.length;m++){if(x[m]==s.charCodeAt(s.length-f)){if(m<=23){v=this.S}else{if(m<=47){v=this.F}else{if(m<=71){v=this.J}else{if(m<=95){v=this.R}else{v=this.X}}}}p=this.skey[m%24];if((this.alphabet.indexOf(o)<0)&&(this.D2.indexOf(o)<0)){return s}s=this.unV(s);if(!b&&!this.changed){s+=e}if(!this.is_ie){var d=this.oc.selectionStart,q=d;if(!this.changed){var y=this.oc.scrollTop;q+=e.length;if(!this.oc.data){this.oc.value=this.oc.value.substr(0,d)+e+this.oc.value.substr(this.oc.selectionEnd);this.changed=true;this.oc.scrollTop=y}else{this.oc.insertData(this.oc.pos,e);this.oc.pos++;this.range.setEnd(this.oc,this.oc.pos);this.specialChange=true}}if(!this.oc.data){}if(!this.ckspell(s,v)){this.replaceChar(this.oc,l-f,p);if(!this.oc.data){var r=[this.D];this.main(s,v,q,r,false)}else{var g=this.mozGetText(this.oc),r=[this.D];this.main(g[0],v,g[1],r,false)}}}else{var n=this.sr(s,v,0);if(b&&n){n+=this.fcc(32)}if(n){return n}}}}}};this.DAWEOF=function(c,e,f){var h=[f],m=[this.A,this.moc,this.trang,this.E,this.O],j,l;var d=[this.aA,this.mocA,this.trangA,this.eA,this.oA],b=[this.arA,this.mocrA,this.arA,this.erA,this.orA];for(l=0;l<m.length;l++){if(e==m[l]){for(j=0;j<d[l].length;j++){if(c==d[l][j]){h[1]=b[l][j]}}}}if(h[1]){return h}else{return false}};this.retKC=function(b){if(b==this.S){return[225,7845,7855,233,7871,237,243,7889,7899,250,7913,253,193,7844,7854,201,7870,205,211,7888,7898,218,7912,221]}if(b==this.F){return[224,7847,7857,232,7873,236,242,7891,7901,249,7915,7923,192,7846,7856,200,7872,204,210,7890,7900,217,7914,7922]}if(b==this.J){return[7841,7853,7863,7865,7879,7883,7885,7897,7907,7909,7921,7925,7840,7852,7862,7864,7878,7882,7884,7896,7906,7908,7920,7924]}if(b==this.R){return[7843,7849,7859,7867,7875,7881,7887,7893,7903,7911,7917,7927,7842,7848,7858,7866,7874,7880,7886,7892,7902,7910,7916,7926]}if(b==this.X){return[227,7851,7861,7869,7877,297,245,7895,7905,361,7919,7929,195,7850,7860,7868,7876,296,213,7894,7904,360,7918,7928]}};this.unV=function(e){var f=this.repSign(null),c,d;for(d=1;d<=e.length;d++){for(c=0;c<f.length;c++){if(f[c]==e.charCodeAt(e.length-d)){e=e.substr(0,e.length-d)+this.fcc(this.skey[c%24])+e.substr(e.length-d+1)}}}return e};this.unV2=function(e){var d,c;for(d=1;d<=e.length;d++){for(c=0;c<this.skey.length;c++){if(this.skey[c]==e.charCodeAt(e.length-d)){e=e.substr(0,e.length-d)+this.skey2[c]+e.substr(e.length-d+1)}}}return e};this.repSign=function(e){var g=[],f=[],d,c;for(d=0;d<5;d++){if((e==null)||(this.SFJRX.substr(d,1)!=this.up(e))){g=this.retKC(this.SFJRX.substr(d,1));for(c=0;c<g.length;c++){f[f.length]=g[c]}}}return f};this.sr=function(b,d,e){var f=this.getSF(),h=this.findC(b,d,f);if(h){if(h[1]){if(!this.is_ie){this.replaceChar(this.oc,e-h[0],h[1])}else{return this.ie_replaceChar(b,h[0],h[1])}}else{var g=this.retUni(b,d,h);if(!this.is_ie){this.replaceChar(this.oc,e-h,g)}else{return this.ie_replaceChar(b,h,g)}}}return false};this.retUni=function(j,b,g){var l=this.retKC(this.up(b)),d,e,f=j.charCodeAt(j.length-g),h,m=this.fcc(f);for(h=0;h<this.skey.length;h++){if(this.skey[h]==f){if(h<12){e=h;d=h+12}else{e=h-12;d=h}if(m!=this.up(m)){return l[e]}return l[d]}}};this.ifInit=function(b){var c=b.getSelection();this.range=c?c.getRangeAt(0):document.createRange()};this.ifMoz=function(h){var f=h.which,g=this.AVIM,b=h.target.parentNode.wi;if(typeof(b)=="undefined"){b=h.target.parentNode.parentNode.wi}if(h.ctrlKey||(h.altKey&&(f!=92)&&(f!=126))){return}g.ifInit(b);var d=g.range.endContainer,c;g.sk=g.fcc(f);g.saveStr="";if(g.checkCode(f)||!g.range.startOffset||(typeof(d.data)=="undefined")){return}d.sel=false;if(d.data){g.saveStr=d.data.substr(g.range.endOffset);if(g.range.startOffset!=g.range.endOffset){d.sel=true}d.deleteData(g.range.startOffset,d.data.length)}g.range.setEnd(d,g.range.endOffset);g.range.setStart(d,0);if(!d.data){return}d.value=d.data;d.pos=d.data.length;d.which=f;g.start(d,h);d.insertData(d.data.length,g.saveStr);c=d.data.length-g.saveStr.length+g.kl;g.range.setEnd(d,c);g.range.setStart(d,c);g.kl=0;if(g.specialChange){g.specialChange=false;g.changed=false;d.deleteData(d.pos-1,1)}if(g.changed){g.changed=false;h.preventDefault()}};this.FKeyPress=function(){var b=this.findF();this.sk=this.fcc(b.event.keyCode);if(this.checkCode(b.event.keyCode)||(b.event.ctrlKey&&(b.event.keyCode!=92)&&(b.event.keyCode!=126))){return}this.start(b,this.sk)};this.checkCode=function(b){if(((AVIMGlobalConfig.onOff==0)||((b<45)&&(b!=42)&&(b!=32)&&(b!=39)&&(b!=40)&&(b!=43))||(b==145)||(b==255))){return true}};this.notWord=function(b){var c=" \r\n#,\\;.:-_()<>+-*/=?!\"$%{}[]'~|^@&\t"+this.fcc(160);return(c.indexOf(b)>=0)};this.nan=function(b){if(isNaN(b)||(b=="e")){return true}else{return false}};this.up=function(b){b=b.toUpperCase();if(this.isKHTML){var e="",c="",d,f;for(d=0;d<b.length;d++){f=e.indexOf(b.substr(d,1));if(f>=0){b=b.substr(0,d)+c.substr(f,1)+b.substr(d+1)}}}return b};this.findIgnore=function(c){var d=AVIMGlobalConfig.exclude,b;for(b=0;b<d.length;b++){if((c.id==d[b])&&(d[b].length>0)){return true}}};this.findF=function(){var b;for(b=0;b<this.fID.length;b++){if(this.findIgnore(this.fID[b])){return}this.frame=this.fID[b];if(typeof(this.frame)!="undefined"){try{if(this.frame.contentWindow.document&&this.frame.contentWindow.event){return this.frame.contentWindow}}catch(c){if(this.frame.document&&this.frame.event){return this.frame}}}}};this.keyPressHandler=function(d){if(!this.support){return}if(!this.is_ie){var b=d.target,c=d.which;if(d.ctrlKey){return}if(d.altKey&&(c!=92)&&(c!=126)){return}}else{var b=window.event.srcElement,c=window.event.keyCode;if(window.event.ctrlKey&&(c!=92)&&(c!=126)){return}}if(((b.type!="textarea")&&(b.type!="text"))||this.checkCode(c)){return}this.sk=this.fcc(c);if(this.findIgnore(b)){return}if(!this.is_ie){this.start(b,d)}else{this.start(b,this.sk)}if(this.changed){this.changed=false;return false}return true};this.attachEvt=function(e,b,d,c){if(this.is_ie){e.attachEvent("on"+b,d)}else{e.addEventListener(b,d,c)}};this.keyDownHandler=function(c){if(c=="iframe"){this.frame=this.findF();var b=this.frame.event.keyCode}else{var b=(!this.is_ie)?c.which:window.event.keyCode}if(b==123){document.getElementById("AVIMControl").style.display=(document.getElementById("AVIMControl").style.display=="none")?"block":"none"}}}function AVIMInit(b){var g=false;if(b.support&&!b.isKHTML){if(b.is_opera){if(b.operaVersion<9){return}}for(b.g=0;b.g<b.fID.length;b.g++){if(b.findIgnore(b.fID[b.g])){continue}if(b.is_ie){var f;try{b.frame=b.fID[b.g];if(typeof(b.frame)!="undefined"){if(b.frame.contentWindow.document){f=b.frame.contentWindow.document}else{if(b.frame.document){f=b.frame.document}}}}catch(d){}if(f&&((b.up(f.designMode)=="ON")||f.body.contentEditable)){for(var a=0;a<b.attached.length;a++){if(f==b.attached[a]){g=true;break}}if(!g){b.attached[b.attached.length]=f;b.attachEvt(f,"keydown",function(){b.keyDownHandler("iframe")},false);b.attachEvt(f,"keypress",function(){b.FKeyPress();if(b.changed){b.changed=false;return false}},false)}}}else{var c;try{b.wi=b.fID[b.g].contentWindow;c=b.wi.document;c.wi=b.wi;if(c&&(b.up(c.designMode)=="ON")){c.AVIM=b;b.attachEvt(c,"keypress",b.ifMoz,false);b.attachEvt(c,"keydown",b.keyDownHandler,false)}}catch(d){}}}}}function Popup(){this.popup_count=0;this.add=function(c,b,a){$("body").append('<div class="popup" id="'+c+'">    	        <div class="popup-outer">                <div class="popup-title">'+b+"<a onclick=\"generateEvent('PopupRemove', {id: '"+c+'\'})" class="close-popup">x</a></div>                <div class="popup-content">'+a+"</div>            </div>    	</div>");this.popup_count++;$("#shadow").fadeIn();$("#"+c).fadeIn();$("#"+c).css("margin-left",-($("#"+c+" .popup-content").width()/2+18));$("#"+c).css("margin-top",-($("#"+c+" .popup-content").height()/2+50))};this.remove=function(a){this.popup_count--;$("#"+a).fadeOut();$("#"+a).remove();if($(".popup:visible").length==0){$("#shadow").fadeOut()}};this.error=function(a){this.add("popup-error","C li",'<div class="popup-error">'+a+'</div>			<div class="popup-toolbar-msg"><a class="button" onclick="generateEvent(\'PopupRemove\', {id: \'popup-error\'})">ng </a></div>    	')};this.msg=function(a){this.add("popup-msg","Thng bo",'<div class="popup-msg">'+a+'</div>			<div class="popup-toolbar-msg"><a class="button" onclick="generateEvent(\'PopupRemove\', {id: \'popup-msg\'})">ng </a></div>    	')}}(function(a){a.format=(function(){function d(e){switch(parseInt(e)){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec";default:return e}}var b=function(e){switch(e){case"Jan":return"01";case"Feb":return"02";case"Mar":return"03";case"Apr":return"04";case"May":return"05";case"Jun":return"06";case"Jul":return"07";case"Aug":return"08";case"Sep":return"09";case"Oct":return"10";case"Nov":return"11";case"Dec":return"12";default:return e}};var c=function(f){var g=f;if(g.indexOf(".")!==-1){g=g.substring(0,g.indexOf("."))}var e=g.split(":");if(e.length===3){hour=e[0];minute=e[1];second=e[2];return{time:g,hour:hour,minute:minute,second:second}}else{return{time:"",hour:"",minute:"",second:""}}};return{date:function(q,p){try{var m=null;var k=null;var r=null;var f=null;if(typeof q.getFullYear==="function"){m=q.getFullYear();k=q.getMonth()+1;r=q.getDate();f=c(q.toTimeString())}else{if(q.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}\+\d{2}:\d{2}/)!=-1){var s=q.split(/[T\+-]/);m=s[0];k=s[1];r=s[2];f=c(s[3].split(".")[0])}else{var s=q.split(" ");switch(s.length){case 6:m=s[5];k=b(s[1]);r=s[2];f=c(s[3]);break;case 2:var o=s[0].split("-");m=o[0];k=o[1];r=o[2];f=c(s[1]);break;case 7:m=s[3];k=b(s[1]);r=s[2];f=c(s[4]);break;default:return q}}}var l="";var h="";for(var g=0;g<p.length;g++){var n=p.charAt(g);l+=n;switch(l){case"dd":h+=r;l="";break;case"MMM":h+=d(k);l="";break;case"MM":if(p.charAt(g+1)=="M"){break}h+=k;l="";break;case"yyyy":h+=m;l="";break;case"HH":h+=f.hour;l="";break;case"hh":h+=(f.hour==0?12:f.hour<13?f.hour:f.hour-12);l="";break;case"mm":h+=f.minute;l="";break;case"ss":h+=f.second.substring(0,2);l="";break;case"a":h+=f.hour>=12?"PM":"AM";l="";break;case" ":h+=n;l="";break;case"/":h+=n;l="";break;case":":h+=n;l="";break;default:if(l.length===2&&l.indexOf("y")!==0){h+=l.substring(0,1);l=l.substring(1,2)}else{if((l.length===3&&l.indexOf("yyy")===-1)){l=""}}}}return h}catch(j){log(j);return q}}}}())}(jQuery));$(document).ready(function(){$(".shortDateFormat").each(function(a,b){if($(b).is(":input")){$(b).val($.format.date($(b).val(),"dd/MM/yyyy"))}else{$(b).text($.format.date($(b).text(),"dd/MM/yyyy"))}});$(".longDateFormat").each(function(a,b){if($(b).is(":input")){$(b).val($.format.date($(b).val(),"dd/MM/yyyy hh:mm:ss"))}else{$(b).text($.format.date($(b).text(),"dd/MM/yyyy hh:mm:ss"))}})});jQuery.extend(jQuery.easing,{easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e},easeOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return g*Math.pow(2,-10*h)*Math.sin((h*l-j)*(2*Math.PI)/k)+m+e},easeInOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k)*0.5+m+e},easeInBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return j/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return j/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});(function(b){var a=0;b.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var d=this,c=this.element[0].ownerDocument,e;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!(d.options.disabled||d.element.attr("readonly"))){e=false;var l=b.ui.keyCode;switch(n.keyCode){case l.PAGE_UP:d._move("previousPage",n);break;case l.PAGE_DOWN:d._move("nextPage",n);break;case l.UP:d._move("previous",n);n.preventDefault();break;case l.DOWN:d._move("next",n);n.preventDefault();break;case l.ENTER:case l.NUMPAD_ENTER:var m=d.element.attr("id");if(m=="to"||m=="toPerson"){if(d.menu.active){e=true;n.preventDefault()}else{if($("#tabs li.ui-tabs-selected span.ui-tab-font").hasClass("tab-person")){onClickPerson()}else{if($("#tabs li.ui-tabs-selected span.ui-tab-font").hasClass("tab-knowledge")){onClickQuestion()}}}}case l.TAB:if(!d.menu.active){return}d.menu.select(n);break;case l.ESCAPE:d.element.val(d.term);d.close(n);break;case l.BACKSPACE:var j=d.menu.element;if(d.element.val()==0){$('input[class="ui-autocomplete-input"]').prev("span").remove();$('li[role="menuitem"]').each(function(){$(this).remove()})}var g=0;$("#friends span").each(function(){g+=$(this).outerWidth(true)});var h=$("#friends").width()-g;var k=120;if(h<k){h=$("#friends").width()}$("#to").width(h);default:clearTimeout(d.searching);d.searching=setTimeout(function(){if(d.term!=d.element.val()){d.selectedItem=null;d.search(null,n)}},d.options.delay);break}}}).bind("keypress.autocomplete",function(f){if(e){e=false;f.preventDefault()}}).bind("focus.autocomplete",function(){if(!d.options.disabled){d.selectedItem=null;d.previous=d.element.val()}}).bind("blur.autocomplete",function(f){if(!d.options.disabled){clearTimeout(d.searching);d.closing=setTimeout(function(){d.close(f);d._change(f)},150)}});this._initSource();this.response=function(){return d._response.apply(d,arguments)};this.menu=b("<ul></ul>").addClass("ui-autocomplete").appendTo(b(this.options.appendTo||"body",c)[0]).mousedown(function(h){var g=d.menu.element[0];b(h.target).closest(".ui-menu-item").length||setTimeout(function(){b(document).one("mousedown",function(f){f.target!==d.element[0]&&f.target!==g&&!b.ui.contains(g,f.target)&&d.close()})},1);setTimeout(function(){clearTimeout(d.closing)},13)}).menu({focus:function(h,g){g=g.item.data("item.autocomplete");false!==d._trigger("focus",h,{item:g})&&/^key/.test(h.originalEvent.type)&&d.element.val(g.value)},selected:function(l,k){var j=k.item.data("item.autocomplete"),g=d.previous;if(d.element[0]!==c.activeElement){d.element.focus();d.previous=g;setTimeout(function(){d.previous=g;d.selectedItem=j},1)}false!==d._trigger("select",l,{item:j})&&d.element.val("");d.term=d.element.val();d.close(l);d.selectedItem=j},blur:function(){d.menu.element.is(":visible")&&d.element.val()!==d.term&&d.element.val(d.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");b.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();b.Widget.prototype.destroy.call(this)},_setOption:function(d,c){b.Widget.prototype._setOption.apply(this,arguments);d==="source"&&this._initSource();if(d==="appendTo"){this.menu.element.appendTo(b(c||"body",this.element[0].ownerDocument)[0])}d==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var d=this,c,e;if(b.isArray(this.options.source)){c=this.options.source;this.source=function(h,g){g(b.ui.autocomplete.filter(c,h.term))}}else{if(typeof this.options.source==="string"){e=this.options.source;this.source=function(h,g){d.xhr&&d.xhr.abort();d.xhr=b.ajax({url:e,data:h,dataType:"json",autocompleteRequest:++a,success:function(f){this.autocompleteRequest===a&&g(f)},error:function(){this.autocompleteRequest===a&&g([])}})}}else{this.source=this.options.source}}},search:function(d,c){d=d!=null?d:this.element.val();this.term=this.element.val();if(d.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search",c)!==false){return this._search(d)}},_search:function(c){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:c},this.response)},_response:function(c){if(!this.options.disabled&&c&&c.length){c=this._normalize(c);this._suggest(c);this._trigger("open")}else{this.close()}this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(c){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",c)}},_change:function(c){this.previous!==this.element.val()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){if(c.length&&c[0].label&&c[0].value){return c}return b.map(c,function(d){if(typeof d==="string"){return{label:d,value:d}}return b.extend({label:d.label||d.value,value:d.value||d.label},d)})},_suggest:function(d){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,d);this.menu.deactivate();this.menu.refresh();c.show();this._resizeMenu();c.position(b.extend({of:this.element},this.options.position))},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(d,c){var e=this;b.each(c,function(h,g){e._renderItem(d,g)})},_renderItem:function(m,k){var l=k.label;var g="<a></a>";var n={};if(typeof k!="object"){n=k}else{n.label=k.label;n.value=k.label;n.id=k.value;n.type=k.type}var d="";var j=4;if(n.type=="expertise"){g="<a catch_id = '"+n.id+"' catch = '"+escape(n.label)+"'class=ui-auto-item-expertise>"+n.label+"</a>";d="<span class=ui-auto-item-expertise-label>Chuyn mn</span><span class=ui-auto-item-expertise-label style='float:right'>"+escape(k.follow)+" ngi quan tm</span>"}else{if(n.type=="question"){var e="";var c=k.catchwords;if(c!=undefined){for(var f=0;f<c.length&&f<j;f++){e+="<span class=ui-button-text>"+c[f]+"</span>"}}g="<a question_id = '"+n.id+"' question = '"+escape(n.label)+"'><span class='question_label'>"+n.label+e+"</span></a>"}else{if(n.type=="ask"){g="<a class='ask'>"+n.label+" <span class='action_button'>t cu hi</span></a>"}else{if(n.type=="email"){g="<a class='email _left'>"+n.label+"</a>"}else{if(n.type=="person"){var h=k.avatar;g="<a class='person'><img onerror='this.src=\"resource/images/unknown.png\"' src='resource/avatar/"+h+"'></img><span style='float: right; color: #202020'>"+k.ans+" cu tr li</span>";var c=k.catchwords;d="<span class='person-name'>"+n.label+"</span><br />";if(c!=undefined&&c.length>0){for(var f=0;f<c.length&&f<j;f++){d+="<span class=ui-button-text>"+c[f]+"</span>"}}d+="</span></a>";if(c!=undefined&&c.length==0){d+="<br />"}}}}}}return b("<li></li>").data("item.autocomplete",n).append(b(g).append(b(d))).appendTo(m)},_move:function(d,c){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);this.menu.deactivate()}else{this.menu[d](c)}}else{this.search(null,c)}},widget:function(){return this.menu.element}});b.extend(b.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(d,c){var e=new RegExp(b.ui.autocomplete.escapeRegex(c),"i");return b.grep(d,function(f){return e.test(f.label||f.value||f)})}})})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();b.select(c)}});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(j,f){this.deactivate();if(this.hasScroll()){var d=f.offset().top-this.element.offset().top,h=this.element.attr("scrollTop"),k=this.element.height();if(d<0){this.element.attr("scrollTop",h+d)}else{d>=k&&this.element.attr("scrollTop",h+d-k+f.height())}}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",j,{item:f})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,d,c){if(this.active){f=this.active[f+"All"](".ui-menu-item").eq(0);f.length?this.activate(c,f):this.activate(c,this.element.children(d))}else{this.activate(c,this.element.children(d))}},nextPage:function(h){if(this.hasScroll()){if(!this.active||this.last()){this.activate(h,this.element.children(".ui-menu-item:first"))}else{var d=this.active.offset().top,c=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-d-c+a(this).height();return b<10&&b>-10});f.length||(f=this.element.children(".ui-menu-item:last"));this.activate(h,f)}}else{this.activate(h,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(".ui-menu-item:last"))}else{var d=this.active.offset().top,c=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-d+c-a(this).height();return b<10&&b>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(f,result)}}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})})(jQuery);(function(a){a.fn.TextAreaExpander=function(e,d){var c=!(a.browser.msie||a.browser.opera);function b(j){j=j.target||j;var k=j.value.length,g=j.offsetWidth;if(k!=j.valLength||g!=j.boxWidth){if(c&&(k<j.valLength||g!=j.boxWidth)){j.style.height="0px"}var f=Math.max(j.expandMin,Math.min(j.scrollHeight,j.expandMax));j.style.overflow=(j.scrollHeight>f?"auto":"hidden");j.style.height=f+"px";j.valLength=k;j.boxWidth=g}return true}this.each(function(){if(this.nodeName.toLowerCase()!="textarea"){return}var f=this.className.match(/expandable(\d+)\-*(\d+)*/i);this.expandMin=e||(f?parseInt("0"+f[1],10):0);this.expandMax=d||(f?parseInt("0"+f[2],10):99999);b(this);if(!this.Initialized){this.Initialized=true;a(this).css("padding-top",0).css("padding-bottom",0);a(this).bind("keyup",b).bind("focus",b)}});return this}})(jQuery);jQuery(document).ready(function(){jQuery("textarea[class*=expandable]").TextAreaExpander()});(function(c){var a=c.scrollTo=function(d,f,g){c(window).scrollTo(d,f,g)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var d=this,f=!d.nodeName||c.inArray(d.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return d}var g=(d.contentWindow||d).document||d.ownerDocument||d;return c.browser.safari||g.compatMode=="BackCompat"?g.body:g.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var o=this,m=c(o),n=f,k,l={},h=m.is("html,body");switch(typeof n){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(n)){n=b(n);break}n=c(n,this);case"object":if(n.is||n.style){k=(n=c(n)).offset()}}c.each(d.axis.split(""),function(q,r){var u=r=="x"?"Left":"Top",s=u.toLowerCase(),w="scroll"+u,p=o[w],g=a.max(o,r);if(k){l[w]=k[s]+(h?0:p-m.offset()[s]);if(d.margin){l[w]-=parseInt(n.css("margin"+u))||0;l[w]-=parseInt(n.css("border"+u+"Width"))||0}l[w]+=d.offset[s]||0;if(d.over[s]){l[w]+=n[r=="x"?"width":"height"]()*d.over[s]}}else{var v=n[s];l[w]=v.slice&&v.slice(-1)=="%"?parseFloat(v)/100*g:v}if(/^\d+$/.test(l[w])){l[w]=l[w]<=0?0:Math.min(l[w],g)}if(!q&&d.queue){if(p!=l[w]){j(d.onAfterFirst)}delete l[w]}});j(d.onAfter);function j(g){m.animate(l,e,d.easing,g&&function(){g.call(this,f,d)})}}).end()};a.max=function(g,j){var n=j=="x"?"Width":"Height",k="scroll"+n;if(!c(g).is("html,body")){return g[k]-c(g)[n.toLowerCase()]()}var o="client"+n,f=g.ownerDocument.documentElement,d=g.ownerDocument.body;return Math.max(f[k],d[k])-Math.min(f[o],d[o])};function b(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);(function(c){c.timeFormat=function(e){var f=b(e);return f};c.timeFormatMin=function(f){var e=new Date(parseInt(f));return e.getDate()+" thng "+a[e.getMonth()]};c.timeFormatSolr=function(e){e=e.replace(/[TZ]/g," ").trim();var g=e.split(" ");var k=g[0].split("-");var f=g[1].split(":");var h=Date.UTC(k[0],k[1]-1,k[2],f[0],f[1],f[2],0)-7*3600*1000;var j=b(h);return j};function b(g){var h=new Date(),f,e=" ";if(g){f=Math.round((h.getTime()-g)/60000);e+=d(f,g)}else{e+=""}return e}function d(h,g){var f=" ",e;e=new Date(parseInt(g));if(h<=1){f+="Vi giy trc"}else{if(h<60){f+=h+" pht trc"}else{if(h>=60&&h<=120){f+=Math.floor(h/60)+" gi trc"}else{if(h<1440){f+=Math.floor(h/60)+" gi trc"}else{if(h<2880){f+="1 ngy trc lc "+e.getUTCHours()+"h:"+e.getUTCMinutes()}else{if(h>2880&&h<4320){f+="2 ngy trc lc "+e.getUTCHours()+"h:"+e.getUTCMinutes()}else{f+="ngy "+e.getDate()+"-"+a[e.getMonth()]+"-"+(1900+e.getYear())+" lc "+e.getUTCHours()+"h:"+e.getUTCMinutes()}}}}}}return f}var a=["1","2","3","4","5","6","7","8","9","10","11","12"]})(jQuery);getWeek=function(a){var b=new Date(a.valueOf());var c=(a.getDay()+6)%7;b.setDate(b.getDate()-c+3);var d=b.valueOf();b.setMonth(0,1);if(b.getDay()!=4){b.setMonth(0,1+((4-b.getDay())+7)%7)}return 1+Math.ceil((d-b)/604800000)};jQuery.slugify=function(a){if(a==undefined){return a}a=removeAccents(a.toLowerCase());a=a.replace(/\s+/g,"-");a=a.replace(/[^a-zA-Z0-9\-]/g,"").trim("-");return a};function removeAccents(a){a=a.replace(/[]/g,"a");a=a.replace(//g,"d");a=a.replace(/[]/g,"e");a=a.replace(/[]/g,"i");a=a.replace(/[]/g,"o");a=a.replace(/[]/g,"u");a=a.replace(/[]/g,"y");return a}var offsetfromcursorX=12;var offsetfromcursorY=10;var offsetdivfrompointerX=10;var offsetdivfrompointerY=14;document.write('<div id="dhtmltooltip"></div>');document.write('<img id="dhtmlpointer" />');var ie=document.all;var ns6=document.getElementById&&!document.all;var enabletip=false;if(ie||ns6){var tipobj=document.all?document.all.dhtmltooltip:document.getElementById?document.getElementById("dhtmltooltip"):""}var pointerobj=document.all?document.all.dhtmlpointer:document.getElementById?document.getElementById("dhtmlpointer"):"";function ietruebody(){return(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body}function showtip(c,b,a,d){if(ns6||ie){if(typeof b!="undefined"){tipobj.style.width=b+"px"}if(typeof a!="undefined"){tipobj.style.height=a+"px"}if(typeof d!="undefined"&&d!=""){tipobj.style.backgroundColor=d}tipobj.innerHTML=c;enabletip=true;return false}}function positiontip(j){if(enabletip){var c=false;var d=(ns6)?j.pageX:event.clientX+ietruebody().scrollLeft;var b=(ns6)?j.pageY:event.clientY+ietruebody().scrollTop;var h=ie&&!window.opera?ietruebody().clientWidth:window.innerWidth-20;var a=ie&&!window.opera?ietruebody().clientHeight:window.innerHeight-20;var g=ie&&!window.opera?h-event.clientX-offsetfromcursorX:h-j.clientX-offsetfromcursorX;var f=ie&&!window.opera?a-event.clientY-offsetfromcursorY:a-j.clientY-offsetfromcursorY;var k=(offsetfromcursorX<0)?offsetfromcursorX*(-1):-1000;if(g<tipobj.offsetWidth){tipobj.style.left=d-tipobj.offsetWidth+"px";c=true}else{if(d<k){tipobj.style.left="5px"}else{tipobj.style.left=d+offsetfromcursorX-offsetdivfrompointerX+"px";pointerobj.style.left=d+offsetfromcursorX+"px"}}if(f<tipobj.offsetHeight){tipobj.style.top=b-tipobj.offsetHeight-offsetfromcursorY+"px";c=true}else{tipobj.style.top=b+offsetfromcursorY+offsetdivfrompointerY+"px";pointerobj.style.top=b+offsetfromcursorY+"px"}tipobj.style.visibility="visible";if(!c){pointerobj.style.visibility="visible"}else{pointerobj.style.visibility="hidden"}}}function hidetip(){if(ns6||ie){enabletip=false;tipobj.style.visibility="hidden";pointerobj.style.visibility="hidden";tipobj.style.left="-1000px";tipobj.style.backgroundColor="";tipobj.style.width=""}}document.onmousemove=positiontip;SystemProperty=Class.extend({init:function(){this.properties=Array()},get:function(b,a){var c=$.cookie(b);if(c!=undefined){return c}else{if(this.properties[b]!=undefined){return this.properties[b]}else{return a}}},set:function(d,c,a){if(!a){this.properties[d]=c}else{$.cookie(d,c,{expires:1})}var b=SingletonFactory.getInstance(Subject);b.notifyEvent("SystemPropertyChanged",d)},dump:function(){for(var a in this.properties){}}});ResourceManager=Class.extend({init:function(){this.resourceLocator=new JQueryResourceLocator()},setResourceLocator:function(a){this.resourceLocator=a},getResourceLocator:function(a){return this.resourceLocator},requestForResource:function(c,b,a){var d=c+"-"+b;if(a!=undefined){return a.locateResource(d)}return this.resourceLocator.locateResource(d)},requestForCustomResource:function(a,b){if(b!=undefined){return b.locateResource(a)}return this.resourceLocator.locateCustomResource(a)}});ResourceLocator=Class.extend({locateResource:function(a){}});JQueryResourceLocator=ResourceLocator.extend({locateResource:function(a){if($("#"+a).length>0){return $("#"+a)}return undefined},locateCustomResource:function(a){if($(a).length>0){return $(a)}return undefined}});(function(a){a.fn.vAlign=function(){return this.each(function(c){var d=a(this).height();var e=a(this).outerHeight();var b=(d+(e-d))/2;a(this).css("margin-top","-"+b+"px");a(this).css("top","50%");a(this).css("position","absolute")})}})(jQuery);(function(a){a.fn.hAlign=function(){return this.each(function(d){var b=a(this).width();var c=a(this).outerWidth();var e=(b+(c-b))/2;a(this).css("margin-left","-"+e+"px");a(this).css("left","50%");a(this).css("position","absolute")})}})(jQuery);ObjectManager=Class.extend({init:function(){this.objects=new Array();this.context=null;this.mainObjects=new Array()},register:function(a){this.objects.push(a)},registerContext:function(a){this.context=a},registerMainObjects:function(a){this.mainObjects.push(a)},getMainObjects:function(){return this.mainObjects},remove:function(c){var b=this.findIndex(c.id);if(b!=-1){this.objects.splice(b,1)}for(var a=0;a<this.mainObjects.length;a++){if(c.id==this.mainObjects[a].id){this.mainObjects.splice(a,1)}}},find:function(b){var a=this.findIndex(b);if(a==-1){return undefined}return this.objects[a]},findIndex:function(b){for(var a=0;a<this.objects.length;a++){if(b==this.objects[a].id){return a}}return -1}});Application=Class.extend({init:function(){if(Application.singleton==undefined){throw"Singleton class, can not be directly created !";return undefined}this.systemProperties=new SystemProperty();this.resourceManager=new ResourceManager()},getResourceManager:function(){return this.resourceManager},setResourceManager:function(a){this.resourceManager=a},getSystemProperties:function(){return this.systemProperties},setBootstrap:function(a){this.bootstrap=a},begin:function(){this.bootstrap.run()},getObjectManager:function(){if(this.objMgr==undefined){this.objMgr=new ObjectManager()}return this.objMgr}});SingletonFactory=function(){};SingletonFactory.getInstance=function(a){if(a.instance==undefined){a.singleton=0;a.instance=new a();a.singleton=undefined}return a.instance};InterfaceImplementor=Class.extend({init:function(){this.state=false},implement:function(a){},bind:function(b,a){new EventBinder().bindEvent(b,a)}});Handler=Class.extend({init:function(){},getEventName:function(){return""},onEvent:function(a){}});JQueryWrapper=Class.extend({init:function(a,b){a.id=b;this.obj=a},getWrappedObject:function(){return this.obj}});DisplayObject=Class.extend({init:function(){var a=SingletonFactory.getInstance(Application);this.id=0;this.type="default";this.htmlClasses=new Array();this.interfaces=new Array();var b=a.getObjectManager();this.className="DisplayObject";b.register(this)},addEventHandler:function(a){new EventBinder().bindEvent(this,a)},deserializeStyle:function(a){this.deserializedStyle=a},serializeStyle:function(){return this.getAttribute("style")},serialize:function(){var a={};a.className=this.className;return a},getPosition:function(){return this.access().offset()},moveTo:function(b,a){this.access().css("left",a+"px");this.access().css("top",b+"px")},center:function(){this.access().hAlign();this.access().vAlign()},moveToBR:function(a,b){this.access().css("bottom",a+"px");this.access().css("right",b+"px")},getType:function(){return"ij-"+this.type},toHtml:function(){return""},getParent:function(){return this.parent},setParent:function(a){if(this.parent!=undefined){this.parent.detachObject(this)}this.parent=a},getId:function(){return this.id},access:function(){return $("#"+this.id)},resizeTo:function(b,a){this.access().css("width",b+"px");this.access().css("height",a+"px")},getDimension:function(){var a={};a.width=this.access().width();a.height=this.access().height();return a},setStyle:function(a,b){this.access().css(a,b)},setAttribute:function(a,b){this.access().attr(a,b)},getAttribute:function(a){return this.access().attr(a)},implement:function(a){if($("#"+this.getId()).length>0){a.implement(this);a.state=true}this.interfaces.push(a);this.updateInterfaces()},addClass:function(a){this.htmlClasses.push(a);this.updateClasses()},getHtmlClasses:function(){return this.htmlClasses},show:function(){this.access().show()},hide:function(){this.access().hide()},dispose:function(){var a=SingletonFactory.getInstance(Application);this.access().remove();a.getObjectManager().remove(this)},updateClasses:function(){var b=this.getHtmlClasses();var c=this.getType();for(var a=0;a<b.length;a++){c+=" "+b[a]}this.access().attr("class",c)},updateInterfaces:function(){var c=this.interfaces;for(var b=0;b<c.length;b++){var a=c[b];if(a!=null&&!a.state&&$("#"+this.getId()).length>0){a.implement(this);a.state=true}}},afterLoad:function(){this.setAttribute("style",this.deserializedStyle)},update:function(){this.updateClasses();this.updateInterfaces()},afterCreate:function(){this.update();new EventBinder().fireEvent(this.access(),"object_created")}});Container=DisplayObject.extend({init:function(){this._super();this.objects=new Array();this.type="container";this.className="Container"},addObjectBeforePosition:function(b,a){this.objects.push(b);if($("#"+b.access().attr("id")).length==0){$(a).before(b.toHtml())}else{b.access().detach();b.access().insertBefore(a)}b.setParent(this);b.afterCreate()},addObject:function(a){this.objects.push(a);if($("#"+a.access().attr("id")).length==0){this.access().append(a.toHtml())}else{a.access().detach();a.access().appendTo(this.access())}a.setParent(this);a.afterCreate()},afterCreate:function(b){this._super();for(var a=0;a<this.objects.length;a++){this.objects[a].afterCreate()}},removeObject:function(a){for(var b=0;b<this.objects.length;b++){var c=this.objects[b];if(c.getId()==a.getId()){this.objects.splice(b,1);a.dispose()}}},detachObject:function(a){for(var b=0;b<this.objects.length;b++){var c=this.objects[b];if(c.getId()==a.getId()){this.objects.splice(b,1)}}},getObjects:function(){return this.objects},toHtml:function(){var b="";for(var a=0;a<this.objects.length;a++){b+=this.objects[a].toHtml()}return b}});Canvas=Container.extend({init:function(){this._super();this.type="canvas";this.id=generateId("canvas");this.className="Canvas"},toHtml:function(){return"<div id='"+this.id+"'>"+this._super()+"</div>"}});PrebuiltCanvas=Canvas.extend({init:function(a){this._super();this.id=a},appendObject:function(a){this.access().append(a.access())}});Font=Class.extend({init:function(){this.fontFamily="Tahoma,sans-serif";this.fontSize="12px";this.bold=false;this.italic=false;this.color="#000000"},setFont:function(a,e,d,c,b){this.fontFamily=a;this.fontSize=e;this.bold=d;this.italic=c;this.color=b},setFontFamily:function(a){this.fontFamily=a},getFontFamily:function(){return this.fontFamily},setFontSize:function(a){this.fontSize=a},getFontSize:function(){return this.fontSize},setBold:function(a){this.bold=a},getBold:function(){return this.bold},setItalic:function(a){this.italic=a},getItalic:function(){return this.italic},setColor:function(a){this.color=a},getColor:function(){return this.color}});ImageObject=DisplayObject.extend({init:function(a){this._super();if(!a.match("http://")&&!a.match("https://")){config=new Config();this.src=config.getRoot()+a}else{this.src=a}this.id=generateId("image");this.type="Image";this.zIndex=1000;this.className="ImageObject"},toHtml:function(){return"<img id='"+this.id+"' src='"+this.src+"' ></img>"},getSrc:function(){return this.src}});RotatableImage=ImageObject.extend({init:function(a){this._super(a);this.prevrotation=0;this.className="RotatableImage"},setPrevRotation:function(a){if(a>180){a=a-180}if(a<-180){a=a+180}this.prevrotation=a},getPrevRotation:function(){return this.prevrotation},rotate:function(k){var d=this.getParent();var j=this.getPosition().left;var g=this.getPosition().top;var c=g-d.baseDotTL.getPosition().top-7;var b=j-d.baseDotTL.getPosition().left-7;var a=Math.atan2(c,b);var f=Math.round(a*180/Math.PI);d.access().css("-moz-transform","rotate("+f+"deg)");d.access().css("-webkit-transform","rotate("+f+"deg)");d.access().css("transform","rotate("+f+"deg)")}});TextArea=DisplayObject.extend({init:function(a){this._super();this.font=new Font();this.txt=a;this.id=generateId("textarea");this.type="TextArea";this.implement(new ClickTextAreaStopEvent());this.implement(new BlurTextAreaUpdate());this.className="TextArea"},toHtml:function(){return"<textarea id='"+this.id+"' value='"+this.txt+"'></textarea>"},getText:function(){return this.access().val()},getFont:function(){return this.font},setFont:function(a){this.font=a},updateText:function(){this.parent.updateText(this.getText(),this.getFont());this.hide()},focus:function(){this.access().focus()}});Label=DisplayObject.extend({init:function(a){this._super();this.txt=a;this.id=generateId("text");this.type="Label";this.className="Label"},toHtml:function(){return"<label id='"+this.id+"' value='"+this.txt+"'></label>"},getText:function(){return this.access().html()},setText:function(a,c){if(c==null){this.access().html(a)}else{var d=a;var b="font-family: "+c.getFontFamily()+"; font-size:"+c.getFontSize();b+="; color:"+c.getColor();if(c.getItalic()){b+=";font-style:italic"}else{b+=";font-style:normal"}if(c.getBold()){b+=";font-weight:bold"}d="<span style='"+b+"'>"+d+"</span>";this.access().html(d)}}});ContextMenu=Canvas.extend({init:function(){this._super();this.items=new Array();this.type="contextmenu";this.className="ContextMenu"},addItem:function(a){this.items.push(a);this.addObject(a);this.update()},afterCreate:function(){this._super();this.setStyle("zIndex","1000");this.update()}});ContextMenuItem=Canvas.extend({init:function(a,b){this._super();this.label_txt=a;this.label=new Label("");this.addObject(this.label);this.type="contextmenuitem";this.originObject=b;this.className="ContextMenuItem"},afterCreate:function(){this.label.setText(this.label_txt);this.update()},setOriginObject:function(a){this.originObject=a},getOriginObject:function(){return this.originObject}});DraggableWrapper=Class.extend({wrap:function(a){a.access().draggable();a.access().css("position","absolute");return a}});ImageIconWrapper=Class.extend({wrap:function(a){a.addClass("icon");return a}});ClickableImageWrapper=Class.extend({wrap:function(a){a.implement(new ClickIcon());return a}});ImageBox=Canvas.extend({init:function(a){this._super();this.src=a;this.img=new Image(a);this.baseDotTL=new Image("images/delete-small.png");this.resizeDotBR=new Image("images/sq.png");this.dummyDotTR=new Image("images/sq.png");this.dummyDotBL=new Image("images/sq.png");this.rotateIcon=new RotatableImage("images/sq.png");this.textArea=new TextArea("");this.text=new Label("");this.addObject(this.resizeDotBR);this.addObject(this.baseDotTL);this.addObject(this.dummyDotTR);this.addObject(this.dummyDotBL);this.addObject(this.rotateIcon);this.addObject(this.textArea);this.addObject(this.text);this.addObject(this.img);this.type="imagebox";this.className="ImageBox";app.getObjectManager().registerMainObjects(this)},getTextArea:function(){return this.textArea},getZIndex:function(){if(this.zIndex==null){this.zIndex=this.access().css("z-index")}if(this.zIndex==null){this.zIndex=1000}return this.zIndex},setZIndex:function(a){this.zIndex=a;this.setStyle("z-index",this.zIndex);this.update()},showTextArea:function(){this.text.hide();this.textArea.show();this.textArea.focus()},showPlainText:function(){this.textArea.hide();this.text.show();this.text.center()},afterCreate:function(){this._super();this.resizeDotBR.implement(new ResizableBR());this.rotateIcon.implement(new Rotatable());this.dummyDotTR.implement(new ResizableTR());this.dummyDotBL.implement(new ResizableBL());this.baseDotTL.implement(new DeleteImageBox());this.img.addClass("img-item");this.img.setStyle("height","50px");var a=new DraggableWrapper();a.wrap(this);a.wrap(this.resizeDotBR);a.wrap(this.rotateIcon);a.wrap(this.dummyDotTR);a.wrap(this.dummyDotBL);this.baseDotTL.addClass("sq");this.resizeDotBR.addClass("sq");this.dummyDotTR.addClass("sq");this.dummyDotBL.addClass("sq");this.rotateIcon.addClass("sq");this.updateImages();this.implement(new DragSelectImageBox());this.implement(new ClickImageBox());this.implement(new ClickImageCreateText());this.implement(new CreateImageBoxContextMenu());this.showPlainText();this.baseDotTL.setStyle("position","absolute")},updateText:function(a,b){this.text.setText(a,b);this.showPlainText()},updateImages:function(){var e=this.img.getDimension();this.resizeTo(e.width,e.height);var b=-11;var d=-11;var a=e.width-5;var c=e.height-5;this.baseDotTL.moveTo(d,b);this.resizeDotBR.moveTo(c-5,a-5);this.dummyDotTR.moveTo(d,a);this.dummyDotBL.moveTo(c,b);this.rotateIcon.moveTo(c/2-10,a+10)},select:function(){this.baseDotTL.show();this.resizeDotBR.show();this.dummyDotTR.show();this.dummyDotBL.show();this.rotateIcon.show()},deselect:function(){this.baseDotTL.hide();this.resizeDotBR.hide();this.dummyDotTR.hide();this.dummyDotBL.hide();this.rotateIcon.hide()},deserializeText:function(a,c){this.getTextArea().txt=a;var b=new Font();b.setFont(c.fontFamily,c.fontSize,c.bold,c.italic,c.color);this.getTextArea().setFont(b)},serialize:function(){var a=this._super();a.params={};a.params.src=this.src;a.params.style=this.serializeStyle();a.params.txt=this.getTextArea().getText();a.params.font=this.getTextArea().getFont();return a},afterLoad:function(){this._super();this.img.resizeTo(this.getDimension().width,this.getDimension().height);this.updateImages();this.getTextArea().access().val(this.getTextArea().txt);this.updateText(this.getTextArea().getText(),this.getTextArea().getFont())}});Deserializer=Class.extend({deserialize:function(b){if(b.className=="ImageBox"){var a=new ImageBox(b.params.src);a.deserializeStyle(b.params.style);a.deserializeText(b.params.txt,b.params.font);return a}}});Button=DisplayObject.extend({init:function(a){this._super();this.txt=a;this.id=generateId("button");this.type="Button";this.className="Button"},toHtml:function(){return"<button id='"+this.id+"' class='"+this.getType()+"'>"+this.txt+"</button>"}});ToggleButton=DisplayObject.extend({init:function(a,b){this._super();this.txt=a;this.id=generateId("togglebutton");this.type="togglebutton";this.className="ToggleButton";this.state=b;this.implement(new ClickToggleButton())},afterCreate:function(){this._super();if(this.state){this.addClass("toggledown")}},toHtml:function(){return"<a id='"+this.id+"' class='"+this.getType()+"'>"+this.txt+"</a>"}});IconSet=Canvas.extend({init:function(a){this._super();this.lblText=a;this.container=new Canvas();this.header=new Canvas();this.label=new Label("");this.header.addObject(this.label);this.addObject(this.header);this.addObject(this.container)},afterCreate:function(){this.label.addClass("ij-iconsetlbl");this.label.setText(this.lblText);this.setStyle("position","relative");this.header.setStyle("width",(this.access().width()+10)+"px");this.header.addClass("ij-headericonset");this.container.addClass("ij-containericonset");this.header.implement(new ClickHeaderIconSet())},addIcon:function(a){a=new ImageIconWrapper().wrap(a);a=new ClickableImageWrapper().wrap(a);this.container.addObject(a)}});ToolBox=Canvas.extend({init:function(){this._super();this.type="toolbox";this.id="tool";this.addClass("tool");this.iconSets=new Array()},addIcon:function(a){a=new ImageIconWrapper().wrap(a);a=new ClickableImageWrapper().wrap(a);this.addObject(a)},addIconSet:function(a){iconset=new IconSet(a);this.iconSets.push(iconset);this.addObject(iconset)},addIconToSet:function(b,a){this.iconSets[b].addIcon(a)}});ClickImageBox=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickImageBoxHandler())}});ClickImageBoxHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){app.select(a);b.stopPropagation()}});ResizableTR=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ResizableTRDragHandler());this.bind(a,new ResizableDragStopHandler());this.bind(a,new MouseOverSqHandler("tr"));this.bind(a,new MouseOutSqHandler("tr"))}});ResizableTRDragHandler=Handler.extend({getEventName:function(){return"drag"},onEvent:function(j,g){var d=g.getParent();var f=g.getPosition().left;var b=50;var a=f-d.baseDotTL.getPosition().left-7;var c=d.access().height();if(a<b){g.setStyle("left",b);g.access().draggable("disable");a=b}d.img.resizeTo(a,c);d.updateImages()}});ResizableBL=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ResizableBLDragHandler());this.bind(a,new ResizableDragStopHandler());this.bind(a,new MouseOverSqHandler("bl"));this.bind(a,new MouseOutSqHandler("bl"))}});ResizableBLDragHandler=Handler.extend({getEventName:function(){return"drag"},onEvent:function(j,g){var d=g.getParent();var f=g.getPosition().top;var b=50;var a=d.access().width();var c=f-d.baseDotTL.getPosition().top-7;if(c<b){g.setStyle("left",b);g.access().draggable("disable");c=b}d.img.resizeTo(a,c);d.updateImages()}});ResizableBR=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ResizableBRDragHandler());this.bind(a,new ResizableDragStopHandler());this.bind(a,new MouseOverSqHandler("br"));this.bind(a,new MouseOutSqHandler("br"))}});ResizableDragStopHandler=Handler.extend({getEventName:function(){return"dragstop"},onEvent:function(b,a){a.access().draggable("enable");a.getParent().updateImages()}});ResizableBRDragHandler=Handler.extend({getEventName:function(){return"drag"},onEvent:function(k,j){var d=j.getParent();var g=j.getPosition().left;var f=j.getPosition().top;var b=50;var c=f-d.baseDotTL.getPosition().top-7;var a=g-d.baseDotTL.getPosition().left-7;if(c<b){j.setStyle("top",b);j.access().draggable("disable");c=b}if(a<b){j.setStyle("left",b);j.access().draggable("disable");a=b}d.img.resizeTo(a,c);d.updateImages()}});MouseOverSqHandler=Handler.extend({init:function(a){this.type=a},getEventName:function(){return"mouseover"},onEvent:function(c,b){var a="sq"+this.type;b.access().addClass("sqhover");b.access().addClass(a)}});MouseOutSqHandler=Handler.extend({init:function(a){this.type=a},getEventName:function(){return"mouseout"},onEvent:function(b,a){styleName="sq"+this.type;a.access().removeClass("sqhover");a.access().removeClass(styleName)}});DragSelectImageBox=InterfaceImplementor.extend({implement:function(a){this.bind(a,new DragSelectImageBoxHandler())}});DragStopImageBoxHandler=Handler.extend({getEventName:function(){return"dragstop"},onEvent:function(b,a){app.select(a)}});DragSelectImageBoxHandler=Handler.extend({getEventName:function(){return"drag"},onEvent:function(b,a){app.select(a)}});ClickIcon=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickIconHandler())}});ClickIconHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(g,f){var a=app.getMainArea();var b=app.getToolBox();var d=new ImageBox(f.getSrc());var c=0;a.addObject(d);d.addClass("item");d.moveTo(b.getPosition().top,600);app.select(d);items=a.getObjects();c=items.length;items[c]=c;d.setZIndex(c);d.setAttribute("state","silent")}});ClickImageCreateText=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickImageCreateTextHandler())}});ClickImageCreateTextHandler=Handler.extend({getEventName:function(){return"dblclick"},onEvent:function(b,a){a.showTextArea()}});ClickTextAreaStopEvent=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickTextAreaStopEventHandler())}});ClickTextAreaStopEventHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){b.stopPropagation()}});BlurTextAreaUpdate=InterfaceImplementor.extend({implement:function(a){this.bind(a,new BlurTextAreaUpdateHandler())}});BlurTextAreaUpdateHandler=Handler.extend({getEventName:function(){return"blur"},onEvent:function(b,a){a.updateText()}});ClickCanvasDeselect=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickCanvasDeselectHandler())}});ClickCanvasDeselectHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){app.deselect()}});Rotatable=InterfaceImplementor.extend({implement:function(a){this.bind(a,new RotateMouseMove());this.bind(a,new RotateStop())}});RotateStop=Handler.extend({getEventName:function(){return"dragstop"},onEvent:function(b,a){a.getParent().updateImages()}});RotateMouseMove=Handler.extend({getEventName:function(){return"drag"},onEvent:function(b,a){a.rotate(b)}});ClickAlert=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickAlertHandler())}});ClickAlertHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){alert("hello")}});DeleteImageBox=InterfaceImplementor.extend({implement:function(a){this.bind(a,new DeleteImageBoxHandler());this.bind(a,new MouseOverSqHandler("tl"));this.bind(a,new MouseOutSqHandler("tl"))}});DeleteImageBoxHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){a.parent.dispose()}});ClickExportJPG=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickExportJPGHandler())}});ClickExportJPGHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){toimg()}});ClickHeaderIconSet=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickHeaderIconSetHandler())}});ClickHeaderIconSetHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){a.parent.container.access().toggle()}});CreateImageBoxContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new CreateImageBoxContextMenuHandler())}});CreateImageBoxContextMenuHandler=InterfaceImplementor.extend({getEventName:function(){return"contextmenu"},onEvent:function(h,g){h.preventDefault();if(app.getObjectManager().context!=null){app.getObjectManager().context.dispose()}var f=new ContextMenu();var c=new ContextMenuItem("Move to back",g);var d=new ContextMenuItem("Move backward",g);var j=new ContextMenuItem("Move to front",g);var a=new ContextMenuItem("Move forward",g);var k=new ContextMenuItem("Properties",g);var l=new ContextMenuItem("Z-index",g);var b=app.getMainArea();var m=h.pageY;var n=h.pageX;k.implement(new EventPropertiesContextMenu());l.implement(new EventZIndexContextMenu());c.implement(new EventMoveToBackContextMenu());d.implement(new EventMoveBackwardContextMenu());j.implement(new EventMoveToFrontContextMenu());a.implement(new EventMoveForwardContextMenu());f.addItem(c);f.addItem(j);f.addItem(d);f.addItem(a);f.addItem(l);f.addItem(k);b.addObject(f);f.setStyle("top",m);f.setStyle("left",n);objMgr=app.getObjectManager().registerContext(f)}});EventMoveToBackContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickMoveToBackContextMenuHandler());this.bind(a,new MouseOverContextMenuItemHandler());this.bind(a,new MouseOutContextMenuItemHandler())}});ClickMoveToBackContextMenuHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(g,f){var d=app.getObjectManager();var f=f.getOriginObject();var j=f.getZIndex();var h=new Array();var a=d.getMainObjects();for(var c=0;c<a.length;c++){h.push(a[c].getZIndex())}var b=Array.min(h);if(b==j){return}else{for(var c=0;c<a.length;c++){if(a[c].getZIndex()<j){a[c].setZIndex(Array.nextBigger(h,a[c].getZIndex()))}}f.setZIndex(b)}for(var c=0;c<a.length;c++){a[c].update()}}});EventMoveToFrontContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickMoveToFrontContextMenuHandler());this.bind(a,new MouseOverContextMenuItemHandler());this.bind(a,new MouseOutContextMenuItemHandler())}});ClickMoveToFrontContextMenuHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(g,f){var d=app.getObjectManager();var f=f.getOriginObject();var j=f.getZIndex();var h=new Array();var a=d.getMainObjects();for(var c=0;c<a.length;c++){h.push(a[c].getZIndex())}var b=Array.max(h);if(b==j){return}else{for(var c=0;c<a.length;c++){if(a[c].getZIndex()>j){a[c].setZIndex(Array.nextLess(h,a[c].getZIndex()))}}f.setZIndex(b)}for(var c=0;c<a.length;c++){a[c].update()}}});EventMoveBackwardContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickMoveBackwardContextMenuHandler());this.bind(a,new MouseOverContextMenuItemHandler());this.bind(a,new MouseOutContextMenuItemHandler())}});ClickMoveBackwardContextMenuHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(j,d){var k=app.getObjectManager();var d=d.getOriginObject();var a=d.getZIndex();var b=new Array();var g=k.getMainObjects();for(var f=0;f<g.length;f++){b.push(g[f].getZIndex())}var h=Array.min(b);var c=-1;if(h==a){return}else{h=-1;for(var f=0;f<g.length;f++){if(g[f].getZIndex()<a&&g[f].getZIndex()>h){h=g[f].getZIndex();c=f}}g[c].setZIndex(a);d.setZIndex(h)}app.select(d);for(var f=0;f<g.length;f++){g[f].update()}}});EventMoveForwardContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickMoveForwardContextMenuHandler());this.bind(a,new MouseOverContextMenuItemHandler());this.bind(a,new MouseOutContextMenuItemHandler())}});ClickMoveForwardContextMenuHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(j,f){var k=app.getObjectManager();var f=f.getOriginObject();var a=f.getZIndex();var b=new Array();var h=k.getMainObjects();for(var g=0;g<h.length;g++){b.push(h[g].getZIndex())}var d=Array.max(b);var c=-1;if(d==a){return}else{d=1000;for(var g=0;g<h.length;g++){if(h[g].getZIndex()>a&&h[g].getZIndex()<d){d=h[g].getZIndex();c=g}}h[c].setZIndex(a);f.setZIndex(d)}app.select(f);for(var g=0;g<h.length;g++){h[g].update()}}});EventZIndexContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new MouseOverContextMenuItemHandler());this.bind(a,new MouseOutContextMenuItemHandler())}});EventPropertiesContextMenu=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickPropertiesContextMenuHandler());this.bind(a,new MouseOverContextMenuItemHandler());this.bind(a,new MouseOutContextMenuItemHandler())}});MouseOverContextMenuItemHandler=Handler.extend({getEventName:function(){return"mouseover"},onEvent:function(b,a){a.setStyle("background-color","#888");a.setStyle("color","#fff")}});MouseOutContextMenuItemHandler=Handler.extend({getEventName:function(){return"mouseout"},onEvent:function(b,a){a.setStyle("background-color","#fff");a.setStyle("color","#000")}});ClickPropertiesContextMenuHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(g,f){var h="<div style='padding-left:50px; text-align:left'>";var b=new Array();var d=new Button("OK");var c=new Button("Apply");var a=f.getOriginObject().getTextArea().getFont();b.push(c);b.push(d);h+="Top:"+f.getOriginObject().getPosition().top+"px ; Left:"+f.getOriginObject().getPosition().left+"px<br/>";h+="Width:"+f.getOriginObject().access().width()+"px ; Height:"+f.getOriginObject().access().height()+"px<br/>";h+="Font-size: <input type='text' id='properties-font-size' value='"+a.getFontSize()+"' /><br/>";h+="Bold, Italic, etc<br/>";h+="Font-family: <input type='text' id='properties-font-family' value='"+a.getFontFamily()+"' /><br/>";h+="Color: <input type='text' id='properties-font-color' value='"+a.getColor()+"' /><br/>";h+="</div>";dialogId=dialog("Properties",h,b);c.implement(new ClickPropertiesButtonApply(f.getOriginObject()));d.implement(new ClickPropertiesButtonOK(dialogId,f.getOriginObject()))}});ClickPropertiesButtonApply=InterfaceImplementor.extend({init:function(a){this._super();this.obj=a},implement:function(a){this.bind(a,new ClickPropertiesButtonApplyHandler(this.obj))}});ClickPropertiesButtonApplyHandler=Handler.extend({init:function(a){this.obj=a},getEventName:function(){return"click"},onEvent:function(b,c){var a=this.obj.getTextArea().getFont();a.setFontSize($("#properties-font-size").val());a.setFontFamily($("#properties-font-family").val());a.setColor($("#properties-font-color").val());this.obj.getTextArea().setFont(a);this.obj.getTextArea().updateText()}});ClickPropertiesButtonOK=InterfaceImplementor.extend({init:function(a,b){this._super();this.obj=b;this.id=a},implement:function(a){this.bind(a,new ClickPropertiesButtonOKHandler(this.id,this.obj))}});ClickPropertiesButtonOKHandler=Handler.extend({init:function(b,a){this.obj=a;this.id=b},getEventName:function(){return"click"},onEvent:function(b,c){var a=this.obj.getTextArea().getFont();a.setFontSize($("#properties-font-size").val());a.setFontFamily($("#properties-font-family").val());a.setColor($("#properties-font-color").val());this.obj.getTextArea().setFont(a);this.obj.getTextArea().updateText();$("#dialog_div_"+this.id).remove()}});SaveDiagram=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickSaveDiagramHandler())}});ClickSaveDiagramHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(l,g){var j=app.getObjectManager().getMainObjects();var m="";var b;var n=new Array();var c=new Button("Save");var h=new Button("Cancel");var p;var d;var k=new Array();for(var f=0;f<j.length;f++){b=j[f];var a=j[f].serialize();k.push(a)}m+="Diagram Name: <input type='text' id='diagramname' value='default' />";n.push(c);n.push(h);p=dialog("Object detail",m,n);d=$("#diagramname");h.implement(new CloseDialog(p));c.implement(new SaveFile(p,d,k))}});SaveFile=InterfaceImplementor.extend({init:function(a,c,b){this._super();this.id=a;this.dname=c;this.objsToSave=b},implement:function(a){this.bind(a,new ClickSaveFileHandler(this.id,this.dname,this.objsToSave))}});ClickSaveFileHandler=Handler.extend({init:function(c,b,a){this.id=c;this.dname=b;this.objsToSave=a},getEventName:function(){return"click"},onEvent:function(f,d){var b=this.dname.val();var c={};var a="services/save.php";c.name=b;c.diagram=$.toJSON(this.objsToSave);$.ajax({cache:false,type:"POST",url:a,data:c,beforeSend:function(){alertMsg("alert","<img src='images/wait.gif'/>")},complete:function(e){alertMsg("alert",b+" is saved")}});$("#dialog_div_"+this.id).remove()}});LoadDiagram=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickLoadDiagramHandler())}});ClickLoadDiagramHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(f,d){var h="";var c=new Button("Load");var a=new Array();var g="";var b="services/listDiagrams.php";$.ajax({cache:false,type:"GET",url:b,beforeSend:function(){$("#dialogload-dlist").html("<img src='images/wait.gif'/>")},complete:function(k){var m=$.parseJSON(k.responseText);var l="";for(var j=0;j<m.length;j++){var e=m[j];l+=e.name+","}$("#dialogload-dlist").html(l)}});h="<div id='dialogload-dlist'></div>Diagram Name: <input id='diagramname' name='diagramname' type='text'/>";a.push(c);dialogId=dialog("Choose file",h,a);g=$("#diagramname");c.implement(new ExtractDiagram(dialogId,g))}});ExtractDiagram=InterfaceImplementor.extend({init:function(b,a){this._super();this.id=b;this.diagram=a},implement:function(a){this.bind(a,new ExtractDiagramHandler(this.id,this.diagram))}});ExtractDiagramHandler=Handler.extend({init:function(b,a){this._super();this.id=b;this.diagram=a},getEventName:function(){return"click"},onEvent:function(c,b){var f=this.diagram.val();$("#dialog_div_"+this.id).remove();var d=app.getObjectManager().getMainObjects();var a="services/load.php";a+="?name="+f;while(d.length>0){d[0].dispose()}$.ajax({cache:false,type:"GET",url:a,beforeSend:function(){alertMsg("alert","<img src='images/wait.gif'/>")},complete:function(k){var j=k.responseText;var h=$.parseJSON(j);var g=new Deserializer();for(var e=0;e<h.length;e++){var l=h[e];var m=g.deserialize(l);app.getMainArea().addObject(m);m.afterLoad()}alertMsg("alert","Completed !")}})}});CloseDialog=InterfaceImplementor.extend({init:function(a){this._super();this.id=a},implement:function(a){this.bind(a,new CloseDialogHandler(this.id))}});CloseDialogHandler=Handler.extend({init:function(a){this._super();this.id=a},getEventName:function(){return"click"},onEvent:function(b,a){$("#dialog_div_"+this.id).remove()}});ClickToggleButton=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickToggleButtonHandler())}});ClickToggleButtonHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){a.access().toggleClass("toggledown");if(a.access().hasClass("toggledown")){a.state=true}else{a.state=false}}});TestToggle=InterfaceImplementor.extend({implement:function(a){this.bind(a,new ClickTestToggleHandler())}});ClickTestToggleHandler=Handler.extend({getEventName:function(){return"click"},onEvent:function(b,a){dialog("alert","fine: "+a.state,null)}});EventBinder=Class.extend({fireEvent:function(a,b){a.trigger(b)},bindEvent:function(b,a){b.access().bind(a.getEventName(),function(c){a.onEvent(c,b)})}});ObserverInterface=InterfaceImplementor.extend({implement:function(a){a.prototype.notify=a.prototype.notify||function(c,d){var b="on"+c;if(typeof this[b]!="undefined"){var e=this[b];e.call(this,d);return true}return false};a.prototype.registerObserver=a.prototype.registerObserver||function(){var b=SingletonFactory.getInstance(Subject);b.attachObserver(this)};a.prototype.unregisterObserver=a.prototype.unregisterObserver||function(){var b=SingletonFactory.getInstance(Subject);b.detachObserver(this)}}});Subject=Class.extend({init:function(){this.observers=Array()},attachObserver:function(a){this.observers.push(a)},detachObserver:function(a){if(a==undefined){return}var b=this.observers.indexOf(a);if(b>0){this.observers.splice(b,1)}},notifyEvent:function(b,f){var e=0;for(var c=0;c<this.observers.length;c++){try{var a=this.observers[c].notify(b,f);if(a==true){e++}}catch(d){log(d)}}}});PluginManager=Class.extend({init:function(){if(PluginManager.singleton==undefined){throw"Singleton class, can not be directly created !";return undefined}var a=SingletonFactory.getInstance(Subject);a.attachObserver(this);this.plugins=Array()},addPlugin:function(c,b){var a={};if(b!=true){c.onLoad()}this.plugins.push(c)},removePlugin:function(a){var b=this.plugins[a];if(b!=undefined){b.onUnload();this.plugins.splice(a,1)}},getPlugins:function(){return this.plugins},removeAllPlugins:function(){for(var a=0;a<this.plugins.length;a++){var b=this.plugins[a];if(b.isLoaded()){b.onUnload()}}this.plugins=Array()},notify:function(b,e){for(var c=0;c<this.plugins.length;c++){var d=this.plugins[c];if(d.isLoaded()){var a="on"+b;if(typeof d[a]!="undefined"){var f=d[a];f.call(d,e)}}}}}).implement(ObserverInterface);PluginInterface=InterfaceImplementor.extend({implement:function(a){a.prototype.isLoaded=a.prototype.isLoaded||function(){if(this.loaded==undefined){this.loaded=false}return this.loaded};a.prototype.getName=a.prototype.getName||function(){return this.name};a.prototype.onLoad=a.prototype.onLoad||function(){this.loaded=true;this.onBegin()};a.prototype.onBegin=a.prototype.onBegin||function(){};a.prototype.onEnd=a.prototype.onEnd||function(){};a.prototype.onUnload=a.prototype.onUnload||function(){this.loaded=false;this.onEnd()};new ObserverInterface().implement(a)}});IntervalTimerInterface=InterfaceImplementor.extend({implement:function(a){a.prototype.startInterval=a.prototype.startInterval||function(b,d){if(this.intervalSetup==true){this.stopInterval()}this.intervalSetup=true;var c=this;this.currentIntervalID=setInterval(function(){d.call(c)},b)};a.prototype.stopInterval=a.prototype.stopInterval||function(){if(this.currentIntervalID!=undefined){clearInterval(this.currentIntervalID)}else{}}}});Page=Class.extend({init:function(){if(Page.singleton==undefined){throw"Page is Singleton !";return undefined}this.portletContainer=SingletonFactory.getInstance(PortletContainer);this.pluginManager=SingletonFactory.getInstance(PluginManager);this.pagename="";this.subject=SingletonFactory.getInstance(Subject)},attachPortlets:function(){for(var k in this.layout){k=this.layout[k];if(k.active==undefined){k.active=true}if(k.params==undefined){k.params=Array()}var b=false;for(var e=0;e<this.portletContainer.portlets.length;e++){var f=this.portletContainer.portlets[e];if(k.portlet===f.portlet.getName()){b=true;f.portlet.setInitParameters(k.params);f.active=k.active;if(k.position!==f.position){f.position=k.position;this.portletContainer.movePortlet(f,k.position)}if(k.active==true){try{f.portlet.onReloadPage();f.loaded=true}catch(d){log(d)}}break}}if(!b){if(window[k.portlet]==undefined){log("portlet "+k.portlet+" is undefined")}else{var j=new window[k.portlet]();j.setInitParameters(k.params);this.portletContainer.addPortlet(j,k)}}}var c=Array();for(var e=0;e<this.portletContainer.portlets.length;e++){var f=this.portletContainer.portlets[e];var a=false;for(var k in this.layout){k=this.layout[k];if(k.portlet===f.portlet.getName()){if(k.active==false){this.portletContainer.deactivatePortlet(f)}a=true;break}}if(!a){c.push(f)}}for(var e=0;e<c.length;e++){var h=c[e];var g=this.portletContainer.portlets.indexOf(h);this.portletContainer.removePortlet(g)}},generateData:function(pagename){var data={};var tmp={};if(pagename==undefined){throw {Exception:"NotFound",Message:"Page name is undefined"};return undefined}var app=SingletonFactory.getInstance(Application);var jsonObj=app.getResourceManager().requestForResource("portlets",pagename);if(jsonObj==undefined){throw {Exception:"NotFound",Message:'Page name "'+pagename+'" not found!'};return undefined}var jsonText=jsonObj.html();tmp=eval("("+jsonText+")");data.parent=tmp.parent;data.plugins=tmp.plugins;data.layout=tmp.portlets;var i,j;var toAddPlugins=new Array();var toAddPortlets=new Array();while(data.parent!=undefined){jsonObj=app.getResourceManager().requestForResource("portlets",data.parent);if(jsonObj==undefined){throw {Exception:"NotFound",Message:'(Parent)Page name "'+data.parent+'" not found!'};return undefined}jsonText=jsonObj.html();toAddPlugins=new Array();toAddPortlets=new Array();tmp=eval("("+jsonText+")");for(i=0;i<tmp.plugins.length;i++){var existed=false;for(j=0;j<data.plugins.length;j++){if(tmp.plugins[i].plugin==data.plugins[j].plugin){existed=true;break}}if(!existed){toAddPlugins.push(tmp.plugins[i])}}for(i=0;i<tmp.portlets.length;i++){var existed=false;for(j=0;j<data.layout.length;j++){if(tmp.portlets[i].portlet==data.layout[j].portlet){existed=true;break}}if(!existed){toAddPortlets.push(tmp.portlets[i])}}for(i=0;i<toAddPlugins.length;i++){data.plugins.push(toAddPlugins[i])}for(i=0;i<toAddPortlets.length;i++){data.layout.push(toAddPortlets[i])}data.parent=tmp.parent}return data},getRequest:function(){return this.request},setRequest:function(a){this.request=a},attachPlugins:function(){var oldPlugins=this.pluginManager.getPlugins();for(var i in oldPlugins){var oldPlg=oldPlugins[i];oldPlg.keep=false}for(var j in this.plugins){var newPlg=this.plugins[j];var existed=false;for(var i=0;i<oldPlugins.length;i++){existed=false;var oldPlg=oldPlugins[i];if(oldPlg.getName()==newPlg.plugin){oldPlg.keep=true;existed=true;break}}if(!existed){if(window[newPlg.plugin]==undefined){}else{var plugin=new window[newPlg.plugin];plugin.keep=true;this.pluginManager.addPlugin(plugin,eval(newPlg.delay))}}}var pluginsToRemoved=Array();for(var i in oldPlugins){var oldPlg=oldPlugins[i];if(oldPlg.keep!=true){pluginsToRemoved.push(oldPlg)}}for(var i=0;i<pluginsToRemoved.length;i++){var plg=pluginsToRemoved[i];var indexOf=this.pluginManager.getPlugins().indexOf(plg);this.pluginManager.removePlugin(indexOf)}var subject=SingletonFactory.getInstance(Subject);subject.notifyEvent("ReloadPlugin")},onBegin:function(a){var b=this.generateData(a);if(b==undefined){return}this.pagename=a;this.layout=b.layout;this.plugins=b.plugins;this.attachPlugins();this.subject.notifyEvent("PageBegan")},run:function(){this.attachPortlets();this.subject.notifyEvent("AllPorletAdded");this.portletContainer.loadPortlets();this.subject.notifyEvent("AllPorletLoaded")},onEnd:function(){},dispose:function(){}});PortletCanvas=Canvas.extend({init:function(a){this._super();this.addClass("portlet");this.addClass("portlet-canvas")}});PortletInterface=InterfaceImplementor.extend({implement:function(a){a.prototype.getName=a.prototype.getName||function(){return this.name};a.prototype.onBegin=a.prototype.onBegin||function(){};a.prototype.run=a.prototype.run||function(){};a.prototype.onEnd=a.prototype.onEnd||function(){};a.prototype.setPortletPlaceholder=a.prototype.setPortletPlaceholder||function(b){this.placeholder=b};a.prototype.getPage=a.prototype.getPage||function(){return SingletonFactory.getInstance(Page)};a.prototype.getInitParameters=a.prototype.getInitParameters||function(){if(this.initParams==undefined){this.initParams=Array()}return this.initParams};a.prototype.setInitParameters=a.prototype.setInitParameters||function(b){this.initParams=b};a.prototype.getRequest=a.prototype.getRequest||function(){return this.getPage().getRequest()};a.prototype.requestForMatchingEffectiveResource=a.prototype.requestForMatchingEffectiveResource||function(b,e){var d=SingletonFactory.getInstance(Application);var c=d.getResourceManager();return c.requestForCustomResource("#effective-area #"+this.name+"-"+b+" "+e)};a.prototype.requestForResource=a.prototype.requestForResource||function(b){var d=SingletonFactory.getInstance(Application);var c=d.getResourceManager();return c.requestForCustomResource("#"+this.name+"-RootData #"+this.name+"-"+b)};a.prototype.requestForEffectiveResource=a.prototype.requestForEffectiveResource||function(b){var d=SingletonFactory.getInstance(Application);var c=d.getResourceManager();return c.requestForCustomResource("#effective-area #"+this.name+"-"+b)};a.prototype.onReloadPage=a.prototype.onReloadPage||function(){};a.prototype.getResourceID=a.prototype.getResourceID||function(b){return this.name+"-"+b};a.prototype.getLocalizedText=a.prototype.getLocalizedText||function(c){var e=SingletonFactory.getInstance(Application);var d=e.getResourceManager();var b=d.requestForResource(this.name,"Text"+c);if(b==undefined){return undefined}return b.html()};a.prototype.getLocalizedMessage=a.prototype.getLocalizedMessage||function(f){var h=SingletonFactory.getInstance(Application);var g=h.getResourceManager();var e=g.requestForResource(this.name,"Message"+f);if(e==undefined){return undefined}var b=e.html();var c=b;for(var d=1;d<arguments.length;d++){c=c.replace("%"+d,arguments[d])}return c};a.prototype.getPortletPlaceholder=a.prototype.getPortletPlaceholder||function(){return this.placeholder}}});RenderInterface=InterfaceImplementor.extend({implement:function(a){a.prototype.render=a.prototype.render||function(){this.viewId=this.viewId||this.getName()+"View";this.model=this.model||{};return tmpl(this.viewId,this.model)};a.prototype.renderView=a.prototype.renderView||function(b,c){return tmpl(this.name+"-"+b,c)}}});PortletPlaceholder=Class.extend({init:function(a){this.canvas=a},addToCanvas:function(a){this.canvas.addObject(a)},paintCanvas:function(b){this.canvas.access().html(b);var a=SingletonFactory.getInstance(Subject);a.notifyEvent("HtmlUpdated")},drawToCanvas:function(b){this.canvas.access().append(b);var a=SingletonFactory.getInstance(Subject);a.notifyEvent("HtmlUpdated")},getCanvas:function(){return this.canvas}});PortletContainer=Class.extend({init:function(){if(PortletContainer.singleton==undefined){throw"Singleton class";return undefined}this.portlets=Array()},addPortlet:function(e,d){var c={};for(var a in d){c[a]=d[a]}c.portlet=e;if(c.order==undefined){c.order=""}c.loaded=false;this.portlets.push(c);try{e.onBegin()}catch(b){log(b)}},movePortlet:function(b,a){var d=new PrebuiltCanvas(a);var c=new PrebuiltCanvas(b.portlet.getPortletPlaceholder().getCanvas().id);this.attachPortletHtml(d,c,b)},loadPortlets:function(){for(var a=0;a<this.portlets.length;a++){var b=this.portlets[a];if(b.active==true&&!b.loaded){this.activatePortlet(b);b.loaded=true}}},getPortlets:function(){return this.portlets},getPortletMetaByName:function(a){var b;for(b=0;b<this.portlets.length;b++){if(this.portlets[b].portlet.getName()==a){return this.portlets[b]}}},removePortlet:function(a){var b=this.portlets[a];if(b!=undefined){this.portlets.splice(a,1);b.portlet.onEnd();if(b.portlet.getPortletPlaceholder()){b.portlet.getPortletPlaceholder().getCanvas().dispose()}}},attachPortletHtml:function(h,g,d){var f=h.access();var c=f.find(".portlet.portlet-canvas");var e=false;for(var a=0;a<c.length;a++){var b=c[a];if($(b).attr("order")>d.order){h.addObjectBeforePosition(g,b);e=true;break}}if(e==false){h.addObject(g)}g.access().attr("order",d.order)},activatePortlet:function(b){var c=b.portlet;if(b.loaded){return}var f=new PrebuiltCanvas(b.position);var e=new PortletCanvas(c.name);this.attachPortletHtml(f,e,b);e.setAttribute("portlet",c.name);var d=new PortletPlaceholder(e);c.setPortletPlaceholder(d);b.loaded=true;try{c.run()}catch(a){log(a)}},deactivatePortlet:function(a){var b=a.portlet;if(!a.loaded){return}a.loaded=false;if(b.getPortletPlaceholder()){b.getPortletPlaceholder().paintCanvas("")}}});DefaultErrorHandler=Class.extend({handle:function(b,a){if(typeof b=="object"){if(b.Exception=="RequestInterrupted"){return}if(b.Exception!=undefined){alert("["+b.Exception+"Exception] "+b.Message)}else{alert(b)}return}alert("Error caught: "+b)}});Request=Class.extend({init:function(a,c,d,b){if(a!=undefined){a=a.trim()}this.name=a;this.type=c;if(d==undefined){d=Array()}if(b==undefined){b=Array()}this.params=d;this.hiddenParams=b;this.setParams(d);this.demanded=true},isDemanded:function(){return this.demanded},demand:function(a){this.demanded=a},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.params=a},getParam:function(b,a){if(this.params[b]==undefined){return a}return this.params[b]},getParams:function(){return this.params},addHash:function(a){window.location.hash=a},setName:function(a){this.name=a},getName:function(){return this.name},getType:function(){return this.type}});Request.setProactive=function(a,c){if(c==undefined){c=window.location.hash}if(Request.proactive==undefined){Request.proactive={}}Request.proactive[c]=a};Request.getProactive=function(a){if(a==undefined){a=window.location.hash}if(Request.proactive==undefined){Request.proactive={}}return Request.proactive[a]};RequestHandler=Class.extend({init:function(){this.currentPage=undefined;this.requestInterrupted=false;this.autoRouteDefault=true;this.systemProperties=SingletonFactory.getInstance(Application).getSystemProperties();this.errorHandler=new DefaultErrorHandler()},setErrorHandler:function(a){this.errorHandler=a},handleRequest:function(a){if(this.currentPage!=undefined){this.requestInterrupted=true}else{this.requestInterrupted=false}this.routeRequest(a);this._handleRequest(a)},_handleRequest:function(d){var a=d.getName();var e=SingletonFactory.getInstance(Page);this.currentPage=e;e.setRequest(d);try{e.onBegin(a)}catch(c){log(c);this.errorHandler.handle(c,"onBegin")}try{e.run()}catch(c){log(c);this.errorHandler.handle(c,"run")}try{e.onEnd()}catch(c){log(c);this.errorHandler.handle(c,"onEnd")}this.currentPage=undefined;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("HtmlRendered");if(this.requestInterrupted==true){throw {Exception:"RequestInterrupted"}}},prepareForRequest:function(){if(!("hash" in window.location)){window.location.__defineGetter__("hash",function(){if(location.href.indexOf("#")==-1){return""}return location.href.substring(location.href.indexOf("#"))});window.location.__defineSetter__("hash",function(a){if(location.href.indexOf("#")==-1){location.href+=a}location.href=location.substring(0,location.href.indexOf("#"))+a})}},assembleRequest:function(){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("page.default","Home");if(window.location.hash==""){var f=new Request(a,null,null,{page:""});var e=SingletonFactory.getInstance(Subject);return f}else{var g=window.location.hash;g=g.substring(1,g.length);if(g.charAt(0)=="!"){g=g.substring(1,g.length)}var d=g.split("/");var h=new Array();var b="";var c=0;while(c<d.length){if(d[c]!=""){h[d[c]]=d[c+1];if(d[c]=="page"){b=h[d[c]]}c=c+2}else{c=c+1}}var f=new Request(b,null,h);f.demand(false);return f}},routeRequest:function(c){if(Request.getProactive()==false&&c.isDemanded()==false){return}var e=window.location.hash;var d="!";if((c.getName()==undefined||c.getName()=="")&&this.autoRouteDefault){var a=this.systemProperties.get("page.default");if(a==undefined){throw {Exception:"NotFound",Message:"Both default page and parameter page is undefined"};return undefined}c.setName(a);c.hiddenParams.page=""}c.getParams()["page"]=c.getName();for(var b in c.getParams()){if(c.hiddenParams.hasOwnProperty(b)){continue}if(typeof c.getParams()[b]=="function"||typeof c.getParams()[b]=="object"){continue}value=c.params[b];if(value!=undefined){d+=b+"/"+value+"/"}else{d+=b+"/"}}d=d.substring(0,d.length-1);if(!("hash" in window.location)){window.location.__defineGetter__("hash",function(){if(location.href.indexOf("#")==-1){return""}return location.href.substring(location.href.indexOf("#"))});window.location.__defineSetter__("hash",function(f){if(location.href.indexOf("#")==-1){location.href+=f}location.href=location.substring(0,location.href.indexOf("#"))+f})}Request.setProactive(true,"#!"+d);window.location.hash=d}});Bootstrap=Class.extend({run:function(){this.registerObserver();this.setupRequestHandler();this.executeRequest()},onRequestRoute:function(a){this.requestHandler.handleRequest(a)},onNeedAssembleRequest:function(a){this.executeRequest()},setupRequestHandler:function(){this.requestHandler=new RequestHandler()},executeRequest:function(){this.requestHandler.prepareForRequest();var b=this.requestHandler.assembleRequest();if(b!=undefined){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RequestRoute",b)}}}).implement(ObserverInterface);utils_items={};function generateId(a){if(!isPropertySet(utils_items,a)){setProperty(utils_items,a,0)}setProperty(utils_items,a,getProperty(utils_items,a)+1);return a+"-"+getProperty(utils_items,a)}function generateEvent(a,c){var b=SingletonFactory.getInstance(Subject);b.notifyEvent(a,c)}function setProperty(a,c,b){a.prop=b}function getProperty(a,b){return a.prop}function isPropertySet(a,b){if(typeof a.prop!="undefined"){return true}return false}Array.max=function(a){return Math.max.apply(Math,a)};Array.min=function(a){return Math.min.apply(Math,a)};Array.nextBigger=function(d,c){var a=Number.MAX_VALUE;for(var b=0;b<d.length;b++){if(d[b]>c&&d[b]<a){a=d[b]}}return a};Array.nextLess=function(d,c){var a=Number.MIN_VALUE;for(var b=0;b<d.length;b++){if(d[b]<c&&d[b]>a){a=d[b]}}return a};function dialog(l,c,n){var a=Math.floor(Math.random()*101);var b=document.createElement("div");var k=document.createElement("div");var p=document.createElement("div");var m=document.createElement("div");var j=document.createElement("label");var h=new Image("images/close.png");p.appendChild(j);b.appendChild(k);b.appendChild(p);b.appendChild(m);b.setAttribute("id","dialog_div_"+a);k.setAttribute("id","dialog_header_"+a);p.setAttribute("id","dialog_content_"+a);m.setAttribute("id","dialog_control_"+a);j.setAttribute("id","dialog_lbl_"+a);document.getElementsByTagName("body")[0].appendChild(b);$("#dialog_lbl_"+a).html(c);$("#dialog_header_"+a).html(l+h.toHtml());if(n!=null){var g="";for(var f=0;f<n.length;f++){g+=n[f].toHtml()}$("#dialog_control_"+a).html(g)}$("#dialog_div_"+a).addClass("alert_div");$("#dialog_header_"+a).addClass("alert_header");$("#dialog_content_"+a).addClass("alert_content");$("#dialog_control_"+a).addClass("alert_content");h.setStyle("float","right");h.setStyle("margin-right","5px");var d=$(window).width();var e=$(window).height();var o=(e-$("#dialog_div_"+a).height())/2;var q=(d-$("#dialog_div_"+a).width())/2;$("#dialog_div_"+a).css("top",o);$("#dialog_div_"+a).css("left",q);$("#dialog_div_"+a).draggable();$("#dialog_div_"+a).css("zIndex","1000");h.implement(new CloseDialog(a));return a}function alertMsg(k,a){var f=document.createElement("div");var g=document.createElement("div");var j=document.createElement("div");var e=document.createElement("div");var h=document.createElement("button");var b=document.createElement("label");j.appendChild(b);e.appendChild(h);f.appendChild(g);f.appendChild(j);f.appendChild(e);f.setAttribute("id","alert_div");g.setAttribute("id","alert_header");j.setAttribute("id","alert_content");e.setAttribute("id","alert_control");h.setAttribute("id","alert_btn");b.setAttribute("id","alert_lbl");document.getElementsByTagName("body")[0].appendChild(f);$("#alert_lbl").html(a);$("#alert_header").html(k);$("#alert_btn").html("OK");$("#alert_div").addClass("alert_div");$("#alert_header").addClass("alert_header");$("#alert_content").addClass("alert_content");$("#alert_control").addClass("alert_content");var c=$(window).width();var d=$(window).height();var l=(d-$("#alert_div").height())/2;var m=(c-$("#alert_div").width())/2;$("#alert_div").css("top",l);$("#alert_div").css("left",m);$("#alert_div").draggable();$("#alert_div").css("zIndex","1000");$("#alert_btn").addClass("ij-button");$("#alert_btn").bind("click",function(){$("#alert_div").remove()})}function trimOff(b,c){b=b.trim();if(b.length>c){b=b.substr(0,c);var a=b.lastIndexOf(" ");if(a!=-1){b=b.substr(0,a)+"..."}}return b}function log(a){if(window.console!=undefined){console.log(a);console.log(arguments.callee.caller)}}Memcached=Class.extend({init:function(){this.properties=SingletonFactory.getInstance(Application).getSystemProperties()},getEntryName:function(a){return"memcached."+a},store:function(a,c){var b=this.getEntryName(a);this.properties.set(b,c)},retrieve:function(a){var b=this.getEntryName(a);return this.properties.get(b)},clear:function(a){var b=this.getEntryName(a);this.properties.set(b,undefined)}});InlineEditorInterface=InterfaceImplementor.extend({implement:function(a){a.prototype.design=a.prototype.design||function(b){b.find(".dynamic-edit-content-button-fix").click(function(e){var d=$(this).parent();var f=d.siblings(".dynamic-edit-form");d.hide();f.show();var c=$.trim(d.find(".dynamic-edit-content-value").html());f.children("input").focus();f.children("input").val(c)});b.find(".dynamic-edit-content-button-cancel").click(function(d){var c=$(this).parent();var e=c.siblings(".dynamic-edit-content");c.children("input").val("");c.hide();e.show()});b.find("[level]").each(function(){var c=$(this).attr("level");$(this).find(".dynamic-edit-main").css("margin-left",30)});$(".dynamic-edit-content-value").filter(function(){return $(this).text()==""}).each(function(){var c=$(this).parent();c.hide();c.siblings(".dynamic-edit-form").show()})};a.prototype.encapData=a.prototype.encapData||function(c,b,f,e){for(var d in c){c[d]={tbl:b,id:f,val:c[d],level:e}}}}});AjaxInterface=InterfaceImplementor.extend({implement:function(b){var a=function(f,j,d,e){var c=f.data;if(f.status){if(j!=undefined){try{j.call(undefined,c)}catch(h){log(h+" - "+e)}}}else{if(c=="exception.PrivilegeException"){var g=SingletonFactory.getInstance(Subject);g.notifyEvent("NotifyError",f.msg)}else{if(d!=undefined){try{d.call(undefined,f.msg,f.data)}catch(h){log(h)}}}}};b.prototype.onAjax=b.prototype.onAjax||function(q,u,x,d,z,o,f){if(d==undefined){d="GET"}var j=z.onSuccess;var h=z.onFailure;var p=z.onAccessDenied;var y="ajax."+q+"."+u;for(var w in x){var m=x[w];y+="."+w+"."+m}var s=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");var e=s+"/"+q+"/"+u;if(d=="GET"&&o==true){var l=SingletonFactory.getInstance(Memcached);var r=l.retrieve(y);if(r!=undefined){var c=new Date();var n=r.timestamp;if((c.getTime()-n)<f){var g=SingletonFactory.getInstance(Subject);g.notifyEvent("AjaxQueryFetched",{result:r.ret,url:e});a(r.ret,j,h,e);return}else{l.clear(y)}}}var g=SingletonFactory.getInstance(Subject);$.ajax({dataType:"json",url:e,type:d,data:x,success:function(v){g.notifyEvent("AjaxFinished");if(v!=null){if(d=="GET"&&o==true){var A=SingletonFactory.getInstance(Memcached);var k=new Date();A.store(y,{ret:v,timestamp:k.getTime()})}g.notifyEvent("AjaxQueryFetched",{result:v,url:e});a(v,j,h,e)}},error:function(k,v){g.notifyEvent("AjaxFinished")},statusCode:{403:function(){if(p!=undefined){p.call(undefined)}}}})}}});BKBootstrap=Bootstrap.extend({setupRequestHandler:function(){this.requestHandler=new RequestHandler();this.requestHandler.setErrorHandler(new BKErrorHandler())}}).implement(ObserverInterface);BKErrorHandler=DefaultErrorHandler.extend({handle:function(d,c){log(d+" - "+c);if(typeof d=="object"){if(d.Exception=="NotFound"){var b=new Request("ErrorPage",null,{code:404});var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RequestRoute",b)}else{if(d.Exception=="RequestInterrupted"){return}}}}});SystemMessagePlugin=Class.extend({init:function(){this.name="SystemMessagePlugin";this.fetched=false},onSystemPropertyChanged:function(a){if(a=="user.login"){this.fetch()}},onPageBegan:function(){this.fetch()},fetch:function(){if(this.fetched){return}this.fetched=true;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("NotifyMessage","Hin ti h thng Asking.vn & BKProfile.com ang gp 1 s vn  v k thut. Chc nng <b>ng nhp</b> ti khon c v <b>ng k</b> s b kha.  ng nhp, bn s dng username & mt khu sau: <b>asking.vn</b> / <b>123456</b>. Chng ti  tin hnh tm hiu nguyn nhn v s thng bo li cho bn trong vi ngy ti. <br />Cm n cc bn");var c=SingletonFactory.getInstance(Application).getSystemProperties();var a=c.get("user.login");if(a!=1){return}this.onAjax("user-ajax","get-system-message",{},"GET",{onSuccess:function(d){if(d!=null){var e=SingletonFactory.getInstance(Subject);e.notifyEvent("NotifyMessage",d.msg)}}})}}).implement(PluginInterface).implement(AjaxInterface);InputMethodPlugin=Class.extend({init:function(){this.name="InputMethodPlugin"},onInitInputMethod:function(){var a=new AVIM();AVIMInit(a);a.attachEvt(document,"keydown",a.keyDownHandler,true);a.attachEvt(document,"keypress",function(c){var b=a.keyPressHandler(c);if(b==false){if(a.is_ie){window.event.returnValue=false}else{c.preventDefault()}}},true);if(!a.support||a.isKHTML){$("#AVIMControl").addClass("disable");$("#AVIMControl a").addClass("disable");$("#AVIMControl input").attr("disabled","disabled");$("#AVIMControl").attr("title","Trnh duyt ca bn khng h tr b g ting Vit");$("#AVIMControl-Button").hide()}}}).implement(PluginInterface);ScrollPlugin=Class.extend({init:function(){this.name="ScrollPlugin"},onHtmlRendered:function(){$(window).scroll(function(){if($(window).scrollTop()+$(window).height()==$(document).height()){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("GetMoreResultRows")}})},onEnd:function(){$(window).unbind("scroll")}}).implement(PluginInterface);AjaxLoadingPlugin=Class.extend({init:function(){this.name="AjaxLoadingPlugin";this.ajaxCount=0},onAjaxBegan:function(){this.ajaxCount++;var e="#effective-area #AjaxLoadIndicator";if($(e).length==0){$("#effective-area").append('<div id="AjaxLoadIndicator" class="ajax-load-indicator"><img src="resource/images/ajax-loader-1.gif" /></div>')}var a=32;var b=32;var d=(screen.width/2)-(a/2);var c=(screen.height/2)-(b/2);$(e).attr("style","position: fixed; left: "+d+"px; top: "+c+"px;");$(e).show()},onAjaxFinished:function(){if(this.ajaxCount>0){this.ajaxCount--}if(this.ajaxCount==0){var a="#effective-area #AjaxLoadIndicator";$(a).hide()}}}).implement(PluginInterface);GetAnnouncementPlugin=Class.extend({init:function(){this.name="GetAnnouncementPlugin"},onBegin:function(){this.onGetAnnouncement();this.startInterval(300*1000,this.onGetAnnouncement)},onGetAnnouncement:function(){this.onAjax("ajax","get-announcement",{},"GET",{onSuccess:function(a){if(a==undefined||a==""){return}var b=tmpl("GetAnnouncementPluginContainer",{});if($("div#GetAnnouncementPlugin").length<=0){$('div.extension-point[extensionName="PostTop"]:first').prepend(b)}$("div#GetAnnouncementPlugin").html(a);$("div#GetAnnouncementPlugin").fadeOut(60000)}})},onEnd:function(){this.stopInterval()}}).implement(PluginInterface).implement(IntervalTimerInterface).implement(AjaxInterface);GlobalNotificationPlugin=Class.extend({init:function(){this.name="GlobalNotificationPlugin"},onCloseGlobalNotify:function(){$("div#action_msg").stop().animate({opacity:"100"}).hide()},onNotifyGlobal:function(a){$("#msg_content").html(a);$("div#action_msg").stop().animate({opacity:"100"});$("div#action_msg").show().fadeOut(15000)}}).implement(PluginInterface).implement(IntervalTimerInterface).implement(AjaxInterface);PopupPlugin=Class.extend({init:function(){this.name="PopupPlugin";this.popup=new Popup()},onOperationNotSupported:function(a){this.popup.msg("Chc nng ny ang trong qu trnh xy dng. Bn vui lng th li sau")},onPopupRemove:function(a){var b=a.id;this.popup.remove(b)},onShowPopup:function(a){this.popup.add(a.id,a.title,a.content)},onNotifyMessage:function(a){this.popup.msg(a)},onNotifyError:function(a){this.popup.error(a)}}).implement(PluginInterface);KeepAlivePlugin=Class.extend({init:function(){this.name="KeepAlivePlugin"},onBegin:function(){this.onKeepAlive();this.startInterval(5*60*1000,this.onKeepAlive)},onKeepAlive:function(){this.onAjax("ajax","check-user-status",{},"GET",{onSuccess:function(a){}})},onEnd:function(){this.stopInterval()}}).implement(PluginInterface).implement(IntervalTimerInterface).implement(AjaxInterface);AnswerShowBioPlugin=Class.extend({init:function(){this.name="AnswerShowBioPlugin"},onBegin:function(){this.catches=undefined},onShowBio:function(b){var a=SingletonFactory.getInstance(Memcached);var d="question.catchword";if(b.qid!=this.qid){this.catches=undefined}a.clear(d);this.qid=b.qid;var c=this;if(c.catches==undefined){c.onAjax("question","get-all-catchwords-question",{qid:c.qid},"GET",{onSuccess:function(e){a.store(d,e);c.catches=e;c.renderBios()}},true,300000)}else{c.renderBios()}},renderBios:function(){var a=this;$('.extension-point[extensionName="AnswerProfileName"]').each(function(b,d){if($(d).find('[flag="AnswerShowBio"]').length>0){return}$(d).append('<span flag="AnswerShowBio"></span>');var c=$(d).attr("extensionId");a.renderBio(d,c)})},renderBio:function(b,a){var c=this;this.onAjax("user-ajax","get-all-expertises",{id:a},"GET",{onSuccess:function(l){for(var g in c.catches){var n=c.catches[g];var h=n.id;for(var f in l){var m=l[f];for(var e in m){var o=m[e];if(h==o.catchWordId){var d=o.explanation;$(b).prepend(tmpl("AnswerShowBioTmpl",{content:d}));return}}}}}},true,300000)}}).implement(PluginInterface).implement(AjaxInterface);AnswerEditBioPlugin=Class.extend({init:function(){this.name="AnswerEditBioPlugin"},onBegin:function(){this.catches=undefined},onRenderBioEditLink:function(a){var b=a.qid;$('.extension-point[extensionName="AnswerProfileName"]').each(function(f,h){if($(h).find('[flag="AnswerEditBio"]').length>0){return}var g=SingletonFactory.getInstance(Application).getSystemProperties();var c=g.get("user.login");if(c==1){var e=g.get("user.id");var d=$(h).attr("extensionID");if(e==d){$(h).append(tmpl("AnswerEditBioTmpl",{qid:b}))}}})},onEditBioClick:function(d){this.qid=d.qid;var e=this;if(this.catches==undefined){var a="question.catchword";var c=SingletonFactory.getInstance(Memcached);var b=c.retrieve(a);if(b!=undefined){this.catches=b;this.prepareShowingBioEditor()}else{e.onAjax("question","get-all-catchwords-question",{qid:e.qid},"GET",{onSuccess:function(f){c.store(a,f);e.catches=f;e.prepareShowingBioEditor()}},true,300000)}}else{this.prepareShowingBioEditor()}},prepareShowingBioEditor:function(){var b=this;var a=SingletonFactory.getInstance(Memcached);var c=a.retrieve("user.expertises");this.currentExpertises=c;if(c==undefined){this.onAjax("user-ajax","get-all-expertises",{},"GET",{onSuccess:function(d){a.store("user.expertises",d);b.currentExpertises=d;b.showBioEditor()}},true,300000)}else{this.showBioEditor()}},showBioEditor:function(){var d=this;var a=Array();var g=d.currentExpertises;for(var e in d.catches){var p=false;var n=d.catches[e];var f=n.id;for(var c in g){var h=g[c];for(var b in h){var o=h[b];if(f==o.catchWordId){if(h[b].explanation==undefined){h[b].explanation=""}var m=tmpl("AnswerBioEditorExplanationTmpl",{expertiseName:h[b].catchWord,expertiseExplanation:h[b].explanation});a.push({id:o.catchWordId,expertiseName:h[b].catchWord,expertisePlaceholder:m});p=true}}}if(!p){var m=tmpl("AnswerBioEditorExplanationTmpl",{expertiseExplanation:undefined,expertiseName:n.catchWord});a.push({id:n.id,expertiseName:n.catchWord,expertisePlaceholder:m})}}var l=SingletonFactory.getInstance(Subject);if(a.length==0){l.notifyEvent("NotifyMessage","Cu hi hin ti khng thuc ch  no. Do  bn cha th thay i ch thch ngay by gi")}else{l.notifyEvent("ShowPopup",{id:"AnswerEditBio",title:"Sa ch thch cho cu tr li",content:tmpl("AnswerBioEditorTmpl",{expertises:a})})}},onBioEditorEditClick:function(c){var d=c.event.target;var e=c.mode;var a=$(d).parent();var b=$(a).find(".explanationPlaceholder").html();$(a).html(tmpl("AnswerBioEditorExplanationEditTmpl",{content:b,mode:e}));$(a).find("textarea").focus()},onBioEditCancelClick:function(b){var c=b.target;var a=$(c).parent();var d=$(a).find("textarea");$(a).html(tmpl("AnswerBioEditorExplanationTmpl",{expertiseExplanation:$(d).attr("oldVal"),expertiseName:$(a).attr("expertiseName")}))},onBioEditUpdateClick:function(d){var e=d.event.target;var g=d.mode;var c=$(e).parent();var f=$(c).find("textarea");var b=$(f).val();var a=$(f).attr("oldVal");if(b==a){$(c).html(tmpl("AnswerBioEditorExplanationTmpl",{expertiseExplanation:a,expertiseName:$(c).attr("expertiseName")}))}else{var h=$(c).attr("expertiseID");if(g=="update"){this.onAjax("user-ajax","update-single-expertise",{id:h,explanation:b},"POST",{})}else{this.onAjax("user-ajax","add-single-expertise",{id:h,explanation:b},"POST",{})}$(c).html(tmpl("AnswerBioEditorExplanationTmpl",{expertiseExplanation:b,expertiseName:$(c).attr("expertiseName")}))}}}).implement(PluginInterface).implement(AjaxInterface);AskUserPlugin=Class.extend({init:function(){this.name="AskUserPlugin"},onMakeNewTargetedQuestion:function(d){var b=SingletonFactory.getInstance(Subject);var c=$(d.target).parents(".stat_outer:first").siblings(".user-name").html();var a=SingletonFactory.getInstance(Page).getRequest().getParam("id");b.notifyEvent("MakeNewQuestion",{profile:[{name:c,id:a}]})},onHtmlUpdated:function(){$('.extension-point[extensionName="BriefInfoControl"]').each(function(){var d=SingletonFactory.getInstance(Application).getSystemProperties();var a=d.get("user.login");var b=undefined;if(a==1){var c=d.get("user.id");b=SingletonFactory.getInstance(Page).getRequest().getParam("id");if(c==b){return}}else{return}if($(this).find('.[flag="AskUser"]').length>0){return}$(this).append(tmpl("AskUserPluginTmpl",{}))})}}).implement(PluginInterface);AutocompletePlugin=Class.extend({init:function(){this.name="AutocompletePlugin"},onNeedAutocomplete:function(d){var b=SingletonFactory.getInstance(Subject);var a=d.autocompleteSource;var e=d.autocompleteObject;var c=d.type;if(c==undefined){c="Expertise"}if(d.fetchSourceCallback!=undefined){b.notifyEvent(d.fetchSourceCallback)}$(e).autocomplete({source:function(g,h){var f=$(e).val();g.q=f;g.wt="json";$.getJSON(a,g,function(l){var j=[];l=l.response.docs;$.each(l,function(m,n){if(c=="Expertise"){j.push({label:n["catch"],value:n.catch_id,type:"expertise",follow:n.catch_follow})}else{if(c=="Question"){j.push({label:n.question,value:n.questionId,type:"question",catchwords:n.catchWords})}else{j.push({label:n.full_name,value:n.profile_id,type:"person",catchwords:n.expertise,avatar:n.avatar,ans:n.expertise_total_ans_count})}}});if(c=="RecommendPerson"){var k="Khng tm thy? Mi tr li qua email";j.push({label:k,value:k,type:"email"})}h(j)})},focus:function(g,f){if(d.focusCallback!=undefined){b.notifyEvent(d.focusCallback,{ui:f})}},select:function(g,f){if(d.selectCallback!=undefined){b.notifyEvent(d.selectCallback,{ui:f})}},result:function(g,f){if(d.resultCallback!=undefined){b.notifyEvent(d.resultCallback,{ui:f})}}})}}).implement(PluginInterface);AutocompleteSearcherPlugin=Class.extend({init:function(){this.name="AutocompleteSearcherPlugin"},onChangeAutocompleteType:function(c){var b=c.type;var d=c.target;var a=SingletonFactory.getInstance(Subject);if(b=="person"){a.notifyEvent("AttachFocusDetection",{target:$(d),defaultValue:"Nhp vo t kha cho ngi bn mun tm"})}else{a.notifyEvent("AttachFocusDetection",{target:$(d),defaultValue:"Tm kim trc khi t cu hi"})}a.notifyEvent("AttachAutocompleteEngine",c)},onAttachAutocompleteEngine:function(a){this.autocompleteEngine=SingletonFactory.getInstance(AutocompleteEngineFactory).build(a.type);$(a.target).autocomplete(this.autocompleteEngine)},onHtmlRendered:function(){var b=$("#SearcherPortlet-Select option:selected");var c=b.attr("value");var a=SingletonFactory.getInstance(Subject);if(c==1){a.notifyEvent("ChangeAutocompleteType",{type:"person",target:$("#SearcherPortlet-Input")})}else{a.notifyEvent("ChangeAutocompleteType",{type:"question",target:$("#SearcherPortlet-Input")})}$("#friends").click(function(){$("#SearcherPortlet-Input").focus()});$(".remove",document.getElementById("friends")).live("click",function(){$(this).parent().remove();if($("#friends span").length===0){$("#SearcherPortlet-Input").css("top",0)}})}}).implement(PluginInterface);AutocompleteEngineFactory=Class.extend({build:function(a){if(a=="person"){return new PersonAutocomplete()}else{if(a=="question"){return new QuestionAutocomplete()}else{return new QuestionOnlyAutocomplete()}}}});PersonAutocomplete=Class.extend({source:function(a,b){var c=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");$.getJSON(c+"/person/person",{wt:"json",rows:"10",q:a.term},function(e){e=e.response.docs;var d=[];$.each(e,function(f,g){d.push({label:g.full_name,value:g.profile_id,type:"person",catchwords:g.expertise,avatar:g.avatar,ans:g.expertise_total_ans_count})});b(d)})},select:function(b,a){onClickPerson(a.item.id)},change:function(){$("#toPerson").css("top",2)}});QuestionAutocomplete=Class.extend({source:function(a,b){var c=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");$.getJSON(c+"/autocomplete/autocomplete",{wt:"json",rows:"8",q:a.term},function(f){f=f.response.docs;var d=[];$.each(f,function(g,h){if(h.catch_id!=undefined){d.push({label:h["catch"],value:h.catch_id,type:"expertise",follow:h.catch_follow})}else{if(h.questionId!=undefined){d.push({label:h.question,value:h.questionId,type:"question",catchwords:h.catchWords})}}});var e=a.term;d.push({label:e,value:e,type:"ask"});b(d)})},select:function(d,c){var b=c.item.value;if(c.item.type==="expertise"){moveToTopic(c.item.id)}else{if(c.item.type=="ask"){makeQuestion(b)}else{try{var a=$("a[question='"+escape(b)+"']");moveToAQuestion(a.attr("question_id"))}catch(d){}}}},change:function(){$("#SearcherPortlet-Input").css("top",2)}});QuestionOnlyAutocomplete=Class.extend({source:function(a,b){var c=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");$.getJSON(c+"/autocomplete/question",{wt:"json",rows:"5",q:a.term},function(f){f=f.response.docs;var d=[];$.each(f,function(g,h){d.push({label:h.question,value:h.questionId,type:"question",catchwords:h.catchWords})});var e=a.term;d.push({label:e,value:e,type:"ask"});b(d)})},select:function(d,c){var b=c.item.value;if(c.item.type==="expertise"){moveToTopic(c.item.id)}else{if(c.item.type=="ask"){makeQuestion(b)}else{try{var a=$("a[question='"+escape(b)+"']");moveToAQuestion(a.attr("question_id"))}catch(d){}}}},change:function(){$("#SearcherPortlet-Input").css("top",2)}});function onClickPerson(c){var a=SingletonFactory.getInstance(Subject);var b=new Request("Profile",undefined,{id:c});a.notifyEvent("RequestRoute",b)}function moveToAQuestion(a){var d=a;var b=SingletonFactory.getInstance(Subject);var c=new Request("Question","donganh",{qid:d});b.notifyEvent("RequestRoute",c)}function moveToTopic(c){var a=SingletonFactory.getInstance(Subject);var b=new Request("Topic",undefined,{id:c});a.notifyEvent("RequestRoute",b)}function makeQuestion(b){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("MakeNewQuestion",{question:b})}AvatarEditPlugin=Class.extend({init:function(){this.name="AvatarEditPlugin"},onReloadPlugin:function(){this.renderAvatar()},onAvatarInputChange:function(){$("#AvatarUploaderContainer").submit()},renderAvatar:function(){$('.extension-point[extensionName="avatar"]').each(function(b,c){if($(c).find('div[flag="AvatarUploader"]').length>0){return}var a=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");$(c).append(tmpl("AvatarUploader",{root:a}));$("#AvatarUploaderContainer").submit(function(){var d=$("#avatar-upload-frame");$(d).one("load",function(){var e=d.contents().find("body").html();$("AvatarUploaderContainer").find('input[type="submit"]').attr("disabled","");var f=$.parseJSON(e);$(c).find("#AvatarUploaderErrorPlaceholder").html("");if(!f.status){errors={};errors.errors=f.msg;$(c).find("#AvatarUploaderErrorPlaceholder").html(tmpl("AvatarUploaderError",errors))}else{$("#BriefInfoEditPortlet-Avatar").find("img").remove();$("#BriefInfoEditPortlet-Avatar").html('<img style="width: 100px" src="resource/avatar/'+f.data+'" />');var g=SingletonFactory.getInstance(Subject);g.notifyEvent("NotifyGlobal","Bn  thay i avatar thnh cng. Nu nh cha hin ra, hy n F5  thy s thay i")}})})})},onHtmlUpdated:function(){this.renderAvatar()}}).implement(PluginInterface);FollowUserPlugin=Class.extend({init:function(){this.name="FollowUserPlugin"},onUnfollowUser:function(c){var b=c.uid;var a=c.containerID;this.onAjax("user-ajax","unfollow-user",{uid:b},"POST",{onSuccess:function(d){$("."+a).each(function(){if($(this).attr("uid")==b){$(this).html(tmpl("FollowUserTmpl-Follow",{uid:b,containerID:a}))}});var e=SingletonFactory.getInstance(Subject);e.notifyEvent("FollowersChange",{})}})},onFollowUser:function(c){var b=c.uid;var a=c.containerID;this.onAjax("user-ajax","follow-user",{uid:b},"POST",{onSuccess:function(d){$("."+a).each(function(){if($(this).attr("uid")==b){$(this).html(tmpl("FollowUserTmpl-Unfollow",{uid:b,containerID:a}))}});var e=SingletonFactory.getInstance(Subject);e.notifyEvent("FollowersChange",{})}})},onFollowUserList:function(d){var c=SingletonFactory.getInstance(Application).getSystemProperties();var b=c.get("user.id");var a=d.containerID;var e=this;$("div."+a).each(function(){var g=$(this);var f=g.attr("uid");if(b==f){return}e.onAjax("user-ajax","is-user-following-user",{uid:f},"GET",{onSuccess:function(j){var h="";if(j==true){h="Unfollow"}else{h="Follow"}g.html(tmpl("FollowUserTmpl-"+h,{uid:f,containerID:a}))}})})},onReloadPlugin:function(){this.fetched=false},onHtmlUpdated:function(e){var d=SingletonFactory.getInstance(Application).getSystemProperties();var a=d.get("user.login");var b=undefined;if(a==1){var c=d.get("user.id");b=SingletonFactory.getInstance(Page).getRequest().getParam("id");if(c==b){return}}else{return}if(this.fetched==true){this.renderWidget(this.isFollow,b);return}var f=this;this.onAjax("user-ajax","is-user-following-user",{uid:b},"GET",{onSuccess:function(g){f.fetched=true;f.renderWidget(g,b)}})},renderWidget:function(c,b){var a="";this.isFollow=c;if(c==true){a="Unfollow"}else{a="Follow"}$('.extension-point[extensionName="BriefInfoControl"]').each(function(){if($(this).find('[flag="FollowUser"]').length>0){return}$(this).append(tmpl("FollowUserTmpl",{uid:b}));$(".followuser_container").html(tmpl("FollowUserTmpl-"+a,{uid:b,containerID:"followuser_container"}))})}}).implement(PluginInterface).implement(AjaxInterface);UserTabGeneratorPlugin=Class.extend({init:function(){this.name="UserTabGeneratorPlugin";this.ids=new Array("User","UserFeed","UserQuestion","UserTarget","UserAnswer","UserBookmark","UserReportedQuestions")},onHtmlUpdated:function(){var e=SingletonFactory.getInstance(Page).getRequest();var f=e.getParam("page");var d=this;if($("#UserTabGeneratorPlaceholder").length<=0){var b=$(tmpl("UserTabGeneratorPlaceholder-Tmpl",{}));$('.extension-point[extensionName="ProfileTab"]').append(b);var c=0;$('.extension-point[extensionName="ProfileTab"]').find(".user-tab a").each(function(){c++;if(d.ids[c-1]!=f){$(this).removeClass("active")}else{$(this).addClass("active")}var g="userTab-"+c;$(this).attr("id",g);$(this).attr("onClick","generateEvent('UserTabGeneratorChange',{id:'"+g+"'})")})}else{for(var a=0;a<this.ids.length;a++){if($("#userTab-"+(a+1)).hasClass("active")){$("#userTab-"+(a+1)).removeClass("active")}if(!$("#userTab-"+(a+1)).hasClass("active")){$("#userTab-"+(a+1)).addClass("active")}}for(var a=0;a<this.ids.length;a++){if(this.ids[a]==f){$("#userTab-"+(a+1)).addClass("active")}else{$("#userTab-"+(a+1)).removeClass("active")}}}},onEnd:function(){if($("#UserTabGeneratorPlaceholder").length>0){$("#UserTabGeneratorPlaceholder").remove()}}}).implement(PluginInterface);UserEditMenuGeneratorPlugin=Class.extend({init:function(){this.name="UserEditMenuGeneratorPlugin";this.ids=new Array("PartnerProfileEdit","UserAvatarEdit","UserExpertiseEdit","UserInterestEdit")},onHtmlUpdated:function(){var e=SingletonFactory.getInstance(Page).getRequest();var f=e.getParam("page");var d=this;if($("#UserEditMenu").length<=0){var b=$(tmpl("UserEditMenuTmpl",{}));$('.extension-point[extensionName="MiddleMain"]').append(b);var c=0;$('.extension-point[extensionName="MiddleMain"]').find(".user-tab a").each(function(){c++;if(d.ids[c-1]!=f){$(this).removeClass("active")}else{$(this).addClass("active")}var g="userEditTab-"+c;$(this).attr("id",g)})}else{for(var a=0;a<this.ids.length;a++){if($("#userEditTab-"+(a+1)).hasClass("active")){$("#userEditTab-"+(a+1)).removeClass("active")}if(!$("#userEditTab-"+(a+1)).hasClass("active")){$("#userEditTab-"+(a+1)).addClass("active")}}for(var a=0;a<this.ids.length;a++){if(this.ids[a]==f){$("#userEditTab-"+(a+1)).addClass("active")}else{$("#userEditTab-"+(a+1)).removeClass("active")}}}if(e.getParam("msg")=="reg_complete"){$("#UserEditMenu-Msg").html('<div class="green_box">Qu trnh ng k  hon tt. Bn c th sa thng tin c nhn ngay by gi.<br /><a href="#" class="bold">Click vo y  quay li trang ch</a></div>')}},onEnd:function(){if($("#UserEditMenu").length>0){$("#UserEditMenu").remove()}}}).implement(PluginInterface);ProfileTabGeneratorPlugin=UserTabGeneratorPlugin.extend({init:function(){this.name="ProfileTabGeneratorPlugin";this.ids=new Array("Profile","ProfileFeed","ProfileQuestion","ProfileTarget","ProfileAnswer","ProfileBookmark","ProfileReportedQuestions")},onReloadPlugin:function(){if($("#ProfileTabGeneratorPlaceholder").length>0){$("#ProfileTabGeneratorPlaceholder").remove()}this.renderTab()},onHtmlUpdated:function(){this.renderTab()},renderTab:function(){var e=SingletonFactory.getInstance(Page).getRequest();var g=e.getParams();var f=e.getParam("page");if($("#ProfileTabGeneratorPlaceholder").length<=0){var h=g.id||undefined;var a={};if(h!=undefined){a.id=h}var b=$(tmpl("ProfileTabGeneratorPlaceholder-DATmpl",a));var d=0;var c=this;$('div.extension-point[extensionName="ProfileTab"]').each(function(){$(this).append(b);$(".user-tab-item").removeClass("active");$(this).find(".user-tab a").each(function(){d++;if(c.ids[d-1]==f){$(this).addClass("active")}var j="userTab-"+d;$(this).attr("id",j);$(this).addClass("user-tab-item")})})}},onEnd:function(){if($("#ProfileTabGeneratorPlaceholder").length>0){$("#ProfileTabGeneratorPlaceholder").remove()}}}).implement(PluginInterface);PartnerProfileTabGeneratorPlugin=UserTabGeneratorPlugin.extend({init:function(){this.name="PartnerProfileTabGeneratorPlugin";this.ids=new Array("PartnerProfile","PartnerProfileNews","PartnerProfileTarget","PartnerProfileAnswer")},onReloadPlugin:function(){if($("#MockupProfileTabGeneratorPlaceholder").length>0){$("#MockupProfileTabGeneratorPlaceholder").remove()}this.renderTab()},onHtmlUpdated:function(){this.renderTab()},renderTab:function(){var e=SingletonFactory.getInstance(Page).getRequest();var g=e.getParams();var f=e.getParam("page");if($("#MockupProfileTabGeneratorPlaceholder").length<=0){var h=g.id||undefined;var a={};if(h!=undefined){a.id=h}var b=$(tmpl("MockupProfileTabGenerator-Tmpl",a));var d=0;var c=this;$('div.extension-point[extensionName="MockupProfileTab"]').each(function(){$(this).append(b);$(".user-tab-item").removeClass("active");$(this).find(".user-tab a").each(function(){d++;if(c.ids[d-1]==f){$(this).addClass("active")}var j="userTab-"+d;$(this).attr("id",j);$(this).addClass("user-tab-item")})})}},onEnd:function(){if($("#MockupProfileTabGeneratorPlaceholder").length>0){$("#MockupProfileTabGeneratorPlaceholder").remove()}}}).implement(PluginInterface);ProfileSearchHeaderPlugin=Class.extend({init:function(){this.name="ProfileSearchHeaderPlugin"},setupParameters:function(){this.request=SingletonFactory.getInstance(Page).getRequest();this.label="";this.style="grey_title";switch(this.request.getParam("page")){case"ProfileQuestion":case"UserQuestion":this.label="Cc cu  hi";break;case"ProfileTarget":case"UserTarget":this.label="Cc cu c hi";break;case"ProfileAnswer":case"UserAnswer":this.label="Cc cu  tr li";break;case"Topic":this.label="Cc cu hi trong ch ";break;case"Introduce":this.label="Cc cu hi mi cp nht";this.style="browse_title";break}},onBegin:function(){this.setupParameters()},onReloadPlugin:function(){this.setupParameters()},onHtmlUpdated:function(){var a=this.label;var b=this.style;$('div.extension-point[extensionName="SearchResultTitle"]').each(function(){if($(this).find('[flag="ProfileSearchHeader"]').length>0){return}$(this).append(tmpl("ProfileSearchHeaderTmpl",{label:a,style:b}))})}}).implement(PluginInterface);TopMenuNavPlugin=Class.extend({init:function(){this.name="TopMenuNavPlugin"},onHtmlRendered:function(){var a=SingletonFactory.getInstance(Page);$("a[page]").removeClass("active");$('a[page="'+a.pagename+'"]').addClass("active")}}).implement(PluginInterface);QuestionFollowPlugin=Class.extend({init:function(){this.name="QuestionFollowPlugin"},}).implement(PluginInterface).implement(AjaxInterface);AnswerEditPlugin=Class.extend({init:function(){this.name="AnswerEditPlugin";this.app=SingletonFactory.getInstance(Application);this.props=this.app.getSystemProperties();this.root=this.app.getSystemProperties().get("host.root")},checkUserLogin:function(c,b){var d={};d.type=b;d.evtData=c;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",d)},onSubmitAnswer:function(a){this.checkUserLogin(a,"SubmitAnswer")},onLoginSuccess:function(b){var a=b.type;var c=b.evtData;if(a!=undefined&&c!=undefined){switch(a){case"SubmitAnswer":this.submitAnswer(c);break;default:break}}},submitAnswer:function(l){var e=SingletonFactory.getInstance(Page).getRequest();var d=e.getParams();var j=d.qid;if(j==undefined){return}var c=this.props.get("memcached.answeredID");var g=this.props.get("user.id");if(c!=undefined&&g!=undefined){for(var m in c){var b=c[m];if(b==g){return}}}var c=SingletonFactory.getInstance(Subject);var a=l.id;var k=this.props.get("memcached.tinyeditor");var h=k[a].e.body.innerHTML;var f=this;this.onAjax("answer","add",{qid:j,content:h},"POST",{onSuccess:function(n){k[a].e.body.innerHTML="";$("#AnswerPortlet-TextAreaContainer").html("");$("#AnswerPortlet-TextAreaContainer").hide();c.notifyEvent("ReloadAnswers")}})},checkImage:function(b){var c=$("<div></div>");$(c).append(b);var a=$(c).find("img").each(function(e,k){var g=$(k).attr("src");var j=new Image();j.src=g;var d=j.height;var f=j.width;if(d==0||f==0||g==""){$(k).remove()}if(f>=400){$(k).attr("width","400")}$(k).css("vertical-align","middle");$(k).css("display","block");var l=$("<center></center>");var h=$(k).clone();$(k).replaceWith($(l).append($(h)))});return $(c).html()},onEditAnswerSubmit:function(f){var d=f.uid;var g=f.aid;var h="OwnAnswerEditor-"+d+"-"+g;var a=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.tinyeditor");var e=a[h].e.body.innerHTML;e=this.checkImage(e);var c=$("#OwnAnswerEditor-NotifyFollowers").is(":checked")?1:0;var b=SingletonFactory.getInstance(Subject);this.onAjax("answer","update",{aid:g,content:e,notify:c},"POST",{onSuccess:function(k){var j=$('.extension-point[extensionName="AnswerExtension"][aid="'+g+'"] .ans-extension-area .answer-editor');$(".ans-content[aid='"+g+"']").html(e);j.slideToggle()},onFailure:function(j){b.notifyEvent("NotifyGlobal","Sa tht bi")}})},onShowAnswerEdit:function(c){var d=c.aid;var a=$('.extension-point[extensionName="AnswerExtension"][aid="'+d+'"] .ans-extension-area .answer-editor');if(!a.is(":visible")){var b=SingletonFactory.getInstance(Subject);b.notifyEvent("AnswerExtensionControlChanged",{value:""})}a.slideToggle()},onAnswerBuilt:function(){var c=this.props.get("user.login");var b=this;if(c!=0){var a=this.props.get("user.id");$('.extension-point[extensionName="AnswerExtension"]').each(function(){if($(this).find('[flag="AnsEdit"]').length>0){return}var h=$(this).attr("aid");var e=$(this).attr("uid");if(a==e){$(this).find(".ans-control .extension_place").append(tmpl("AnswerEditPlugin-Control",{uid:e,aid:h}));$(this).find(".ans-extension-area").append(tmpl("AnswerEditPlugin-Area",{uid:e,aid:h}));var g="OwnAnswerEditor-"+e+"-"+h;var f=$(".ans-content[aid='"+h+"']").html();$("#"+g).val(f);var d=SingletonFactory.getInstance(Subject);d.notifyEvent("TinyEditorInit",{id:g,content:""})}})}},onRejectChanges:function(b){var c=b.uid;var a=b.aid;$("#extension-content-plhld-"+a+"-"+c).children("div[id='answer-editor-"+a+"-"+c+"']").hide("fast")}}).implement(PluginInterface).implement(AjaxInterface);AnswerExtensionHiddenPlugin=Class.extend({init:function(){this.name="AnswerExtensionHiddenPlugin"},onAnswerExtensionControlChanged:function(){$(".answer-extension-item").hide()}}).implement(PluginInterface);SearchMorePlugin=Class.extend({init:function(){this.name="SearchMorePlugin"},showSearchMoreButton:function(){if($("#effective-area .page_more").length>0){$("#effective-area .page_more").show()}},hideSearchMoreButton:function(){if($("#effective-area .page_more").length>0){$("#effective-area .page_more").hide()}},showNoMoreSearch:function(){},hideNoMoreSearch:function(){if($("#effective-area .no-more-search-result-placeholder").length>0){$("#effective-area .no-more-search-result-placeholder").hide()}},onBeginSearching:function(){this.showSearchMoreButton();this.hideNoMoreSearch()},onNoMoreResult:function(){this.hideSearchMoreButton();this.showNoMoreSearch()},onHtmlUpdated:function(){var a=this;$('.extension-point[extensionName="PostResultList"]').each(function(b,c){if($(c).find('[flag="SearchMore"]').length>0){return}$(c).append(tmpl("SearchMorePluginTemplate",{}));a.hideNoMoreSearch()})}}).implement(PluginInterface);QuestionTabPlugin=Class.extend({init:function(){this.name="QuestionTabPlugin";this.type=undefined},onSearchResultChangeType:function(a){this.type=a.type;this.refreshType()},onSearchResultChangeScope:function(a){this.scope=a.scope;this.refreshScope()},refreshType:function(){var a=this.type;$('a[type="Latest"]').removeClass("active");$('a[type="Top"]').removeClass("active");$('a[type="Open"]').removeClass("active");if(a=="notification-filter"||a==undefined){$('a[type="Latest"]').addClass("active")}else{if(a=="question-best"){$('a[type="Top"]').addClass("active")}else{if(a=="question-open"){$('a[type="Open"]').addClass("active")}}}},refreshScope:function(){var a=this.scope;$('a[scope="limit"]').removeClass("active");$('a[scope="all"]').removeClass("active");if(a=="all"){$('a[scope="all"]').addClass("active")}else{$('a[scope="limit"]').addClass("active")}},onHtmlUpdated:function(){$('.extension-point[extensionName="SearchResultTitle"]').each(function(a,b){if($(b).find('[flag="QuestionTab"]').length>0){return}$(b).append(tmpl("QuestionTabTemplate",{}))});this.refreshScope();this.refreshType()},onEnd:function(){$("#effective-area .tab-question").remove()}}).implement(PluginInterface);CleanStylePlugin=Class.extend({init:function(){this.name="CleanStylePlugin"},onCleanFont:function(){$(".ans-content").find("[style]").each(function(a,b){$(b).removeAttr("style")});$(".ans-content").find("font").each(function(a,b){$(b).removeAttr("face");$(b).removeAttr("color")})}}).implement(PluginInterface);FocusDetectorPlugin=Class.extend({init:function(){this.name="FocusDetectorPlugin"},onAttachFocusDetection:function(b){var c=b.target;var a=b.defaultValue;$(c).attr("placeholder",a)}}).implement(PluginInterface);PaginationPlugin=Class.extend({init:function(){this.name="PaginationPlugin";this.pageLinks=Array();this.numPages=null;this.numDocs=null;this.rows=10;this.curPage=0;this.paginationPage=0},onFetchPaginationLink:function(a){this.numDocs=a.numDocs;this.rows=a.rows;this.curPage=a.curPage;this.request=a.request;$(a.placeholder).append(this.fetchPageLink())},onPaginationOnclick:function(a){this.request.setParam("pagination",a);var b=SingletonFactory.getInstance(Subject);b.notifyEvent("RequestRoute",this.request)},fetchPageLink:function(){var b=$("<div></div>");var c=Math.ceil(this.numDocs/this.rows);if(c==0){c=1}var f=parseInt(this.curPage);var g=Array();if(f>c){f=c}if(f<=0){f=1}for(var a=1;a<=c;a++){if(a==f){var e={};e.content=a;g[a-1]=tmpl("CommonPortlet-NavCurrent",e)}else{var e={};e.content=a;e.page=a;g[a-1]=tmpl("Pagination-NavOther",e)}}if(f>1&&f<=g.length){var e={};e.page=f-1;e.content="&#171 Trc&nbsp;";b.append(tmpl("Pagination-NavOther",e))}for(var d=f-11;d<=f+9;d++){if(d<0){continue}if(d>=g.length){continue}if(d==f){b.append(g[d])}else{b.append(g[d])}}if(f<g.length){var e={};e.page=f+1;e.content="&nbsp;Sau&nbsp;&#187";b.append(tmpl("Pagination-NavOther",e))}return b}}).implement(PluginInterface);ExpertisePlugin=Class.extend({init:function(){this.name="ExpertisePlugin"},onHtmlRendered:function(a){this.render()},onHtmlUpdated:function(a){this.render()},render:function(a){$('.extension-point[extensionName="ExpertiseTitle"]').each(function(d,e){if($(e).find('div[flag="ExpertisePlugin"]').length>0){return}var b=$(e).html();var c=$(e).attr("extensionId");$(e).html("<a href='#!page/Topic/id/"+c+"' onmouseover='generateEvent(&apos;ExpertiseTitleHover&apos;, event)'>"+b+"</a><div flag='ExpertisePlugin'></div>")});$('.extension-point[extensionName="InterestTitle"]').each(function(d,e){if($(e).find('div[flag="ExpertisePlugin"]').length>0){return}var b=$(e).html();var c=$(e).attr("extensionId");$(e).html("<a href='#!page/Topic/id/"+c+"' onmouseover='generateEvent(&apos;ExpertiseTitleHover&apos;, event)'>"+b+"</a><div flag='ExpertisePlugin'></div>")})}}).implement(PluginInterface).implement(AjaxInterface);TemplateDebugPlugin=Class.extend({init:function(){this.rendered=false;this.name="TemplateDebugPlugin"},onHtmlRendered:function(a){if(this.rendered){return}$.each($(".portlet-container"),function(b,c){$(c).append("<div>Portlet Container: "+$(c).attr("id")+"</div>")});this.rendered=true}}).implement(PluginInterface);TextAreaAutoExpandPlugin=Class.extend({init:function(){this.name="TextAreaAutoExpandPlugin"},onExpandTextArea:function(b){var d=b.target;if($(d).attr("flag")=="TextAreaAutoExpand"){return}var c=b.min;var a=b.max;$(d).attr("flag","TextAreaAutoExpand");$(d).TextAreaExpander(c,a)}}).implement(PluginInterface);FormatterPlugin=Class.extend({init:function(){this.name="FormatterPlugin"},onNeedFormatting:function(a){$('.extension-point[extensionName="Placeholder"]').each(function(c,h){if($(h).attr("flag")=="formatted"){return}var j=$(h).attr("depth");if(j==undefined){j=0}if(j>0){j--}if(j>3){j=3}var g=$(h).attr("state");var f=$(h).attr("type");var e=$($(h).find(".keyword")[0]).html();var b=$($(h).find(".content")[0]).html();var d=SingletonFactory.getInstance(FormatterFactory).getFormatter(f,g);if(d!=undefined){d.format(e,b,h)}$(h).attr("flag","formatted")});$(".customDatePicker input").each(function(b,c){$(c).datepicker({dateFormat:"dd, M yy",changeMonth:true,changeYear:true,yearRange:"-100:+10",showOn:"button",buttonImage:"static/images/cal.png",buttonImageOnly:true,buttonText:"Choose date",onSelect:function(e,d){$(c).attr("modified","true")}})})},onAddToken:function(b){if(b.keyCode==13){var c=b.target;var a={};a.content=$(c).val();a.oid="";$(c).val("")}},onDelToken:function(a){var b=a.target;$(b).parent().remove()},onAddEmailToken:function(b){if(b.keyCode==13){var c=b.target;var d=$(c).siblings("select").find("option:selected").html();var a={};a.oid="";a.content=$(c).val()+"@"+d;$(c).val("")}}}).implement(PluginInterface);FormatterFactory=Class.extend({getFormatter:function(b,c){var a=b+c+"Formatter";if(window[a]==undefined){return undefined}else{return new window[a](c)}}});BaseFormatter=Class.extend({init:function(){},format:function(a,b,c){this.placeholder=c;this.doFormat(a,b,c)},doFormat:function(a,b,c){$(c).html(this.render(a,b))}});HeadingViewFormatter=BaseFormatter.extend({render:function(a,b){var c={};c.keyword=a;c.content=b;return tmpl("HeadingPlaceholder",c)}});HeadingEditFormatter=HeadingViewFormatter.extend({});HiddenViewFormatter=BaseFormatter.extend({render:function(a,b){return""}});HiddenEditFormatter=HiddenViewFormatter.extend({});NoneViewFormatter=BaseFormatter.extend({render:function(a,b){var c={};c.keyword=a;return tmpl("NonePlaceholder",c)}});NoneEditFormatter=NoneViewFormatter.extend({});ListViewFormatter=BaseFormatter.extend({init:function(){this.separator=", "},doFormat:function(j,h,g){var d=$(g).attr("name");var a="ListFormatter-"+d;var f={};f.content=h;f.oid=$(g).parents("[rootname]:first").attr("oid");if(isNaN(f.oid)){f.oid=""}var e=this.buildFragment(f);if(h==""||$(g).attr("mockup")=="true"){e=""}if($(g).parents(".children_container:first").find("#"+a).length>0){if(h==""||$(g).attr("mockup")=="true"){$(g).remove();return}$(g).parents(".children_container:first").find("#"+a).find(".content").append(this.separator+e);$(g).parent().parent().remove()}else{var b={};b.id=a;b.keyword=j;b.content=e;var c=this.onRender(b);$(g).html(c)}},onRender:function(a){return tmpl("ListPlaceholder",a)},buildFragment:function(a){return tmpl("ListPartial",a)}});ListEditFormatter=ListViewFormatter.extend({init:function(){this.separator=""},onRender:function(a){return tmpl("ListPlaceholder-Edit",a)},buildFragment:function(a){return tmpl("ListPartial-Edit",a)}});NormalViewFormatter=BaseFormatter.extend({doFormat:function(b,c,e){var d={};d.keyword=b;d.content=c;var a=$(e).attr("name");if(this.checkDuplicate(a)){d.keyword=""}d.name=a;$(e).html(this.onRender(d))},checkDuplicate:function(a){return($(this.placeholder).parent().parent().parent().find('.normal-formatter[name="'+a+'"]').length>0)},onRender:function(a){return tmpl("NormalPlaceholder",a)}});BasicInfoViewFormatter=NormalViewFormatter.extend({onRender:function(a){return tmpl("BasicInfoPlaceholder",a)}});TitleViewFormatter=NormalViewFormatter.extend({onRender:function(a){return tmpl("TitlePlaceholder",a)}});NormalEditFormatter=NormalViewFormatter.extend({onRender:function(a){return tmpl("NormalPlaceholder-Edit",a)}});NormalLargeEditFormatter=NormalViewFormatter.extend({onRender:function(a){return tmpl("NormalLargePlaceholder-Edit",a)}});DateViewFormatter=NormalViewFormatter.extend({});DateEditFormatter=NormalViewFormatter.extend({checkDuplicate:function(a){return($(this.placeholder).parent().parent().parent().find('.date-formatter[name="'+a+'"]').length>0)},onRender:function(a){return tmpl("DatePlaceholder-Edit",a)}});EmailViewFormatter=NormalViewFormatter.extend({});EmailEditFormatter=ListEditFormatter.extend({init:function(){this.separator=""},onRender:function(c){var d=$(this.placeholder).attr("params");var a=d.split(",");var b={};b.providers=a;c.select=tmpl("EmailProviders-Edit",b);return tmpl("EmailPlaceholder-Edit",c)}});EnumViewFormatter=NormalViewFormatter.extend({});EnumEditFormatter=BaseFormatter.extend({doFormat:function(k,j,h){var a=$(h).attr("params");var l=a.split(",");var f="";for(var d in l){var b=l[d];var g="";if(b==j){g="checked"}var c={};c.checked=g;c.choice=b;c.name=$(h).attr("name");f+=tmpl("EnumPartial-Edit",c)}var e={};e.content=f;e.keyword=k;$(h).html(tmpl("EnumPlaceholder-Edit",e))}});UserControlBoxPlugin=Class.extend({init:function(){this.name="UserControlBoxPlugin"},onSystemPropertyChanged:function(a){if(a=="user.login"){this.setupUserBox()}},onUpdateUserStatus:function(a){this.onBegin()},onPageBegan:function(){this.checkActiveMenu()},checkActiveMenu:function(){var a=SingletonFactory.getInstance(Page).getRequest();var b=a.getName();$("#UserControlBoxPlugin a").each(function(){var c=$(this).attr("page");if(c==b){$(this).addClass("active")}else{$(this).removeClass("active")}})},onBegin:function(b){var a=SingletonFactory.getInstance(Application).getSystemProperties();var c=this;this.onAjax("ajax","check-user-status",{},"GET",{onSuccess:function(d){if(d==0){a.set("user.login",0,true);a.set("user.id",-1,true)}else{a.set("user.login",1,true);a.set("user.id",d.id,true);a.set("user.name",d.name,true);a.set("user.username",d.username,true);a.set("user.type",d.type,true);a.set("user.role",d.role,true);a.set("user.avatar",d.avatar,true)}c.setupUserBox()}})},setupUserBox:function(){var f=SingletonFactory.getInstance(Application).getSystemProperties();var a=f.get("user.login");var e={};var d=SingletonFactory.getInstance(Page);var b=SingletonFactory.getInstance(Subject);if(a==true){b.notifyEvent("FetchLiveNotification");e.login=true;e.name=f.get("user.name")}else{e.login=false;if(d.pagename=="Home"){b.notifyEvent("RequestRoute",new Request("Introduce"))}}if($("#UserControlBoxPlugin").length<=0){$('div.extension-point[extensionName="TopRight"]').append(tmpl("UserControlBoxPluginContainer",{}))}var c=f.get("user.type");if(c=="person"){e.userPage="User/id/"+f.get("user.id")}else{if(c=="partner"){e.userPage="PartnerProfile/id/"+f.get("user.id")}}$("#UserControlBoxPlugin").html(tmpl("UserControlBoxPluginTmpl",e));this.checkActiveMenu()},onToggleAccountNav:function(){if($("#navAccount").is("._hidden")){$("#navAccount").removeClass("_hidden")}else{$("#navAccount").addClass("_hidden")}},onEnd:function(){if($("#UserControlBoxPlugin").length>0){$("#UserControlBoxPlugin").remove()}}}).implement(PluginInterface).implement(AjaxInterface);LiveNotificationPlugin=Class.extend({init:function(){this.name="LiveNotificationPlugin";this.fullFetched=false},onBegin:function(){this.startInterval(300000,this.fetch)},onFetchLiveNotification:function(){this.fetch()},onFetchFullNotifications:function(){if(this.fullFetched){return}this.fullFetched=true;this.onAjax("user-ajax","get-full-notification",{},"GET",{onSuccess:function(ret){var notifs=Array();for(var i=0;i<ret.length;i++){var link=eval("("+ret[i].link+")");var href=Array();for(var j in link){var param=j;if(param=="type"){param="page"}href.push(param+"/"+link[j])}ret[i].content=tmpl("NotificationItem-"+ret[i].type,ret[i]);ret[i].link="#!"+href.join("/");notifs.push(ret[i])}$("#NotificationDropdown").html(tmpl("NotificationList",{notifs:notifs}));$("#NotificationNumber").html("0");$("#NotificationNumber").css("background-color","#AAA")}})},fetch:function(){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(a==1){this.onAjax("user-ajax","get-live-notification",{},"GET",{onSuccess:function(b){$("#NotificationNumber").html(b);if(b==0){$("#NotificationNumber").css("background-color","#AAA")}}})}}}).implement(PluginInterface).implement(AjaxInterface).implement(IntervalTimerInterface);UserLogoutPlugin=Class.extend({init:function(){this.name="UserLogoutPlugin"},onPageBegan:function(){this.onAjax("ajax","logout",{},"POST",{onSuccess:function(a){var d=SingletonFactory.getInstance(Application).getSystemProperties();d.set("user.login",0,true);d.set("user.id",undefined,true);var c=new Request("Introduce");var b=SingletonFactory.getInstance(Subject);b.notifyEvent("RequestRoute",c)}})}}).implement(PluginInterface).implement(AjaxInterface);ExpertiseEditorPlugin=Class.extend({init:function(){this.name="ExpertiseEditorPlugin"},onSubmitExpertiseForward:function(d){var c=d.namespace;var b=Array();var e=$("#"+c+"-ListExpertise .tokenContainer");$(e).find("label.lblToken").each(function(g,h){var j=$(h).attr("eid");b.push(j)});var f=d.callback;if(b.length==0){f();return}b=b.join(",");var a=SingletonFactory.getInstance(Subject);this.onAjax("user-ajax","add-expertise",{experts:b},"POST",{onSuccess:function(g){f();$(e).html("");a.notifyEvent("ExpertiseChanged")}})},onRenderExpertiseEditor:function(f){this.placeholder=f.placeholder;var e=f.namespace;$(this.placeholder).html(tmpl("ExpertiseSubplaceholder",{}));var b="Kinh nghim";var d="Bn nn nhp y  kinh nghim ca mnh  ngi khc c th d dng kt ni n bn hn";$(this.placeholder).find("#ProfileExpertise").html(tmpl("ListContainer",{id:"ListExpertise",name:"expertise",keyword:b,namespace:e,guideMsg:d}));var c=$(this.placeholder).find('[container="ListExpertise"] input.ui-autocomplete-input');var f={};f.focusCallback="RegisterAddExpertiseFocus";f.selectCallback="RegisterAddExpertiseSelect";f.autocompleteObject=c;var g=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");f.autocompleteSource=g+"/autocomplete/catch";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedAutocomplete",f)},onRegisterAddExpertiseFocus:function(b){var c=b.ui;var a=$(this.placeholder).find('[container="ListExpertise"] input.ui-autocomplete-input');$(a).val(c.item.label)},onRegisterAddExpertiseSelect:function(f){var h=f.ui;var b=h.item.label;var c=null;try{c=$("a[catch='"+escape(b)+"']")}catch(j){}var g=c.attr("catch_id");var a=$(this.placeholder).find('[container="ListExpertise"] div.tokenContainer');var d=$(this.placeholder).find('[container="ListExpertise"] input.ui-autocomplete-input');$(d).val("");$(a).append(tmpl("TokenPartial",{label:b,value:g}))}}).implement(PluginInterface).implement(AjaxInterface);InterestEditorPlugin=Class.extend({init:function(){this.name="InterestEditorPlugin"},onSubmitInterestForward:function(d){var c=d.namespace;var e=Array();var b=$("#"+c+"-ListInterestedArea .tokenContainer");$(b).find("label.lblToken").each(function(g,h){var j=$(h).attr("eid");e.push(j)});var f=d.callback;if(e.length==0){f();return}e=e.join(",");var a=SingletonFactory.getInstance(Subject);this.onAjax("user-ajax","add-expertise",{interests:e},"POST",{onSuccess:function(g){f();$(b).html("");a.notifyEvent("InterestedAreaChanged")}})},onRenderInterestEditor:function(d){this.placeholder=d.placeholder;var b=d.namespace;$(this.placeholder).html(tmpl("ExpertiseSubplaceholder",{}));var c="Lnh vc quan tm";var e="Bn nn nhp lnh vc quan tm  chng ti c th d dng gi  cho bn nhng cu hi m bn quan tm";$(this.placeholder).find("#ProfileFollow").html(tmpl("ListContainer",{id:"ListInterestedArea",name:"interested-area",keyword:c,namespace:b,guideMsg:e}));var g=$(this.placeholder).find('[container="ListInterestedArea"] input.ui-autocomplete-input');var d={};d.focusCallback="RegisterAddInterestFocus";d.selectCallback="RegisterAddInterestSelect";d.autocompleteObject=g;var f=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");d.autocompleteSource=f+"/autocomplete/catch";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedAutocomplete",d)},onRegisterAddInterestFocus:function(a){var b=a.ui;var c=$(this.placeholder).find('[container="ListInterestedArea"] input.ui-autocomplete-input');$(c).val(b.item.label)},onRegisterAddInterestSelect:function(c){var e=c.ui;var a=e.item.label;var d=e.item.id;var b=$(this.placeholder).find('[container="ListInterestedArea"] div.tokenContainer');$(b).append(tmpl("TokenPartial",{label:a,value:d}))}}).implement(PluginInterface).implement(AjaxInterface);ExpertiseDeletePlugin=Class.extend({init:function(){this.name="ExpertiseDeletePlugin"},onHtmlUpdated:function(a){$('#effective-area .extension-point[extensionName="ExpertisePartial"]').each(function(b,c){if($(c).find('[flag="ExpertiseDelete"]').length>0){return}$(c).append('<span flag="ExpertiseDelete"></span>');var d={};d.id=$(c).attr("extensionId");$(c).append(tmpl("ExpertiseDelete",d))})},onExpertiseDeleteButtonClick:function(a){var b=a.target;var c=$(b).attr("eid");this.onAjax("user-ajax","remove-single-expertise",{id:c},"POST",{onSuccess:function(d){$(b).parents(".uiListItem:first").remove()},onFailure:function(){$.facebox("Hin thi h thng khng th xa mc ny. Bn vui lng th li sau")}})}}).implement(PluginInterface).implement(AjaxInterface);ExpertRankPlugin=Class.extend({init:function(){this.name="ExpertRankPlugin";this.getInfo()},getInfo:function(){var c=this;var b=SingletonFactory.getInstance(Page).getRequest();var a=b.getParam("id");c.onAjax("ajax","get-expert-rank-user",{uid:a},"GET",{onSuccess:function(d){if(d[0]!=undefined){SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.expertise",d[0])}}},true,300000)},render:function(){$('#effective-area .extension-point[extensionName="expertisePartialLeft"]').each(function(b,d){if($(d).find('.flag[flagName="expertiseRank"]').length>0){return}var e={};e.id=$(d).attr("extensionId");if(SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.expertise")!=undefined){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.expertise");if(a["expert_rank_position_"+e.id]!=undefined){e.rank=a["expert_rank_position_"+e.id];e.expertRank=a["expert_rank_percentage_"+e.id];var c={};c.er=e.expertRank;c.total=1000;e.tips=tmpl("ExpertiseRankDescription",c);$(d).append($('<span class="flag" flagName="expertiseRank"></span>'));$(d).append("&nbsp;");$(d).append(tmpl("ExpertiseRank",e))}else{e.expertRank=0}}else{}})},onReloadPlugin:function(c){var d=this;var b=SingletonFactory.getInstance(Page).getRequest();var a=b.getParam("id");d.onAjax("ajax","get-expert-rank-user",{uid:a},"GET",{onSuccess:function(e){if(e[0]!=undefined){SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.expertise",e[0])}this.render()}},true,300000)},onHtmlUpdated:function(a){this.render()}}).implement(PluginInterface).implement(AjaxInterface);ExpertiseEditPlugin=Class.extend({init:function(){this.name="ExpertiseEditPlugin"},onExpertiseEditableBlur:function(b){var c=b.target;var e=$(c).attr("eid");var d=$(c).attr("oldhtml");var a=$(c).val();if(a==undefined||a.trim()==""){a=d}if(d!=a){this.onAjax("user-ajax","update-single-expertise",{id:e,explanation:a},"POST",{})}$(c).parent().html(a);$(c).removeClass("ui-editable-edit")},onExpertiseEditClick:function(b){var c=$(b.target);var a=$(c).parent().siblings(".topic-info");var d=$(a).html().trim();var e=$(c).attr("eid");$(a).addClass("ui-editable-edit");$(a).html("<input eid="+e+' oldhtml="'+d+'" onblur="generateEvent(&apos;ExpertiseEditableBlur&apos;, event)" type="text" class="text" value="'+d+'">');$(a).find("input").focus()},onHtmlUpdated:function(a){$('.extension-point[extensionName="ExpertiseExplanation"]').each(function(b,c){if($(c).find('[flag="ExpertiseExplanationEdit"]').length>0){return}$(c).append('<span flag="ExpertiseExplanationEdit"></span>');var d={};d.id=$(c).attr("extensionId");$(c).append(tmpl("ExpertiseEdit",d))})}}).implement(PluginInterface).implement(AjaxInterface);InterestDeletePlugin=Class.extend({init:function(){this.name="InterestDeletePlugin"},onHtmlUpdated:function(a){$('#effective-area .extension-point[extensionName="InterestPartial"]').each(function(b,c){if($(c).find('[flag="InterestDelete"]').length>0){return}$(c).append('<span flag="InterestDelete"></span>');var d={};d.id=$(c).attr("extensionId");$(c).append(tmpl("InterestDelete",d))})},onInterestDeleteButtonClick:function(a){var b=a.target;var c=$(b).attr("eid");this.onAjax("user-ajax","remove-single-interest",{id:c},"POST",{onSuccess:function(d){$(b).parent().parent().remove()}})}}).implement(PluginInterface).implement(AjaxInterface);UserCheckLoginPlugin=Class.extend({init:function(){this.name="UserCheckLoginPlugin"},onPageBegan:function(){var d=SingletonFactory.getInstance(Application).getSystemProperties();var a=d.get("user.login",undefined);var b=d.get("host.root");var c=SingletonFactory.getInstance(Subject);if(a==undefined){this.onAjax("ajax","check-user-status",{"profile-id":this.profile_id},"POST",{onSuccess:function(f){if(f==0){d.set("user.login",0,true);var g=new Request("Login",undefined,null);c.notifyEvent("RequestRoute",g)}else{d.set("user.login",1,true);d.set("user.id",f.userid,true)}}})}else{if(a==false){var e=new Request("Login",undefined,null);c.notifyEvent("RequestRoute",e)}}}}).implement(PluginInterface);LoginSuccessRedirectPlugin=Class.extend({init:function(){this.name="LoginSuccessRedirectPlugin"},onLoginSuccess:function(){var d=SingletonFactory.getInstance(Application);var c=d.getSystemProperties().get("request.callback");var b=c!=undefined?c:new Request("Home",undefined,null);d.getSystemProperties().set("request.callback",undefined);var a=new SingletonFactory.getInstance(Subject);a.notifyEvent("RequestRoute",b)}}).implement(PluginInterface);ProfileEditTabPlugin=Class.extend({init:function(){this.name="ProfileEditTabPlugin"},onRenderProfileEditTab:function(c){var e=c.placeholder;var b=c.tabs;var d={};d.tabs=b;var a=tmpl("TabsMeta",d);$(e).prepend(a);$(e).tabs()}}).implement(PluginInterface);ProfileImageCheckPlugin=Class.extend({init:function(){this.name="ProfileImageCheckPlugin"},onHtmlRendered:function(a){this.render()},onHtmlUpdated:function(a){this.render()},onFixBrokenImage:function(a){this.render()},render:function(a){$("img.bkp_pic_profile").error(function(){$(this).attr("src","resource/images/unknown.png")})},onRequestProfileImageCheck:function(b){var a=b.zone;$(a).find("img.bkp_pic_profile").error(function(){$(this).attr("src","resource/images/unknown.png")})}}).implement(PluginInterface);NavigateRoutePlugin=Class.extend({init:function(){this.name="NavigateRoute"},onGoToPrevious:function(a){history.go(-2)},onGoToHome:function(c){var a=SingletonFactory.getInstance(Subject);var b=new Request("Home",undefined,null);a.notifyEvent("RequestRoute",b)},onGoToPage:function(d){var b=SingletonFactory.getInstance(Subject);var c;if(d.page==undefined){}else{var a=d.page;var e=d.params;c=new Request(a,undefined,e);b.notifyEvent("RequestRoute",c)}}}).implement(PluginInterface);NavigatorPlugin=Class.extend({init:function(){this.name="NavigatorUI";this.pageLinks=Array();this.numPages=null;this.numDocs=null;this.rows=10;this.curPage=0;this.searchPage=0;this.dataLength=0;this.searchController=""},onFetchSearchResultNumber:function(b){b.numDocs=b.numDocs||0;var a=tmpl("SearchResultPortlet-SearchResultNumber",b);$('.extension-point[extensionName="SearchResultTitle"]').each(function(c,d){$(d).append(a)})},onFetchNavigationLink:function(b){this.numDocs=b.numDocs;this.rows=b.rows;this.searchPage=b.searchPage;this.dataLength=b.dataLength;this.query=b.query;this.core=b.core;this.searchController=b.searchController;var a=this;$('.extension-point[extensionName="NavigatorUI"]').each(function(c,d){$(d).append(a.fetchPageLink())})},fetchPageLink:function(){var b=$("<div></div>");if(this.dataLength==0){return b}var c=Math.ceil(this.numDocs/this.rows);if(c==0){c=1}var f=parseInt(this.searchPage);var g=Array();if(f>c){f=c}if(f<=0){f=1}for(var a=1;a<=c;a++){if(a==f){var e={};e.content=a;g[a-1]=tmpl("CommonPortlet-NavCurrent",e)}else{var e={};e.query=this.query;e.core=this.core;e.searchPage=a;e.content=a;e.rows=this.rows;e.searchController=this.searchController;g[a-1]=tmpl("CommonPortlet-NavOther",e)}}if(f>1&&f<=g.length){var e={};e.query=this.query;e.core=this.core;e.searchPage=f-1;e.content="&#171 Trc&nbsp;";e.rows=this.rows;e.searchController=this.searchController;b.append(tmpl("CommonPortlet-NavOther",e))}for(var d=f-11;d<=f+9;d++){if(d<0){continue}if(d>=g.length){continue}if(d==f){b.append(g[d])}else{b.append(g[d])}}if(f<g.length){var e={};e.query=this.query;e.core=this.core;e.searchPage=f+1;e.content="&nbsp;Sau&nbsp;&#187";e.rows=this.rows;e.searchController=this.searchController;b.append(tmpl("CommonPortlet-NavOther",e))}return b}}).implement(PluginInterface);BKPTextEditorPlugin=Class.extend({init:function(){this.name="BKPTextEditorPlugin";this.mceNeeded=false;this.i=0},onTinyEditorInit:function(b){var d=b.id;var c=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.tinyeditor");c=Array();var a=new TINY.editor.edit("editor",{id:d,height:"200px",width:"100%",cssclass:"te",controlclass:"tecontrol",rowclass:"teheader",dividerclass:"tedivider",controls:["bold","italic","underline","|","orderedlist","unorderedlist","|","outdent","indent","|","leftalign","centeralign","rightalign","blockjustify","|",,"insertcode","|","redo","undo","n","link","unlink","|","image","|","unformat"],footer:true,fonts:["Verdana","Arial","Georgia","Trebuchet MS"],xhtml:true,cssfile:"static/js/thirdparty/tinyeditor/style.css",bodyid:"editor",footerclass:"tefooter",toggle:{text:"source",activetext:"wysiwyg",cssclass:"toggle"},resize:{cssclass:"resize"}});c[d]=a;SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.tinyeditor",c)},onEnd:function(){SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.tinyeditor",undefined)}}).implement(PluginInterface);PostPlugin=Class.extend({init:function(){this.name="PostPlugin";this.app=SingletonFactory.getInstance(Application);this.root=this.app.getSystemProperties().get("host.root")},onVoteUpQuestion:function(a){this.checkUserLogin(a,"VoteUpQuestion")},voteUpQuestion:function(a){this.onAjax("question","update-vote",{qid:a.id,type:1},"POST",{onSuccess:function(c){var b=parseInt($("#AnswerPortlet-QVote").html().substr(1));b+=1;$("#AnswerPortlet-QVote").html("+"+b);return}})},onVoteDownQuestion:function(a){this.checkUserLogin(a,"VoteDownQuestion")},voteDownQuestion:function(b){var a=this.prepareQuestionUrl(b,0);$.get(a,{},function(d){d=$.parseJSON(d);d=d.result;if(d=="success"){var c=parseInt($(".bkp_q_vote_down").html());c+=1;$(".bkp_q_vote_down").html(c);return}})},onVoteAnswerIncrease:function(a){this.checkUserLogin(a,"VoteAnswerIncrease")},voteAnswerIncrease:function(a){this.onAjax("answer","update-vote",{aid:a.id,type:1},"POST",{onSuccess:function(b){var c=a.id;var d=parseInt($("#AnswerPortlet-AVote-"+c).html().substr(1));d+=1;$("#AnswerPortlet-AVote-"+c).html("+"+d);return}})},onVoteAnswerDecrease:function(a){this.checkUserLogin(a,"VoteAnswerDecrease")},voteAnswerDecrease:function(b){var a=this.prepareUrl(b,0);$.get(a,{},function(c){c=$.parseJSON(c);c=c.result;if(c=="success"){var d=b.aid;var e=parseInt($("#answer-"+d+"-voteNum").children().html());e-=1;$("#answer-"+d+"-voteNum").children().html(e);return}})},checkUserLogin:function(c,b){var d={};d.type=b;d.evtData=c;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",d)},onLoginSuccess:function(b){var a=b.type;var c=b.evtData;if(a!=undefined&&c!=undefined){switch(a){case"VoteAnswerIncrease":this.voteAnswerIncrease(c);break;case"VoteAnswerDecrease":this.voteAnswerDecrease(c);break;case"VoteUpQuestion":this.voteUpQuestion(c);break;case"VoteDownQuestion":this.voteDownQuestion(c);break;default:break}}},}).implement(PluginInterface).implement(AjaxInterface);CommentPlugin=Class.extend({init:function(){this.name="CommentPlugin";this.props=SingletonFactory.getInstance(Application).getSystemProperties();this.root=this.props.get("host.root")},onAnswerBuilt:function(a){var b=this.props.get("user.login");var c=this;if(b!=0){$('.extension-point[extensionName="AnswerExtension"]').each(function(){if($(this).find('[flag="AnsComment"]').length>0){return}var e=$(this).attr("aid");var d=$(this).attr("uid");$(this).find(".ans-control .extension_place").append(tmpl("CommentPlugin-Control",{uid:d,aid:e}));$(this).find(".ans-extension-area").append(tmpl("CommentPlugin-Area",{uid:d,aid:e}));c.onAjax("answer","get-no-comment",{aid:e},"GET",{onSuccess:function(f){$("#CommentControl-"+d+"-"+e).html("Bn lun thm ("+f+")")}})})}},onShowComment:function(d){var c=d.uid;var e=d.aid;var f=true;var a=$('.extension-point[extensionName="AnswerExtension"][aid="'+e+'"] .ans-extension-area .comment-outer');if(!a.is(":visible")){f=false;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("AnswerExtensionControlChanged")}a.slideToggle();if(!f){this.reloadComment(c,e)}},reloadComment:function(d,e,a){if(a==undefined){a=true}var f=this;var c=$('.extension-point[extensionName="AnswerExtension"][aid="'+e+'"] .ans-extension-area .comment-outer');$(c).find(".comment-list").html("");var b=SingletonFactory.getInstance(Subject);this.onAjax("answer","get-all-comments",{aid:e},"GET",{onSuccess:function(g){f.bindNumberOfComment(e,d,g.length);for(var j in g){var h={};h.content=g[j]["content"];h.date=g[j]["since"];h.uid=g[j]["userId"];h.username=g[j]["name"];h.avatar=g[j]["avatar"];var k=tmpl("CommentPlugin-Item",h);$(c).find(".comment-list").append(k)}var l={};l.zone=$(c).find(".comment-list");b.notifyEvent("RequestProfileImageCheck",l)}},a,300000)},bindNumberOfComment:function(c,a,b){$("#CommentControl-"+a+"-"+c).html("Bn lun thm ("+b+")")},onAddComment:function(e){var f=e.aid;var c=e.uid;var b=$('.extension-point[extensionName="AnswerExtension"][aid="'+f+'"] .ans-extension-area .comment-outer');var a=b.find(".comment-content");var d=a.val().trim();if(d==""){return}var g=this;this.onAjax("answer","add-new-comment",{aid:f,content:d},"POST",{onSuccess:function(h){a.val("");g.reloadComment(c,f,false)}})}}).implement(PluginInterface).implement(AjaxInterface);ImproveAnswerPlugin=Class.extend({init:function(){this.name="ImproveAnswerPlugin"},onSendImprovement:function(c){var d=c.id;var a=SingletonFactory.getInstance(Subject);var b=$("#ImproveAnswerPlugin-Select option:selected").val();this.onAjax("answer","add-negative-comment",{id:d,type:b},"GET",{onSuccess:function(e){a.notifyEvent("PopupRemove",{id:"ImproveAnswerPlugin"});a.notifyEvent("NotifyGlobal","Bn  gi gp  thnh cng!");$("#ImproveControl-"+d).remove()}})},onImproveControlClick:function(b){var c=b.aid;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ShowPopup",{id:"ImproveAnswerPlugin",title:"Gp  cho cu tr li",content:tmpl("ImproveAnswerPlugin-Form",{aid:c})})},onAnswerBuilt:function(){var c=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(c==0){return}var b=this;var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.id");$('.extension-point[extensionName="AnswerExtension"]').each(function(){if($(this).find('[flag="ImproveAnswer"]').length>0){return}$(this).append('<span flag="ImproveAnswer"></span>');var e=$(this).attr("aid");var d=$(this).attr("uid");if(d==a){return}var f=this;b.onAjax("answer","has-sent-negative-comment",{id:e},"GET",{onSuccess:function(g){if(g==1){return}$(f).find(".ans-control .extension_place").append(tmpl("ImproveAnswerPluginTmpl",{aid:e}))}})})}}).implement(PluginInterface).implement(AjaxInterface);ImproveQuestionPlugin=Class.extend({init:function(){this.name="ImproveQuestionPlugin"},onQuestionBuilt:function(c){var f=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(f==0){return}var d=this;var b=SingletonFactory.getInstance(Application).getSystemProperties().get("user.id");var e=c.id;var a=c.userID;$('.extension-point[extensionName="QuestionTask"]').each(function(){if($(this).find('[flag="ImproveQuestion"]').length>0){return}$(this).append('<span flag="ImproveQuestion"></span>');if(a==b){return}var g=this;d.onAjax("question","has-sent-negative-comment",{id:e},"GET",{onSuccess:function(h){if(h==1){return}$(g).prepend(tmpl("ImproveQuestionPluginTmpl",{qid:e}))}})})},onSendQuestionImprovement:function(c){var d=c.id;var a=SingletonFactory.getInstance(Subject);var b=$("#ImproveQuestionPlugin-Select option:selected").val();this.onAjax("question","add-negative-comment",{id:d,type:b},"GET",{onSuccess:function(e){a.notifyEvent("PopupRemove",{id:"ImproveQuestionPlugin"});a.notifyEvent("NotifyGlobal","Bn  gi gp  thnh cng!");$("#ImproveQuestionControl-"+d).remove()}})},onImproveQuestionControlClick:function(b){var c=b.qid;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ShowPopup",{id:"ImproveQuestionPlugin",title:"Gp  cho cu hi",content:tmpl("ImproveQuestionPlugin-Form",{qid:c})})}}).implement(PluginInterface).implement(AjaxInterface);QuestionCommentPlugin=Class.extend({init:function(){this.name="QuestionCommentPlugin"},onQuestionBuilt:function(c){var f=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(f==0){return}var d=this;var b=SingletonFactory.getInstance(Application).getSystemProperties().get("user.id");var e=c.id;var a=c.userID;$('.extension-point[extensionName="QuestionTask"]').each(function(){if($(this).find('[flag="QuestionComment"]').length>0){return}$(this).append('<span flag="QuestionComment"></span>');if(a==b){return}var g=this;d.onAjax("question","get-no-comment",{id:e},"GET",{onSuccess:function(h){$(g).append(tmpl("QuestionCommentControlTmpl",{qid:e,no_comment:h}))}})})},onSendQuestionImprovement:function(c){var d=c.id;var a=SingletonFactory.getInstance(Subject);var b=$("#ImproveQuestionPlugin-Select option:selected").val();this.onAjax("question","add-negative-comment",{id:d,type:b},"GET",{onSuccess:function(e){a.notifyEvent("PopupRemove",{id:"ImproveQuestionPlugin"});a.notifyEvent("NotifyGlobal","Bn  gi gp  thnh cng!");$("#ImproveQuestionControl-"+d).remove()}})},onQuestionCommentControlClick:function(c){var d=true;var a=$("#QuestionCommentArea");if(!a.is(":visible")){d=false;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("AnswerExtensionControlChanged")}a.slideToggle();if(!d){this.reloadComment(qid)}},reloadComment:function(d,e,a){if(a==undefined){a=true}var f=this;var c=$('.extension-point[extensionName="AnswerExtension"][aid="'+e+'"] .ans-extension-area .comment-outer');$(c).find(".comment-list").html("");var b=SingletonFactory.getInstance(Subject);this.onAjax("answer","get-all-comments",{aid:e},"GET",{onSuccess:function(g){f.bindNumberOfComment(e,d,g.length);for(var j in g){var h={};h.content=g[j]["content"];h.date=g[j]["since"];h.uid=g[j]["userId"];h.username=g[j]["name"];h.avatar=g[j]["avatar"];var k=tmpl("CommentPlugin-Item",h);$(c).find(".comment-list").append(k)}var l={};l.zone=$(c).find(".comment-list");b.notifyEvent("RequestProfileImageCheck",l)}},a,300000)}}).implement(PluginInterface).implement(AjaxInterface);EditPendingQuestionsPlugin=Class.extend({init:function(){this.name="EditPendingQuestionsPlugin";this.app=SingletonFactory.getInstance(Application);this.root=this.app.getSystemProperties().get("host.root");this.topics=this.app.getSystemProperties().get("memcached.topics");this.addedTopics=null;this.pendingQuestion={}},getAjaxAllTopics:function(){var b=this;var a=this.root+"catchword/get-all-catchwords/";$.ajax({url:a,async:false,success:function(c){c=$.parseJSON(c);c=c.result;if(c==undefined||c=="error"){return}b.topics=c;SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.topics",c)}});this.topics=b.topics},getAjaxTopicQuestion:function(){var b=this;var a=this.root+"question/get-all-un-auth-catchwords-question/qid/"+this.questionID;$.ajax({url:a,async:false,success:function(c){c=$.parseJSON(c);c=c.result;if(c==undefined||c=="error"){return}b.topicsQuestion=c}});this.topicsQuestion=b.topicsQuestion},buildQuestionTopics:function(){var b=$("<div><div></div></div>");var a=Array();for(var g in this.topicsQuestion){var f={};var e=this.topicsQuestion[g];f.tid=generateId("tt");f.content=e.catchword;f.cid=e.id;a[this.questionID+"-"+e.id]=f.tid;var d=tmpl("AnswerPortlet-Topic",f);b.children().append(d)}var c=SingletonFactory.getInstance(Application).getSystemProperties();c.set("memcached.addedTopics",a);this.pendingQuestion.topics=b.children()},buildAllTopics:function(){var a=$("<div><div></div></div>");for(var d in this.topics){var c=this.topics[d];var b=$("<option value='"+c.id+"'>"+c.catchWord+"</option>");a.children().append(b)}this.pendingQuestion.avaiTopics=a.children()},onEditPendingQuestion:function(a){this.checkUserLogin(a,"EditPendingQuestion")},editPendingQuestion:function(e){this.questionID=e.id;if(this.topics==undefined){this.getAjaxAllTopics()}this.getAjaxTopicQuestion();this.buildQuestionTopics();this.buildAllTopics();var a=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.pendingQuestions");var c={};c.topics=this.pendingQuestion.topics||Array();c.avaiTopics=this.pendingQuestion.avaiTopics||Array();c.qcontent=a[this.questionID].title;c.qdetail=a[this.questionID].content;c.qid=this.questionID;var d=tmpl("QuestionPendingPortlet-EditQuestion",c);var b=$(".questionEmphasized[qid='"+this.questionID+"']").children("span");a[this.questionID]["span"]=b;SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.pendingQuestions",a);$(".questionEmphasized[qid='"+this.questionID+"']").empty().append($(d))},onSavePendingQuestions:function(d){var g=d.id;var b=d.parent;var f=$("#editquestion-title-"+g).val();var c=$("#editquestion-content-"+g).val();var e=this.root+"question/update-un-auth-question";var a=SingletonFactory.getInstance(Subject);$.ajax({url:e,type:"POST",data:{content:c,title:f,qid:g},success:function(j){var h=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.pendingQuestions");var k=h[g]["span"];h[g].title=f;h[g].content=c;SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.pendingQuestions",h);$(".questionEmphasized[qid='"+g+"']").empty().append("<strong>"+f+"</strong>").append(k);a.notifyEvent("NotifyGlobal","Sa thnh cng")},error:function(h){a.notifyEvent("NotifyGlobal","Sa tht bi")}})},onCancelPendingQuestions:function(c){var e=c.id;var a=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.pendingQuestions");var b=a[e]["span"];var d=a[e].title;$(".questionEmphasized[qid='"+e+"']").empty().append("<strong>"+d+"</strong>").append(b)},onToggleDownEditTopic:function(a){var b=a.id;$("#"+b).slideToggle("fast");$("#"+b+" #bkp-topic-search-new").val("");this.buildTopics(SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.topics"))},onToggleUpEditTopic:function(a){var b=a.id;$("#"+b).slideToggle("fast")},onTopicAdded:function(a){this.checkUserLogin(a,"TopicAdded")},topicAdded:function(l){var b=l.id;var f=this.questionID;var d=$("#"+b+"  option:selected");for(var g=0;g<d.length;g++){var j=$(d[g]).val();var n=$(d[g]).text();var e=this.app.getSystemProperties().get("memcached.addedTopics");if(e[f+"-"+j]!=undefined){return}var m={};m.tid=generateId("tt");m.content=n;m.cid=j;var k=tmpl("AnswerPortlet-Topic",m);$("#"+b).parent().siblings(".bkp_question_topics").append(k);e[f+"-"+j]=m.tid;var a=this.app.getSystemProperties();a.set("memcached.addedTopics",e);var h=this.root+"question/add-catchword-un-auth/qid/"+f+"/cid/"+j;var c=SingletonFactory.getInstance(Subject);$.ajax({url:h,data:{},success:function(o){c.notifyEvent("NotifyGlobal","Thm thnh cng")},error:function(){c.notifyEvent("NotifyGlobal","Thm tht bi")}})}},onTopicDeleted:function(a){this.checkUserLogin(a,"TopicDeleted")},topicDeleted:function(h){var b=h.id;var e=this.questionID;var g=$("#"+b).attr("cid");var j=$("#"+b+" label").text();var d=this.app.getSystemProperties().get("memcached.addedTopics");d[e+"-"+g]=undefined;var a=this.app.getSystemProperties();a.set("memcached.addedTopics",d);$("#"+b).remove();var f=this.root+"question/remove-un-auth-catchword/qid/"+e+"/cid/"+g;var c=SingletonFactory.getInstance(Subject);$.ajax({url:f,data:{},success:function(k){c.notifyEvent("NotifyGlobal","Xa thnh cng")},error:function(){c.notifyEvent("NotifyGlobal","Xa tht bi")}})},onTopicChanged:function(n){var b=n.id;var f=n.pid;var l=$("#"+b).val().trim().replace("  "," ").toLowerCase();var j=n.e;var a=SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.topics");var g=Array();var c=null;var k=false;for(var m in a){var o=a[m];var h=o.catchWord.toLowerCase();var d=new RegExp(l);if(h==l){k=true}if(d.test(h)){g.push(o)}}c=this.buildTopics(g);if(c!=null){$("#"+f).empty().append(c.children())}},buildTopics:function(b){var a=$("<div><div></div></div>");for(var e in b){var d=b[e];var c=$("<option value='"+d.id+"'>"+d.catchWord+"</option>");a.children().append(c)}return a.children()},onCreateNewTopicContext:function(a){this.checkUserLogin(a,"CreateNewContext")},checkUserLogin:function(c,b){var d={};d.type=b;d.evtData=c;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",d)},onRejectChanges:function(b){var c=b.uid;var a=b.aid;$("#extension-content-plhld-"+a+"-"+c).children().hide("fast")},onLoginSuccess:function(b){var a=b.type;var c=b.evtData;if(a!=undefined&&c!=undefined){switch(a){case"TopicAdded":this.topicAdded(c);break;case"TopicDeleted":this.topicDeleted(c);break;case"SubmitAnswer":this.submitAnswer(c);break;case"AcceptChanges":this.acceptChanges(c);break;case"CreateNewContext":this.createNewContextSuccess(c);break;case"EditPendingQuestion":this.editPendingQuestion(c);break;default:break}}},createNewContextSuccess:function(){var b=SingletonFactory.getInstance(Subject);var a=SingletonFactory.getInstance(Page).getRequest();var d=a.getParams();var c=new Request("TopicCreatePage","",{pageCallBack:d.page,needParam:true});b.notifyEvent("RequestRoute",c)},onHtmlUpdated:function(){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.id");$(".extension-point[extensionName='ProfileImageCheck'][uid='"+a+"']").css("background-color","#FAFAFA")}}).implement(PluginInterface);MoreContentPlugin=Class.extend({init:function(){this.name="MoreContentPlugin"},onHtmlRendered:function(a){},onCheckMoreLessContent:function(a){this.render(a)},render:function(c){var d=240;var b="...";var a=0;$('.extension-point[extensionName="MoreContent"]').each(function(){var e=$(this).text().substr(0,d).trim();$(this).html(e+b)})}}).implement(PluginInterface);ProfileNameEditPlugin=Class.extend({init:function(){this.name="ProfileNameEditPlugin"},saveData:function(b){var d=b.target;var c=$(d).val().trim();var a=$(d).attr("oldValue");if(c==""){c=a}$(d).parent().removeAttr("editing");$(d).parent().html(c);if(a!=c){this.onAjax("user-ajax","edit-name",{name:c},"POST",{})}},onProfileEditOnBlur:function(a){this.saveData(a)},onProfileEditOnKeyup:function(b){var a=b.keyCode;if(a==13){this.saveData(b)}},onProfileNameEditClick:function(c){var d=c.target;var a=$(d).parent().siblings("#BriefInfoEditPortlet-ProfileName");if($(a).attr("editing")=="editing"){return}var b=$(a).html();$(a).attr("editing","editing");$(a).html('<input type="text" oldValue="'+b+'" onkeyup="generateEvent(&apos;ProfileEditOnKeyup&apos;, event)" onblur="generateEvent(&apos;ProfileEditOnBlur&apos;, event)" value="'+b+'">');$(a).find("input").focus()},renderEditLink:function(){var a=this;$('.extension-point[extensionName="ProfileName"]').each(function(b,c){if($(c).find('div[flag="ProfileNameEdit"]').length>0){return}$(c).append(tmpl("ProfileNameEdit",{}))})},onHtmlUpdated:function(){this.renderEditLink()}}).implement(PluginInterface).implement(AjaxInterface);SearchResHelperPlugin=Class.extend({init:function(){this.name="SearchResHelperPlugin"},checkTopics:function(a){$('.extension-point[extensionName="CheckTopicsAvai"]').each(function(){var b=$(this).children("a");var d=b.length;var c=4;b.slice(c,d).remove();if(d>c){$(this).append("<label style='color:#666666'>...</label>")}})},checkContentAvai:function(a){$('.extension-point[extensionName="CheckContentAvai"]').each(function(){var b=$(this).find(".show_more_content").html().trim();if(b!=""){$(this).css("display","inline-block")}})},localCheckTopic:function(a){$(a).find('.extension-point[extensionName="CheckTopicsAvai"]').each(function(b,f){var c=$(f).children("a");var e=c.length;var d=4;c.slice(d,e).remove();if(e>d){$(f).append("<label style='color:#666666'>...</label>")}})},localCheckContentAvai:function(a){$(a).find('.extension-point[extensionName="CheckContentAvai"]').each(function(b,d){var c=$(d).find(".show_more_content").html().trim();if(c!=""){$(d).css("display","inline-block")}})},onHtmlRendered:function(a){this.checkContentAvai(a);this.checkTopics(a)},onRequestCheckAnswerContent:function(a){this.localCheckContentAvai(a);this.localCheckTopic(a)}}).implement(PluginInterface);HungPDArticleTabPlugin=Class.extend({init:function(){this.name="HungPDArticleTabPlugin";this.type=undefined},onArticleSearchResultChangeType:function(a){this.type=a.type;this.refreshType()},onArticleSearchResultChangeScope:function(a){this.scope=a.scope;this.refreshScope()},refreshType:function(){var a=this.type;$('a[type="tatca"]').removeClass("active");$('a[type="baibaokhoahoc"]').removeClass("active");$('a[type="chiasekinhnghiem"]').removeClass("active");$('a[type="baiphongvanhay"]').removeClass("active");$('a[type="cauhoichatluong"]').removeClass("active");if(a=="tatca"||a==undefined){$('a[type="tatca"]').addClass("active")}else{if(a=="baibaokhoahoc"){$('a[type="baibaokhoahoc"]').addClass("active")}else{if(a=="chiasekinhnghiem"){$('a[type="chiasekinhnghiem"]').addClass("active")}else{if(a=="baiphongvanhay"){$('a[type="baiphongvanhay"]').addClass("active")}else{if(a=="cauhoichatluong"){$('a[type="cauhoichatluong"]').addClass("active")}}}}}},refreshScope:function(){var a=this.scope;$('a[scope="theoluongvote"]').removeClass("active");$('a[scope="theongaythang"]').removeClass("active");if(a=="theongaythang"||a==undefined){$('a[scope="theongaythang"]').addClass("active")}else{$('a[scope="theoluongvote"]').addClass("active")}},onHtmlUpdated:function(){$('.extension-point[extensionName="ArticleSearchResultTitle"]').each(function(a,b){if($(b).find('[flag="ArticleTab"]').length>0){return}$(b).append(tmpl("ArticleTabTemplate",{}))});$('.extension-point[extensionName="ArticleSearchResultPostTitle"]').each(function(a,b){if($(b).find('[flag="ArticleTab"]').length>0){return}$(b).append(tmpl("ArticleTabScopeTemplate",{}))});this.refreshScope();this.refreshType()},onEnd:function(){$("#effective-area .tab-article").remove()}}).implement(PluginInterface);HungPDEditArticleButtonPlugin=Class.extend({init:function(){this.name="HungPDEditArticleButtonPlugin"},onMakeNewTargetedQuestion:function(b){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("MakeNewQuestion",{profile:[{name:profileName,id:pid}]})},onHtmlUpdated:function(){$('.extension-point[extensionName="HungPDEditArticleSpan"]').each(function(c,f){var e=SingletonFactory.getInstance(Application).getSystemProperties();var a=e.get("user.login");var b=undefined;if(a==1){var d=e.get("user.id");b=$(f).siblings(".HungPDEditArticleUserIDSpan").html();aid=$(f).siblings(".HungPDEditArticleIDSpan").html();isSelected=$(f).siblings(".HungPDEditArticleIsSelectedSpan").html();if((d!=b)){return}if(isSelected==1){return}}else{return}if($(this).find('.[flag="HungPDEditArticleFlag"]').length>0){return}$(this).append(tmpl("HungPDEditArticleButtonPluginTmpl",{aid:aid}))})}}).implement(PluginInterface);HungPDDeleteArticleCommentPlugin=Class.extend({init:function(){this.name="HungPDDeleteArticleCommentPlugin"},onHtmlUpdated:function(){$('.extension-point[extensionName="HungPDCommentArticleSpan"]').each(function(b,e){var d=SingletonFactory.getInstance(Application).getSystemProperties();var a=d.get("user.login");var g=undefined;var f=undefined;if(a==1){var c=d.get("user.id");g=$(e).siblings(".HungPDCommentIDSpan").html();f=$(e).siblings(".HungPDCommentUserIDSpan").html();if(c!=f){return}}else{return}if($(e).find('.[flag="HungPDCommentFlag"]').length>0){return}$(e).append(tmpl("HungPDDeleteArticleButtonPluginTmpl",{commentID:g}))});return}}).implement(PluginInterface);HungPDArticleVotePlugin=Class.extend({init:function(){this.name="HungPDArticleVotePlugin"},onHtmlUpdated:function(){$('.extension-point[extensionName="HungPDVoteSpan"]').each(function(f,j){var h=SingletonFactory.getInstance(Application).getSystemProperties();var g=h.get("user.login");var a=undefined;var d=undefined;var b=undefined;var c="";if(g==1){var e=h.get("user.id");b=$(j).siblings(".HungPDVoteNeedToVoteSpan").html();a=$(j).siblings(".HungPDVoteAuthorIDSpan").html();d=$(j).siblings(".HungPDVoteArticleIDSpan").html();if(e!=a){if(b==1){c=tmpl("HungPDArticleVoteButtonTmpl",{articleID:d,authorID:a})}else{if(b==2){c=tmpl("HungPDArticleUnVoteButtonTmpl",{articleID:d,authorID:a})}}}else{return}}else{return}if($(j).find('.[flag="HungPDArticleVoteFlag"]').length>0){return}$(j).append(c)});return}}).implement(PluginInterface);HungPDIsSelectedTabPlugin=Class.extend({init:function(){this.name="HungPDArticleVotePlugin";this.type=null},onIsSelectedArticleChangeType:function(a){this.type=a.type;this.refreshType()},refreshType:function(){var a=this.type;$('a[type="dadang"]').removeClass("active");$('a[type="chuadang"]').removeClass("active");if(a=="dadang"||a==undefined){$('a[type="dadang"]').addClass("active")}else{if(a=="chuadang"){$('a[type="chuadang"]').addClass("active")}}},onHtmlUpdated:function(){var a=this;$('.extension-point[extensionName="ArticleIsSelectedTab"]').each(function(c,h){var f=SingletonFactory.getInstance(Application).getSystemProperties();var b=f.get("user.login");var e=undefined;var g="";if(b==1){var d=f.get("user.id");e=$(h).siblings(".HungPDIsSelectedAuthorIDSpan").html();if(d==e){}else{return}}else{return}if($(h).find('.[flag="ArticleIsSelectedTabFlag"]').length>0){return}$(h).append(tmpl("ArticleIsSelectedTabTemplate",{}));a.refreshType()});return}}).implement(PluginInterface);TopicInterestAdderPlugin=Class.extend({init:function(){this.name="TopicInterestAdderPlugin"},onAddTopicToInterest:function(a){tid=SingletonFactory.getInstance(Page).getRequest().getParam("id");this.onAjax("user-ajax","add-single-interest",{id:tid},"POST",{onSuccess:function(){$(a.target).remove()}})},onHtmlUpdated:function(){var a=this;$('.extension-point[extensionName="TopicControl"]').each(function(){if($(this).find('[flag="TopicInterestAdder"]').length>0){return}$(this).append('<span flag="TopicInterestAdder"></span>');var c=SingletonFactory.getInstance(Application).getSystemProperties();var b=c.get("user.login");var d=this;if(b==1){tid=SingletonFactory.getInstance(Page).getRequest().getParam("id");a.onAjax("catchword","user-has-interest",{id:tid},"GET",{onSuccess:function(e){if(e==0){$(d).append(tmpl("TopicInterestAdderTmpl",{}))}}})}})}}).implement(PluginInterface).implement(AjaxInterface);ArticleBrowserPortlet=Class.extend({init:function(){this.name="ArticleBrowserPortlet"},onBegin:function(){this.registerObserver()},onTopMenuActive:function(a){if(a!=this.name){$("#ArticleBrowserPortlet-ContentPlaceholder").html("");return}var b=this;this.onAjax("article","browse-articles",{},"GET",{onSuccess:function(c){b.model={};b.model.articles=Array();for(var d in c){b.model.articles.push(c[d])}b.getPortletPlaceholder().paintCanvas(b.render());b.requestForEffectiveResource("ContentPlaceholder").find("ul:first").addClass("first");b.requestForEffectiveResource("ContentPlaceholder").find("ul:last").addClass("last")}},true,300000)},onReloadPage:function(){this.checkActive()},run:function(){},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);ArticleCommentPortlet=Class.extend({init:function(){this.name="ArticleCommentPortlet";this.articleID=null;this.articleDetail=null;this.model={};this.root=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");this.uid=SingletonFactory.getInstance(Application).getSystemProperties().get("user.id");this.needMCE=true;this.activeCommentPage=1;this.totalCommentPage=0},onBegin:function(){this.registerObserver();this.getArticleID()},trim:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},trimOfEditor:function(a){return a.replace(/^(&nbsp;)+/,"").replace(/(&nbsp;)+$/,"")},convertHtmlDataToDisplay:function(a){return a.replace(/\\n/g,"").replace(/\\/g,"")},getArticleID:function(){this.articleID=this.getRequest().getParam("aid");if(this.articleID==null||this.articleID==undefined){var a=SingletonFactory.getInstance(Subject);var b=new Request("ErrorPage",undefined,{code:"888",msg:"Li",content:"Bi vit khng tn ti trong h thng!"});a.notifyEvent("RequestRoute",b)}},getAjax:function(){var a=this;this.onAjax("article","get-detail",{id:this.articleID},"POST",{onSuccess:function(b){a.articleDetail=b;a.model=b;var d=b.type;if(d==1){a.model.atype="Bi bo khoa hc"}else{if(d==2){a.model.atype="Bi chia s kinh nghim"}else{if(d==3){a.model.atype="Cu hi hay"}else{a.model.atype="Bi phng vn"}}}a.getPortletPlaceholder().paintCanvas(a.render());$(".simple_tab a").removeClass("active");$(".simple_tab a[type="+d+"]").addClass("active");var c=SingletonFactory.getInstance(Subject);c.notifyEvent("CleanFont")},onFailure:function(b){alert("tht bi ri!")}})},initEditor:function(){if(this.needMCE){this.requestForEffectiveResource("TextAreaContainer").html(this.renderView("MCE",{}));var a="HungPDArticleCommentPortlet-CommentTextEditor"}},buildArticleContent:function(){var b={};var a=this.name+"-content-template";b.articleID=this.articleDetail.details.id;b.content=this.convertHtmlDataToDisplay(this.articleDetail.details.content);var c=tmpl(a,b);this.model.articleContent=c},buildArticleComments:function(){var d={};var a=this.name+"-articleComment-template";var c="";var b=this.articleDetail.commentsUserID;if(b.length==0){this.model.articleComments="";return}start=(this.activeCommentPage-1)*5;while((start<(this.activeCommentPage*5))&&(start<this.articleDetail.commentsID.length)){d={};d.commentsID=this.articleDetail.commentsID[start];d.commentsUserID=this.articleDetail.commentsUserID[start];d.commentsUserFullName=this.articleDetail.commentsUserFullName[start];d.commentsCreatedDate=this.articleDetail.commentsCreatedDate[start];d.commentsContent=this.convertHtmlDataToDisplay(this.articleDetail.commentsContent[start]);c+=tmpl(a,d);start++}this.model.articleComments=c},buildArticleCommentPagination:function(){var a={};a.activeCommentPage=this.activeCommentPage;a.totalCommentPage=this.totalCommentPage;if(this.totalCommentPage>1){this.requestForEffectiveResource("NavigationLink").html(tmpl("HungPDArticleCommentPortlet-articleComment-SearchMoreButton-template",a))}},onSubmitComment:function(a){var b=this;var c=this.trim($("#"+this.name+"-CommentTextEditor").val());if(this.trim(c).length>300){alert("Rt tic! Hy nhp ng 300 t")}else{if(this.trim(c).length==0){alert("Khng nhp ni dung rng!")}else{this.onAjax("article","add-article-comment",{articleID:this.articleID,content:c},"POST",{onSuccess:function(d){b.run()},onFailure:function(d){alert("tht bi ri!")}})}}},onDeleteArticleComment:function(b){var c=this;var d=b.commentID;var a=window.confirm("C chc chn xa ?");if(!a){return}this.onAjax("article","delete-article-comment",{commentID:d},"POST",{onSuccess:function(e){c.run()},onFailure:function(e){alert("tht bi ri!")}})},onArticleVoteSubmit:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",{type:"ArticleVoteSubmit"})},onLoginSuccess:function(b){if(b.type!="ArticleVoteSubmit"){return}var c=this;var a=this.articleID;this.onAjax("article","add-vote",{id:a},"POST",{onSuccess:function(d){var e=parseInt(c.requestForEffectiveResource("ArticleVote").html());c.requestForEffectiveResource("ArticleVote").html(e+1)}})},onUpdateCommentPage:function(a){if(this.activeCommentPage==1&&a.type==-1){return}if(this.activeCommentPage==this.totalCommentPage&&a.type==1){return}this.activeCommentPage+=a.type;this.run()},run:function(){this.getAjax()},onReloadPage:function(){this.init();this.onBegin();this.run()},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);ArticleEditPortlet=Class.extend({init:function(){this.name="ArticleEditPortlet";this.topicValArray=Array();this.topicValInsertArray=Array();this.topicValDeleteArray=Array();this.topicTextArray=Array();this.articleID=-1;this.app=SingletonFactory.getInstance(Application);this.props=this.app.getSystemProperties()},onBegin:function(){this.model={};var a=this.getRequest().getParams();this.articleID=a.ArticleID;this.registerObserver()},onReloadPage:function(){this.onBegin();this.run()},trim:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},trimOfEditor:function(a){return a.replace(/^(&nbsp;)+/,"").replace(/(&nbsp;)+$/,"")},convertHtmlDataToDisplay:function(a){return a.replace(/\\n/g,"").replace(/\\/g,"")},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());var b="HungPDEditArticlePortlet-ArticleTextEditor";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("TinyEditorInit",{id:b,content:""});a.notifyEvent("HungPDEditArticleTopicInputFetchAutoComplete",{});this.bindingArticleFromServer()},onHungPDEditArticleTopicInputFetchAutoComplete:function(){var c=$("#"+this.name+"-txtTopicInput");var b={};b.selectCallback="HungPDEditArticleTopicInputSelect";b.autocompleteObject=c;b.autocompleteSource="ajax/autocomplete-catchwords";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedAutocomplete",b)},onHungPDEditArticleTopicInputSelect:function(c){var e=c.ui;var b=0;var a=e.item.label;var d=e.item.id;this.appendsTopic({txt:a,value:d})},bindingArticleFromServer:function(){var b=this;var a={};this.onAjax("article","get-article-from-id",{articleID:b.articleID},"GET",{onSuccess:function(d){try{a.articleID=d.details.id;a.articleTypeID=d.details.typeID;a.articleTitle=d.details.title;a.articleSummary=d.details.summary;a.catchwordsID=d.catchwordsID;a.catchwordsName=d.catchwordsName;a.articleContent=d.details.content;if(b.topicValArray==undefined){b.topicValArray=Array()}if(b.topicTextArray==undefined){b.topicTextArray=Array()}for(start=0;start<a.catchwordsID.length;start++){b.topicValArray.push(a.catchwordsID[start]);b.topicTextArray.push(a.catchwordsName[start]);b.appendsTopicFirstTime({txt:a.catchwordsName[start],value:a.catchwordsID[start]})}b.requestForEffectiveResource("txtArticleName").val(a.articleTitle);b.requestForEffectiveResource("cbArticleType").val(a.articleTypeID);b.requestForEffectiveResource("SummaryTextEditor").val(b.convertHtmlDataToDisplay(a.articleSummary));var f=b.name+"-ArticleTextEditor";var c=b.props.get("memcached.tinyeditor");var g=d.details.content;c[f].e.body.innerHTML=b.convertHtmlDataToDisplay(g)}catch(e){b.topicValArray=Array();b.topicTextArray=Array();a.articleID="";a.articleTitle=d.details.title;a.articleSummary=d.details.summary;a.articleContent=d.details.content;alert(e)}}})},appendsTopicFirstTime:function(k){var d=k.txt;var h=k.value;var b=this;for(start=0;start<this.topicTextArray.length;start++){if(b.topicValArray[start]==h){break}}if(start==this.topicTextArray.length){this.topicValArray.push(h);this.topicTextArray.push(d)}var e=this.requestForEffectiveResource("TopicsContainer");var c=this.requestForEffectiveResource("txtTopicInput");var g=$('<label class="tokenContent">'+d+"</label>");var j=$("<span>").addClass("edit_class").append(g);var f=$("<span>").addClass("btnStl").addClass("delToken").bind("click",function(a){var l=0;for(l=0;l<b.topicValArray.length;l++){if(b.topicValArray[l]==h){break}}b.topicValDeleteArray.push(b.topicValArray[l]);alert("delete list: "+b.topicValDeleteArray.length);b.topicValArray.splice(l,1);b.topicTextArray.splice(l,1);$(a.target).parent().remove()}).html("X").css("text-align","center").appendTo(j);e.append(j)},appendsTopic:function(k){var d=k.txt;var h=k.value;var b=this;for(start=0;start<this.topicTextArray.length;start++){if(b.topicValArray[start]==h){break}}if(start==this.topicTextArray.length){this.topicValArray.push(h);this.topicTextArray.push(d);this.topicValInsertArray.push(h)}else{return}var e=this.requestForEffectiveResource("TopicsContainer");var c=this.requestForEffectiveResource("txtTopicInput");var g=$('<label class="tokenContent">'+d+"</label>");var j=$("<span>").addClass("uiToken").append(g);var f=$("<span>").addClass("btnStl").addClass("delToken").bind("click",function(a){var l=0;for(l=0;l<b.topicValArray.length;l++){if(b.topicValArray[l]==h){break}}b.topicValDeleteArray.push(b.topicValArray[l]);b.topicValArray.splice(l,1);b.topicTextArray.splice(l,1);$(a.target).parent().remove()}).html("X").css("text-align","center").appendTo(j);e.append(j)},onHungPDEditArticleSubmit:function(j){var k=Array();var f=this.trim(this.requestForEffectiveResource("txtArticleName").val());var m=this.trim(this.requestForEffectiveResource("cbArticleType").val());var d=this.name+"-ArticleTextEditor";var l=this.props.get("memcached.tinyeditor");var n=this.trim(this.trimOfEditor(l[d].e.body.innerHTML));var a=this.trim(this.requestForEffectiveResource("SummaryTextEditor").val());var h=this.topicValArray.length;if(f==""){k.push("Hy nhp tiu  bi vit!")}if(n==""||n=="<br>"){k.push("Hy nhp ni dung bi vit!")}if(h<=0){k.push("Bi vit phi thuc topic no !")}if(k.length>0){var c='<br/><font color="red">';var b=0;for(b=0;b<k.length;b++){c+=k[b]+"<br/>"}c+="</font>";this.requestForEffectiveResource("ArticleError").html(c)}else{var g=window.confirm("Bn c chc chn mun sa");if(!g){return}var e=this;this.onAjax("article","edit-article",{articleID:this.articleID,title:f,type:m,summary:a,content:n,catchwordsIDToDelete:e.topicValDeleteArray,catchwordsIDToInsert:e.topicValInsertArray},"POST",{onSuccess:function(q){e.topicValArray=Array();e.topicTextArray=Array();var o=q.message;var p=SingletonFactory.getInstance(Subject);p.notifyEvent("NotifyGlobal"," thay i bi vit thnh cng, bn hy i trong giy lt!");window.location="#!page/UserArticle"},onFailure:function(p){var o=Array();o.push("Li  xy ra khi a cu hi. Vui lng check li thng tin!");var q='<br/><font color="red">';var r=0;for(r=0;r<o.length;r++){q+=o[r]+"<br/>"}q+="</font>";e.requestForEffectiveResource("ArticleError").html(q)}})}},onDeleteArticle:function(){var a=window.confirm("Bn c chc chn xa bi vit ny?");if(a){this.onAjax("article","user-delete-article",{articleID:this.articleID},"POST",{onSuccess:function(b){window.alert("Cm n bn. Ni dung bi vit  c xa");window.location="#!page/UserArticle"},onFailure:function(b){}})}},fetch:function(){},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);ArticleInsertCatchwordBoxPortlet=Class.extend({init:function(){this.name="ArticleInsertCatchwordBoxPortlet";this.model={};this.selectedTopics=Array();this.selectedTopicsName=Array();this.usingFacebox=false;this.activeText="";this.activeValue=""},requestForEffectiveResource:function(a){if(this.usingFacebox){return $("#"+this.name+"-"+a)}else{return this._super.requestForEffectiveResource(a)}},onBegin:function(){this.registerObserver()},onReloadPage:function(){this.onBegin();this.run()},onInsertArticleCatchwordsShow:function(a){this.showPortlet(a)},showPortlet:function(a){this.doShowPortlet(a)},doShowPortlet:function(c){this.usingFacebox=true;var d=SingletonFactory.getInstance(Application);var b=SingletonFactory.getInstance(Subject);b.notifyEvent("ShowPopup",{id:"HungPDInsertArticleCatchwordBox",title:"Hy nhp topic",content:this.render()});if(this.selectedTopics!=undefined&&this.selectedTopics.length>0){var e=0;for(e=0;e<this.selectedTopics.length;e++){this.activeText=this.selectedTopicsName[e];this.activeValue=this.selectedTopics[e];this.appendTopic()}}var a=SingletonFactory.getInstance(Subject);a.notifyEvent("FetchArticleTopicsAutoComplete")},run:function(){this.getPortletPlaceHolder.paintCanvas(this.render())},onEnd:function(){this.unregisterObserver()},onFetchArticleTopicsAutoComplete:function(){var b={};var c=this.requestForEffectiveResource("InputBox");b.selectCallback="InsertArticleCatchwordSelect";b.autocompleteObject=c;b.autocompleteSource="ajax/autocomplete-catchwords";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedAutocomplete",b)},onInsertArticleCatchwordSelect:function(d){var f=d.ui;var c=0;var a=f.item.label;var e=f.item.id;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("InsertArticleCatchwordPortletAppend",{txt:a,value:e})},onInsertArticleCatchwordPortletAppend:function(k){var c=k.txt;var j=k.value;var d=this.requestForEffectiveResource("AddTopicContainer");var e=this.requestForEffectiveResource("InputBox");if(this.selectedTopics==undefined){this.selectedTopics=Array()}if(this.selectedTopicsName==undefined){this.selectedTopicsName=Array()}for(i=0;i<this.selectedTopics.length;i++){if(this.selectedTopics[i]===j){return}}var h=$("<label class='tokenContent'>"+c+"</label>");this.selectedTopics.push(j);this.selectedTopicsName.push(c);var b=this;var m=this.selectedTopics;var l=this.selectedTopicsName;var g=$("<span>").addClass("uiToken").append(h);var f=$("<span>").addClass("btnStl").addClass("delToken").bind("click",function(a){var n=0;for(n=0;n<m.length;n++){if(m[n]===j){break}}m.splice(n,1);l.splice(n,1);$(a.target).parent().remove()}).html("X").css("text-align","center").appendTo(g);d.append(g)},onInsertArticleCatchwordsButtonClick:function(b){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("AppendTopicsToPage",{topicValue:this.selectedTopics,topicText:this.selectedTopicsName})},appendTopic:function(){var b=this.activeText;var g=this.activeValue;var c=this.requestForEffectiveResource("AddTopicContainer");var d=this.requestForEffectiveResource("InputBox");if(this.selectedTopics==undefined){this.selectedTopics=Array()}if(this.selectedTopicsName==undefined){this.selectedTopicsName=Array()}var f=$("<label class='tokenContent'>"+b+"</label>");var j=this.selectedTopics;var k=this.selectedTopicsName;var h=$("<span>").addClass("uiToken").append(f);var e=$("<span>").addClass("btnStl").addClass("delToken").bind("click",function(a){var l=0;for(l=0;l<j.length;l++){if(j[l]===g){break}}j.splice(l,1);k.splice(l,1);$(a.target).parent().remove()}).html("X").css("text-align","center").appendTo(h);c.append(h)},onInsertArticleCatchwordsButtonClick:function(b){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("AppendTopicsToPage",{topicValue:this.selectedTopics,topicText:this.selectedTopicsName})}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);ArticleInsertPortlet=Class.extend({init:function(){this.name="ArticleInsertPortlet";this.topicValArray=Array();this.topicTextArray=Array();this.app=SingletonFactory.getInstance(Application);this.props=this.app.getSystemProperties()},onBegin:function(){this.registerObserver()},onReloadPage:function(){this.onBegin();this.run()},onAppendTopicsToPage:function(b){var c="<br/>";this.topicValArray=b.topicValue;this.topicTextArray=b.topicText;var d=0;for(d=0;d<this.topicValArray.length;d++){c+=this.topicTextArray[d]+" "+this.topicValArray[d]+"<br/>"}c+="<br/>";this.requestForEffectiveResource("TopicsContainer").html(c);var a=SingletonFactory.getInstance(Subject);a.notifyEvent("PopupRemove",{id:"HungPDInsertArticleCatchwordBox"})},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());var b="HungPDInsertArticlePortlet-ArticleTextEditor";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("TinyEditorInit",{id:b,content:""})},trim:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},trimOfEditor:function(a){return a.replace(/^(&nbsp;)+/,"").replace(/(&nbsp;)+$/,"")},onHungPDInsertArticleSubmit:function(k){var l=Array();var f=this.trim(this.requestForEffectiveResource("txtArticleName").val());var n=this.trim(this.requestForEffectiveResource("cbArticleType").val());var d=this.name+"-ArticleTextEditor";var m=this.props.get("memcached.tinyeditor");var o=this.trim(this.trimOfEditor(m[d].e.body.innerHTML));var a=this.trim(this.requestForEffectiveResource("SummaryTextEditor").val());var j=this.topicValArray.length;if(f==""){l.push("Hy nhp tiu  bi vit!")}if(o==""||o=="<br>"){l.push("Hy nhp ni dung bi vit!")}if(j<=0){l.push("Bi vit phi thuc topic no !")}if(l.length>0){var c='<br/><font color="red">';var b=0;for(b=0;b<l.length;b++){c+=l[b]+"<br/>"}c+="</font>";this.requestForEffectiveResource("ArticleError").html(c)}else{var h=null;if(this.topicValArray.length>0){h=new Array();for(var g=0;g<this.topicValArray.length;g++){h.push({catchword_id:this.topicValArray[g]})}var e=this;this.onAjax("article","add-article",{title:f,type:n,summary:a,content:o,"catch":h},"POST",{onSuccess:function(q){e.topicValArray=Array();e.topicTextArray=Array();var p=SingletonFactory.getInstance(Subject);p.notifyEvent("NotifyGlobal"," nhp bi vit thnh cng, bn hy i trong giy lt!");window.location="#!page/Article"},onFailure:function(q){var p=Array();p.push("Li  xy ra khi a cu hi. Vui lng check li thng tin!");var r='<br/><font color="red">';var s=0;for(s=0;s<p.length;s++){r+=p[s]+"<br/>"}r+="</font>";e.requestForEffectiveResource("ArticleError").html(r)}})}}},fetch:function(){},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);ArticleListPortlet=Class.extend({init:function(){this.name="ArticleListPortlet"},onReloadPage:function(){this.run()},run:function(){var d=this;var c=this.getInitParameters().compact;var b=this.getRequest().getParam("t");var a=undefined;if(c==1){a=5}this.onAjax("article","list-articles",{type:b,pageSize:a},"GET",{onSuccess:function(e){d.model={};d.model.list=e;d.getPortletPlaceholder().paintCanvas(d.render());if(c==1){$(".simple_tab").remove();d.requestForEffectiveResource("Info").remove()}else{$(".simple_tab a").removeClass("active");if(b==undefined){b=0}$(".simple_tab a[type="+b+"]").addClass("active")}}})}}).implement(RenderInterface).implement(PortletInterface).implement(AjaxInterface);ArticleSummaryPortlet=Class.extend({init:function(){this.name="ArticleSummaryPortlet"},onReloadPage:function(){this.run()},run:function(){var b=this.getRequest().getParam("aid");this.getPortletPlaceholder().paintCanvas(this.render());var a=this;this.onAjax("article","get-summary",{id:b},"GET",{onSuccess:function(c){a.requestForEffectiveResource("ContentPlaceholder").html(a.renderView("ContentTmpl",c))}})}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface);FeaturedArticlesPortlet=Class.extend({init:function(){this.name="FeaturedArticlesPortlet";this.action="get-most-voted-articles"},run:function(){var a=this;this.getPortletPlaceholder().paintCanvas(this.render());this.onAjax("ajax",this.action,{},"GET",{onSuccess:function(c){for(var d in c){var b=75;if(c[d].summary!=undefined){var f=c[d].summary.trim().substr(0,b-3);var e=f.lastIndexOf(" ");if(e!=-1){f=f.substr(0,e)}c[d].summary=f+"..."}}a.requestForEffectiveResource("ContentPlaceholder").html(a.renderView("FeaturedArticles",{articles:c}))}})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);LatestArticlesPortlet=FeaturedArticlesPortlet.extend({init:function(){this.name="LatestArticlesPortlet";this.action="get-latest-articles"}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);FeaturedNewsPortlet=Class.extend({init:function(){this.name="FeaturedNewsPortlet"},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.fetch()},fetch:function(){var a=this;this.onAjax("ajax","get-featured-news",{},"POST",{onSuccess:function(b){a.requestForEffectiveResource("News").html(a.renderView("NewsTmpl",{news:b}))}})},onDynamicEditViewButtonClick:function(a){this.requestForEffectiveResource("News").find(".dynamic-edit-editable").hide()},onDynamicEditEditButtonClick:function(a){this.requestForEffectiveResource("News").find(".dynamic-edit-editable").show()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);NewsInsertPortlet=Class.extend({init:function(){this.name="NewsInsertPortlet"},onBegin:function(){this.registerObserver()},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.fetch()},fetch:function(){var a=this;var b=this.getRequest().getParam("id");this.onAjax("ajax","get-partner-news",{id:b},"POST",{onSuccess:function(h){var c="partnerNews";var d="NewsTmpl";var f=a.requestForEffectiveResource("News");for(var g=0;g<h.length;g++){var e=h[g]["id"];h[g].isNew=0;h[g].tbl=c;a.encapData(h[g],c,e,b);f.append(a.renderView(d,{news:h[g]}))}a.design(a.requestForEffectiveResource("News"));var j=SingletonFactory.getInstance(Application).getSystemProperties();var l=j.get("user.id",undefined);if(b===l){a.requestForEffectiveResource("News").find("span.dynamic-edit-selection").show()}else{a.requestForEffectiveResource("News").find("span.dynamic-edit-selection").hide()}a.requestForEffectiveResource("News").find(".dynamic-edit-editable").hide();var k=SingletonFactory.getInstance(Subject);k.notifyEvent("AttachFocusDetection",{target:a.requestForEffectiveResource("News").find("[name='title']"),defaultValue:"Nhp vo ta  tin tc"});k.notifyEvent("AttachFocusDetection",{target:a.requestForEffectiveResource("News").find("[name='content']"),defaultValue:"Nhp vo tm tt tin tc"});k.notifyEvent("AttachFocusDetection",{target:a.requestForEffectiveResource("News").find("[name='url']"),defaultValue:"Nhp vo ng dn ti tin tc"});k.notifyEvent("AttachFocusDetection",{target:a.requestForEffectiveResource("News").find("[name='title_new']"),defaultValue:"Nhp vo ta  tin tc mi"})}})},onDynamicEditSaveButtonClick:function(c){var h=this;var g=$(c.target).siblings("input");var b=g.attr("name");var j=g.attr("tid");var f=g.attr("tbl");var d=g.val();var a=[{key:b,tbl:f,id:j,val:d}];this.onAjax("ajax","dynamic-update-profile",{data:a},"GET",{onSuccess:function(k){var l=g.parent(".dynamic-edit-form");var e=l.siblings(".dynamic-edit-content");e.find(".dynamic-edit-content-value").text($.trim(g.val()));e.show();l.hide();l.parents(".row").find("input").attr("tid",k[0]);l.parents(".row").find("div.uploader").find("input").attr("value",k[0]);l.parents(".row").find(".dynamic-edit-new-hide-first").show()},onFailure:function(e){alert("Fail")}})},onDynamicEditCommitButtonClick:function(c){var f=this;var b=[];var d=this.requestForEffectiveResource("News").find(".dynamic-edit-form:visible input");var a=0;d.each(function(){var e=$(this).attr("name");var j=$(this).attr("tid");var h=$(this).attr("tbl");var g=$(this).val();b[a++]={key:e,tbl:h,id:j,val:g}});this.onAjax("ajax","dynamic-edit-commit",{data:b},"GET",{onSuccess:function(e){alert("Success");d.each(function(){var h=$(this).parent(".dynamic-edit-form");var g=h.siblings(".dynamic-edit-content");g.find(".dynamic-edit-content-value").text($.trim(this.value));g.show();h.hide()})},onFailure:function(e){alert("Fail")}})},onChangeNewsImage:function(c){var f=c.e.target;var b=$(f).parent();var a=b.submit();var g=$(f).attr("tid");var e=this;var d=function(){e.onAjax("ajax","get-news-image",{id:g},"GET",{onSuccess:function(h){b.parent().siblings("a").find("img").attr("src",h)},onFailure:function(h){alert("Fail")}})};setTimeout(d,200)},onDyanmicEditDeleteButtonClick:function(b){var a=confirm("Bn chc mun xa ch?'");if(a){var e=$(b.target);var f=e.parents("div.row").hide();var d="";var c="";f.find("input[tid]").each(function(){if(d===""){d=$(this).attr("tid");c=$(this).attr("tbl")}});json=[];json[0]={tbl:c,id:d};this.onAjax("ajax","dynamic-delete-profile",{data:json},"GET",{onSuccess:function(g){alert("Xa thnh cng!")},onFailure:function(g){alert("C li xy ra khi xa")}})}},saveRows:function(g,c){var b=g.attr("name");if(b==="title_new"){b="title"}var j=g.attr("tid");var h=g.parents("[profileExtension]").attr("fatherID");var f=g.parents("[profileExtension]").attr("tbl");var d=g.val();var a=[{key:b,tbl:f,id:j,val:d,fatherID:h}];this.onAjax("ajax","dynamic-update-profile",{data:a},"GET",{onSuccess:function(k){var l=g.parent(".dynamic-edit-form");var e=l.siblings(".dynamic-edit-content");e.find(".dynamic-edit-content-value").text($.trim(g.val()));e.show();l.hide();l.parents(".row").find("input").attr("tid",k[0]);l.parents(".row").find("div.uploader").find("input").attr("value",k[0]);l.parents(".row").find(".dynamic-edit-new-hide-first").show();if(c!=null){c.call(this,k[0])}},onFailure:function(e){alert("Fail")}})},onAddNewItem:function(b){var a=b.target;var d=b;var c=this;if(d.which==13){c.saveRows($(d.target),function(k){var j=$(d.target).parents("[profileExtension]").attr("fatherID");var g=$(d.target).parents("[profileExtension]").attr("level");var h=$(d.target).parents("[profileExtension]").attr("tbl");var e=$(d.target).parents("[profileExtension]").attr("tmpl");var f={title:d.target.value,isNew:1,fatherID:j,level:g,tbl:h,id:k};c.encapData(f,h,k,d.target.level);$(d.target).after(c.renderView(e,{news:f}));c.design($(d.target).parent());$(d.target).val("")})}},onDynamicEditAddButtonClick2:function(b){var d=this;var c=this.requestForEffectiveResource("News").find(".dynamic-edit-main .row:last");var a=c.clone();c.find(".dynamic-edit-new-hide-first").hide();c=c.show()[0];this.requestForEffectiveResource("News").find(".dynamic-edit-main").append(a);this.design($(c))},onDynamicEditAddButtonClick:function(d){var f=this;var c="news";var a="NewsTmpl";var b="[profileExtension='"+c+"']";var e=$(f.requestForEffectiveResource("News")).find(b);b={partner:{fatherID:{val:d.fatherID},tbl:{val:d.tbl},isNew:{val:1}}};e.append(f.renderView(a,b));f.design(f.requestForEffectiveResource("News"))},onDynamicEditViewButtonClick:function(a){this.requestForEffectiveResource("News").find(".dynamic-edit-editable").hide()},onDynamicEditEditButtonClick:function(a){this.requestForEffectiveResource("News").find(".dynamic-edit-editable").show()},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface).implement(InlineEditorInterface);PartnerBasicInfoPortlet=Class.extend({init:function(){this.name="PartnerBasicInfoPortlet";this.registerObserver()},onBegin:function(){this.model={};this.registerObserver()},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.fetch()},fetch:function(){var a=this;var b=this.getRequest().getParam("id");this.onAjax("ajax","get-partner-intro",{id:b},"POST",{onSuccess:function(f){var c="partner";var d="IntroductionTmpl";var h=f.id;a.encapData(f,c,h,b);a.requestForEffectiveResource("Introduction").html(a.renderView(d,{partner:f}));a.design(a.requestForEffectiveResource("Introduction"));var g=SingletonFactory.getInstance(Application).getSystemProperties();var e=g.get("user.id",undefined);if(b==e){a.requestForEffectiveResource("Introduction").find("span.dynamic-edit-selection").show()}else{a.requestForEffectiveResource("Introduction").find("span.dynamic-edit-selection").hide()}a.requestForEffectiveResource("Introduction").find(".dynamic-edit-editable").hide()}})},onDynamicEditViewButtonClick:function(a){this.requestForEffectiveResource("Introduction").find(".dynamic-edit-editable").hide()},onDynamicEditEditButtonClick:function(a){this.requestForEffectiveResource("Introduction").find(".dynamic-edit-editable").show()},onDynamicEditSaveButtonClick:function(c){var h=this;var g=$(c.target).siblings("input");var b=g.attr("name");var j=g.attr("tid");var f=g.attr("tbl");var d=g.val();var a=[{key:b,tbl:f,id:j,val:d}];this.onAjax("ajax","dynamic-update-profile",{data:a},"POST",{onSuccess:function(k){var l=g.parent(".dynamic-edit-form");var e=l.siblings(".dynamic-edit-content");e.find(".dynamic-edit-content-value").html($.trim(g.val()));e.show();l.hide();l.parents(".row").find("input").attr("tid",k[0]);l.parents(".row").find(".dynamic-edit-new-hide-first").show()},onFailure:function(e){alert("Fail")}})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(InlineEditorInterface).implement(ObserverInterface);PartnerLinkPortlet=Class.extend({init:function(){this.name="PartnerLinkPortlet"},onBegin:function(){this.model={}},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render())}}).implement(PortletInterface).implement(RenderInterface);PartnerProfileEditPortlet=Class.extend({init:function(){this.name="PartnerProfileEditPortlet"},onBegin:function(){this.model={};this.registerObserver()},onCancelUpdateProfile:function(b){var a=$(b).parent();a.hide();a.siblings(".edit_content").show();a.siblings(".edit-note").show()},onUpdateProfile:function(a){var b=this;this.onAjax("user-ajax","update-profile",{field:a.field,value:a.value},"get",{onSuccess:function(c){var d=$(a.target).parent();if(a.show){return}d.hide();d.siblings(".edit_content").show();d.siblings(".edit-note").show();d.siblings(".edit_content").html(a.value)},onFailure:function(d){var c=SingletonFactory.getInstance(Subject);c.notifyEvent("NotifyError",d)}})},run:function(){var a=this;this.onAjax("ajax","get-profile-info",{},"GET",{onSuccess:function(b){if(b==undefined){b={}}a.model={result:b};a.getPortletPlaceholder().paintCanvas(a.render());$('input[value="'+b.gender+'"]').attr("checked","checked");$(".edit-note").click(function(){$(this).siblings(".edit_content").hide();$(this).hide();$(this).siblings(".edit_placeholder").show()})},})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface).implement(InlineEditorInterface);PartnerProfilePortlet=Class.extend({init:function(){this.name="PartnerProfilePortlet"},onBegin:function(){this.model={}},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.fetch()},fetch:function(){var a=this;var b=this.getRequest().getParam("id");this.onAjax("ajax","get-profile-info",{id:b},"GET",{onSuccess:function(c){a.requestForEffectiveResource("HeaderInfo").html(a.renderView("HeaderInfoTmpl",{partner:c}))},})},onEnd:function(){}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);PartnersPortlet=Class.extend({init:function(){this.name="PartnersPortlet"},onBegin:function(){this.model={}},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render())}}).implement(PortletInterface).implement(RenderInterface);ProfileViewPortlet=Class.extend({init:function(){this.name="ProfileViewPortlet"},onBegin:function(){this.model={};this.registerObserver()},run:function(){var a=this;var b=this.getRequest().getParam("id");this.onAjax("ajax","get-profile-info",{id:b},"GET",{onSuccess:function(c){a.model={result:c};a.getPortletPlaceholder().paintCanvas(a.render())},})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface).implement(InlineEditorInterface);BestProfilesPortlet=Class.extend({init:function(){this.name="BestProfilesPortlet";this.model={};this.defaultResultNo=5},onBegin:function(){this.registerObserver();this.cache=new Array();this.expertiseID=this.getRequest().getParam("id")},run:function(){var g=this;this.getPortletPlaceholder().paintCanvas(this.render());var f="expertise_name_"+this.expertiseID;var e="expert_rank_position_"+this.expertiseID;var d="expert_rank_percentage_"+this.expertiseID;var c="expert_rank_name_"+this.expertiseID;var b="interest_name_"+this.expertiseID;var j=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");var a=j+"/person/hardcore?wt=json&version=2.2&echoParams=NONE";var h="profile_id,full_name,avatar,"+f+","+e+","+d+","+c+","+b;$.getJSON(a,{rows:5,q:this.expertiseID,fl:h},function(k){k=k.response.docs;g.cache.bestprofilepage=0;g.cache.bestprofiles=new Array();if(k.length!=0){g.cache.bestprofiles=k;g.fetchData(k,0,g.defaultResultNo)}else{g.requestForEffectiveResource("TopContent").find(".top-userpro").append("<div class='italic'>Cha c xp hng</div>")}})},fetchData:function(l,a,m){this.requestForEffectiveResource("TopContent").find(".top-userpro").empty();var b=true;for(var g=a;g<m;g++){if(l[g]==undefined){continue}var o={};o.avatar=l[g].avatar;o.name=l[g].full_name;var j="expertise_name_"+this.expertiseID;var k="expert_rank_name_"+this.expertiseID;var h="interest_name_"+this.expertiseID;o.topic=l[g][j]||l[g][k]||l[g][h];var n="expert_rank_position_"+this.expertiseID;if(l[g][n]!=undefined){o.rank=(g+1)}else{o.rank=undefined;b=false}o.id=l[g].profile_id;var f={};var e="expert_rank_percentage_"+this.expertiseID;f.er=l[g][e]||0;f.total=1000;o.tips=tmpl("ExpertiseRankDescription",f);var d=tmpl("BestProfilesPortletItem",o);this.requestForEffectiveResource("TopContent").find(".top-userpro").append(d)}if(!b){this.requestForEffectiveResource("TopContent").find(".top-userpro").prepend('<div class="italic">Cha c xp hng</div>')}var c=SingletonFactory.getInstance(Subject);c.notifyEvent("HtmlUpdated")},onBestProfilesNext:function(){this.cache.bestprofilepage++;if(this.cache.bestprofilepage*this.defaultResultNo>=this.cache.bestprofiles.length){this.cache.bestprofilepage--;return}var b=this.cache.bestprofilepage*this.defaultResultNo;var a=this.cache.bestprofilepage*this.defaultResultNo+this.defaultResultNo;this.fetchData(this.cache.bestprofiles,b,a)},onBestProfilesPrevious:function(){if(this.cache.bestprofilepage==0){return}this.cache.bestprofilepage--;var b=this.cache.bestprofilepage*this.defaultResultNo;var a=this.cache.bestprofilepage*this.defaultResultNo+this.defaultResultNo;this.fetchData(this.cache.bestprofiles,b,a)},onReloadPage:function(){this.onBegin();this.run()},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);BriefInfoPortlet=Class.extend({init:function(){this.name="BriefInfoPortlet"},onReloadPage:function(){this.run()},run:function(){this.model={};var a=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");var c=this;var b=SingletonFactory.getInstance(Application).getSystemProperties();var d=this.getRequest().getParam("id");this.onAjax("user-ajax","get-brief-info",{id:d},"GET",{onSuccess:function(f){var e=f.avatar;c.model.page=c.getRequest().getParam("page");c.model.id=d?d:b.get("user.id");c.model.name=f.name;c.model.avatar=e;c.model.answerCount=f.answerCount;c.model.questionCount=f.questionCount;c.model.score=f.score;if(f.isExpert==0){if(f.score<200){c.model.titleType=0;c.model.title="Thnh vin thng"}else{if(f.score<600){c.model.titleType=1;c.model.title="Thnh vin tch cc"}else{c.model.titleType=2;c.model.title="Thnh vin uy tn"}}}else{c.model.titleType=3;c.model.title="Chuyn gia v "+f.expertField}c.model.interestTitle="Lnh vc quan tm";c.model.interestContexts=f.interests;c.model.expertiseTitle="Kinh nghim";c.model.expertiseContexts=f.catches;c.getPortletPlaceholder().paintCanvas(c.render())}})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);ExpertiseAdderPortlet=Class.extend({init:function(){this.name="ExpertiseAdderPortlet"},onBegin:function(){this.registerObserver()},onSubmitExpertiseAdderButtonClick:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("SubmitExpertiseForward",{callback:function(){a.notifyEvent("NotifyGlobal"," thm thnh cng")},namespace:this.name})},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RenderExpertiseEditor",{placeholder:this.requestForEffectiveResource("ExpertisePlaceholder"),namespace:this.name})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface);ExpertisePortlet=Class.extend({init:function(){this.name="ExpertisePortlet"},onBegin:function(){this.model={};this.registerObserver()},onEnd:function(){this.unregisterObserver()},onReloadPage:function(){this.run()},onExpertiseChanged:function(){this.useCache=false;this.run();this.useCache=true},run:function(){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");var b=this;var c=this.getRequest().getParam("id");this.onAjax("user-ajax","get-all-expertises",{id:c},"GET",{onSuccess:function(d){var f=true;for(var e in d){f=false;break}b.model.empty=f;b.model.expertiseContexts=d;b.getPortletPlaceholder().paintCanvas(b.render())}},this.useCache,300000)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);ExpertiseEditPortlet=ExpertisePortlet.extend({init:function(){this.name="ExpertiseEditPortlet"}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);ExpertsPortlet=Class.extend({init:function(){this.name="ExpertsPortlet";this.pos=0},onBegin:function(){this.model={}},run:function(){var a=this;this.onAjax("ajax","get-experts",{},"GET",{onSuccess:function(b){a.model={users:b};a.getPortletPlaceholder().paintCanvas(a.render());a.startInterval(6000,a.slideUsers)}})},slideUsers:function(){var c=this.requestForEffectiveResource("Experts");var b=c.children().length;var a=c.find(".box_user").width();this.pos-=3;if(-this.pos>=b){this.pos=0}c.animate({left:this.pos*a},1500)},onEnd:function(){this.stopInterval()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(IntervalTimerInterface);FeaturedProfilesPortlet=Class.extend({init:function(){this.name="FeaturedProfilesPortlet"},run:function(){var b=this;var c=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");var a=c+"/person/best?wt=json&version=2.2&echoParams=NONE";$.getJSON(a,{start:0,rows:7},function(f){var l=f.response.docs;b.model={};b.model.users=Array();var d=Array();for(var g=0;g<2;g++){var h=Math.floor(Math.random()*l.length);d.push(l[h]);l.splice(h,1)}for(var g=0;g<d.length;g++){var k=Array();if(d[g].expertise!=undefined){for(var e=0;e<d[g].expertise.length&&e<2;e++){k.push(d[g].expertise[e])}}k=k.join(", ");if(k.length>20){k=k.substr(0,17)+"..."}b.model.users.push({id:d[g].profile_id,name:d[g].full_name,expertise:k})}b.getPortletPlaceholder().paintCanvas(b.render())})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);InterestAdderPortlet=Class.extend({init:function(){this.name="InterestAdderPortlet"},onBegin:function(){this.registerObserver()},onSubmitInterestAdderButtonClick:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("SubmitInterestForward",{callback:function(){a.notifyEvent("NotifyGlobal"," thm thnh cng")},namespace:this.name})},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RenderInterestEditor",{placeholder:this.requestForEffectiveResource("ExpertisePlaceholder"),namespace:this.name})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface);InterestedAreaPortlet=Class.extend({init:function(){this.name="InterestedAreaPortlet";this.useCache=true},onBegin:function(){this.model={};this.registerObserver()},onEnd:function(){this.unregisterObserver()},onInterestedAreaChanged:function(){this.useCache=false;this.run();this.useCache=true},run:function(){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");var b=this;var c=this.getRequest().getParam("id");this.onAjax("user-ajax","get-all-interests",{id:c},"GET",{onSuccess:function(d){var f=true;for(var e in d){f=false;break}b.model.empty=f;b.model.interestContexts=d;b.getPortletPlaceholder().paintCanvas(b.render())}},this.useCache,300000)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);InterestedAreaEditPortlet=InterestedAreaPortlet.extend({init:function(){this.name="InterestedAreaEditPortlet"}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);ProfileFinishPortlet=Class.extend({init:function(){this.name="ProfileFinishPortlet"},onReloadPage:function(){this.run()},run:function(){var a=this;this.onAjax("user-ajax","check-finish-profile",{},"GET",{onSuccess:function(b){a.model={};var c=20;a.model.finish=c;a.model.msgs=Array();if(b.avatar!=false){a.model.finish+=c}else{a.model.msgs.push('<a href="#!page/UserAvatarEdit">Bn cha cp nht hnh i din?</a>')}if(b.catches!=false){a.model.finish+=c}else{a.model.msgs.push('<a href="#!page/UserExpertiseEdit">Bn cha cp nht kinh nghim?</a>')}if(b.interest!=false){a.model.finish+=c}else{a.model.msgs.push('<a href="#!page/UserInterestEdit">Bn cha cp nht lnh vc quan tm?</a>')}if(b.question!=false){a.model.finish+=c}else{a.model.msgs.push("<a onclick='generateEvent(\"MakeNewQuestion\", {})'>Bn cha t cu hi no?</a>")}if(a.model.finish<100){a.getPortletPlaceholder().paintCanvas(a.render())}}})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);AnswerPortlet=Class.extend({init:function(){this.name="AnswerPortlet";this.model={};this.question=null;this.topics=null;this.topicsQuestion=null;this.mce=$("");this.answers=null;this.questionID=null;this.needMCE=true;this.answerNum=0;this.root=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");this.uid=SingletonFactory.getInstance(Application).getSystemProperties().get("user.id");this.quid=""},onBegin:function(){this.registerObserver();this.model.qvoteup="...";this.model.qvotedown="...";this.model.avaiTopics={};this.model.topics={};this.model.mce={};this.model.children={}},getQuestionID:function(){var b=SingletonFactory.getInstance(Page).getRequest();var c=b.getParams();this.questionID=c.qid;if(this.questionID==null||this.questionID==undefined){var a=SingletonFactory.getInstance(Subject);var b=new Request("ErrorPage","donganh",{code:"888",msg:"Li",content:"Cu hi khng tn ti trong h thng. Mong bn th li"});a.notifyEvent("RequestRoute",b)}},getAjax:function(){var a=this;this.onAjax("question","get-question-detail",{qid:this.questionID},"GET",{onSuccess:function(d){a.question=d;var b=d.userId;a.ownerAvatar=d.avatar;a.questionOwner=b;a.buildQuestion();a.getPortletPlaceholder().paintCanvas(a.render());a.requestForEffectiveResource("QVote").html("+"+d.vote);a.onAjax("question","is-bookmarked",{id:a.questionID},"get",{onSuccess:function(g){if(g){a.requestForEffectiveResource("Bookmark").addClass("active")}}});var c=SingletonFactory.getInstance(Subject);c.notifyEvent("QuestionBuilt",{id:a.questionID,userID:a.questionOwner});var e=SingletonFactory.getInstance(Application).getSystemProperties();var f="default";if(e.get("user.login")==1){f=e.get("user.role")}if(a.questionOwner!=a.uid&&(f=="user"||f=="default")){a.requestForEffectiveResource("Question").find(".owner_fn").hide()}a.getAjaxTopicQuestion()},onFailure:function(d){var b=SingletonFactory.getInstance(Subject);var c=new Request("ErrorPage","",{code:"888",msg:"Li",content:"Cu hi khng tn ti trong h thng. Mong bn th li"},["content"]);b.notifyEvent("RequestRoute",c);return}})},onSystemPropertyChanged:function(c){if(c=="user.login"){var b=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(b==1){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("QuestionBuilt",{id:this.questionID,userID:this.questionOwner});a.notifyEvent("AnswerBuilt",{qid:this.questionID})}}},onReloadAnswers:function(){this.getAjaxAnswer()},getAjaxAnswer:function(){var a=this;this.onAjax("question","get-answers",{qid:this.questionID,page:0},"GET",{onSuccess:function(b){a.answers=b;a.buildAnswer(b)},onFailure:function(d){var b=SingletonFactory.getInstance(Subject);var c=new Request("ErrorPage","",{code:"888",msg:"Li",content:"Cu hi khng tn ti trong h thng. Mong bn th li"});b.notifyEvent("RequestRoute",c);return}})},getAjaxTopicQuestion:function(){var a=this;this.onAjax("question","get-all-catchwords-question",{qid:this.questionID},"GET",{onSuccess:function(c){if(c.length==0){var b=a.getRequest().getParam("rel");if(b=="ask"){var d=SingletonFactory.getInstance(Subject);d.notifyEvent("NotifyMessage",'Bn va t cu hi nhng li khng thm ch  cho cu hi! Nhng cu hi khng c ch  <b>mc nh s khng c hin th ti trang ch</b>.  cu hi ca bn nhanh chng c c cu tr li, bn hy thm ch  thch hp.<br /><img src="resource/images/tutorial-image/addtag.png" alt="addtag" />')}}a.topicsQuestion=c;a.getAjaxAnswer();a.buildTopics(c)}},true,60000)},buildQuestion:function(){this.model.qcontent=this.question.title;this.model.qdetail=this.question.content.trim().replace(/\\n/g,"<br>");this.model.qdate=this.question.since;this.model.quser="";this.model.qusertarget="";this.model.avatar=this.ownerAvatar;this.model.anonymous=this.question.anonymous;this.model.bestSource=this.question.bestSource;if(this.question.name!=undefined&&this.question.name!=""){this.quid=this.question.userId;var a={};a.quserid=this.model.quserid=this.question.userId;a.qusername=this.question.name;this.model.quser=this.renderView("UserLink",a)}if(this.question.target_name!=undefined&&this.question.target_name!=""){var a={};a.quserid=this.question.targetId;a.qusername=this.question.target_name;this.model.qusertarget=this.renderView("UserLink",a)}},buildTopics:function(d){var b=Array();var a=Array();for(var g in d){var f={};var e=d[g];f.tid=generateId("tt");f.content=e.catchWord;f.cid=e.id;f.uid=this.quid;b[e.id]=f.tid;a.push(this.renderView("Topic",f))}this.requestForEffectiveResource("TopicArea").html(a.join(","));this.requestForEffectiveResource("EditTopicArea").html(this.renderView("EditTopic",{topicsQuestion:d}));var c=SingletonFactory.getInstance(Application).getSystemProperties();c.set("memcached.addedTopics",b)},buildAnswer:function(f){var p=$("<div></div>");var e=$("<div></div>");var n=0;var k=Array();for(var l in f){this.answerNum++;var m={};var o=f[l];m.uid=o.userId;k.push(o.userId);if(o.userId==this.uid){this.needMCE=false}m.aid=o.id;m.uimglink=o.avatar;m.uname=o.name;m.avote=o.vote;m.adate=o.since;m.acontent=o.content;m.lastEdited=o.lastEdited;m.negatives=Array();for(var c in o.negativeTypes){var h=o.negativeTypes[c];switch(h){case 1:m.negatives.push("Cu tr li ny cn phi ng trng tm cu hi hn");break;case 2:m.negatives.push("Cu tr li ny cn a ra  kin mi so vi nhng cu tr li trc ");break;case 3:m.negatives.push("Cu tr li ny cn thm gii thch");break;case 4:m.negatives.push("Cu tr li ny nn a vo phn bn lun cho cu tr li khc");break;case 5:m.negatives.push("Cha ni dung t ngun khc nhng khng c ch thch");break}}if(o.hidden==1){var j=this.renderView("HiddenItem",m);e.append(j);n++}else{var j=this.renderView("Item",m);p.append(j)}}SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.answeredID",k);this.requestForEffectiveResource("AnswersList").html($(p).html());this.requestForEffectiveResource("HiddenAnswersList").html($(e).html());this.requestForEffectiveResource("HiddenAnswerNo").html(n);if(n==0){this.requestForEffectiveResource("HiddenAnswers").hide()}var b=SingletonFactory.getInstance(Subject);var d={};d.zone=this.requestForEffectiveResource("AnswersList");b.notifyEvent("RequestProfileImageCheck",d);d.zone=this.requestForEffectiveResource("HiddenAnswersList");b.notifyEvent("RequestProfileImageCheck",d);this.updateAnswerNum();this.initEditor(this.questionID);b.notifyEvent("BindingChangeAnswer");var g=this.getRequest().getParam("qid");b.notifyEvent("ShowBio",{qid:g});b.notifyEvent("RenderBioEditLink",{qid:g});b.notifyEvent("AnswerBuilt",{qid:g});b.notifyEvent("CleanFont");var a=this.getRequest().getParam("hl");if(a!=undefined){this.requestForEffectiveResource("Outer"+a).addClass("highlighted");$.scrollTo(this.requestForEffectiveResource("Outer"+a),800)}},updateAnswerNum:function(){var b=parseInt($("#answer-more-btn").attr("page"));var a=this.answerNum+b;$("#answer-more-btn").attr("page",a)},initEditor:function(c){if(this.needMCE){this.requestForEffectiveResource("TextAreaContainer").html(this.renderView("MCE",{qid:c}));var b="AnswerPortlet-AnswerTextEditor";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("TinyEditorInit",{id:b,content:""});a.notifyEvent("InitInputMethod",{id:b,content:""})}},run:function(){this.needMCE=true;this.getQuestionID();this.model.qid=this.questionID;this.getAjax()},onSubmitQuestionContent:function(){var d=this.getRequest().getParam("qid");var a=SingletonFactory.getInstance(Subject);var b=this.requestForEffectiveResource("QDetail").find("textarea").val();if(b==this.detailOld){a.notifyEvent("CancelSubmitQuestionEdit");return}var c=this;this.onAjax("question","edit-question",{content:b,id:d},"POST",{onSuccess:function(e){c.requestForEffectiveResource("QDetail").html(b);c.requestForEffectiveResource("QEditControl").html("");c.editState=0}})},onCancelChangeTopic:function(){this.requestForEffectiveResource("EditTopicContainer").hide();this.requestForEffectiveResource("TopicArea").parent().show();this.editTopicState=0},onCancelSubmitQuestionEdit:function(){this.requestForEffectiveResource("QDetail").html(this.detailOld);this.requestForEffectiveResource("QEditControl").html("");this.editState=0},onBookmarkQuestion:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",{type:"BookmarkQuestion"})},onLoginSuccess:function(a){if(a.type=="BookmarkQuestion"){var b=this;if(!this.requestForEffectiveResource("Bookmark").hasClass("active")){this.onAjax("question","bookmark",{id:this.questionID},"post",{onSuccess:function(c){b.requestForEffectiveResource("Bookmark").addClass("active")}})}else{this.onAjax("question","remove-bookmark",{id:this.questionID},"post",{onSuccess:function(c){b.requestForEffectiveResource("Bookmark").removeClass("active")}})}}},onNewTagSelect:function(b){var d=b.ui;var a=d.item.label;var c=d.item.id;var e=this;this.onAjax("question","add-tag",{id:this.questionID,tagId:c},"post",{onSuccess:function(f){e.requestForEffectiveResource("EditTopicArea").append(e.renderView("TopicTmpl",{id:c,catchWord:a}))}})},onChangeQDetailButtonClick:function(){if(this.editState==1){return}this.editState=1;var b=this.requestForEffectiveResource("QDetail").html();this.requestForEffectiveResource("QDetail").html(this.renderView("QDetailEdit",{oldContent:b}));this.detailOld=b;this.requestForEffectiveResource("QEditControl").html(this.renderView("QEditControlTmpl",{}));var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ExpandTextArea",{min:45,max:200,target:this.requestForEffectiveResource("QDetail").find("textarea")})},onChangeTopicButtonClick:function(){if(this.editTopicState==1){return}this.editTopicState=1;this.requestForEffectiveResource("TopicArea").parent().hide();this.requestForEffectiveResource("EditTopicContainer").show();var b=SingletonFactory.getInstance(Subject);var a=this.requestForEffectiveResource("TopicInput");var c={};c.selectCallback="NewTagSelect";c.autocompleteObject=a;var d=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");c.autocompleteSource=d+"/autocomplete/catch";c.type="Expertise";b.notifyEvent("NeedAutocomplete",c);b.notifyEvent("AttachFocusDetection",{target:a,defaultValue:"Nhp ch  cn thm"})},onQuestionTagDeleteButtonClick:function(a){this.onAjax("question","remove-tag",{id:this.questionID,tagId:$(a.target).attr("eid")},"post",{onSuccess:function(){$(a.target).parent().remove()}})},onReloadPage:function(){this.editState=0;this.editTopicState=0;this.run()},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);AskBasePortlet=Class.extend({init:function(){this.name="AskBasePortlet";this.selectedTopics=new Array();this.usingFacebox=false},_requestForEffectiveResource:function(a){if(this.usingFacebox){return $("#"+this.name+"-"+a)}else{return this.requestForEffectiveResource(a)}},showPortlet:function(c){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(a!=1){var b=SingletonFactory.getInstance(Subject);b.notifyEvent("NeedLogin",{type:this.name,event:c})}else{this.doShowPortlet(c)}},onLoginSuccess:function(a){if(a.type!=this.name){return}this.doShowPortlet(a.event)},doShowPortlet:function(d){var b=SingletonFactory.getInstance(Subject);this.usingFacebox=true;this.selectedPeople=Array();this.selectedTopics=Array();this.model.askMsg=$("#"+this.name+"-TextAskMessage").html();if(d.question==undefined){d.question=""}this.model.question=d.question;b.notifyEvent("ShowPopup",{id:this.name,title:"t cu hi",content:this.render()});this._requestForEffectiveResource("TextBox").focus();var e=this._requestForEffectiveResource("TextAreaExtended");b.notifyEvent("ExpandTextArea",{target:e,min:30,max:200});var c=d.profile;if(c!=undefined){for(var a=0;a<c.length&&a<2;a++){this.appendPeople({value:c[a].id,txt:c[a].name})}}var b=SingletonFactory.getInstance(Subject);b.notifyEvent(this.name+"FetchAutocomplete")},fetchAutocomplete:function(){var d=this._requestForEffectiveResource("AddTopicInputBox");var c={};c.selectCallback=this.name+"TopicSelect";c.autocompleteObject=d;var e=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");c.autocompleteSource=e+"/autocomplete/catch";var b=SingletonFactory.getInstance(Subject);b.notifyEvent("NeedAutocomplete",c);var a=this._requestForEffectiveResource("AddPeopleInputBox");var c={};c.selectCallback=this.name+"PeopleSelect";c.autocompleteObject=a;c.autocompleteSource=e+"/person/person";c.type="person";b.notifyEvent("NeedAutocomplete",c)},appendPeople:function(h){var a=h.txt;var f=h.value;var b=this._requestForEffectiveResource("AddPeopleContainer");if(this.selectedPeople==undefined){this.selectedPeople=Array()}if(this.selectedPeople.length>=2){return}for(var c=0;c<this.selectedPeople.length;c++){if(this.selectedPeople[c]===f){return}}var g=$("<span class='tokenContent'>"+a+"</span>");this.selectedPeople.push(f);var e=this.selectedPeople;var d=$("<span>").addClass("edit_tag").append(g);$("<span>").bind("click",function(j){for(var k=0;k<e.length;k++){if(e[k]===f){break}}e.splice(k,1);$(j.target).parent().remove()}).html(" x ").css("text-align","center").appendTo(d);b.append(d)},onBegin:function(){this.model={};this.registerObserver()},run:function(){this.model.optionalMsg=this.getLocalizedText("OptionalMessage");this.model.optionalDetailMsg=this.getLocalizedText("OptionalDetailMessage");this.model.askMsg=this.getLocalizedText("AskMessage");this.model.question="";this.getPortletPlaceholder().drawToCanvas(this.render())},onEnd:function(){this.unregisterObserver()},append:function(e){var a=e.txt;var f=e.value;var b=this._requestForEffectiveResource("AddTopicContainer");if(this.selectedTopics==undefined){this.selectedTopics=Array()}for(var c=0;c<this.selectedTopics.length;c++){if(this.selectedTopics[c]===f){return}}var g=$("<span class='tokenContent'>"+a+"</span>");this.selectedTopics.push(f);var h=this.selectedTopics;var d=$("<span>").addClass("edit_tag").append(g);$("<span>").bind("click",function(j){var k=0;for(k=0;k<h.length;k++){if(h[k]===f){break}}h.splice(k,1);$(j.target).parent().remove()}).html(" x ").css("text-align","center").appendTo(d);b.append(d)}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);AskHomeQuestionPortlet=Class.extend({init:function(){this.name="AskHomeQuestionPortlet"},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());var a=SingletonFactory.getInstance(Subject);a.notifyEvent("AttachAutocompleteEngine",{type:"question-only",target:this.requestForEffectiveResource("TextBox")})},}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);AskQuestionPortlet=AskBasePortlet.extend({init:function(){this.name="AskQuestionPortlet";this.selectedTopics=new Array();this.usingFacebox=false},onMakeNewQuestion:function(a){this.showPortlet(a)},onAskQuestionPortletFetchAutocomplete:function(){this.fetchAutocomplete()},onAskQuestionPortletPeopleSelect:function(b){var d=b.ui;var a=d.item.label;var c=d.item.id;this.appendPeople({value:c,txt:a})},onAskQuestionPortletTopicSelect:function(c){var e=c.ui;var a=e.item.label;var d=e.item.id;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("AskNonTargetQuestionPortletAppend",{txt:a,value:d})},onAskNonTargetQuestionPortletAppend:function(a){this.append(a)},onAskNonTargetTextBoxFocus:function(a){this._requestForEffectiveResource("Extended").show()},onAskNonTargetButtonClick:function(f){var a=this._requestForEffectiveResource("TextBox").val();var d=this._requestForEffectiveResource("TextAreaExtended").val();var e=this._requestForEffectiveResource("Anonymous").is(":checked")?1:0;if(a==undefined||a.trim()==""){this._requestForEffectiveResource("QuestionError1").html("Cu hi khng c  trng");return}var b=this;b._requestForEffectiveResource("QuestionInfo").html("");b._requestForEffectiveResource("QuestionError").html("");b._requestForEffectiveResource("QuestionError1").html("");var h=new Array();if(this.selectedTopics.length>0){for(var c=0;c<this.selectedTopics.length;c++){h.push(this.selectedTopics[c])}}var g=undefined;var j=undefined;if(this.selectedPeople!=undefined&&this.selectedPeople.length>0){g=this.selectedPeople[0];if(this.selectedPeople.length>1){j=this.selectedPeople[1]}}this.onAjax("question","add",{title:a,content:d,"catch":h.join(","),target_id:g,target_next_id:j,anonymous:e},"POST",{onSuccess:function(l){this.selectedTopics=Array();var k=SingletonFactory.getInstance(Subject);k.notifyEvent("NotifyGlobal",b.getLocalizedText("AskSuccess"));k.notifyEvent("RequestRoute",new Request("Question",null,{qid:l,rel:"ask"}));k.notifyEvent("PopupRemove",{id:"AskQuestionPortlet"})},onFailure:function(k){b._requestForEffectiveResource("QuestionError").html(k)}})}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);AskSimilarQuestionPortlet=AskBasePortlet.extend({init:function(){this.name="AskSimilarQuestionPortlet";this.selectedTopics=new Array();this.usingFacebox=false;this.question_id=0},onMakeNewSimilarQuestion:function(b){var e=b.id;this.question_id=e;this.showPortlet(b);var c=this;var a="";var d="";this.onAjax("question","get-all-catchwords-question",{qid:e},"GET",{onSuccess:function(f){for(var g=0;g<f.length;g++){a=f[g].catchWord;d=f[g].id;c.AppendQuestionTopic({txt:a,value:d})}}},this.useCache,300000)},onAskSimilarQuestionPortletFetchAutocomplete:function(){this.fetchAutocomplete()},onAskSimilarQuestionPortletPeopleSelect:function(b){var d=b.ui;var a=d.item.label;var c=d.item.id;this.appendPeople({value:c,txt:a})},onAskSimilarQuestionPortletTopicSelect:function(c){var e=c.ui;var a=e.item.label;var d=e.item.id;var b=SingletonFactory.getInstance(Subject);b.notifyEvent("AskSimilarQuestionPortletAppend",{txt:a,value:d})},AppendQuestionTopic:function(e){var a=e.txt;var f=e.value;var b=this._requestForEffectiveResource("AddTopicContainer");for(var c=0;c<this.selectedTopics.length;c++){if(this.selectedTopics[c]===f){return}}var g=$("<span class='tokenContent'>"+a+"</span>");this.selectedTopics.push(f);var h=this.selectedTopics;var d=$("<span>").addClass("edit_tag").append(g);$("<span>").bind("click",function(j){var k=0;for(k=0;k<h.length;k++){if(h[k]===f){break}}h.splice(k,1);$(j.target).parent().remove()}).html(" x ").css("text-align","center").appendTo(d);b.append(d)},onAskSimilarQuestionPortletAppend:function(a){this.append(a)},onAskSimilarTextBoxFocus:function(a){this._requestForEffectiveResource("Extended").show()},onAskSimilarButtonClick:function(e){var b=this._requestForEffectiveResource("TextBox").val();var a=this._requestForEffectiveResource("TextAreaExtended").val();if(b==undefined||b.trim()==""){this._requestForEffectiveResource("QuestionError1").html("Cu hi khng c  trng");return}var g=this;g._requestForEffectiveResource("QuestionInfo").html("");g._requestForEffectiveResource("QuestionError").html("");g._requestForEffectiveResource("QuestionError1").html("");var h=new Array();if(this.selectedTopics.length>0){for(var d=0;d<this.selectedTopics.length;d++){h.push(this.selectedTopics[d])}}var c=undefined;var f=0;if(this.selectedPeople!=undefined&&this.selectedPeople.length>0){c=this.selectedPeople[0];if(this.selectedPeople.length>1){f=this.selectedPeople[1]}}this.onAjax("question","add-similar-question",{similarId:this.question_id,title:b,content:a,"catch":h.join(","),target_id:c,target_next_id:f},"POST",{onSuccess:function(k){this.selectedTopics=Array();var j=SingletonFactory.getInstance(Subject);j.notifyEvent("NotifyGlobal",g.getLocalizedText("AskSuccess"));j.notifyEvent("RequestRoute",new Request("Question",null,{qid:k}));j.notifyEvent("PopupRemove",{id:"AskSimilarQuestionPortlet"})},onFailure:function(j){g._requestForEffectiveResource("QuestionError").html(j)}})}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);BookmarkPortlet=Class.extend({init:function(){this.name="BookmarkPortlet";this.page=0},onBegin:function(){this.registerObserver()},onReloadPage:function(){this.run()},onGetMoreBookmarks:function(){this.page++;var b=this.getRequest().getParam("id");var a=this;this.onAjax("question","get-bookmark-questions",{id:b,page:this.page},"get",{onSuccess:function(c){a.model={list:c};a.requestForEffectiveResource("Container").append(a.renderView("QuestionTmpl",a.model));if(c.length<10){a.requestForEffectiveResource("ViewMore").hide()}}},true,300000)},run:function(){var b=this.getRequest().getParam("id");var a=this;this.onAjax("question","get-bookmark-questions",{id:b},"get",{onSuccess:function(c){a.model={list:c};a.getPortletPlaceholder().paintCanvas(a.render());a.requestForEffectiveResource("Container").html(a.renderView("QuestionTmpl",a.model));if(c.length<10){a.requestForEffectiveResource("ViewMore").hide()}}},true,300000)},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);ExtraQuestionsPortlet=Class.extend({init:function(){this.name="ExtraQuestionsPortlet"},onBegin:function(){this.registerObserver()},onQuestionNotificationFetched:function(a){var b=this;this.onAjax("question","get-latest-questions",{qid:a},"get",{onSuccess:function(c){b.model={list:c};if(c.length>0){b.getPortletPlaceholder().paintCanvas(b.render())}}},true,300000)},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);QuestionActionPortlet=Class.extend({init:function(){this.name="QuestionActionPortlet"},onBegin:function(){this.registerObserver()},onChangeBestSourceMark:function(){var b=SingletonFactory.getInstance(Subject);var c=this.requestForEffectiveResource("BestSourceBtn");var a=c.attr("bestSource");if(a==1){b.notifyEvent("ShowPopup",{id:"QuestionBestSource",title:"nh du cu hi cht lng",content:this.renderView("AddBestSource",{})})}else{b.notifyEvent("ShowPopup",{id:"QuestionBestSource",title:"B nh du cu hi cht lng",content:this.renderView("RemoveBestSource",{})})}},onMarkBestSource:function(){var b=$("#"+this.name+"-BestSourceReason").val();if(b==""){$("#"+this.name+"-BestSourceError").val("Bn phi nhp l do");return}var a=SingletonFactory.getInstance(Subject);this.onAjax("question","mark-best-source",{id:this.questionID,reason:b},"POST",{onSuccess:function(c){a.notifyEvent("PopupRemove",{id:"QuestionBestSource"});a.notifyEvent("ReloadPage")}})},onRemoveBestSource:function(){var a=SingletonFactory.getInstance(Subject);this.onAjax("question","remove-best-source",{id:this.questionID},"POST",{onSuccess:function(b){a.notifyEvent("PopupRemove",{id:"QuestionBestSource"});a.notifyEvent("ReloadPage")}})},onChangeQuestionAnonymous:function(){var a=this.requestForEffectiveResource("AnonymousBtn");this.onAjax("question","change-anonymous",{id:this.questionID,anonymous:a.attr("anonymous")},"POST",{onSuccess:function(b){var c=SingletonFactory.getInstance(Subject);c.notifyEvent("ReloadPage")}})},onUnfollowQuestion:function(a){var c=a.id;var b=this;this.onAjax("question","unfollow-question",{id:c},"POST",{onSuccess:function(d){b.requestForEffectiveResource("FollowBtn").html(tmpl("QuestionFollowTmpl-Follow",{id:c}));var e=SingletonFactory.getInstance(Subject);e.notifyEvent("QuestionFollowerChange")}})},onFollowQuestion:function(a){var c=a.id;var b=this;this.onAjax("question","follow-question",{id:c},"POST",{onSuccess:function(d){b.requestForEffectiveResource("FollowBtn").html(tmpl("QuestionFollowTmpl-Unfollow",{id:c}));var e=SingletonFactory.getInstance(Subject);e.notifyEvent("QuestionFollowerChange")}})},onEnd:function(){this.unregisterObserver()},onAjaxQueryFetched:function(c){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");if(c.url==a+"/question/get-question-detail"){this.model=c.result.data;this.questionID=this.model.qid=this.getRequest().getParam("qid");this.getPortletPlaceholder().paintCanvas(this.render());var b=SingletonFactory.getInstance(Application).getSystemProperties();var e=b.get("user.login");if(e==0){return}var d=this;this.onAjax("question","is-user-following",{id:d.questionID},"GET",{onSuccess:function(g){var f="";if(g==true){f="Unfollow"}else{f="Follow"}d.requestForEffectiveResource("FollowBtn").html(tmpl("QuestionFollowTmpl-"+f,{id:d.questionID}))}})}}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);QuestionSharePortlet=Class.extend({init:function(){this.name="QuestionSharePortlet";this.usingFacebox=false;this.answers=null;this.question=null;this.questionID=null;this.linkQuestion=null;this.strQuestionTitle=null;this.linkAction=null;this.avatarAsker=null;this.strCaption="asking.vn";this.strDefaultMessage="";this.strActionName=null;this.strDesciption=null;this.root=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");window.fbAsyncInit=function(){FB.init({appId:"192257437556427",status:true,cookie:true,xfbml:false})}},requestForEffectiveResource:function(a){if(this.usingFacebox){return $("#"+this.name+"-"+a)}else{return this._super.requestForEffectiveResource(a)}},onBegin:function(){this.model={};this.registerObserver()},onEnd:function(){this.unregisterObserver()},onAjaxQueryFetched:function(b){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");if(b.url==a+"/question/get-question-detail"){this.question=b.result.data}else{if(b.url==a+"/question/get-answers"){this.answers=b.result.data}}},onShareFacebook:function(c){this.questionID=this.getRequest().getParam("qid");var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(a!=1){var b=SingletonFactory.getInstance(Subject);b.notifyEvent("NeedLogin",{type:"ShareFacebook",event:c})}else{this.publishSharing()}},onLoginSuccess:function(a){if(a.type!="ShareFacebook"){return}this.publishSharing()},publishSharing:function(){this.buildContent();this.startShare()},buildContent:function(){var d=0;if(this.question.avatar==undefined||this.question.avatar==""){this.avatarAsker="http://asking.vn/resource/images/home/bee24.png"}else{this.avatarAsker="http://asking.vn/resource/avatar/"+this.question.avatar}this.strQuestionTitle=this.question.title;this.linkAction="http://asking.vn/#!page/Question/qid/"+this.questionID;for(var c in this.answers){d++}var a=-1;for(var c in this.answers){var b=this.answers[c];if(b.vote>a){this.strDescription="Tr li tt nht: "+$("<div>"+b.content+"</div>").text();a=b.vote}}if(d==0){this.strActionName="Tr li cu hi";this.strDescription=this.question.content.trim().replace(/\\n/g,"<br />")}else{this.strActionName=d+" tr li"}return},startShare:function(){var a=this;FB.ui({method:"feed",name:this.strQuestionTitle,link:"http://asking.vn#!page/Question/qid/"+this.questionID,picture:this.avatarAsker,caption:this.strCaption,description:this.strDescription,message:this.strDefaultMessage,actions:[{name:this.strActionName,link:this.linkAction}],},function(b){if(b&&b.post_id){var c=SingletonFactory.getInstance(Subject);c.notifyEvent("NotifyGlobal","Bn  chia s cu hi trn Facebook thnh cng")}})},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());var a=document.createElement("script");a.async=true;a.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";$("#fb-root").append(a)},}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);RecommendAnswerPortlet=Class.extend({init:function(){this.name="RecommendAnswerPortlet";this.usingFacebox=false},onBegin:function(){this.model={};this.registerObserver()},onEnd:function(){this.unregisterObserver()},onReloadPage:function(){this.run()},run:function(){this.question_id=this.getRequest().getParam("qid");this.getPortletPlaceholder().paintCanvas(this.render());var d=this;var b=SingletonFactory.getInstance(Subject);this.selectedPeople=undefined;this.onAjax("question","get-forwarded-answerers",{qid:this.question_id},"GET",{onSuccess:function(f){d.requestForEffectiveResource("AddedContainer").html(d.renderView("AddedTmpl",{list:f}));b.notifyEvent("RequestProfileImageCheck",{zone:d.requestForEffectiveResource("AddedContainer")})}});b.notifyEvent("AttachFocusDetection",{target:this.requestForEffectiveResource("AddPeopleInputBox"),defaultValue:"Nhp tn ca ngi mun mi"});var a=this.requestForEffectiveResource("AddPeopleInputBox");var c={};c.selectCallback="TargetPeopleSelect";c.autocompleteObject=a;var e=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");c.autocompleteSource=e+"/person/person?rows=5";c.type="RecommendPerson";b.notifyEvent("NeedAutocomplete",c)},onRecommendEmail:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ShowPopup",{id:"RecommendAnswer",title:"Mi tr li qua email",content:this.renderView("EmailRecommend",{})})},onTargetPeopleSelect:function(c){var e=c.ui;var a=e.item.label;var d=e.item.id;if(e.item.type=="email"){var b=SingletonFactory.getInstance(Subject);b.notifyEvent("RecommendEmail");return}this.appendPeople({value:d,txt:a})},appendPeople:function(h){var a=h.txt;var f=h.value;var b=this.requestForEffectiveResource("AddPeopleContainer");if(this.selectedPeople==undefined){this.selectedPeople=Array()}if(this.selectedPeople.length>=2){return}for(var c=0;c<this.selectedPeople.length;c++){if(this.selectedPeople[c]===f){return}}var g=$("<span class='tokenContent'>"+a+"</span>");this.selectedPeople.push(f);if(this.selectedPeople.length==1){this.requestForEffectiveResource("SubmitButtonContainer").show()}var h=this;var e=this.selectedPeople;var d=$("<span>").addClass("edit_tag").append(g);$("<span>").bind("click",function(j){for(var k=0;k<e.length;k++){if(e[k]===f){break}}e.splice(k,1);$(j.target).parent().remove();if(e.length==0){h.requestForEffectiveResource("SubmitButtonContainer").hide()}}).html(" x ").css("text-align","center").appendTo(d);b.append(d)},checkEmail:function(b){var a=b.indexOf("@");var c=b.lastIndexOf(".");if(a<1||c<a+2||c+2>=b.length){return false}return true},onRecommendAnswerButtonClick:function(b){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",{type:"RecommendAnswerButtonClick",evtData:b})},onEmailRecommendButtonClick:function(b){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedLogin",{type:"EmailRecommendButtonClick",evtData:b})},onLoginSuccess:function(d){var e=this;if(d.type=="EmailRecommendButtonClick"){$("#RecommendAnswerPortlet-Error").html("");if(this.checkEmail($("#RecommendAnswerPortlet-AddEmailInputBox").val())){var c=$("#RecommendAnswerPortlet-AddEmailInputBox").val();var f=$("#RecommendAnswerPortlet-OptionalMsg").val();this.onAjax("question","add-recommend-email",{msg:f,question_id:this.question_id,email:c},"POST",{onSuccess:function(h){var g=SingletonFactory.getInstance(Subject);g.notifyEvent("NotifyGlobal","Bn  mi tr li thnh cng");g.notifyEvent("PopupRemove",{id:"RecommendAnswer"})},onFailure:function(g){$("#RecommendAnswerPortlet-Error").html(g)}})}else{$("#RecommendAnswerPortlet-Error").html("Email khng hp l")}}else{if(d.type=="RecommendAnswerButtonClick"){var b=new Array();if(this.selectedPeople!=undefined&&this.selectedPeople.length>0){for(var a=0;a<this.selectedPeople.length;a++){b.push(this.selectedPeople[a])}}this.onAjax("question","forward-question",{qid:this.question_id,target_id:b.join(",")},"POST",{onSuccess:function(g){e.onReloadPage()},onFailure:function(g){e.requestForEffectiveResource("QuestionError").html(e.getLocalizedText("AskError"))}})}}}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);SimilarQuestionsPortlet=Class.extend({init:function(){this.name="SimilarQuestionsPortlet";this.questionID=null},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},run:function(){this.questionID=this.getRequest().getParam("qid");this.getPortletPlaceholder().paintCanvas(this.render());this.fetch();var a=SingletonFactory.getInstance(Subject);a.notifyEvent("AttachFocusDetection",{target:this.requestForEffectiveResource("AddQuestionInputBox"),defaultValue:"Nhp cu hi tng t"});var d=this.requestForEffectiveResource("AddQuestionInputBox");var b={};b.selectCallback="SimilarQuestionSelect";b.autocompleteObject=d;var c=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");b.autocompleteSource=c+"/autocomplete/question";b.type="Question";a.notifyEvent("NeedAutocomplete",b)},onRemoveSimilarQuestion:function(a){$(a.target).parent().remove()},onSimilarQuestionsButtonClick:function(){var a=Array();this.requestForEffectiveResource("AttachQuestions").find("[qid]").each(function(){a.push($(this).attr("qid"))});if(a.length!=0){var b=this;this.onAjax("question","attach-similar-questions",{ids:a.join(","),id:this.questionID},"post",{onSuccess:function(){b.run()}})}else{this.requestForEffectiveResource("SimilarQuestions").show();this.requestForEffectiveResource("AttachQuestions").hide()}},onSimilarQuestionSelect:function(c){var e=c.ui;var a=e.item.label;var d=e.item.id;var b=this.requestForEffectiveResource("AddQuestionContainer");$(b).append(this.renderView("QuestionTmpl",{id:d,label:a}))},fetch:function(){var a=this;this.onAjax("question","get-similar-questions",{qid:a.questionID},"GET",{onSuccess:function(b){a.requestForEffectiveResource("SimilarQuestions").html(a.renderView("SimilarQuestionsTmpl",{user:b}))}})},onViewAllSimilarQuestions:function(){var a=this;this.onAjax("question","get-similar-questions",{qid:a.questionID,all:1},"GET",{onSuccess:function(b){a.requestForEffectiveResource("SimilarQuestions").html(a.renderView("SimilarQuestionsTmpl",{user:b}));a.requestForEffectiveResource("ViewMore").remove()}})},onAttachSimilarQuestions:function(){this.requestForEffectiveResource("SimilarQuestions").hide();this.requestForEffectiveResource("AttachQuestions").show()},onReloadPage:function(){this.run()}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface).implement(ObserverInterface);SameQuestionsPortlet=Class.extend({init:function(){this.name="SameQuestionsPortlet";this.questionID=null;this.start=0},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())},onAjaxQueryFetched:function(d){var b=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");if(d.url==b+"/question/get-all-catchwords-question"){var a=Array();for(var c in d.result.data){a.push(d.result.data[c].catchWordId)}this.catches=a;this.fetch()}},fetch:function(){var b=this;var a=this.getRequest().getParam("qid");$.getJSON("/solr/knowledge/intopic?wt=json&rows=5",{q:this.catches.join(" ")},function(c){b.requestForEffectiveResource("QuestionsContainer").html(b.renderView("QuestionsTmpl",{question:c.response.docs,currentId:a}));if(c.response.docs.length<5){b.requestForEffectiveResource("ViewMore").hide()}})},onViewMoreSameQuestions:function(){var b=this;this.start+=5;var a=this.getRequest().getParam("qid");$.getJSON("/solr/knowledge/intopic?wt=json&rows=5&start="+this.start,{q:this.catches.join(" ")},function(c){if(c.response.docs.length<5){b.requestForEffectiveResource("ViewMore").hide()}b.requestForEffectiveResource("QuestionsContainer").append(b.renderView("QuestionsTmpl",{question:c.response.docs,currentId:a}))})},onReloadPage:function(){this.run()}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface).implement(ObserverInterface);ShuffleQuestionsPortlet=Class.extend({init:function(){this.name="ShuffleQuestionsPortlet"},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());this.fetch()},onFetchShuffleQuestions:function(){this.fetch()},fetch:function(){var a=this;this.onAjax("question","get-shuffle-questions",{},"GET",{onSuccess:function(b){a.requestForEffectiveResource("Questions").html(a.renderView("QuestionsTmpl",{user:b}))}})},onReloadPage:function(){this.fetch()}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface).implement(ObserverInterface);SearcherPortlet=Class.extend({init:function(){this.name="SearcherPortlet"},onBegin:function(){this.registerObserver()},onSearchInputKeyup:function(b){var c=b.keyCode;var a=SingletonFactory.getInstance(Subject);if(this.getRequest().getParam("page")=="Search"){a.notifyEvent("SearchButtonClick")}if(c==13){a.notifyEvent("SearchButtonClick")}},onSearchButtonClick:function(f){$("ul.ui-autocomplete").hide();var b=this.requestForEffectiveResource("Input");if(b.val().trim()==""){return}var a=b.val().trim();var d=$("input[name=rd_search]:checked");var g=d.val();var e=undefined;if(g==1){e=new Request("Search",undefined,{type:"person-search",query:a})}else{e=new Request("Search",undefined,{type:"question-search",query:a})}var c=SingletonFactory.getInstance(Subject);c.notifyEvent("RequestRoute",e)},onSearcherTypeChange:function(c){var b=$("input[name=rd_search]:checked");var d=b.val();var a=SingletonFactory.getInstance(Subject);$(".customStyleSelectBoxInner").html(b.html());if(d==1){a.notifyEvent("ChangeAutocompleteType",{type:"person",target:this.requestForEffectiveResource("Input")})}else{a.notifyEvent("ChangeAutocompleteType",{type:"question",target:this.requestForEffectiveResource("Input")})}},onDisplayHeaderHelp:function(b){jQuery("#headerhelp").slideToggle();var a=undefined;$("#headerhelp").mouseleave(function(){a=setTimeout('jQuery("#homehelp").fadeOut(); jQuery("#maphelp").fadeOut();jQuery("#nearplace-help").fadeOut();',8000)});$("#headerhelp").mouseover(function(){window.clearTimeout(a);a=undefined})},onSystemPropertyChanged:function(a){if(a=="user.login"){this.run()}},run:function(){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(a==1){this.getPortletPlaceholder().paintCanvas(this.render())}else{this.getPortletPlaceholder().paintCanvas("")}},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface);SearchResultPortlet=Class.extend({init:function(){this.name="SearchResultPortlet";this.model={};this.pageType="";this.query="";this.configData=null;this.pltParams=null;this.dataResJSON=null;this.highlightResJSON=null;this.numDocs=null;this.start=null;this.rows=null;this.root=SingletonFactory.getInstance(Application).getSystemProperties().get("host.root");this.searchCore="";this.searchHandler="";this.core="";this.isShuffleResult=false},onBegin:function(){this.registerObserver();this.prepareInitialConfig();this.prepareData()},prepareInitialConfig:function(){this.pltParams=this.getInitParameters();var a=this.getRequest().getParams();this.core=this.pltParams.type||a.type||"notification-filter";this.page=this.pltParams.page||a.page;this.isShuffleResult=this.pltParams.shuffle||false;this.rows=this.pltParams.rows||a.rows||10;this.shuffleNo=this.pltParams.shuffleNo||this.rows},prepareData:function(){var a=this.getRequest();var b=a.getParams();this.query=b.query||"*:*";this.expertises=b.expertises;this.profileExcluded=b.profileExcluded;this.first=true;this.query=this.getRequest().getParam("id",SingletonFactory.getInstance(Application).getSystemProperties().get("user.id"));switch(this.core){case"user-feed":this.pageType="Feed";break;case"person-search":case"person-best":case"person-hardcore":case"person-similar":case"person-recommendation":this.pageType="Person";break;case"question-latest":case"question-best":case"question-open":this.pageType="Notification";break;case"notification-filter":this.pageType="Feed";break;case"question-flagged":case"catchword-filter":case"question-asked":case"question-asking":case"answer":this.pageType="Notification";this.query=this.getRequest().getParam("id",this.query);break;case"question-search":default:this.pageType="Knowledge";break}this.searchPage=b["search-page"]||this.pltParams.start||0;this.configData=this.getConfigData()},processQuery:function(a){if(a==undefined){return a}if(this.core=="catchword-filter"){a='"'+a+'"'}return a},getDataFromServer:function(){var j={};var e=this;var d={start:this.searchPage*this.rows,rows:this.rows,type:this.core.toLowerCase()};var l=this.scope;var g=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(l=="all"||g!=1){d.all=1}var k=d.all;switch(this.core){case"user-feed":d.core="feed";d.handler="user";var f=SingletonFactory.getInstance(Application).getSystemProperties();var b=undefined;if(f.get("user.login")==1){b=f.get("user.id")}d.query=this.getRequest().getParam("id")||b;break;case"question-asked":d.core="knowledge";d.handler="questionasked";d.query=this.query;break;case"question-asking":d.core="knowledge";d.handler="questionasking";d.query=this.query;break;case"answer":d.core="knowledge";d.handler="answer";d.query=this.query;break;case"question-flagged":d.core="knowledge";d.handler="flagged";d.query=this.query;break;case"person-search":d.core="person";d.handler="person";d.query=this.getRequest().getParam("query");break;case"person-best":d.core="person";d.handler="best";if(k==1){d.query=""}else{d.query=this.query}break;case"question-search":d.core="knowledge";d.handler="knol";d.query=this.getRequest().getParam("query");break;case"question-latest":d.core="knowledge";d.handler="latest";break;case"question-best":d.core="knowledge";d.handler="best";break;case"question-open":d.core="knowledge";d.handler="open";if(k==1){d.query=""}else{d.query=this.query}break;case"catchword-filter":d.core="knowledge";d.handler="catchword";d.query=this.query;break;case"notification-filter":d.core="feed";d.handler="home";if(k==1){d.query=""}else{d.query=this.query}break;default:d.core="knowledge";d.handler="notification";if(k==1){d.query=""}else{d.query=this.query}break}this.query=d.query;if(this.expertises!=null&&this.expertises!=""){d.expertises=this.expertises}if(this.profileExcluded!=null&&this.profileExcluded!=""){d.profileExcluded=this.profileExcluded}d.query=this.processQuery(d.query);var c=SingletonFactory.getInstance(Subject);c.notifyEvent("BeginSearching");var h=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");var a=h+"/"+d.core+"/"+d.handler+"?wt=json&version=2.2&echoParams=NONE";d.q=d.query;d.query=d.core=d.handler=undefined;c.notifyEvent("AjaxBegan");$.getJSON(a,d,function(m){c.notifyEvent("AjaxFinished");try{j.start=m.response.start;j.numDocs=m.response.numFound;j.dataResJSON=m.response.docs;j.highlightResJSON=m.highlighting}catch(n){j.start=0;j.numDocs=0;j.dataResJSON={};j.highlightResJSON={}}e.start=j.start;e.qtime=m.responseHeader.QTime/1000;e.numDocs=j.numDocs;e.dataResJSON=j.dataResJSON;e.highlightResJSON=j.highlightResJSON;if(e.numDocs==0||e.dataResJSON.length-e.start>=e.numDocs){c.notifyEvent("NoMoreResult")}if(e.core=="notification-filter"&&e.numDocs<=50&&k!=1){e.onAjax("user-ajax","get-following-topic-id",{},"GET",{onSuccess:function(p){if(p!=""){p=p.split(",");e.currentTopics=p;p=p.join(" ");var o=h+"/knowledge/catchword?wt=json&version=2.2&echoParams=NONE";$.getJSON(o,{q:p,rows:d.rows},function(q){if(q.response.docs.length==e.prevNumDocs){return}e.prevNumDocs=e.numDocs=q.response.numFound;e.dataResJSON=q.response.docs;if(e.numDocs>50){e.display()}else{e.suggestFollow();if(e.numDocs>0){e.display("SuggestTopList");e.requestForEffectiveResource("SuggestTopList").slideDown(1500)}}})}else{e.suggestFollow()}}});return}e.display()})},onFollowTopicViaSuggest:function(b){var a=this;this.onAjax("user-ajax","add-single-interest",{id:b},"post",{onSuccess:function(c){a.run()}})},suggestFollow:function(){var d=this;d.getPortletPlaceholder().paintCanvas(d.renderView("SuggestFollow",{}));var f=Array();var e=SingletonFactory.getInstance(Application).getSystemProperties().get("host.solr");var a=e+"/knowledge/bestcatch?wt=json&version=2.2&echoParams=NONE&rows=3";var c=Array();for(var b in d.currentTopics){c[d.currentTopics[b]]=d.currentTopics[b]}if(c[41]==undefined){f.push({id:41,title:"Cng ngh thng tin"})}if(c[50]==undefined){f.push({id:50,title:"Ting Anh"})}if(c[48]==undefined){f.push({id:48,title:"Du hc"})}if(c[165]==undefined){f.push({id:165,title:"Khi nghip"})}if(c[209]==undefined){f.push({id:209,title:"Cch hc"})}if(c[220]==undefined){f.push({id:220,title:"Cuc sng"})}this.requestForEffectiveResource("SuggestTopics").html(this.renderView("TopicsContainerTmpl",{topics:f}));for(var b in f){this.fetchQuestionForFollowing(a,f,b)}},fetchQuestionForFollowing:function(a,d,b){var c=this;$.getJSON(a,{q:d[b].id},function(e){c.requestForEffectiveResource("SuggestTopics-"+d[b].id).html(c.renderView("SuggestBestQuestion",{list:e.response.docs}))})},display:function(d){var a=SingletonFactory.getInstance(Subject);var c=this;c.shuffleResult();c.buildSearchItems();if(d==undefined){c.getPortletPlaceholder().paintCanvas(c.render())}else{c.requestForEffectiveResource(d).html(c.render())}a.notifyEvent("CheckMoreLessContent");c.buildSearchNavigation();c.buildSearchHeader();if(c.core=="notification-filter"&&c.start==0&&c.numDocs>0){var b=c.dataResJSON[0].total_questions;a.notifyEvent("QuestionNotificationFetched",b)}},shuffleResult:function(){var d=0;var a=Array();if(this.isShuffleResult){while(d<this.shuffleNo){var c=Math.floor(Math.random()*this.dataResJSON.length);var b=this.dataResJSON;a.push(b[c]);this.dataResJSON.splice(c,1);d++}this.dataResJSON=a}},getHighlight:function(a,b){if(this.highlightResJSON[a]==undefined||this.highlightResJSON[a][b]==undefined){return null}return this.highlightResJSON[a][b]},getConfigData:function(){try{var id=this.name+"-ItemConfig"+this.pageType;var data=eval("("+tmpl(id,{})+")");var hashConfig=Array();for(var key in data){hashConfig[key]=data[key]}return hashConfig}catch(ex){}return null},buildSearchItems:function(){var g=Array();if((this.numDocs==0||this.dataResJSON.length==0)){if(this.configData.notShowNoResult==undefined||this.configData.notShowNoResult==false){log("show no result");this.numDocs=0;g.push(tmpl("CommonPortlet-NoResult",{}));this.model.children=g;return}}for(var f in this.dataResJSON){var b=this.dataResJSON[f];var h={};var d=this.configData.uifields;for(var a in d){for(var e in d[a]){var k=d[a][e];h[e]=this.buildSearchItemTemplate(k,b)}}var j=$(this.buildSearchItem(h));var c=SingletonFactory.getInstance(Subject);c.notifyEvent("RequestCheckAnswerContent",j);g.push(j)}this.model.children=g},buildSearchItem:function(a){var b=this.configData.template;var c=this.name+"-Item"+b+"-Main";return tmpl(c,a)},buildSearchItemTemplate:function(m,b){var l={};var f=this.configData.template;var k=this.name+"-Item"+f+"-"+m;var d=this.configData[m].data;for(var c in d){var a=d[c];var h=a.field;var g=a.type;var m=a.template;var j=b[h];var e=null;switch(g){case"multiple":e=this.buildSearchItemMultipleHelper(m,b,j);break;case"advanced":e=this.buildSearchItemAdvancedHelper(m,b,h);break;case"single":default:e=j;break}l[c]=e}return tmpl(k,l)},buildSearchItemMultipleHelper:function(n,b,l){var h=$("<div></div>");var g=this.configData.template;var a=this.name+"-Item"+g+"-"+n;for(var j in l){var d=this.configData[n].data;var m={};for(var c in d){try{var k=d[c].field;if(b[k]==undefined){continue}if(b[k][j]==undefined){m[c]=b[k]}else{m[c]=b[k][j]}}catch(f){}}h.append(tmpl(a,m))}return h.html()},buildSearchItemAdvancedHelper:function(p,c,m){var k=$("<div></div>");var j=this.configData.template;var b=this.name+"-Item"+j+"-"+p;var a=m+"_id";var n=c[m];for(var l in n){var f=c[a][l];var h=this.configData[p].data;var o={};for(var d in h){var g=h[d].field;var e=(g==a||g==m)?g:g+"_"+f;o[d]=c[e][l]==null?"":c[e][l]}k.append(tmpl(b,o))}return k.html()},buildSearchNavigation:function(){if(this.pltParams.showNavigator!=undefined&&!this.pltParams.showNavigator){return}if(this.configData.showNavigator==undefined||this.configData.showNavigator){var b={};b.numDocs=this.numDocs;b.rows=this.rows;b.searchPage=this.searchPage;b.dataLength=this.dataResJSON.length;b.query=this.query;b.core=this.core;b.searchController=this.page||"Search";var a=SingletonFactory.getInstance(Subject);a.notifyEvent("FetchNavigationLink",b)}},buildSearchHeader:function(){if(this.pltParams.showSearchResult!=undefined&&!this.pltParams.showSearchResult){return}if(this.configData.showSearchResult==undefined||this.configData.showSearchResult){var b={};b.numDocs=this.numDocs;b.qtime=this.qtime;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("FetchSearchResultNumber",b)}},setHighlightKeywords:function(a){a.find("em").addClass("bkp_search_highlight")},normalizeKeyword:function(a){var b=a.replace("_indexed","");b=b.replace("_unindexed","");return b},run:function(){this.getDataFromServer()},onReloadPage:function(){this.onBegin();this.run()},onGetMoreResultRows:function(){if(this.rows==undefined){this.rows=this.getRequest().getParam("rows")||10}this.rows+=10;this.first=false;this.run()},onSearchResultChangeType:function(a){this.core=a.type||this.core||"notification-filter";this.page=a.page||this.page||0;this.isShuffleResult=a.shuffle||this.isShuffleResult||false;this.rows=a.rows||this.rows||10;this.shuffleNo=a.shuffleNo||this.rows;this.prepareData();this.run()},onSearchResultChangeScope:function(a){this.scope=a.scope||this.scope||"limit";this.page=a.page||this.page||0;this.isShuffleResult=a.shuffle||this.isShuffleResult||false;this.rows=a.rows||this.rows||10;this.shuffleNo=a.shuffleNo||this.rows;this.prepareData();this.run()},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);AnnouncementPortlet=Class.extend({init:function(){this.name="AnnouncementPortlet"},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())},onGetAnnouncement:function(){},onEnd:function(){this.stopInterval()}}).implement(PortletInterface).implement(IntervalTimerInterface).implement(AjaxInterface).implement(RenderInterface);OnlineSupportPortlet=Class.extend({init:function(){this.name="OnlineSupportPortlet"},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface);TopicChartPortlet=Class.extend({init:function(){this.name="TopicChartPortlet"},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},onReloadPage:function(){this.run()},run:function(){var a=this;var d=getWeek(new Date());var c=d-16;var b=this.getRequest().getParam("id");this.onAjax("catchword","get-single-stats",{id:b,type:"week",from:c,to:d},"get",{onSuccess:function(g){a.getPortletPlaceholder().paintCanvas(a.render());var j={};j.cat=Array();j.answers=Array();j.questions=Array();j.vote=Array();j.delay=Array();var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(var h=c;h<=d;h++){log(h/4);var k=e[Math.ceil(h/4.34523809524)-1];var f=h%4+1;j.cat.push(k+" W"+f);j.answers.push(0);j.questions.push(0);j.vote.push(0);j.delay.push(-1)}for(var h in g.data){var l=g.data[h];j.answers[l.week-c]=l.answers;j.questions[l.week-c]=l.questions;j.vote[l.week-c]=l.vote;j.delay[l.week-c]=l.delay}a.data=j;a.options={chart:{renderTo:a.name+"-Container",defaultSeriesType:"line",marginRight:130,marginBottom:25},title:{text:"Weekly data analysis for "+g.topic,x:-20},subtitle:{text:"Auto-generated by Asking.vn Report Service",x:-20},xAxis:{categories:j.cat},yAxis:{title:{text:"Number of activities"},plotLines:[{value:0,width:1,color:"#808080"}]},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-10,y:100,borderWidth:0},tooltip:{formatter:function(){if(this.series.name=="Answers No."){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y+" answers"}if(this.series.name=="Questions No."){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y+" questions"}if(this.series.name=="Vote No."){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y+" vote"}if(this.series.name=="Avg. Waiting Time"){if(this.y<1&&this.y>0){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+Math.ceil(this.y*24)+" hrs"}if(this.y==-1){return"<b>"+this.series.name+"</b><br/>"+this.x+": N/A"}return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y+" days"}return""}},series:[{name:"Answers No.",data:j.answers},{name:"Questions No.",data:j.questions},{name:"Vote No.",data:j.vote},{name:"Avg. Waiting Time",data:j.delay}]};a.chart=new Highcharts.Chart(a.options)}})},reloadOptions:function(a,b,e){if(!this.requestForEffectiveResource(a).is(":checked")){var d=Array();for(var c in this.options.series){if(this.options.series[c].name==b){continue}d.push(this.options.series[c])}this.options.series=d}else{this.options.series.push({name:b,data:this.data[e]})}},onTopicAnalysisAnswerChecked:function(){this.reloadOptions("AnswerCheck","Answers No.","answers");this.chart=new Highcharts.Chart(this.options)},onTopicAnalysisQuestionChecked:function(){this.reloadOptions("QuestionCheck","Questions No.","questions");this.chart=new Highcharts.Chart(this.options)},onTopicAnalysisDelayChecked:function(){this.reloadOptions("DelayCheck","Avg. Waiting Time","delay");this.chart=new Highcharts.Chart(this.options)},onTopicAnalysisVoteChecked:function(){this.reloadOptions("VoteCheck","Vote No.","vote");this.chart=new Highcharts.Chart(this.options)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);ContactPortlet=Class.extend({init:function(){this.name="ContactPortlet"},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render())}}).implement(PortletInterface).implement(RenderInterface);ErrorPortlet=Class.extend({init:function(){this.name="ErrorPortlet";this.model={};this.heading="";this.errorCode="";this.data={}},onBegin:function(){this.registerObserver();this.getHandledErrorCode();this.prepareData();this.prepareTemplate()},getHandledErrorCode:function(){var data=tmpl("ErrorPortlet-HandledErrorCode",{});return eval(data)},checkErrorCode:function(c){if(c==undefined||c==null){return true}var b=this.getHandledErrorCode();for(var a in b){if(b[a]==c){return true}}return false},prepareData:function(){var a=SingletonFactory.getInstance(Page).getRequest();var b=a.getParams();this.errorCode=b.code||404;this.heading=b.msg||this.getMsgHeading("");this.data=b.content||this.getMsgContent("");if(this.checkErrorCode(this.errorCode)){this.heading=this.getMsgHeading(this.errorCode);this.data=this.getMsgContent(this.errorCode)}},prepareTemplate:function(){this.model.errorHeader=this.heading;this.model.errorContent=this.data},getMsgHeading:function(b){var a="ErrorCode"+b;return this.getPrefetchData(a,"_Heading")},getMsgContent:function(b){var a="ErrorCode"+b;return this.getPrefetchData(a,"_Content")},getPrefetchData:function(c,b){try{return tmpl(this.name+"-"+c+b,{})}catch(a){return tmpl(this.name+"-ErrorCode"+b,{})}},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render())},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface);FeedbackPortlet=Class.extend({init:function(){this.name="FeedbackPortlet"},onBegin:function(){this.model={};this.registerObserver()},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render())},onFeedbackSubmit:function(){var a=this.requestForEffectiveResource("TextInput").val().trim();if(a==""){var c=this.requestForEffectiveResource("Error");$(c).html("Bn vui lng nhp thng tin phn hi vo  pha trn");return}var b=this.requestForEffectiveResource("Email").val().trim();var c=this;this.onAjax("ajax","send-feedback",{content:a,email:b},"POST",{onSuccess:function(d){var e=SingletonFactory.getInstance(Subject);e.notifyEvent("NotifyMessage","Cm n bn  ng gp cho h thng! Chng ti s nghin cu phn hi ca bn v ci thin h thng cho ph hp.");var f=new Request("Home");e.notifyEvent("RequestRoute",f)},onFailure:function(e){var d=c.requestForEffectiveResource("Error");$(d).html(e)}})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);FooterPortlet=Class.extend({init:function(){this.name="FooterPortlet";this.ids=new Array("TermOfUse","Privacy","Tutorial","AboutUs");this.activeId=undefined},requestForResource:function(a){var c=SingletonFactory.getInstance(Application);var b=c.getResourceManager();return b.requestForResource(this.name,a)},onReloadPage:function(){for(var a=0;a<this.ids.length;a++){if(this.requestForEffectiveResource(this.ids[a])!=undefined){if(this.requestForEffectiveResource(this.ids[a]).hasClass("footeritem_active")){this.requestForEffectiveResource(this.ids[a]).removeClass("footeritem_active")}}}},setActive:function(b){this.activeId=b;for(var a=0;a<this.ids.length;a++){if(this.requestForEffectiveResource(this.ids[a])!=undefined){if(this.requestForEffectiveResource(this.ids[a]).hasClass("footeritem_active")){this.requestForEffectiveResource(this.ids[a]).removeClass("footeritem_active")}}}if(this.requestForEffectiveResource(b)!=undefined){this.requestForEffectiveResource(b).addClass("footeritem_active")}},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());if(this.activeId!=undefined){this.setActive(this.activeId)}}}).implement(RenderInterface).implement(PortletInterface);IntroducePortlet=Class.extend({init:function(){this.name="IntroducePortlet"},onBegin:function(){this.model={};this.registerObserver()},onSubscribeHomeButtonClick:function(){var b=this;var a=this.requestForEffectiveResource("Email").val();this.onAjax("ajax","subscribe",{email:a},"post",{onSuccess:function(c){b.requestForEffectiveResource("Email").val("");var d=SingletonFactory.getInstance(Subject);d.notifyEvent("NotifyGlobal","Bn  ng k nhn tin thnh cng")},onFailure:function(d){var c=SingletonFactory.getInstance(Subject);c.notifyEvent("NotifyError",d)}})},onEnd:function(){this.unregisterObserver()},onLoginSuccess:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RequestRoute",new Request("Home"))},run:function(){this.model.login=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");this.getPortletPlaceholder().drawToCanvas(this.render())}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);GmailInvitation=Class.extend({init:function(){this.scope="https://www.google.com/m8/feeds";this.contactsService=new google.gdata.contacts.ContactsService("BKProfile-GmailContactFeed-1.0")},setCallback:function(a){this.callback=a},checkLogin:function(){return(google.accounts.user.checkLogin(this.scope))},logMeOut:function(){google.accounts.user.logout(function(){},this.scope)},authenticate:function(){var a=600;var b=450;var d=(screen.width/2)-(a/2);var c=(screen.height/2)-(b/2);window.open("invite.html","authWindow","status = 0, height = "+b+", width = "+b+", resizable = 0, left = "+d+", top = "+c)},feedContact:function(d){var a="https://www.google.com/m8/feeds/contacts/default/full";var b=new google.gdata.contacts.ContactQuery(a);b.setMaxResults(d);var c=this;this.contactsService.getContactFeed(b,function(e){c.callback(e)},function(){})}});InvitationPortlet=Class.extend({init:function(){this.name="InvitationPortlet"},onBegin:function(){this.registerObserver();this.currentMaxContacts=350},onSendInviteButtonClick:function(c){var b=c.email;var a=c.origin.target;var d=$(a).parent();d.html('<img class="invite-ajax-loader" src="resource/images/ajax-loader-1.gif">');this.onAjax("invitation","send-invitation",{email:b},"POST",{onSuccess:function(){$(d).html('<strong class="InvitationSent"> gi li mi</strong>')},onFailure:function(){$(d).html('<div class="errorMsg">Gi tht bi!</div>')}})},onFeedContacts:function(n){var h=n.feed.entry;var l=Array();var g=Array();var k=Array();for(var f=0;f<h.length;f++){var j={};var e=h[f];var m=e.getContactPhotoLink();if(m!=undefined){photo=m.getHref()}else{photo="resource/images/unknown.png"}if(e.getTitle()&&e.getTitle().getText()){j.name=e.getTitle().getText()}else{j.name=" "}j.photo=photo;j.emails=Array();var c=e.getEmailAddresses();if(c.length==0){continue}var b=c[0].address;if(b==this.currentEmail){continue}k.push(j.name);g.push(b);j.email=b;l.push(j)}var a=Array();var d=this;this.onAjax("invitation","get-invite-users-from-emails",{emails:g.join(","),names:k.join(",")},"POST",{onSuccess:function(r){d.requestForEffectiveResource("Processing").hide();var v=r.existing;for(var u=0;u<v.length;u++){var q=v[u].email;for(var p in l){var o=l[p];if(o.email==q){l.splice(p,1);break}}a.push(v[u])}d.currentContacts=l;d.requestForEffectiveResource("ExistingContactsFeed").html(d.renderView("ExistingContacts",{contacts:a}));d.requestForEffectiveResource("ContactsFeed").html(d.renderView("Contacts",{contacts:l}));var w=d.requestForEffectiveResource("EmailFilter");var s=SingletonFactory.getInstance(Subject);s.notifyEvent("AttachFocusDetection",{target:w,defaultValue:"Nhp tn/email  tm kim"});$(w).keyup(function(){d.onShowMoreExistingContacts();var y=$(w).val();for(var x=0;x<d.currentContacts.length;x++){if(d.currentContacts[x].name.indexOf(y)==-1&&d.currentContacts[x].email.indexOf(y)==-1){$('div[contactID="'+x+'"]').hide()}else{$('div[contactID="'+x+'"]').show()}}})}})},feed:function(){this.invitationImpl.feedContact(this.currentMaxContacts);this.currentMaxContacts+=50},onShowMoreExistingContacts:function(){var a=this.requestForEffectiveResource("ShowMore");a.siblings(".hidden").removeClass("hidden");a.addClass("hidden")},onAuthSubAuthenticateButtonClick:function(){this.invitationImpl.authenticate();this.startInterval(500,function(){if(this.invitationImpl.checkLogin()){this.requestForEffectiveResource("AuthStep").hide();this.requestForEffectiveResource("ContactsFeed").hide();this.requestForEffectiveResource("Processing").show();this.feed();this.stopInterval()}})},onNextInvitePage:function(c){if(c!=undefined&&c.follow){var b=Array();this.requestForEffectiveResource("ExistingContactsFeed").find("input[type=checkbox]").each(function(){var e=$(this);if(e.is(":checked")){b.push(e.attr("uid"))}});if(b.length>0){var d=this;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("AjaxBegan");this.onAjax("user-ajax","follow-people",{ids:b.join(",")},"post",{onSuccess:function(e){a.notifyEvent("NotifyGlobal","Bn  theo di "+b.length+" ngi");d.nextStep()}})}else{this.nextStep()}}else{this.nextStep()}},onSelectAllPeopleInvite:function(){if(this.requestForEffectiveResource("SelectAll").is(":checked")){this.requestForEffectiveResource("ExistingContactsFeed").find("input[type=checkbox]").attr("checked","checked")}else{this.requestForEffectiveResource("ExistingContactsFeed").find("input[type=checkbox]").removeAttr("checked")}},nextStep:function(){this.requestForEffectiveResource("ExistingContactsFeed").hide();this.requestForEffectiveResource("ContactsFeed").show()},run:function(){this.model={};this.getPortletPlaceholder().paintCanvas(this.render());var c=document.createElement("script");c.async=true;c.src=document.location.protocol+"//www.google.com/jsapi";$("#script-root").append(c);c=document.createElement("script");c.async=true;c.src=document.location.protocol+"//www.google.com/uds/?file=gdata&amp;v=1.x";$("#script-root").append(c);c=document.createElement("script");c.async=true;c.src=document.location.protocol+"//www.google.com/uds/api/gdata/1.10/bb5c7bea9d0f750980b0c50aeb221391/core,mediarss,opensearch,atom,app,gdata,contacts,default.I.js";$("#script-root").append(c);this.requestForEffectiveResource("AuthStep").html(this.renderView("Authenticate",{}));var b=this;var a=setInterval(function(){if(google!=undefined&&google.gdata!=undefined&&google.accounts!=undefined){clearInterval(a);b.invitationImpl=new GmailInvitation();b.invitationImpl.setCallback(function(d){var e=SingletonFactory.getInstance(Subject);e.notifyEvent("FeedContacts",d)})}},500)},onEnd:function(){this.unregisterObserver();this.stopInterval()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface).implement(IntervalTimerInterface);InviteLinkPortlet=Class.extend({init:function(){this.name="InviteLinkPortlet"},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},onSendBriefInvitation:function(a){var b=this;var c=a.target;$(c).parent().html('<img class="invite-ajax-loader" src="resource/images/ajax-loader-1.gif">');this.onAjax("invitation","send-invitation",{email:a.email},"POST",{onSuccess:function(){b.run()}})},run:function(){var a=this;this.onAjax("user-ajax","fetch-contacts-to-invite",{},"get",{onSuccess:function(c){a.getPortletPlaceholder().paintCanvas(a.render());if(c.length==0){a.requestForEffectiveResource("Container").html(a.renderView("Link",{}))}else{var e=Array();for(var b=0;b<2;b++){var d=Math.floor(Math.random()*c.length);e.push(c[d]);c.splice(d,1)}a.requestForEffectiveResource("Container").html(a.renderView("People",{people:e}))}}})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);EventLinkPortlet=Class.extend({init:function(){this.name="EventLinkPortlet"},onBegin:function(){this.model={}},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())}}).implement(PortletInterface).implement(RenderInterface);FacebookLikeBoxPortlet=Class.extend({init:function(){this.name="FacebookLikeBoxPortlet"},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());(function(e,a,f){var c,b=e.getElementsByTagName(a)[0];if(e.getElementById(f)){return}c=e.createElement(a);c.id=f;c.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=251988771483162";b.parentNode.insertBefore(c,b)}(document,"script","facebook-jssdk"))}}).implement(PortletInterface).implement(RenderInterface);LinksPortlet=Class.extend({init:function(){this.name="LinksPortlet"},onBegin:function(){this.model={}},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render())}}).implement(PortletInterface).implement(RenderInterface);StaticContentShortPortlet=Class.extend({init:function(){this.name="StaticContentShortPortlet";this.ids=new Array("AboutUsShort")},displayContent:function(){var d=this.getRequest();var a=SingletonFactory.getInstance(PortletContainer);var f=a.getPortletMetaByName("FooterPortlet").portlet;var e=d.getParam("page");for(var c=0;c<this.ids.length;c++){var b=this.requestForEffectiveResource(this.ids[c]);if(b!=undefined&&!b.hasClass("doNotDisplay")){b.addClass("doNotDisplay")}}this.requestForEffectiveResource(e).removeClass("doNotDisplay");f.setActive(e)},onReloadPage:function(){this.displayContent()},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.displayContent()}}).implement(RenderInterface).implement(PortletInterface);StaticContentPortlet=Class.extend({init:function(){this.name="StaticContentPortlet";this.ids=new Array("History","AboutUs","ImportantScoreIntro","BKProfileUseAskingAPI","FromBKP","AboutBKProfile","VersionOfBKprofile","ArticleIntroduce","RecoverError","Tutorial","Faq","TermOfUse","Privacy","Architecture")},displayContent:function(){var c=this.getRequest();var d=c.getParam("page");for(var b=0;b<this.ids.length;b++){var a=this.requestForEffectiveResource(this.ids[b]);if(a!=undefined&&!a.hasClass("doNotDisplay")){a.addClass("doNotDisplay")}}this.requestForEffectiveResource(d).removeClass("doNotDisplay")},onReloadPage:function(){this.displayContent()},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.displayContent()}}).implement(RenderInterface).implement(PortletInterface);IntroduceNavPortlet=Class.extend({init:function(){this.name="IntroduceNavPortlet"},onReloadPage:function(){this.run()},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())}}).implement(RenderInterface).implement(PortletInterface);SlidePortlet=Class.extend({init:function(){this.name="SlidePortlet"},run:function(){var a=Array();a.push({img:"resource/images/spring/register.png",title:"ng k thnh vin",desc:"ng k thnh vin  tham gia chia s tri thc"});a.push({img:"resource/images/spring/qa.png",title:"Hi - p",desc:"t cu hi v tr li nhng vn  quan tm"});a.push({img:"resource/images/spring/follow.png",title:"Follow",desc:"Follow nhng thnh vin mnh quan tm"});this.model={list:a};this.getPortletPlaceholder().paintCanvas(this.render());this.slideshow()},slideshow:function(){this.current=0;this.show();this.startInterval(5000,this.show)},show:function(){$(".box_skitter li").hide();var a=$(".box_skitter ul li")[this.current];$(a).fadeIn(3000);this.current++;if(this.current>=$(".box_skitter li").length){this.current=0}},onEnd:function(){this.stopInterval()}}).implement(PortletInterface).implement(RenderInterface).implement(IntervalTimerInterface);StatsPortlet=Class.extend({init:function(){this.name="StatsPortlet"},run:function(){this.getPortletPlaceholder().drawToCanvas(this.render());this.fetch()},fetch:function(){var a=this;this.onAjax("ajax","count-stats",{},"GET",{onSuccess:function(b){a.requestForEffectiveResource("UserTotal").html(b.user);a.requestForEffectiveResource("QuestionTotal").html(b.question);a.requestForEffectiveResource("AnswerTotal").html(b.answer);a.requestForEffectiveResource("CatchwordTotal").html(b.catchword)}})},onEnd:function(){}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface);UnsubscribePortlet=Class.extend({init:function(){this.name="UnsubscribePortlet"},onBegin:function(){this.model={};this.registerObserver()},onEnd:function(){this.unregisterObserver()},onReloadPage:function(){this.run()},onConfirmUnsubscribe:function(){var c=this;var a=this.getRequest().getParam("e");var b=this.getRequest().getParam("c");this.onAjax("ajax","unsubscribe",{email:a,code:b},"post",{onSuccess:function(d){c.requestForEffectiveResource("Container").html(c.renderView("ConfirmSuccess",{}))},onFailure:function(d){c.requestForEffectiveResource("Error").html(d)}})},onSendUnsubscribeCodeButtonClick:function(){var a=this.requestForEffectiveResource("Email").val();var b=this;this.onAjax("ajax","send-unsubscribe-email",{email:a},"post",{onSuccess:function(c){var d=SingletonFactory.getInstance(Subject);d.notifyEvent("RequestRoute",new Request("Home"));d.notifyEvent("NotifyGlobal","Email xc nhn  c gi n hm mail ca bn")},onFailure:function(c){b.requestForEffectiveResource("Error").html(c)}})},run:function(){var c=this;this.getPortletPlaceholder().paintCanvas(this.render());var a=this.getRequest().getParam("e");var b=this.getRequest().getParam("c");var e=this.getRequest().getParam("do");if(e=="resend"){this.requestForEffectiveResource("Container").html(this.renderView("SendMail",{}));return}this.onAjax("ajax","is-unsubscribe-code-valid",{email:a,code:b},"post",{onSuccess:function(d){c.requestForEffectiveResource("Container").html(c.renderView("Confirm",{email:a}))},onFailure:function(d){c.requestForEffectiveResource("Container").html(c.renderView("ErrorToken",{}))}})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);SubscribePortlet=Class.extend({init:function(){this.name="SubscribePortlet"},onBegin:function(){this.model={};this.registerObserver()},onEnd:function(){this.unregisterObserver()},onReloadPage:function(){this.run()},onSystemPropertyChanged:function(a){if(a=="user.login"){this.run()}},onSubscribeButtonClick:function(){var b=this;var a=this.requestForEffectiveResource("Email").val();this.onAjax("ajax","subscribe",{email:a},"post",{onSuccess:function(c){b.requestForEffectiveResource("Email").val("");var d=SingletonFactory.getInstance(Subject);d.notifyEvent("NotifyGlobal","Bn  ng k nhn tin thnh cng")},onFailure:function(d){var c=SingletonFactory.getInstance(Subject);c.notifyEvent("NotifyError",d)}})},run:function(){var b=this;var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(a==1){this.onAjax("user-ajax","is-subscribe",{},"post",{onSuccess:function(c){if(!c){b.getPortletPlaceholder().paintCanvas(b.render())}else{b.getPortletPlaceholder().paintCanvas("")}}})}else{this.getPortletPlaceholder().paintCanvas(this.render())}}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);FeedbackListPortlet=StatsPortlet.extend({init:function(){this.name="FeedbackListPortlet";this.interval=600000},run:function(){this.fetch();this.startInterval(this.interval,this.fetch)},fetch:function(){var a=this;a.getPortletPlaceholder().paintCanvas(a.render());this.onAjax("ajax","get-feedback-list",{},"GET",{onSuccess:function(c){var b={};b.feedbacks=c;a.requestForEffectiveResource("ContentPlaceholder").html(a.renderView("Content",b))}})}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface).implement(IntervalTimerInterface);AllTopicsPortlet=Class.extend({init:function(){this.name="AllTopicsPortlet"},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},onNewTopicAdded:function(a){this.getPortletPlaceholder().drawToCanvas(this.renderView("TopicItem",a))},run:function(a){var b=this;b.getPortletPlaceholder().paintCanvas(b.render());this.onAjax("catchword","get-all-catchwords",{},"GET",{onSuccess:function(d){var c=23;var h={};for(var e in d){d[e].catchWordTitle=d[e].catchWord;if(d[e].catchWord.length>c){var g=d[e].catchWord.substr(0,c-3);var f=g.lastIndexOf(" ");if(f!=-1){g=g.substr(0,f)}d[e].catchWord=g+"..."}if(h[d[e].contextId]==undefined){h[d[e].contextId]={};h[d[e].contextId].catchwords=Array();h[d[e].contextId].context=d[e].context}h[d[e].contextId].catchwords.push(d[e])}b.requestForEffectiveResource("ContentPlaceholder").html(b.renderView("Topics",{catchwords:h}));b.map=h;b.requestForEffectiveResource("ContextPlaceholder").html(b.renderView("Contexts",{contexts:h}))}},true,300000)},refreshCatchwords:function(){var a=Array();var b=this;this.requestForEffectiveResource("ContextPlaceholder").find("input").each(function(){if($(this).is(":checked")){var d=$(this).attr("cid");for(var c in b.map[d].catchwords){a.push(b.map[d].catchwords[c])}}});b.requestForEffectiveResource("ContentPlaceholder").html(b.renderView("Topics",{catchwords:a}))},onSelectAllContexts:function(){this.requestForEffectiveResource("ContextPlaceholder").find("input[type=checkbox]").attr("checked","checked");this.refreshCatchwords()},onDeselectAllContexts:function(){this.requestForEffectiveResource("ContextPlaceholder").find("input[type=checkbox]").removeAttr("checked");this.refreshCatchwords()},onContextSelectionChanged:function(){this.refreshCatchwords()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);CatchWordBrowserPortlet=Class.extend({init:function(){this.name="CatchWordBrowserPortlet"},run:function(){var a=this;this.onAjax("catchword","browse-catch-word",{},"GET",{onSuccess:function(b){a.model={};a.model.catchwords=Array();for(var c in b){a.model.catchwords.push(b[c])}a.getPortletPlaceholder().paintCanvas(a.render());a.requestForEffectiveResource("ContentPlaceholder").find("ul:first").addClass("first");a.requestForEffectiveResource("ContentPlaceholder").find("ul:last").addClass("last");a.requestForEffectiveResource("ContentPlaceholder").find("ul:last").append('<li class="more"><a style="font-weight: normal; color: #069" href="#!page/AllTopics">Xem tt c</a></li>')}},true,300000)},}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);CatchWordIntroPortlet=CatchWordBrowserPortlet.extend({init:function(){this.name="CatchWordIntroPortlet"},run:function(){var a=this;this.onAjax("catchword","browse-catch-word",{},"GET",{onSuccess:function(b){a.model={};a.model.catchwords=Array();for(var c in b){a.model.catchwords.push(b[c])}a.getPortletPlaceholder().paintCanvas(a.render());a.requestForEffectiveResource("ContentPlaceholder").find("ul:first").addClass("first");a.requestForEffectiveResource("ContentPlaceholder").find("ul:last").addClass("last");a.requestForEffectiveResource("ContentPlaceholder").find("ul:last").append('<li class="more"><a style="font-weight: normal; color: #069" href="#!page/AllTopics">Xem tt c</a></li>')}},true,300000)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);SmallTopicCreatePortlet=Class.extend({init:function(){this.name="SmallTopicCreatePortlet"},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},onTopicNameFocus:function(){this.requestForEffectiveResource("DesContainer").show()},onAddNewTopic:function(){var c=this;var b=this.requestForEffectiveResource("Name").val();var d=this.requestForEffectiveResource("Des").val();var a=SingletonFactory.getInstance(Subject);this.onAjax("catchword","add-new-topic",{topicName:b,topicDes:d},"post",{onSuccess:function(e){a.notifyEvent("NotifyGlobal","Thm thnh cng");c.requestForEffectiveResource("Name").val("");c.requestForEffectiveResource("Des").val("");c.requestForEffectiveResource("DesContainer").hide();a.notifyEvent("NewTopicAdded",{value:e,txt:b})},onFailure:function(){a.notifyEvent("NotifyGlobal","Thm tht bi")}})},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);TopicCreatePortlet=Class.extend({init:function(){this.name="TopicCreatePortlet";this.model={};this.template="";this.topics=null;this.app=SingletonFactory.getInstance(Application);this.root=this.app.getSystemProperties().get("host.root");this.addedTopics=null;this.topicMap=Array();this.topicAvaiContextCommit=Array();this.topicNewContextCommit=Array()},onBegin:function(){this.registerObserver();this.template=$(tmpl("CommonPortlet-TopicNew",{}))},onNewTopicAdded:function(d){var b=d.name;var e=d.des;var f=$("#"+b).val().trim();var g=$("#"+e).val().trim();if(f==""||g==""){alert("Cha nhp  ch  v chi tit ch ");return}var a={};a.content=f;if(this.topicMap[a.content]){alert(" c ch  ny.");return}this.topicMap[a.content]=true;var c=tmpl("CommonPortlet-Topic",a);$("#commonCreatedTopics").append(c);a={};a.topicName=f;a.topicDes=g;this.topicAvaiContextCommit.push(a);$("#"+b).val("");$("#"+e).val("")},prepareTopics:function(){if(SingletonFactory.getInstance(Application).getSystemProperties().get("memcached.topics")==undefined){this.getAjaxAllTopics()}},getAjaxAllTopics:function(){var a=this;this.onAjax("catchword","get-all-catchwords",{},"get",{onSuccess:function(b){a.preparedAvaiTopics(b);a.topics=b;SingletonFactory.getInstance(Application).getSystemProperties().set("memcached.topics",b)}});this.topics=a.topics},preparedAvaiTopics:function(a){for(var c in a){var b=a[c];content=b.catchWord;this.topicMap[content]=true}},buildTopics:function(b){var a=$("<div><div></div></div>");for(var e in b){var d=b[e];var c=$("<option value='"+d.id+"'>"+d.catchWord+"</option>");a.children().append(c)}return a.children()},onNewTopicConfirmed:function(){var d=this;this.numCount=this.topicAvaiContextCommit.length;this.done=0;for(var c in this.topicAvaiContextCommit){var b=this.topicAvaiContextCommit[c];var a=SingletonFactory.getInstance(Subject);this.onAjax("catchword","add-new-topic",b,"post",{onSuccess:function(e){if(!isNaN(e)){d.done++;a.notifyEvent("NotifyGlobal","Thm thnh cng");a.notifyEvent("CommitTopicSuccess",{value:e,txt:b.topicName})}},onFailure:function(){a.notifyEvent("NotifyGlobal","Thm tht bi")}})}},onCommitTopicSuccess:function(){if(this.done<this.numCount){return}var sbj=SingletonFactory.getInstance(Subject);var rq=SingletonFactory.getInstance(Page).getRequest();var params=rq.getParams();var page=params.pageCallBack||"Home";var needParam=params.needParam||{};var paramVal=params.paramVal||null;var paramName=params.paramName||null;var request=null;if(eval(needParam)){if(paramVal!=null&&paramName!=null){var obj={};obj[paramName]=paramVal;request=new Request(page,"",obj)}else{request=new Request(page,"",{})}}else{request=new Request("Home","",{})}sbj.notifyEvent("RequestRoute",request)},run:function(){this.prepareTopics();this.getPortletPlaceholder().drawToCanvas(this.template)},onEnd:function(){this.unregisterObserver()}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);TopicCreatePortletStandalone=TopicCreatePortlet.extend({init:function(){this._super();this.name="TopicCreatePortletStandalone"},onShowTopicCreatePopup:function(b){this.commitCallback=b.commitcallback;this.callback=b.callback;var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ShowPopup",{id:"TopicCreatePortletStandalone",title:"Thm ch  mi",content:this.template.html()})},onCommitTopicSuccess:function(d){var c=SingletonFactory.getInstance(Subject);var b=this.commitCallback;var a=this.callback;c.notifyEvent(b,d);if(this.done<this.numCount){return}c.notifyEvent("PopupRemove",{id:"TopicCreatePortletStandalone"});c.notifyEvent(a)}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface);TopicMainPortlet=Class.extend({init:function(){this.name="TopicMainPortlet"},onReloadPage:function(){this.run()},run:function(){var a=SingletonFactory.getInstance(Subject);var c=this.getRequest().getParam("id");if(c==undefined||isNaN(c)){a.notifyEvent("RequestRoute",new Request("ErrorPage",undefined,{code:404}));return}var b=this;b.model={};b.model.id=c;b.getPortletPlaceholder().paintCanvas(b.render());this.onAjax("catchword","get-topic-details",{id:c},"GET",{onSuccess:function(d){b.requestForEffectiveResource("TopicName").html(d.catchWord);b.requestForEffectiveResource("TopicDetail").html(d.detail);if(d.avatar==undefined||d.avatar==""){d.avatar="asking.png"}b.requestForEffectiveResource("TopicAvatar").attr("src","resource/images/topics/"+d.avatar)},onFailure:function(d){a.notifyEvent("RequestRoute",new Request("ErrorPage",undefined,{code:404}))}});this.onAjax("catchword","get-topic-stats",{id:c},"GET",{onSuccess:function(d){b.requestForEffectiveResource("ExpertCount").html(d.expert);b.requestForEffectiveResource("FollowCount").html(d.follow);b.requestForEffectiveResource("AnswerCount").html(d.answer);b.requestForEffectiveResource("QuestionCount").html(d.question)}},true,300000)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);AbstractFollowersPortlet=Class.extend({init:function(){},onBegin:function(){this.registerObserver()},onReloadPage:function(){this.fetchFollowerList()},run:function(){this.fetchFollowerList()},fetchFollowerList:function(){var a=this.getRequest().getParam(this.key);var b=this;this.onAjax(this.controller,this.action,{uid:a},"GET",{onSuccess:function(c){b.model={};b.model.list=c;if(a==undefined){b.model.pronoun="bn"}else{b.model.pronoun="ngi ny"}b.getPortletPlaceholder().paintCanvas(b.render())}})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);AllUsersPortlet=Class.extend({init:function(){this.name="AllUsersPortlet"},run:function(a){var b=this;this.onAjax("ajax","get-all-users",{},"GET",{onSuccess:function(d){var c=20;for(var e in d){if(d[e].catchWord.length>c){var g=d[e].catchWord.substr(0,c-3);var f=g.lastIndexOf(" ");if(f!=-1){g=g.substr(0,f)}d[e].catchWord=g+"..."}}d.sort(function(j,h){return h.catchWord.length-j.catchWord.length});b.model={};b.model.catchwords=d;b.getPortletPlaceholder().paintCanvas(b.render());b.requestForEffectiveResource("ContentPlaceholder").find("ul:first").addClass("first");b.requestForEffectiveResource("ContentPlaceholder").find("ul:last").addClass("last")}},true,300000)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);BriefInfoEditPortlet=Class.extend({init:function(){this.name="BriefInfoEditPortlet"},run:function(){this.model={};var b=this;var a=SingletonFactory.getInstance(Application).getSystemProperties();this.onAjax("user-ajax","get-brief-info",{},"GET",{onSuccess:function(c){b.model.page=b.getRequest().getParam("page");b.model.id=a.get("user.id");b.model.name=c.name;b.model.avatar=c.avatar;b.getPortletPlaceholder().paintCanvas(b.render())}})}}).implement(PortletInterface).implement(AjaxInterface).implement(RenderInterface);ContactsPortlet=Class.extend({init:function(){this.name="ContactsPortlet";this.page=0},onBegin:function(){this.registerObserver()},run:function(){this.fetchContacts()},onShowMoreMyContacts:function(){var a=this;this.page++;this.onAjax("user-ajax","get-contacts",{page:this.page},"GET",{onSuccess:function(b){if(b.length>0){a.requestForEffectiveResource("Container").append(a.renderView("Contacts",{contacts:b}))}if(b.length<20){a.requestForEffectiveResource("ShowMore").hide()}}})},fetchContacts:function(){var a=this;this.onAjax("user-ajax","get-contacts",{page:this.page},"GET",{onSuccess:function(b){a.model={};a.model.contacts=b;a.getPortletPlaceholder().paintCanvas(a.render());if(b.length>0){a.requestForEffectiveResource("Container").html(a.renderView("Contacts",{contacts:b}))}if(b.length<20){a.requestForEffectiveResource("ShowMore").hide()}}})},onSendInviteButtonClick:function(c){var b=c.email;var a=c.origin.target;var d=$(a).parent();d.html('<img class="invite-ajax-loader" src="resource/images/ajax-loader-1.gif">');this.onAjax("invitation","send-invitation",{email:b},"POST",{onSuccess:function(){$(d).html('<strong class="InvitationSent"> gi li mi</strong>')},onFailure:function(){$(d).html('<div class="errorMsg">Gi tht bi!</div>')}})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);EmailPasswdEditPortlet=Class.extend({init:function(){this.name="EmailPasswdEditPortlet"},onBegin:function(){this.registerObserver()},afterEdit:function(a){$("."+a).show();$("."+a+"_edit").hide();$(".error").html("")},onSubmitNewsletter:function(){$(".error").html("");var c=this.requestForEffectiveResource("NewsletterCheck");var a=this.requestForEffectiveResource("NewsletterEmail").val().trim();var d=this;var b=SingletonFactory.getInstance(Subject);if(c.is(":checked")){if(a==""){this.requestForEffectiveResource("EmailError").html("Email khng c  trng");return}this.onAjax("ajax","subscribe",{email:a},"POST",{onSuccess:function(e){b.notifyEvent("NotifyGlobal","Bn  ng k nhn newsletter thnh cng!");d.run()},onFailure:function(e){d.requestForEffectiveResource("EmailNewsletterError").html(e)}})}else{this.onAjax("ajax","unsubscribe-user",{},"POST",{onSuccess:function(e){b.notifyEvent("NotifyGlobal","Bn  hy nhn newsletter thnh cng!");d.run()}})}},onSubmitEmail:function(){$(".error").html("");var b=this.requestForEffectiveResource("EmailPass").val().trim();var a=this.requestForEffectiveResource("EmailInput").val().trim();var c=this;if(b==""){c.requestForEffectiveResource("EmailPassError").html("Bn phi nhp mt khu hin ti");return}if(a==""){c.requestForEffectiveResource("EmailError").html("Email khng c  trng");return}this.onAjax("user-ajax","edit-email-password",{currentPasswd:b,email:a},"POST",{onSuccess:function(d){var e=SingletonFactory.getInstance(Subject);e.notifyEvent("NotifyGlobal","Bn  thay i email thnh cng!");c.afterEdit("bkp_email");c.requestForEffectiveResource("EmailPass").val("");c.requestForEffectiveResource("Email").html(a)},onFailure:function(d){if(d.indexOf("sai")==-1){c.requestForEffectiveResource("EmailError").html(d)}else{c.requestForEffectiveResource("EmailPassError").html(d)}}})},onSubmitPasswd:function(){$(".error").html("");var b=this.requestForEffectiveResource("CurrentPasswd").val().trim();var c=this.requestForEffectiveResource("Passwd").val().trim();var a=this.requestForEffectiveResource("ConfirmPasswd").val().trim();var d=this;if(b==""){d.requestForEffectiveResource("CurPassError").html("Bn phi nhp mt khu c");return}if(c==""){d.requestForEffectiveResource("NewPassError").html("Mt khu khng c  trng");return}if(c!=a){d.requestForEffectiveResource("ConfirmPassError").html("Hai mt khu phi ging nhau");return}this.onAjax("user-ajax","edit-email-password",{currentPasswd:b,passwd:c},"POST",{onSuccess:function(e){var f=SingletonFactory.getInstance(Subject);f.notifyEvent("NotifyGlobal","Bn  thay i mt khu thnh cng!");d.afterEdit("bkp_passwd");d.requestForEffectiveResource("CurrentPasswd").val("");d.requestForEffectiveResource("Passwd").val("");d.requestForEffectiveResource("ConfirmPasswd").val("")},onFailure:function(e){if(e.indexOf("sai")==-1){d.requestForEffectiveResource("NewPassError").html(e)}else{d.requestForEffectiveResource("CurPassError").html(e)}}})},onNewsletterSubscribeCheckChanged:function(){var a=this.requestForEffectiveResource("NewsletterCheck");if(a.is(":checked")){this.requestForEffectiveResource("NewsletterEmail").removeAttr("disabled")}else{this.requestForEffectiveResource("NewsletterEmail").attr("disabled","")}},run:function(){var a=this;var b=SingletonFactory.getInstance(Application).getSystemProperties();a.model={};a.model.name=b.get("user.name");a.model.username=b.get("user.username");a.model.avatar=b.get("user.avatar");a.model.newsletter="Tt";a.model.newsletterChecked="";a.model.newsletterDisable="disabled";a.model.newsletterEmail="";this.onAjax("user-ajax","get-user-edit-info",{},"GET",{onSuccess:function(c){if(c.subscribe!=null){a.model.newsletter="Bt";a.model.newsletterChecked="checked";a.model.newsletterDisable="";a.model.newsletterEmail=c.subscribe.email}a.getPortletPlaceholder().paintCanvas(a.render());a.requestForEffectiveResource("Email").html(c.email);a.requestForEffectiveResource("EmailInput").val(c.email)}})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);EmailRecoverPortlet=Class.extend({init:function(){this.name="EmailRecoverPortlet"},onBegin:function(){this.registerObserver()},onRecoverButtonClick:function(){var b=this;var a=this.requestForEffectiveResource("Email").val();this.requestForEffectiveResource("Email").attr("disabled","true");this.requestForEffectiveResource("Error").html('<img src="resource/images/ajax-loader-1.gif">');this.onAjax("user-ajax","request-new-password",{email:a},"POST",{onSuccess:function(){var c=SingletonFactory.getInstance(Subject);c.notifyEvent("NotifyGlobal","Chng ti  gi hng dn phc hi mt khu n email ca bn! Hng dn c gi tr trong vng 24h");c.notifyEvent("RequestRoute",new Request("Home"))},onFailure:function(c){b.requestForEffectiveResource("Email").removeAttr("disabled");b.requestForEffectiveResource("Error").html(c)}})},run:function(){this.getPortletPlaceholder().paintCanvas(this.render())},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);ListFollowersPortlet=AbstractFollowersPortlet.extend({init:function(){this.name="ListFollowersPortlet";this.key="id";this.controller="user-ajax";this.action="get-followers"},onFollowersChange:function(){this.run()},onListAllFollowers:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ShowPopup",{id:"ListFollowers",title:"Nhng ngi ang follow",content:this.renderView("AllPeople",this.model)})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);ListFollowingPortlet=ListFollowersPortlet.extend({init:function(){this._super();this.name="ListFollowingPortlet";this.action="get-following"},onListAllFollowing:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("ShowPopup",{id:"ListFollowers",title:"Nhng ngi ang follow",content:this.renderView("AllPeople",this.model)})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);LoginPortlet=Class.extend({init:function(){this.name="LoginPortlet";this.model={}},onBegin:function(){this.registerObserver()},onOpenIDLoginSuccess:function(){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("PopupRemove",{id:"Login"});this.resyncStatus()},onLoginOpenID:function(c){var a=800;var b=450;var e=(screen.width/2)-(a/2);var d=(screen.height/2)-(b/2);window.open("index/login-openid/login/"+c.type,"openIDWindow","status = 0, height = "+b+", width = "+b+", resizable = 0, left = "+e+", top = "+d)},onNeedLogin:function(c){this.currentEventData=c;var b=SingletonFactory.getInstance(Application).getSystemProperties();var a=b.get("user.login",undefined);if(a==undefined){this.resyncStatus(c)}else{this.checkLogin(c)}},resyncStatus:function(b){var c=this;var a=SingletonFactory.getInstance(Application).getSystemProperties();this.onAjax("ajax","check-user-status",{},"GET",{onSuccess:function(d){if(d==0){a.set("user.login",0,true);a.set("user.id",-1,true)}else{a.set("user.id",d.id,true);a.set("user.name",d.name,true);a.set("user.login",1,true);a.set("user.type",d.type,true);a.set("user.role",d.role,true)}c.checkLogin(b)}})},checkLogin:function(d){var c=SingletonFactory.getInstance(Subject);var b=SingletonFactory.getInstance(Application).getSystemProperties();var a=b.get("user.login",undefined);if(a==0){if(this.currentEventData.disableWarning==true){this.model.loginError=""}else{this.model.loginError=this.getLocalizedText("NeedLogin")}c.notifyEvent("ShowPopup",{id:"Login",title:"ng nhp",content:this.render()});$("#LoginPortlet-Username").focus()}else{c.notifyEvent("LoginSuccess",d)}},onPasswordTextBoxKeyUp:function(b){var a=b.keyCode;if(a==13){this.onLoginButtonClick(b)}},onLoginButtonClick:function(c){var f=c.target;var b=$(f).parents("#LoginPortlet-Form:first");var h=$(b).find("#LoginPortlet-Username").val();var a=$(b).find("#LoginPortlet-Password").val();var g=$(b).find("#LoginPortlet-Persistent:checked").length;var d=$(f).parents("#LoginPortlet-Form:first").find("#LoginPortlet-LoginError");if(h==""||a==""){$(d).html(this.getLocalizedText("LoginInsufficientInput"))}var e=this;this.onAjax("ajax","login",{username:h,password:a,persistent:g},"POST",{onSuccess:function(j){var l=SingletonFactory.getInstance(Application).getSystemProperties();l.set("user.id",j.id,true);l.set("user.name",j.name,true);l.set("user.login",1,true);l.set("user.type",j.type,true);var k=SingletonFactory.getInstance(Subject);k.notifyEvent("PopupRemove",{id:"Login"});k.notifyEvent("LoginSuccess",e.currentEventData)},onFailure:function(j){$(d).html(j)}})},onReloadPage:function(){this.run()},onSystemPropertyChanged:function(a){if(a=="user.login"){if(this.getInitParameters().light==true){var b=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(b==1){this.getPortletPlaceholder().paintCanvas("")}}}},run:function(){this.model.loginError="";if(this.getInitParameters().light==true){var a=SingletonFactory.getInstance(Application).getSystemProperties().get("user.login");if(a!=1){this.getPortletPlaceholder().paintCanvas(this.renderView("LightView",this.model))}}else{this.getPortletPlaceholder().paintCanvas(this.render())}}}).implement(RenderInterface).implement(PortletInterface).implement(ObserverInterface).implement(AjaxInterface);NotificationListPortlet=Class.extend({init:function(){this.name="NotificationListPortlet";this.page=0},onViewMoreNotification:function(){this.page++;this.fetch()},run:function(){this.getPortletPlaceholder().paintCanvas(this.render());this.fetch()},fetch:function(){var obj=this;this.onAjax("user-ajax","get-all-notification",{page:this.page},"GET",{onSuccess:function(ret){if(ret.length<20){obj.requestForEffectiveResource("ViewMore").hide()}if(ret.length==0){if(obj.page==0){obj.requestForEffectiveResource("Container").html("Hin ti bn khng c thng bo no")}}else{var notifs=Array();for(var i=0;i<ret.length;i++){var link=eval("("+ret[i].link+")");var href=Array();for(var j in link){var param=j;if(param=="type"){param="page"}else{if(param=="qid"){ret[i].objId=link[j]}}href.push(param+"/"+link[j])}ret[i].link="#!"+href.join("/");ret[i].users=Array();ret[i].users.push({sourceId:ret[i].sourceId,name:ret[i].name});var since=$.timeFormatMin(ret[i].since);if(notifs[since]==undefined){notifs[since]=Array()}var found=false;for(var j in notifs[since]){if(ret[i].type==notifs[since][j].type&&ret[i].objId==notifs[since][j].objId){notifs[since][j].users.push({sourceId:ret[i].sourceId,name:ret[i].name});found=true;break}}if(!found){notifs[since].push(ret[i])}}for(var i in notifs){for(var j in notifs[i]){notifs[i][j].usersTmpl=obj.renderView("UsersTemplate",{users:notifs[i][j].users});notifs[i][j].content=obj.renderView(notifs[i][j].type,notifs[i][j])}}obj.requestForEffectiveResource("Container").append(obj.renderView("List",{notifs:notifs}))}}})},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);PasswordResetPortlet=Class.extend({init:function(){this.name="PasswordResetPortlet"},onBegin:function(){this.registerObserver()},onReloadPage:function(){this.run()},onResetButtonClick:function(){var d=this;var c=this.requestForEffectiveResource("Password").val();var b=this.requestForEffectiveResource("ConfirmPassword").val();if(c==undefined||c==""){d.requestForEffectiveResource("Error").html("Bn phi nhp mt khu");return}if(c!=b){d.requestForEffectiveResource("Error").html("Hai mt khu khng ging nhau");return}var a=this.token;if(a==undefined){a=this.getRequest().getParam("token")}this.onAjax("user-ajax","reset-password",{token:a,passwd:c},"POST",{onSuccess:function(){var e=SingletonFactory.getInstance(Subject);e.notifyEvent("NotifyGlobal","Bn  thay i mt khu thnh cng");e.notifyEvent("RequestRoute",new Request("Login"))},onFailure:function(e){d.requestForEffectiveResource("Error").html(e)}})},run:function(){this.getPortletPlaceholder().paintCanvas("");var a=this.getRequest().getParam("token",undefined);if(a==undefined){this.getPortletPlaceholder().paintCanvas(this.renderView("ErrorInvalidToken",{}))}else{var b=this;this.onAjax("user-ajax","is-token-valid",{token:a},"GET",{onSuccess:function(c){b.token=a;b.getPortletPlaceholder().paintCanvas(b.render())},onFailure:function(c){b.getPortletPlaceholder().paintCanvas(b.renderView("ErrorInvalidToken",{error:c}))}})}},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);PrivilegePortlet=Class.extend({init:function(){this.name="PrivilegePortlet"},onBegin:function(){this.registerObserver()},run:function(){var a=this;this.getPortletPlaceholder().paintCanvas(this.render());this.onAjax("ajax","get-all-privileges",{},"GET",{onSuccess:function(b){var d=Array();for(var c in b.privs){d.push({title:b.privs[c].title,requiredScore:b.privs[c].requiredScore})}b.privs=d;b.privs.sort(function(g,f){return f.requiredScore-g.requiredScore});var e=0;for(var c=1;c<b.privs.length;c++){if(parseInt(b.privs[c].requiredScore)<=parseInt(b.current)){e=b.privs[c-1].requiredScore-b.current;if(e<0){e=0}break}}b.remainingScore=e;a.requestForEffectiveResource("ContentPlaceholder").html(a.renderView("Privileges",b))}})},onEnd:function(){this.unregisterObserver()}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);QuestionFollowersPortlet=ListFollowersPortlet.extend({init:function(){this.name="QuestionFollowersPortlet";this.key="qid";this.controller="question";this.action="get-followers"},onQuestionFollowerChange:function(){this.run()}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);RegisterPortlet=Class.extend({init:function(){this.name="RegisterPortlet";this.step=1;this.subject=SingletonFactory.getInstance(Subject)},onBegin:function(){this.model={};this.model.welcomeMsg=this.getLocalizedText("Welcome");this.model.nameMsg=this.getLocalizedText("Name");this.model.usernameMsg=this.getLocalizedText("Username");this.model.passwordMsg=this.getLocalizedText("Password");this.model.emailMsg=this.getLocalizedText("Email");this.model.submitMsg=this.getLocalizedText("Submit");this.model.skipMsg=this.getLocalizedText("Skip");this.model.registerMsg=this.getLocalizedText("Register");this.model.additionInfoMsg=this.getLocalizedText("AdditionInfo");this.model.expertiseMsg=this.getLocalizedText("Expertise");this.model.tokenMsg=this.getLocalizedText("Token");this.model.passwordTitle=this.getLocalizedText("PasswordTitle");this.model.emailTitle=this.getLocalizedText("EmailTitle");this.registerObserver()},run:function(){this.model.existEmail="";this.step1()},step1:function(){this.getPortletPlaceholder().drawToCanvas(this.renderView("ViewStep1",this.model))},step1ClearError:function(){this.requestForEffectiveResource("NameError").html("");this.requestForEffectiveResource("PasswordError").html("");this.requestForEffectiveResource("EmailError").html("");this.requestForEffectiveResource("TokenError").html("")},onRegisterButtonClick:function(g){var j=this.requestForEffectiveResource("Name").val();var h=this.requestForEffectiveResource("Password").val();var e=this.requestForEffectiveResource("Email").val();var b=this.requestForEffectiveResource("Token").val();var a=this.requestForEffectiveResource("ReceiveUpdates").is(":checked")?1:0;var c=this.getRequest().getParam("token");var f=SingletonFactory.getInstance(Subject);var d=this;this.step1ClearError();this.onAjax("ajax","register",{password:h,email:e,fullname:j,token:b,refererToken:c,receive:a},"POST",{onSuccess:function(k){f.notifyEvent("UpdateUserStatus");if(d.getInitParameters().type=="home"){d.end()}else{d.step3()}},onFailure:function(n,m){for(var k in m){var l=m[k];d.handleRegisterError(l.type,l.msg)}}})},handleRegisterError:function(a,b){switch(a){case"fullname":this.requestForEffectiveResource("NameError").html(b);break;case"password":this.requestForEffectiveResource("PasswordError").html(b);break;case"email":this.requestForEffectiveResource("EmailError").html(b);break;case"token":this.requestForEffectiveResource("TokenError").html(b);break}},onLoginSuccess:function(a){if(a.type=="Register"){this.end()}},step3:function(){this.getPortletPlaceholder().paintCanvas(this.renderView("ViewStep3",this.model));var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RenderExpertiseEditor",{placeholder:this.requestForEffectiveResource("ExpertisePlaceholder"),namespace:"RegisterPortlet"});a.notifyEvent("RenderInterestEditor",{placeholder:this.requestForEffectiveResource("InterestPlaceholder"),namespace:"RegisterPortlet"})},onSkipExpertiseRegisterButtonClick:function(a){this.end()},onSubmitExpertiseRegisterButtonClick:function(b){var a=SingletonFactory.getInstance(Subject);var c=this;this.submitComplete=0;a.notifyEvent("SubmitExpertiseForward",{callback:function(){c.expertiseSubmitted()},namespace:this.name});a.notifyEvent("SubmitInterestForward",{callback:function(){c.expertiseSubmitted()},namespace:this.name})},expertiseSubmitted:function(){this.submitComplete++;if(this.submitComplete>=2){this.end()}},onEnd:function(){this.unregisterObserver()},end:function(){var b=new Request("UserAvatarEdit",null,{msg:"reg_complete"});var a=SingletonFactory.getInstance(Subject);a.notifyEvent("RequestRoute",b)}}).implement(PortletInterface).implement(RenderInterface).implement(ObserverInterface).implement(AjaxInterface);UserBrowserPortlet=Class.extend({init:function(){this.name="UserBrowserPortlet"},run:function(){var a=this;this.getPortletPlaceholder().paintCanvas(this.render());this.onAjax("ajax","get-max-score-users",{},"GET",{onSuccess:function(b){a.requestForEffectiveResource("ContentPlaceholder-MaxScore").html(a.renderView("MaxScoreList",{users:b}))}},true,300000);this.onAjax("ajax","get-by-top-rank",{},"GET",{onSuccess:function(c){a.model={};a.model.users=Array();var e=Array();for(var d in c){if(c[d]==undefined){continue}var f=c[d].userId;if(e[f]==undefined){e[f]=d;c[d].ranks="<a class='lv_tag' href='#!page/Topic/id/"+c[d].expertiseId+"'>"+c[d].catchWord+"</a>"}else{var b=e[f];c[b].ranks+=", <a class='lv_tag' href='#!page/Topic/id/"+c[d].expertiseId+"'>"+c[d].catchWord+"</a>";c[d]=undefined}}for(var d in c){if(c[d]!=undefined){a.model.users.push(c[d])}}a.requestForEffectiveResource("ContentPlaceholder-TopRank").append(a.renderView("TopRankList",a.model))}},true,300000);this.onAjax("ajax","get-latest-users",{},"GET",{onSuccess:function(b){a.requestForEffectiveResource("ContentPlaceholder-Latest").html(a.renderView("LatestList",{users:b}))}},true,300000)}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface);FollowRecommendPortlet=Class.extend({init:function(){this.name="FollowRecommendPortlet"},onBegin:function(){this.registerObserver()},onEnd:function(){this.unregisterObserver()},onFollowPerson:function(a){var b=this;this.onAjax("user-ajax","follow-user",{uid:a.id},"POST",{onSuccess:function(c){b.run()}})},run:function(){var a=this;this.onAjax("user-ajax","get-follow-recommend",{},"get",{onSuccess:function(b){a.model={list:b};a.getPortletPlaceholder().paintCanvas(a.render())}})}}).implement(PortletInterface).implement(RenderInterface).implement(AjaxInterface).implement(ObserverInterface);if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(typeof Array.prototype.indexOf!=="function"){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}var bkbootstrap=new BKBootstrap();var app=SingletonFactory.getInstance(Application);app.getSystemProperties().set("host.root",ApplicationRoot);app.getSystemProperties().set("host.solr","/solr");app.getSystemProperties().set("page.default","Home");app.setBootstrap(bkbootstrap);Request.setProactive(true);$(window).bind("hashchange",function(){if(Request.getProactive!=true){var a=SingletonFactory.getInstance(Subject);a.notifyEvent("NeedAssembleRequest")}Request.setProactive(false)});$(document).ready(function(){$.get(ApplicationRoot+"/resource/microtemplating/all.fall.txt",{},function(b){var a=navigator.userAgent;if(a.indexOf("MSIE")!=-1){$("#Application-Main").html(b)}else{document.getElementById("Application-Main").innerHTML=b}app.begin()})});(function(){var c5=void 0,c3=!0,c2=null,cZ=!1,ep=encodeURIComponent,dN=Infinity,ci=setTimeout,bW=decodeURIComponent,cY=Math;function bC(h,g){return h.name=g}var cX="push",bl="slice",cW="replace",aY="load",aH="floor",ao="charAt",b="value",cV="indexOf",ez="match",d6="port",dj="createElement",cJ="path",cT="name",cQ="host",cO="toString",cN="length",cM="prototype",cr="clientWidth",cL="split",b5="stopPropagation",bt="scope",cK="location",a6="search",cI="protocol",aP="clientHeight",ay="href",dW="substring",af="apply",eI="navigator",dU="join",dS="toLowerCase",dQ;function ej(h,g){switch(g){case 0:return""+h;case 1:return 1*h;case 2:return !!h;case 3:return 1000*h}return h}function bT(g){return"function"==typeof g}function bz(g){return g!=c5&&-1<(g.constructor+"")[cV]("String")}function dP(h,g){return c5==h||"-"==h&&!g||""==h}function bi(g){if(!g||""==g){return""}for(;g&&-1<" \n\r\t"[cV](g[ao](0));){g=g[dW](1)}for(;g&&-1<" \n\r\t"[cV](g[ao](g[cN]-1));){g=g[dW](0,g[cN]-1)}return g}function dO(h){var g=1,l=0,k;if(!dP(h)){g=0;for(k=h[cN]-1;0<=k;k--){l=h.charCodeAt(k),g=(g<<6&268435455)+l+(l<<14),l=g&266338304,g=0!=l?g^l>>21:g}}return g}function aV(){return cY.round(2147483647*cY.random())}function aE(){}function dM(h,g){if(ep instanceof Function){return g?encodeURI(h):ep(h)}dK(68);return escape(h)}function dI(h){h=h[cL]("+")[dU](" ");if(bW instanceof Function){try{return bW(h)}catch(g){dK(17)}}else{dK(68)}return unescape(h)}var al=function(h,g,l,k){h.addEventListener?h.addEventListener(g,l,!!k):h.attachEvent&&h.attachEvent("on"+g,l)},eO=function(h,g,l,k){h.removeEventListener?h.removeEventListener(g,l,!!k):h.detachEvent&&h.detachEvent("on"+g,l)};function ex(h,g){if(h){var l=dG[dj]("script");l.type="text/javascript";l.async=c3;l.src=h;l.id=g;var k=dG.getElementsByTagName("script")[0];k.parentNode.insertBefore(l,k);return l}}function dF(g){return g&&0<g[cN]?g[0]:""}function d4(h){var g=h?h[cN]:0;return 0<g?h[g-1]:""}var dh=function(){this.prefix="ga.";this.R={}};dh[cM].set=function(h,g){this.R[this.prefix+h]=g};dh[cM].get=function(g){return this.R[this.prefix+g]};dh[cM].contains=function(g){return this.get(g)!==c5};function cG(g){0==g[cV]("www.")&&(g=g[dW](4));return g[dS]()}function cp(h,g){var l,k={url:h,protocol:"http",host:"",path:"",d:new dh,anchor:""};if(!h){return k}l=h[cV]("://");0<=l&&(k.protocol=h[dW](0,l),h=h[dW](l+3));l=h[a6]("/|\\?|#");if(0<=l){k.host=h[dW](0,l)[dS](),h=h[dW](l)}else{return k.host=h[dS](),k}l=h[cV]("#");0<=l&&(k.anchor=h[dW](l+1),h=h[dW](0,l));l=h[cV]("?");0<=l&&(b3(k.d,h[dW](l+1)),h=h[dW](0,l));k.anchor&&g&&b3(k.d,k.anchor);h&&"/"==h[ao](0)&&(h=h[dW](1));k.path=h;return k}function bI(h,g){function q(v){var u=(v.hostname||"")[cL](":")[0][dS](),w=(v[cI]||"")[dS](),w=1*v[d6]||("http:"==w?80:"https:"==w?443:""),v=v.pathname||"";0==v[cV]("/")||(v="/"+v);return[u,""+w,v]}var p=g||dG[dj]("a");p.href=dG[cK][ay];var m=(p[cI]||"")[dS](),l=q(p),k=p[a6]||"",n=m+"//"+l[0]+(l[1]?":"+l[1]:"");0==h[cV]("//")?h=m+h:0==h[cV]("/")?h=n+h:!h||0==h[cV]("?")?h=n+l[2]+(h||k):0>h[cL]("/")[0][cV](":")&&(h=n+l[2][dW](0,l[2].lastIndexOf("/"))+"/"+h);p.href=h;m=q(p);return{protocol:(p[cI]||"")[dS](),host:m[0],port:m[1],path:m[2],Ia:p[a6]||"",url:h||""}}function b3(h,g){function n(p,q){h.contains(p)||h.set(p,[]);h.get(p)[cX](q)}for(var m=bi(g)[cL]("&"),l=0;l<m[cN];l++){if(m[l]){var k=m[l][cV]("=");0>k?n(m[l],"1"):n(m[l][dW](0,k),m[l][dW](k+1))}}}function br(h,g){var k;dP(h)||"["==h[ao](0)&&"]"==h[ao](h[cN]-1)?k="-":(k=dG.domain,k=h[cV](k+(g&&"/"!=g?g:""))==(0==h[cV]("http://")?7:0==h[cV]("https://")?8:0)?"0":h);return k}var a4=0;function aw(h,g,k){!(1<=a4)&&!(1<=100*cY.random())&&(h=["utmt=error","utmerr="+h,"utmwv=5.2.8","utmn="+aV(),"utmsp=1"],g&&h[cX]("api="+g),k&&h[cX]("msg="+dM(k[dW](0,100))),dD.A&&h[cX]("aip=1"),o(h[dU]("&")),a4++)}var eG=0,eh={};function dC(g){return dx("x"+eG++,g)}function dx(h,g){eh[h]=!!g;return h}var dB=dC(),cU=dC(),cv=dC(),b9=dC(),bN=dC(),dA=dC(),dz=dC(),d0=dC(),eo=dC(),dL=dC(),c6=dC(),cz=dC(),ch=dC(),bV=dC(),bB=dC(),bk=dC(),aX=dC(),aG=dC(),an=dC(),a=dC(),ey=dC(),d5=dC(),di=dC(),cH=dC(),cq=dC(),b4=dC(),bJ=dC(),bs=dC(),a5=dC(),aO=dC(),ax=dC(),s=dC(),eH=dC(),ei=dC(),bS=dC(),dy=dC(c3),by=dx("page"),bh=dx("title"),aU=dC(),aD=dC(),ak=dC(),eN=dC(),ev=dC(),d2=dC(),df=dC(),cE=dC(),cn=dC(),dw=dC(c3),b1=dC(c3),bG=dC(c3),aM=dC(c3),au=dC(c3),j=dC(c3),eE=dC(c3),eg=dC(c3),dv=dC(c3),cS=dC(c3),cu=dC(c3),du=dC(c3),b8=dC(c3),bM=dC(c3),dX=dC(c3),en=dC(c3),dJ=dC(c3),c4=dC(c3),cy=dC(c3),cg=dC(c3),bU=dC(c3),bA=dC(c3),bj=dC(c3),aW=dC(c3),aF=dC(c3),am=dx("campaignParams"),eP=dC(),ew=dx("hitCallback"),d3=dC();dC();var dg=dC(),cF=dC(),co=dC(),b2=dC(),bH=dC(),bq=dC(),a3=dC(),aN=dC(),av=dC(),r=dC(),eF=dC(),bf=dC();dC();var aS=dC(),aB=dC(),ai=dC();var dZ=function(){function g(h,l,k){dt(dq[cM],h,l,k)}eL("_getName",cv,58);eL("_getAccount",dB,64);eL("_visitCode",dw,54);eL("_getClientInfo",bV,53,1);eL("_getDetectTitle",aX,56,1);eL("_getDetectFlash",bB,65,1);eL("_getLocalGifPath",bJ,57);eL("_getServiceMode",bs,59);dp("_setClientInfo",bV,66,2);dp("_setAccount",dB,3);dp("_setNamespace",cU,48);dp("_setAllowLinker",c6,11,2);dp("_setDetectFlash",bB,61,2);dp("_setDetectTitle",aX,62,2);dp("_setLocalGifPath",bJ,46,0);dp("_setLocalServerMode",bs,92,c5,0);dp("_setRemoteServerMode",bs,63,c5,1);dp("_setLocalRemoteServerMode",bs,47,c5,2);dp("_setSampleRate",b4,45,1);dp("_setCampaignTrack",bk,36,2);dp("_setAllowAnchor",cz,7,2);dp("_setCampNameKey",an,41);dp("_setCampContentKey",cH,38);dp("_setCampIdKey",aG,39);dp("_setCampMediumKey",d5,40);dp("_setCampNOKey",cq,42);dp("_setCampSourceKey",ey,43);dp("_setCampTermKey",di,44);dp("_setCampCIdKey",a,37);dp("_setCookiePath",dz,9,0);dp("_setMaxCustomVariables",a5,0,1);dp("_setVisitorCookieTimeout",d0,28,1);dp("_setSessionCookieTimeout",eo,26,1);dp("_setCampaignCookieTimeout",dL,29,1);dp("_setReferrerOverride",aU,49);dp("_setSiteSpeedSampleRate",av,132);g("_trackPageview",dq[cM].ya,1);g("_trackEvent",dq[cM].D,4);g("_trackPageLoadTime",dq[cM].xa,100);g("_trackSocial",dq[cM].za,104);g("_trackTrans",dq[cM].Ba,18);g("_sendXEvent",dq[cM].t,78);g("_createEventTracker",dq[cM].ea,74);g("_getVersion",dq[cM].ja,60);g("_setDomainName",dq[cM].C,6);g("_setAllowHash",dq[cM].oa,8);g("_getLinkerUrl",dq[cM].ia,52);g("_link",dq[cM].link,101);g("_linkByPost",dq[cM].na,102);g("_setTrans",dq[cM].sa,20);g("_addTrans",dq[cM].Y,21);g("_addItem",dq[cM].W,19);g("_setTransactionDelim",dq[cM].ta,82);g("_setCustomVar",dq[cM].pa,10);g("_deleteCustomVar",dq[cM].ga,35);g("_getVisitorCustomVar",dq[cM].ka,50);g("_setXKey",dq[cM].va,83);g("_setXValue",dq[cM].wa,84);g("_getXKey",dq[cM].la,76);g("_getXValue",dq[cM].ma,77);g("_clearXKey",dq[cM].ba,72);g("_clearXValue",dq[cM].ca,73);g("_createXObj",dq[cM].fa,75);g("_addIgnoredOrganic",dq[cM].U,15);g("_clearIgnoredOrganic",dq[cM].Z,97);g("_addIgnoredRef",dq[cM].V,31);g("_clearIgnoredRef",dq[cM].$,32);g("_addOrganic",dq[cM].X,14);g("_clearOrganic",dq[cM].aa,70);g("_cookiePathCopy",dq[cM].da,30);g("_get",dq[cM].ha,106);g("_set",dq[cM].qa,107);g("_addEventListener",dq[cM].addEventListener,108);g("_removeEventListener",dq[cM].removeEventListener,109);g("_addDevId",dq[cM].T);g("_getPlugin",et,122);g("_setPageGroup",dq[cM].ra,126);g("_trackTiming",dq[cM].Aa,124);g("_initData",dq[cM].u,2);g("_setVar",dq[cM].ua,22);dp("_setSessionTimeout",eo,27,3);dp("_setCookieTimeout",dL,25,3);dp("_setCookiePersistence",d0,24,1);g("_setAutoTrackOutbound",aE,79);g("_setTrackOutboundSubdomains",aE,81);g("_setHrefExamineLimit",aE,80)};function et(h){var g=this.plugins_;if(g){return g.get(h)}}var dt=function(h,g,l,k){h[g]=function(){try{return k!=c5&&dK(k),l[af](this,arguments)}catch(m){throw aw("exc",g,m&&m[cT]),m}}},eL=function(h,g,l,k){dq[cM][h]=function(){try{return dK(l),ej(this.a.get(g),k)}catch(m){throw aw("exc",h,m&&m[cT]),m}}},dp=function(h,g,m,l,k){dq[cM][h]=function(p){try{dK(m),k==c5?this.a.set(g,ej(p,l)):this.a.set(g,k)}catch(n){throw aw("exc",h,n&&n[cT]),n}}},c9=function(h,g){return{type:g,target:h,stopPropagation:function(){throw"aborted"}}};var cC=function(h,g){return"/"!==g?cZ:(0==h[cV]("www.google.")||0==h[cV](".google.")||0==h[cV]("google."))&&!(-1<h[cV]("google.org"))?c3:cZ},cl=function(h){var g=h.get(bN),k=h.c(dz,"/");cC(g,k)&&h[b5]()};var aK=function(){var h={},g={},p=new bZ;this.j=function(u,q){p.add(u,q)};var n=new bZ;this.e=function(u,q){n.add(u,q)};var m=cZ,l=cZ,k=c3;this.S=function(){m=c3};this.i=function(q){this[aY]();this.set(eP,q,c3);q=new bF(this);m=cZ;n.execute(this);m=c3;g={};this.n();q.Ca()};this.load=function(){m&&(m=cZ,this.Da(),bo(this),l||(l=c3,p.execute(this),a1(this),bo(this)),m=c3)};this.n=function(){if(m){if(l){m=cZ,a1(this),m=c3}else{this[aY]()}}};this.get=function(q){eh[q]&&this[aY]();return g[q]!==c5?g[q]:h[q]};this.set=function(v,u,q){eh[v]&&this[aY]();q?g[v]=u:h[v]=u;eh[v]&&this.n()};this.v=function(q){h[q]=this.b(q,0)+1};this.b=function(u,q){var v=this.get(u);return v==c5||""===v?q:1*v};this.c=function(u,q){var v=this.get(u);return v==c5?q:v+""};this.Da=function(){if(k){var q=this.c(bN,""),u=this.c(dz,"/");cC(q,u)||(h[dA]=h[ch]&&""!=q?dO(q):1,k=cZ)}}};aK[cM].stopPropagation=function(){throw"aborted"};var bF=function(h){var g=this;this.q=0;var k=h.get(ew);this.Sa=function(){0<g.q&&k&&(g.q--,g.q||k())};this.Ca=function(){!g.q&&k&&ci(k,10)};h.set(d3,g,c3)};function ar(h,g){for(var g=g||[],l=0;l<g[cN];l++){var k=g[l];if(""+h==k||0==k[cV](h+".")){return k}}return"-"}var eC=function(h,g,n){n=n?"":h.c(dA,"1");g=g[cL](".");if(6!==g[cN]||e(g[0],n)){return cZ}var n=1*g[1],m=1*g[2],l=1*g[3],k=1*g[4],g=1*g[5];if(!(0<=n&&0<m&&0<l&&0<k&&0<=g)){return dK(110),cZ}h.set(dw,n);h.set(au,m);h.set(j,l);h.set(eE,k);h.set(eg,g);return c3},d9=function(h){var g=h.get(dw),n=h.get(au),m=h.get(j),l=h.get(eE),k=h.b(eg,1);g==c5?dK(113):NaN==g&&dK(114);0<=g&&0<n&&0<m&&0<l&&0<=k||dK(115);return[h.b(dA,1),g!=c5?g:"-",n||"-",m||"-",l||"-",k][dU](".")},ds=function(g){return[g.b(dA,1),g.b(cu,0),g.b(du,1),g.b(b8,0)][dU](".")},cR=function(h,g,l){var l=l?"":h.c(dA,"1"),k=g[cL](".");if(4!==k[cN]||e(k[0],l)){k=c2}h.set(cu,k?1*k[1]:0);h.set(du,k?1*k[2]:10);h.set(b8,k?1*k[3]:h.get(b9));return k!=c2||!e(g,l)},ct=function(h,g){var p=dM(h.c(bG,"")),n=[],m=h.get(dy);if(!g&&m){for(var l=0;l<m[cN];l++){var k=m[l];k&&1==k[bt]&&n[cX](l+"="+dM(k[cT])+"="+dM(k[b])+"=1")}0<n[cN]&&(p+="|"+n[dU]("^"))}return p?h.b(dA,1)+"."+p:c2},b7=function(h,g,m){m=m?"":h.c(dA,"1");g=g[cL](".");if(2>g[cN]||e(g[0],m)){return cZ}g=g[bl](1)[dU](".")[cL]("|");0<g[cN]&&h.set(bG,dI(g[0]));if(1>=g[cN]){return c3}g=g[1][cL](-1==g[1][cV](",")?"^":",");for(m=0;m<g[cN];m++){var l=g[m][cL]("=");if(4==l[cN]){var k={};bC(k,dI(l[1]));k.value=dI(l[2]);k.scope=1;h.get(dy)[l[0]]=k}}return c3},dT=function(h,g){var k=bL(h,g);return k?[h.b(dA,1),h.b(bM,0),h.b(dX,1),h.b(en,1),k][dU]("."):""},bL=function(h){function g(l,n){if(!dP(h.get(l))){var m=h.c(l,""),m=m[cL](" ")[dU]("%20"),m=m[cL]("+")[dU]("%20");k[cX](n+"="+m)}}var k=[];g(c4,"utmcid");g(bA,"utmcsr");g(cg,"utmgclid");g(bU,"utmdclid");g(cy,"utmccn");g(bj,"utmcmd");g(aW,"utmctr");g(aF,"utmcct");return k[dU]("|")},dH=function(h,g,k){k=k?"":h.c(dA,"1");g=g[cL](".");if(5>g[cN]||e(g[0],k)){return h.set(bM,c5),h.set(dX,c5),h.set(en,c5),h.set(c4,c5),h.set(cy,c5),h.set(bA,c5),h.set(bj,c5),h.set(aW,c5),h.set(aF,c5),h.set(cg,c5),h.set(bU,c5),cZ}h.set(bM,1*g[1]);h.set(dX,1*g[2]);h.set(en,1*g[3]);em(h,g[bl](4)[dU]("."));return c3},em=function(h,g){function m(n){return(n=g[ez](n+"=(.*?)(?:\\|utm|$)"))&&2==n[cN]?n[1]:c5}function l(n,p){p&&(p=k?dI(p):p[cL]("%20")[dU](" "),h.set(n,p))}-1==g[cV]("=")&&(g=dI(g));var k="2"==m("utmcvr");l(c4,m("utmcid"));l(cy,m("utmccn"));l(bA,m("utmcsr"));l(bj,m("utmcmd"));l(aW,m("utmctr"));l(aF,m("utmcct"));l(cg,m("utmgclid"));l(bU,m("utmdclid"))},e=function(h,g){return g?h!=g:!/^\d+$/.test(h)};var bZ=function(){this.B=[]};bZ[cM].add=function(h,g){this.B[cX]({name:h,r:g})};bZ[cM].execute=function(h){try{for(var g=0;g<this.B[cN];g++){this.B[g].r.call(dn,h)}}catch(k){}};function c1(g){100!=g.get(b4)&&g.get(dw)%10000>=100*g.get(b4)&&g[b5]()}function cx(g){cf(g.get(dB))&&g[b5]()}function bR(g){"file:"==dG[cK][cI]&&g[b5]()}function bx(g){g.get(bh)||g.set(bh,dG.title,c3);g.get(by)||g.set(by,dG[cK].pathname+dG[cK][a6],c3)}var bg=new function(){var g=[];this.set=function(h){g[h]=c3};this.Va=function(){for(var h=[],k=0;k<g[cN];k++){g[k]&&(h[cY[aH](k/6)]=h[cY[aH](k/6)]^1<<k%6)}for(k=0;k<h[cN];k++){h[k]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[ao](h[k]||0)}return h[dU]("")+"~"}};function dK(g){bg.set(g)}var dn=window,dG=document,cf=function(h){var g=dn._gaUserPrefs;return g&&g.ioo&&g.ioo()||!!h&&dn["ga-disable-"+h]===c3},aT=function(h,g){ci(h,g)},aC=function(h){for(var g=[],m=dG.cookie[cL](";"),h=RegExp("^\\s*"+h+"=\\s*(.*?)\\s*$"),l=0;l<m[cN];l++){var k=m[l][ez](h);k&&g[cX](k[1])}return g},dm=function(h,g,q,p,m,l){m=cf(m)?cZ:cC(p,q)?cZ:c3;if(m){if(g&&0<=dn[eI].userAgent[cV]("Firefox")){for(var g=g[cW](/\n|\r/g," "),m=0,k=g[cN];m<k;++m){var n=g.charCodeAt(m)&255;if(10==n||13==n){g=g[dW](0,m)+"?"+g[dW](m+1)}}}g&&2000<g[cN]&&(g=g[dW](0,2000),dK(69));h=h+"="+g+"; path="+q+"; ";l&&(h+="expires="+(new Date((new Date).getTime()+l)).toGMTString()+"; ");p&&(h+="domain="+p+";");dG.cookie=h}};var aj,eM,eu=function(){if(!aj){var h={},g=dn[eI],p=dn.screen;h.Q=p?p.width+"x"+p.height:"-";h.P=p?p.colorDepth+"-bit":"-";h.language=(g&&(g.language||g.browserLanguage)||"-")[dS]();h.javaEnabled=g&&g.javaEnabled()?1:0;h.characterSet=dG.characterSet||dG.charset||"-";try{var n=dG.documentElement,m=dG.body,l=m&&m[cr]&&m[aP],g=[];n&&n[cr]&&n[aP]&&("CSS1Compat"===dG.compatMode||!l)?g=[n[cr],n[aP]]:l&&(g=[m[cr],m[aP]]);h.Ua=g[dU]("x")}catch(k){dK(135)}aj=h}},d1=function(){eu();for(var h=aj,g=dn[eI],h=g.appName+g.version+h.language+g.platform+g.userAgent+h.javaEnabled+h.Q+h.P+(dG.cookie?dG.cookie:"")+(dG.referrer?dG.referrer:""),g=h[cN],k=dn.history[cN];0<k;){h+=k--^g++}return dO(h)},da=function(h){eu();var g=aj;h.set(ak,g.Q);h.set(eN,g.P);h.set(df,g.language);h.set(cE,g.characterSet);h.set(ev,g.javaEnabled);h.set(cn,g.Ua);if(h.get(bV)&&h.get(bB)){if(!(g=eM)){var q,p,m;p="ShockwaveFlash";if((g=(g=dn[eI])?g.plugins:c5)&&0<g[cN]){for(q=0;q<g[cN]&&!m;q++){p=g[q],-1<p[cT][cV]("Shockwave Flash")&&(m=p.description[cL]("Shockwave Flash ")[1])}}else{p=p+"."+p;try{q=new ActiveXObject(p+".7"),m=q.GetVariable("$version")}catch(l){}if(!m){try{q=new ActiveXObject(p+".6"),m="WIN 6,0,21,0",q.AllowScriptAccess="always",m=q.GetVariable("$version")}catch(k){}}if(!m){try{q=new ActiveXObject(p),m=q.GetVariable("$version")}catch(n){}}m&&(m=m[cL](" ")[1][cL](","),m=m[0]+"."+m[1]+" r"+m[2])}g=m?m:"-"}eM=g;h.set(d2,eM)}else{h.set(d2,"-")}};var cD=function(h){if(bT(h)){this.r=h}else{var g=h[0],l=g.lastIndexOf(":"),k=g.lastIndexOf(".");this.g=this.h=this.l="";-1==l&&-1==k?this.g=g:-1==l&&-1!=k?(this.h=g[dW](0,k),this.g=g[dW](k+1)):-1!=l&&-1==k?(this.l=g[dW](0,l),this.g=g[dW](l+1)):l>k?(this.h=g[dW](0,k),this.l=g[dW](k+1,l),this.g=g[dW](l+1)):(this.h=g[dW](0,k),this.g=g[dW](k+1));this.k=h[bl](1);this.Fa=!this.l&&"_require"==this.g;this.H=!this.h&&!this.l&&"_provide"==this.g}},dl=function(){dt(dl[cM],"push",dl[cM][cX],5);dt(dl[cM],"_getPlugin",et,121);dt(dl[cM],"_createAsyncTracker",dl[cM].Qa,33);dt(dl[cM],"_getAsyncTracker",dl[cM].Ra,34);this.G=new dh;this.p=[]};dQ=dl[cM];dQ.Ha=function(h,g,l){var k=this.G.get(h);if(!bT(k)){return cZ}g.plugins_=g.plugins_||new dh;g.plugins_.set(h,new k(g,l||{}));return c3};dQ.push=function(h){var g=dk.Ta[af](this,arguments),g=dk.p.concat(g);for(dk.p=[];0<g[cN]&&!dk.O(g[0])&&!(g.shift(),0<dk.p[cN]);){}dk.p=dk.p.concat(g);return 0};dQ.Ta=function(h){for(var g=[],m=0;m<arguments[cN];m++){try{var l=new cD(arguments[m]);l.H?this.O(l):g[cX](l)}catch(k){}}return g};dQ.O=function(v){try{if(v.r){v.r[af](dn)}else{if(v.H){this.G.set(v.k[0],v.k[1])}else{var u="_gat"==v.h?dD:"_gaq"==v.h?dk:dD.w(v.h);if(v.Fa){if(!this.Ha(v.k[0],u,v.k[2])){if(!v.Ja){var q=bI(""+v.k[1]),p,n=q[cI],l=dG[cK][cI];if(p="https:"==n||n==l?c3:"http:"!=n?cZ:"http:"==l){var k;v:{var h=bI(dG[cK][ay]);if(!(q.Ia||0<=q.url[cV]("?")||0<=q[cJ][cV]("://")||q[cQ]==h[cQ]&&q[d6]==h[d6])){for(var g="http:"==q[cI]?80:443,w=dD.Ea,u=0;u<w[cN];u++){if(q[cQ]==w[u][0]&&(q[d6]||g)==(w[u][1]||g)&&0==q[cJ][cV](w[u][2])){k=c3;break v}}}k=cZ}p=k&&!cf()}p&&(v.Ja=ex(q.url))}return c3}}else{v.l&&(u=u.plugins_.get(v.l)),u[v.g][af](u,v.k)}}}}catch(m){}};dQ.Qa=function(h,g){return dD.s(h,g||"")};dQ.Ra=function(g){return dD.w(g)};var bp=function(){function x(A,z,C,B){c5==m[A]&&(m[A]={});c5==m[A][z]&&(m[A][z]=[]);m[A][z][C]=B}function v(A,z,B){if(c5!=m[A]&&c5!=m[A][z]){return m[A][z][B]}}function u(A,z){if(c5!=m[A]&&c5!=m[A][z]){m[A][z]=c5;var C=c3,B;for(B=0;B<l[cN];B++){if(c5!=m[A][l[B]]){C=cZ;break}}C&&(m[A]=c5)}}function q(I){var H="",F=cZ,D,C;for(D=0;D<l[cN];D++){if(C=I[l[D]],c5!=C){F&&(H+=l[D]);for(var F=[],B=c5,K=c5,K=0;K<C[cN];K++){if(c5!=C[K]){B="";K!=k&&c5==C[K-1]&&(B+=K[cO]()+n);for(var E=C[K],A="",J=c5,z=c5,G=c5,J=0;J<E[cN];J++){z=E[ao](J),G=w[z],A+=c5!=G?G:z}B+=A;F[cX](B)}}H+=h+F[dU](y)+g;F=cZ}else{F=c3}}return H}var p=this,m=[],l=["k","v"],h="(",g=")",y="*",n="!",w={"'":"'0"};w[g]="'1";w[y]="'2";w[n]="'3";var k=1;p.La=function(z){return c5!=m[z]};p.z=function(){for(var A="",z=0;z<m[cN];z++){c5!=m[z]&&(A+=z[cO]()+q(m[z]))}return A};p.Ka=function(A){if(A==c5){return p.z()}for(var z=A.z(),B=0;B<m[cN];B++){c5!=m[B]&&!A.La(B)&&(z+=B[cO]()+q(m[B]))}return z};p.f=function(z,B,A){if(!cm(A)){return cZ}x(z,"k",B,A);return c3};p.o=function(z,B,A){if(!b0(A)){return cZ}x(z,"v",B,A[cO]());return c3};p.getKey=function(z,A){return v(z,"k",A)};p.L=function(z,A){return v(z,"v",A)};p.J=function(z){u(z,"k")};p.K=function(z){u(z,"v")};dt(p,"_setKey",p.f,89);dt(p,"_setValue",p.o,90);dt(p,"_getKey",p.getKey,87);dt(p,"_getValue",p.L,88);dt(p,"_clearKey",p.J,85);dt(p,"_clearValue",p.K,86)};function cm(g){return"string"==typeof g}function b0(g){return"number"!=typeof g&&(c5==Number||!(g instanceof Number))||cY.round(g)!=g||NaN==g||g==dN?cZ:c3}var a2=function(h){var g=dn.gaGlobal;h&&!g&&(dn.gaGlobal=g={});return g},aL=function(){var g=a2(c3).hid;g==c2&&(g=aV(),a2(c3).hid=g);return g},at=function(h){h.set(aD,aL());var g=a2();if(g&&g.dh==h.get(dA)){var k=g.sid;k&&("0"==k&&dK(112),h.set(eE,k),h.get(b1)&&h.set(j,k));g=g.vid;h.get(b1)&&g&&(g=g[cL]("."),1*g[1]||dK(112),h.set(dw,1*g[0]),h.set(au,1*g[1]))}};var f,eD=function(h,g,n){var m=h.c(bN,""),l=h.c(dz,"/"),k=h.b(d0,0),h=h.c(dB,"");dm(g,n,l,m,h,k)},a1=function(h){var g=h.c(bN,"");h.b(dA,1);var m=h.c(dz,"/"),l=h.c(dB,"");dm("__utma",d9(h),m,g,l,h.get(d0));dm("__utmb",ds(h),m,g,l,h.get(eo));dm("__utmc",""+h.b(dA,1),m,g,l);var k=dT(h,c3);k?dm("__utmz",k,m,g,l,h.get(dL)):dm("__utmz","",m,g,"",-1);(k=ct(h,cZ))?dm("__utmv",k,m,g,l,h.get(d0)):dm("__utmv","",m,g,"",-1)},bo=function(h){var g=h.b(dA,1);if(!eC(h,ar(g,aC("__utma")))){return h.set(aM,c3),cZ}var k=!cR(h,ar(g,aC("__utmb")));h.set(cS,k);dH(h,ar(g,aC("__utmz")));b7(h,ar(g,aC("__utmv")));f=!k;return c3},ef=function(g){f||0<aC("__utmb")[cN]||(dm("__utmd","1",g.c(dz,"/"),g.c(bN,""),g.c(dB,""),10000),0==aC("__utmd")[cN]&&g[b5]())};var a8=function(g){g.get(dw)==c5?bP(g):g.get(aM)&&!g.get(aS)?bP(g):g.get(cS)&&bv(g)},aQ=function(g){g.get(dJ)&&!g.get(dv)&&(bv(g),g.set(dX,g.get(eg)))},bP=function(h){var g=h.get(b9);h.set(b1,c3);h.set(dw,aV()^d1(h)&2147483647);h.set(bG,"");h.set(au,g);h.set(j,g);h.set(eE,g);h.set(eg,1);h.set(dv,c3);h.set(cu,0);h.set(du,10);h.set(b8,g);h.set(dy,[]);h.set(aM,cZ);h.set(cS,cZ)},bv=function(g){g.set(j,g.get(eE));g.set(eE,g.get(b9));g.v(eg);g.set(dv,c3);g.set(cu,0);g.set(du,10);g.set(b8,g.get(b9));g.set(cS,cZ)};var az="daum:q,eniro:search_word,naver:query,pchome:q,images.google:q,google:q,yahoo:p,yahoo:q,msn:q,bing:q,aol:query,aol:q,lycos:q,lycos:query,ask:q,netscape:query,cnn:query,about:terms,mamma:q,voila:rdata,virgilio:qs,live:q,baidu:wd,alice:qs,yandex:text,najdi:q,seznam:q,rakuten:qt,biglobe:q,goo.ne:MT,wp:szukaj,onet:qt,yam:k,kvasir:q,ozu:q,terra:query,rambler:query,conduit:q,babylon:q,search-results:q,avg:q,comcast:q,incredimail:q,startsiden:q".split(","),cj=function(h){if(h.get(bk)&&!h.get(aS)){for(var g=!dP(h.get(c4))||!dP(h.get(bA))||!dP(h.get(cg))||!dP(h.get(bU)),p={},n=0;n<ag[cN];n++){var m=ag[n];p[m]=h.get(m)}(n=h.get(am))?(dK(149),m=new dh,b3(m,n),n=m):n=cp(dG[cK][ay],h.get(cz)).d;if(!("1"==d4(n.get(h.get(cq)))&&g)){if(!(n=eJ(h,n))){if(m=er(h),n=cp(m,c3),!(m!=c5&&m!=c2&&""!=m&&"0"!=m&&"-"!=m&&0<=m[cV]("://"))||n&&-1<n[cQ][cV]("google")&&n.d.contains("q")&&"cse"==n[cJ]){n=cZ}else{if((m=dV(h,n))&&!m[2]){c7(h,c5,m[0],c5,c5,"(organic)","organic",m[1],c5),n=c3}else{if(m){n=cZ}else{if(h.get(dv)){g:{for(var m=h.get(s),l=cG(n[cQ]),k=0;k<m[cN];++k){if(-1<l[cV](m[k])){n=cZ;break g}}c7(h,c5,l,c5,c5,"(referral)","referral",c5,"/"+n[cJ]);n=c3}}else{n=cZ}}}}}!n&&!g&&h.get(dv)&&(c7(h,c5,"(direct)",c5,c5,"(direct)","(none)",c5,c5),n=c3);if(n&&(h.set(dJ,cA(h,p)),g="(direct)"==h.get(bA)&&"(direct)"==h.get(cy)&&"(none)"==h.get(bj),h.get(dJ)||h.get(dv)&&!g)){h.set(bM,h.get(b9)),h.set(dX,h.get(eg)),h.v(en)}}}},eJ=function(y,w){function v(C,B){var B=B||"-",A=d4(w.get(y.get(C)));return A&&"-"!=A?dI(A):B}var u=d4(w.get(y.get(aG)))||"-",q=d4(w.get(y.get(ey)))||"-",n=d4(w.get(y.get(a)))||"-",m=d4(w.get("dclid"))||"-",h=v(an,"(not set)"),g=v(d5,"(not set)"),z=v(di),p=v(cH);if(dP(u)&&dP(n)&&dP(m)&&dP(q)){return cZ}var x=!dP(m)&&dP(q),k=dP(z);if(x||k){var l=er(y),l=cp(l,c3);if((l=dV(y,l))&&!dP(l[1]&&!l[2])){x&&(q=l[0]),k&&(z=l[1])}}c7(y,u,q,n,m,h,g,z,p);return c3},dV=function(h,g){for(var p=h.get(aO),n=0;n<p[cN];++n){var m=p[n][cL](":");if(-1<g[cQ][cV](m[0][dS]())){var l=g.d.get(m[1]);if(l&&(l=dF(l),!l&&-1<g[cQ][cV]("google.")&&(l="(not provided)"),!m[3]||-1<g.url[cV](m[3]))){h:{for(var p=l,n=h.get(ax),p=dI(p)[dS](),k=0;k<n[cN];++k){if(p==n[k]){p=c3;break h}}p=cZ}return[m[2]||m[0],l,p]}}}return c2},c7=function(u,q,p,n,m,l,k,h,g){u.set(c4,q);u.set(bA,p);u.set(cg,n);u.set(bU,m);u.set(cy,l);u.set(bj,k);u.set(aW,h);u.set(aF,g)},ag=[cy,c4,cg,bU,bA,bj,aW,aF],cA=function(h,g){function p(q){q=(""+q)[cL]("+")[dU]("%20");return q=q[cL](" ")[dU]("%20")}function n(u){var q=""+(h.get(u)||""),u=""+(g[u]||"");return 0<q[cN]&&q==u}if(n(cg)||n(bU)){return dK(131),cZ}for(var m=0;m<ag[cN];m++){var l=ag[m],k=g[l]||"-",l=h.get(l)||"-";if(p(k)!=p(l)){return c3}}return cZ},bX=RegExp(/^https:\/\/(www\.)?google(\.com?)?(\.[a-z]{2}t?)?\/?$/i),er=function(h){h=br(h.get(aU),h.get(dz));try{if(bX.test(h)){return dK(136),h+"?q="}}catch(g){dK(145)}return h};var bm=function(g){bD(g,dG[cK][ay])?(g.set(aS,c3),dK(12)):g.set(aS,cZ)},bD=function(u,q){if(!u.get(c6)){return cZ}var p=cp(q,u.get(cz)),n=dF(p.d.get("__utma")),m=dF(p.d.get("__utmb")),l=dF(p.d.get("__utmc")),k=dF(p.d.get("__utmx")),h=dF(p.d.get("__utmz")),g=dF(p.d.get("__utmv")),p=dF(p.d.get("__utmk"));if(dO(""+n+m+l+k+h+g)!=p){n=dI(n);m=dI(m);l=dI(l);k=dI(k);l=aZ(n+m+l+k,h,g,p);if(!l){return cZ}h=l[0];g=l[1]}if(!eC(u,n,c3)){return cZ}cR(u,m,c3);dH(u,h,c3);b7(u,g,c3);aI(u,k,c3);return c3},c=function(u,q,p){var n;n=d9(u)||"-";var m=ds(u)||"-",l=""+u.b(dA,1)||"-",k=ap(u)||"-",h=dT(u,cZ)||"-",u=ct(u,cZ)||"-",g=dO(""+n+m+l+k+h+u),v=[];v[cX]("__utma="+n);v[cX]("__utmb="+m);v[cX]("__utmc="+l);v[cX]("__utmx="+k);v[cX]("__utmz="+h);v[cX]("__utmv="+u);v[cX]("__utmk="+g);n=v[dU]("&");if(!n){return q}m=q[cV]("#");if(p){return 0>m?q+"#"+n:q+"&"+n}p="";l=q[cV]("?");0<m&&(p=q[dW](m),q=q[dW](0,m));return 0>l?q+"?"+n+p:q+"&"+n+p},aZ=function(u,q,p,n){for(var m=0;3>m;m++){for(var l=0;3>l;l++){if(n==dO(u+q+p)){return dK(127),[q,p]}var k=q[cW](/ /g,"%20"),h=p[cW](/ /g,"%20");if(n==dO(u+k+h)){return dK(128),[k,h]}k=k[cW](/\+/g,"%20");h=h[cW](/\+/g,"%20");if(n==dO(u+k+h)){return dK(129),[k,h]}try{var g=q[ez]("utmctr=(.*?)(?:\\|utm|$)");if(g&&2==g[cN]&&(k=q[cW](g[1],dM(dI(g[1]))),n==dO(u+k+p))){return dK(139),[k,p]}}catch(v){}q=dI(q)}p=dI(p)}};var eA="|",dr=function(u,q,p,n,m,l,k,h,g){var v=d7(u,q);v||(v={},u.get(eH)[cX](v));v.id_=q;v.affiliation_=p;v.total_=n;v.tax_=m;v.shipping_=l;v.city_=k;v.state_=h;v.country_=g;v.items_=v.items_||[];return v},cP=function(u,q,p,n,m,l,k){var u=d7(u,q)||dr(u,q,"",0,0,0,"","",""),h;u:{if(u&&u.items_){h=u.items_;for(var g=0;g<h[cN];g++){if(h[g].sku_==p){h=h[g];break u}}}h=c2}g=h||{};g.transId_=q;g.sku_=p;g.name_=n;g.category_=m;g.price_=l;g.quantity_=k;h||u.items_[cX](g);return g},d7=function(h,g){for(var l=h.get(eH),k=0;k<l[cN];k++){if(l[k].id_==g){return l[k]}}return c2};var cs,b6=function(h){if(!cs){var g;g=dG[cK].hash;var l=dn[cT],k=/^#?gaso=([^&]*)/;if(l=(g=(g=g&&g[ez](k)||l&&l[ez](k))?g[1]:dF(aC("GASO")))&&g[ez](/^(?:[|!]([-0-9a-z.]{1,40})[|!])?([-.\w]{10,1200})$/i)){eD(h,"GASO",""+g),dD._gasoDomain=h.get(bN),dD._gasoCPath=h.get(dz),h=l[1],ex("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(h?"prefix="+h+"&":"")+aV(),"_gasojs")}cs=c3}};var aI=function(h,g,k){k&&(g=dI(g));k=h.b(dA,1);g=g[cL](".");!(2>g[cN])&&/^\d+$/.test(g[0])&&(g[0]=""+k,eD(h,"__utmx",g[dU](".")))},ap=function(h,g){var k=ar(h.get(dA),aC("__utmx"));"-"==k&&(k="");return g?dM(k):k},bK=function(h){try{var g=cp(dG[cK][ay],cZ),m=bW(d4(g.d.get("utm_referrer")))||"";m&&h.set(aU,m);var l=bW(dF(g.d.get("utm_expid")));l&&h.set(ai,l)}catch(k){dK(146)}};var cw=function(h,g){var l=cY.min(h.b(av,0),100);if(h.b(dw,0)%100>=l){return cZ}l=dR()||ek();if(l==c5){return cZ}var k=l[0];if(k==c5||k==dN||isNaN(k)){return cZ}0<k?dE(l)?g(c0(l)):g(c0(l[bl](0,1))):al(dn,"load",function(){cw(h,g)},cZ);return c3},bQ=function(h,g,m,l){var k=new bp;k.f(14,90,g[dW](0,64));k.f(14,91,h[dW](0,64));k.f(14,92,""+ca(m));l!=c5&&k.f(14,93,l[dW](0,64));k.o(14,90,m);return k},dE=function(h){for(var g=1;g<h[cN];g++){if(isNaN(h[g])||h[g]==dN||0>h[g]){return cZ}}return c3},ca=function(g){return isNaN(g)||0>g?0:5000>g?10*cY[aH](g/10):50000>g?100*cY[aH](g/100):4100000>g?1000*cY[aH](g/1000):4100000},c0=function(h){for(var g=new bp,k=0;k<h[cN];k++){g.f(14,k+1,""+ca(h[k])),g.o(14,k+1,h[k])}return g},dR=function(){var h=dn.performance||dn.webkitPerformance;if(h=h&&h.timing){var g=h.navigationStart;if(0==g){dK(133)}else{return[h.loadEventStart-g,h.domainLookupEnd-h.domainLookupStart,h.connectEnd-h.connectStart,h.responseStart-h.requestStart,h.responseEnd-h.responseStart,h.fetchStart-g]}}},ek=function(){if(dn.top==dn){var h=dn.external,g=h&&h.onloadT;h&&!h.isValidLoadTime&&(g=c5);2147483648<g&&(g=c5);0<g&&h.setPageReadyTime();return g==c5?c5:[g]}};var dq=function(h,g,m){function l(n){return function(p){if((p=p.get(aB)[n])&&p[cN]){for(var u=c9(k,n),q=0;q<p[cN];q++){p[q].call(k,u)}}}}var k=this;this.a=new aK;this.get=function(n){return this.a.get(n)};this.set=function(p,n,q){this.a.set(p,n,q)};this.set(dB,g||"UA-XXXXX-X");this.set(cv,h||"");this.set(cU,m||"");this.set(b9,cY.round((new Date).getTime()/1000));this.set(dz,"/");this.set(d0,63072000000);this.set(dL,15768000000);this.set(eo,1800000);this.set(c6,cZ);this.set(a5,50);this.set(cz,cZ);this.set(ch,c3);this.set(bV,c3);this.set(bB,c3);this.set(bk,c3);this.set(aX,c3);this.set(an,"utm_campaign");this.set(aG,"utm_id");this.set(a,"gclid");this.set(ey,"utm_source");this.set(d5,"utm_medium");this.set(di,"utm_term");this.set(cH,"utm_content");this.set(cq,"utm_nooverride");this.set(b4,100);this.set(av,1);this.set(r,cZ);this.set(bJ,"/__utm.gif");this.set(bs,1);this.set(eH,[]);this.set(dy,[]);this.set(aO,az[bl](0));this.set(ax,[]);this.set(s,[]);this.C("auto");this.set(aU,dG.referrer);bK(this.a);this.set(aB,{hit:[],load:[]});this.a.j("0",bm);this.a.j("1",a8);this.a.j("2",cj);this.a.j("3",aQ);this.a.j("4",l("load"));this.a.j("5",b6);this.a.e("A",cx);this.a.e("B",bR);this.a.e("C",a8);this.a.e("D",c1);this.a.e("E",cl);this.a.e("F",bw);this.a.e("G",ef);this.a.e("H",bx);this.a.e("I",da);this.a.e("J",at);this.a.e("K",l("hit"));this.a.e("L",a9);this.a.e("M",aR);0===this.get(b9)&&dK(111);this.a.S();this.F=c5};dQ=dq[cM];dQ.m=function(){var g=this.get(ei);g||(g=new bp,this.set(ei,g));return g};dQ.Ga=function(h){for(var g in h){var k=h[g];h.hasOwnProperty(g)&&this.set(g,k,c3)}};dQ.I=function(h){if(this.get(r)){return cZ}var g=this,k=cw(this.a,function(l){g.set(by,h,c3);g.t(l)});this.set(r,k);return k};dQ.ya=function(g){g&&bz(g)?(dK(13),this.set(by,g,c3)):"object"===typeof g&&g!==c2&&this.Ga(g);this.F=g=this.get(by);this.a.i("page");this.I(g)};dQ.D=function(h,g,m,l,k){if(""==h||!cm(h)||""==g||!cm(g)||m!=c5&&!cm(m)||l!=c5&&!b0(l)){return cZ}this.set(cF,h,c3);this.set(co,g,c3);this.set(b2,m,c3);this.set(bH,l,c3);this.set(dg,!!k,c3);this.a.i("event");return c3};dQ.Aa=function(h,g,n,m,l){var k=this.a.b(av,0);1*l===l&&(k=l);if(this.a.b(dw,0)%100>=k){return cZ}n=1*(""+n);if(""==h||!cm(h)||""==g||!cm(g)||!b0(n)||isNaN(n)||0>n||0>k||100<k||m!=c5&&(""==m||!cm(m))){return cZ}this.t(bQ(h,g,n,m));return c3};dQ.za=function(h,g,l,k){if(!h||!g){return cZ}this.set(bq,h,c3);this.set(a3,g,c3);this.set(aN,l||dG[cK][ay],c3);k&&this.set(by,k,c3);this.a.i("social");return c3};dQ.xa=function(){this.set(av,10);this.I(this.F)};dQ.Ba=function(){this.a.i("trans")};dQ.t=function(g){this.set(bS,g,c3);this.a.i("event")};dQ.ea=function(h){this.u();var g=this;return{_trackEvent:function(m,l,k){dK(91);g.D(h,m,l,k)}}};dQ.ha=function(g){return this.get(g)};dQ.qa=function(h,g){if(h){if(bz(h)){this.set(h,g)}else{if("object"==typeof h){for(var k in h){h.hasOwnProperty(k)&&this.set(k,h[k])}}}}};dQ.addEventListener=function(h,g){var k=this.get(aB)[h];k&&k[cX](g)};dQ.removeEventListener=function(h,g){for(var l=this.get(aB)[h],k=0;l&&k<l[cN];k++){if(l[k]==g){l.splice(k,1);break}}};dQ.ja=function(){return"5.2.8"};dQ.C=function(g){this.get(ch);g="auto"==g?cG(dG.domain):!g||"-"==g||"none"==g?"":g[dS]();this.set(bN,g)};dQ.oa=function(g){this.set(ch,!!g)};dQ.ia=function(h,g){return c(this.a,h,g)};dQ.link=function(h,g){if(this.a.get(c6)&&h){var k=c(this.a,h,g);dG[cK].href=k}};dQ.na=function(h,g){this.a.get(c6)&&h&&h.action&&(h.action=c(this.a,h.action,g))};dQ.sa=function(){this.u();var h=this.a,g=dG.getElementById?dG.getElementById("utmtrans"):dG.utmform&&dG.utmform.utmtrans?dG.utmform.utmtrans:c2;if(g&&g[b]){h.set(eH,[]);for(var g=g[b][cL]("UTM:"),m=0;m<g[cN];m++){g[m]=bi(g[m]);for(var l=g[m][cL](eA),k=0;k<l[cN];k++){l[k]=bi(l[k])}"T"==l[0]?dr(h,l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8]):"I"==l[0]&&cP(h,l[1],l[2],l[3],l[4],l[5],l[6])}}};dQ.Y=function(h,g,q,p,m,l,k,n){return dr(this.a,h,g,q,p,m,l,k,n)};dQ.W=function(h,g,n,m,l,k){return cP(this.a,h,g,n,m,l,k)};dQ.ta=function(g){eA=g||"|"};dQ.pa=function(h,g,n,m){var l=this.a;if(0>=h||h>l.get(a5)||!g||!n||128<g[cN]+n[cN]){h=cZ}else{1!=m&&2!=m&&(m=3);var k={};bC(k,g);k.value=n;k.scope=m;l.get(dy)[h]=k;h=c3}h&&this.a.n();return h};dQ.ga=function(g){this.a.get(dy)[g]=c5;this.a.n()};dQ.ka=function(g){return(g=this.a.get(dy)[g])&&1==g[bt]?g[b]:c5};dQ.va=function(h,g,k){this.m().f(h,g,k)};dQ.wa=function(h,g,k){this.m().o(h,g,k)};dQ.la=function(h,g){return this.m().getKey(h,g)};dQ.ma=function(h,g){return this.m().L(h,g)};dQ.ba=function(g){this.m().J(g)};dQ.ca=function(g){this.m().K(g)};dQ.fa=function(){return new bp};dQ.U=function(g){g&&this.get(ax)[cX](g[dS]())};dQ.Z=function(){this.set(ax,[])};dQ.V=function(g){g&&this.get(s)[cX](g[dS]())};dQ.$=function(){this.set(s,[])};dQ.X=function(h,g,m,l,k){if(h&&g){h=[h,g[dS]()][dU](":");if(l||k){h=[h,l,k][dU](":")}l=this.get(aO);l.splice(m?0:l[cN],0,h)}};dQ.aa=function(){this.set(aO,[])};dQ.da=function(h){this.a[aY]();var g=this.get(dz),k=ap(this.a);this.set(dz,h);this.a.n();aI(this.a,k);this.set(dz,g)};dQ.ra=function(h,g){if(0<h&&5>=h&&bz(g)&&""!=g){var k=this.get(eF)||[];k[h]=g;this.set(eF,k)}};dQ.T=function(h){h=""+h;if(h[ez](/^[A-Za-z0-9]{1,5}$/)){var g=this.get(bf)||[];g[cX](h);this.set(bf,g)}};dQ.u=function(){this.a[aY]()};dQ.ua=function(g){g&&""!=g&&(this.set(bG,g),this.a.i("var"))};var bw=function(h){"trans"!==h.get(eP)&&500<=h.b(cu,0)&&h[b5]();if("event"===h.get(eP)){var g=(new Date).getTime(),l=h.b(b8,0),k=h.b(eE,0),l=cY[aH](1*((g-(l!=k?l:1000*l))/1000));0<l&&(h.set(b8,g),h.set(du,cY.min(10,h.b(du,0)+l)));0>=h.b(du,0)&&h[b5]()}},aR=function(g){"event"===g.get(eP)&&g.set(du,cY.max(0,g.b(du,10)-1))};var aA=function(){var g=[];this.add=function(h,l,k){k&&(l=dM(""+l));g[cX](h+"="+l)};this.toString=function(){return g[dU]("&")}},ah=function(h,g){(g||2!=h.get(bs))&&h.v(cu)},eK=function(h,g){g.add("utmwv","5.2.8");g.add("utms",h.get(cu));g.add("utmn",aV());var k=dG[cK].hostname;dP(k)||g.add("utmhn",k,c3);k=h.get(b4);100!=k&&g.add("utmsp",k,c3)},dY=function(h,g){g.add("utmac",bi(h.get(dB)));h.get(ai)&&g.add("utmxkey",h.get(ai),c3);h.get(dg)&&g.add("utmni",1);var k=h.get(bf);k&&0<k[cN]&&g.add("utmdid",k[dU]("."));es(h,g);dD.A&&g.add("aip",1);g.add("utmu",bg.Va())},c8=function(h,g){for(var m=h.get(eF)||[],l=[],k=1;k<m[cN];k++){m[k]&&l[cX](k+":"+dM(m[k][cW](/%/g,"%25")[cW](/:/g,"%3A")[cW](/,/g,"%2C")))}l[cN]&&g.add("utmpg",l[dU](","))},es=function(h,g){function l(n,m){m&&k[cX](n+"="+m+";")}var k=[];l("__utma",d9(h));l("__utmz",dT(h,cZ));l("__utmv",ct(h,c3));l("__utmx",ap(h));g.add("utmcc",k[dU]("+"),c3)},cB=function(h,g){h.get(bV)&&(g.add("utmcs",h.get(cE),c3),g.add("utmsr",h.get(ak)),h.get(cn)&&g.add("utmvp",h.get(cn)),g.add("utmsc",h.get(eN)),g.add("utmul",h.get(df)),g.add("utmje",h.get(ev)),g.add("utmfl",h.get(d2),c3))},ck=function(h,g){h.get(aX)&&h.get(bh)&&g.add("utmdt",h.get(bh),c3);g.add("utmhid",h.get(aD));g.add("utmr",br(h.get(aU),h.get(dz)),c3);g.add("utmp",dM(h.get(by),c3),c3)},bY=function(h,g){for(var p=h.get(ei),n=h.get(bS),m=h.get(dy)||[],l=0;l<m[cN];l++){var k=m[l];k&&(p||(p=new bp),p.f(8,l,k[cT]),p.f(9,l,k[b]),3!=k[bt]&&p.f(11,l,""+k[bt]))}!dP(h.get(cF))&&!dP(h.get(co),c3)&&(p||(p=new bp),p.f(5,1,h.get(cF)),p.f(5,2,h.get(co)),m=h.get(b2),m!=c5&&p.f(5,3,m),m=h.get(bH),m!=c5&&p.o(5,1,m));p?g.add("utme",p.Ka(n),c3):n&&g.add("utme",n.z(),c3)},bE=function(h,g,l){var k=new aA;ah(h,l);eK(h,k);k.add("utmt","tran");k.add("utmtid",g.id_,c3);k.add("utmtst",g.affiliation_,c3);k.add("utmtto",g.total_,c3);k.add("utmttx",g.tax_,c3);k.add("utmtsp",g.shipping_,c3);k.add("utmtci",g.city_,c3);k.add("utmtrg",g.state_,c3);k.add("utmtco",g.country_,c3);l||(c8(h,k),dY(h,k));return k[cO]()},bn=function(h,g,l){var k=new aA;ah(h,l);eK(h,k);k.add("utmt","item");k.add("utmtid",g.transId_,c3);k.add("utmipc",g.sku_,c3);k.add("utmipn",g.name_,c3);k.add("utmiva",g.category_,c3);k.add("utmipr",g.price_,c3);k.add("utmiqt",g.quantity_,c3);l||(c8(h,k),dY(h,k));return k[cO]()},a0=function(h,g){var p=h.get(eP);if("page"==p){p=new aA,ah(h,g),eK(h,p),bY(h,p),cB(h,p),ck(h,p),g||(c8(h,p),dY(h,p)),p=[p[cO]()]}else{if("event"==p){p=new aA,ah(h,g),eK(h,p),p.add("utmt","event"),bY(h,p),cB(h,p),ck(h,p),g||(c8(h,p),dY(h,p)),p=[p[cO]()]}else{if("var"==p){p=new aA,ah(h,g),eK(h,p),p.add("utmt","var"),!g&&dY(h,p),p=[p[cO]()]}else{if("trans"==p){for(var p=[],n=h.get(eH),m=0;m<n[cN];++m){p[cX](bE(h,n[m],g));for(var l=n[m].items_,k=0;k<l[cN];++k){p[cX](bn(h,l[k],g))}}}else{"social"==p?g?p=[]:(p=new aA,ah(h,g),eK(h,p),p.add("utmt","social"),p.add("utmsn",h.get(bq),c3),p.add("utmsa",h.get(a3),c3),p.add("utmsid",h.get(aN),c3),bY(h,p),cB(h,p),ck(h,p),c8(h,p),dY(h,p),p=[p[cO]()]):p=[]}}}}return p},a9=function(u){var q,p=u.get(bs),n=u.get(d3),m=n&&n.Sa,l=0;if(0==p||2==p){var k=u.get(bJ)+"?";q=a0(u,c3);for(var h=0,g=q[cN];h<g;h++){o(q[h],m,k,c3),l++}}if(1==p||2==p){q=a0(u);h=0;for(g=q[cN];h<g;h++){try{o(q[h],m),l++}catch(v){v&&aw(v[cT],c5,v.message)}}}n&&(n.q=l)};var aJ="https:"==dG[cK][cI]?"https://ssl.google-analytics.com":"http://www.google-analytics.com",aq=function(g){bC(this,"len");this.message=g+"-8192"},d=function(g){bC(this,"ff2post");this.message=g+"-2036"},o=function(h,g,l,k){g=g||aE;if(k||2036>=h[cN]){eB(h,g,l)}else{if(8192>=h[cN]){if(0<=dn[eI].userAgent[cV]("Firefox")&&![].reduce){throw new d(h[cN])}d8(h,g)||bO(h,g)}else{throw new aq(h[cN])}}},eB=function(h,g,l){var l=l||aJ+"/__utm.gif?",k=new Image(1,1);k.src=l+h;k.onload=function(){k.onload=c2;k.onerror=c2;g()};k.onerror=function(){k.onload=c2;k.onerror=c2;g()}},d8=function(h,g){var m,l=aJ+"/p/__utm.gif",k=dn.XDomainRequest;if(k){m=new k,m.open("POST",l)}else{if(k=dn.XMLHttpRequest){k=new k,"withCredentials" in k&&(m=k,m.open("POST",l,c3),m.setRequestHeader("Content-Type","text/plain"))}}if(m){return m.onreadystatechange=function(){4==m.readyState&&(g(),m=c2)},m.send(h),c3}},bO=function(u,q){if(dG.body){u=ep(u);try{var p=dG[dj]('<iframe name="'+u+'"></iframe>')}catch(n){p=dG[dj]("iframe"),bC(p,u)}p.height="0";p.width="0";p.style.display="none";p.style.visibility="hidden";var m=dG[cK],m=aJ+"/u/post_iframe.html#"+ep(m[cI]+"//"+m[cQ]+"/favicon.ico"),l=function(){p.src="";p.parentNode&&p.parentNode.removeChild(p)};al(dn,"beforeunload",l);var k=cZ,h=0,g=function(){if(!k){try{if(9<h||p.contentWindow[cK][cQ]==dG[cK][cQ]){k=c3;l();eO(dn,"beforeunload",l);q();return}}catch(v){}h++;ci(g,200)}};al(p,"load",g);dG.body.appendChild(p);p.src=m}else{aT(function(){bO(u,q)},100)}};var eq=function(){this.A=cZ;this.M={};this.N=[];this.Ma=0;this.Ea=[["www.google-analytics.com","","/plugins/"]];this._gasoCPath=this._gasoDomain=c5;dt(eq[cM],"_createTracker",eq[cM].s,55);dt(eq[cM],"_getTracker",eq[cM].Oa,0);dt(eq[cM],"_getTrackerByName",eq[cM].w,51);dt(eq[cM],"_getTrackers",eq[cM].Pa,130);dt(eq[cM],"_anonymizeIp",eq[cM].Na,16);dt(eq[cM],"_getPlugin",et,120);dZ()};dQ=eq[cM];dQ.Oa=function(h,g){return this.s(h,c5,g)};dQ.s=function(h,g,k){g&&dK(23);k&&dK(67);g==c5&&(g="~"+dD.Ma++);h=new dq(g,h,k);dD.M[g]=h;dD.N[cX](h);return h};dQ.w=function(g){g=g||"";return dD.M[g]||dD.s(c5,g)};dQ.Pa=function(){return dD.N[bl](0)};dQ.Na=function(){this.A=c3};var bu=function(g){if("prerender"==dG.webkitVisibilityState){return cZ}g();return c3};var dD=new eq;var a7=dn._gat;a7&&bT(a7._getTracker)?dD=a7:dn._gat=dD;var dk=new dl;(function(h){if(!bu(h)){dK(123);var g=cZ,k=function(){!g&&bu(h)&&(g=c3,eO(dG,"webkitvisibilitychange",k))};al(dG,"webkitvisibilitychange",k)}})(function(){var h=dn._gaq,g=cZ;if(h&&bT(h[cX])&&(g="[object Array]"==Object[cM][cO].call(Object(h)),!g)){dk=h;return}dn._gaq=dk;g&&dk[cX][af](dk,h)})})();